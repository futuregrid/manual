<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>User Manual</title>
    <base href="https://portal.futuregrid.org" />
    <link type="text/css" rel="stylesheet" href="misc/print.css" />
      </head>
  <body>
        
    <div id="node-104" class="section-1">
  <h1 class="book-heading">User Manual</h1>
  <p>&nbsp;</p>
<p>&nbsp;</p>
<div style="font-family: Arial,Verdana,sans-serif; font-size: 12px; color: rgb(34, 34, 34); background-color: rgb(255, 255, 255);">
<h1 class="rtecenter"><img alt="" height="130" src="/sites/default/files/u30/fg-logo-md.gif" style="width: 189px; height: 130px;" width="189" /><br class="Apple-interchange-newline" /><br />
		&nbsp;</h1>
<h1 class="rtecenter">FutureGrid User Manual</h1>
<h1 class="rtecenter">&nbsp;</h1>
<p class="rtecenter">Gregor von Laszewski, Fugang Wang, Javier Diaz, Archit Kulshrestha, Jonathan Bolte, and many more<br />
		&nbsp;<br />
		(if your name is missing in the author list, please add it, or send mail to <a href="mailto:laszewski@gmail.com">laszewski@gmail.com</a>)<br />
		&nbsp;</p>
<p class="rtecenter">FutureGrid Report Numbers: SW-004</p>
<p class="rtecenter">Pervasive Technology Institute, Indiana University, Bloomington, IN 47408, U.S.A.</p>
<p class="rtecenter">Please contact&nbsp;<a href="https://portal.futuregrid.org/help" style="text-decoration: none; color: rgb(16, 74, 145); ">https://portal.futuregrid.org/help</a>&nbsp;to add yourself to the list of authors or do it yourself if you have contributed.<br />
		&nbsp;</p>
<p class="rtecenter"><strong><a href="https://portal.futuregrid.org/manual/toc">TABLE OF CONTENTS</a></strong></p>
<div style="font-family: Arial,Verdana,sans-serif; font-size: 12px; color: rgb(34, 34, 34); background-color: rgb(255, 255, 255);">
<p class="rtecenter">Many other&nbsp;<a href="https://portal.futuregrid.org/staff">staff</a>&nbsp;members have contributed to the FutureGrid project.</p>
</div>
<p class="rtecenter">
		<a href="https://portal.futuregrid.org/admin/content/book/104" style="text-decoration: none; color: rgb(16, 74, 145); ">edit order and titles</a></p>
<p>		&nbsp;</p>
<ul class="menu">
<li class="expanded user-manual first last"><a href="/manual">User Manual</a><br />
<ul class="menu">
<li class="expanded preface first"><a href="/preface">Preface</a><br />
<ul class="menu">
<li class="leaf sponsors first last"><a href="/sponsors">Sponsors</a></li>
</ul>
</li>
<li class="leaf about"><a href="/about">About</a></li>
<li class="leaf table-of-contents"><a href="/manual/toc">Table of Contents</a></li>
<li class="expanded introduction"><a href="/manual/introduction">Introduction</a><br />
<ul class="menu">
<li class="leaf overview first"><a href="/overview-0">Overview</a></li>
<li class="leaf getting-started"><a href="/manual/gettingstarted">Getting Started</a></li>
<li class="expanded accessing-futuregrid"><a href="/manual/access">Accessing FutureGrid</a><br />
<ul class="menu">
<li class="leaf account-creation first last"><a href="/manual/account-creation">Account Creation</a></li>
</ul>
</li>
<li class="leaf help-and-support"><a href="/manual/help-and-support">Help and Support</a></li>
<li class="leaf guide-to-using-the-futuregrid-portal last"><a href="/manual/portal">Guide to Using the FutureGrid Portal</a></li>
</ul>
</li>
<li class="expanded overview-of-the-hardware"><a href="/manual/hardware">Overview of the Hardware</a><br />
<ul class="menu">
<li class="leaf compute-resources first"><a href="/compute-resources">Compute Resources</a></li>
<li class="leaf alamo"><a href="/hardware/alamo">Alamo</a></li>
<li class="leaf bravo"><a href="/hardware/bravo">Bravo</a></li>
<li class="leaf delta"><a href="/hardware/delta">Delta</a></li>
<li class="leaf foxtrot"><a href="/hardware/foxtrot">Foxtrot</a></li>
<li class="leaf hotel"><a href="/hardware/hotel">Hotel</a></li>
<li class="leaf india"><a href="/hardware/india">India</a></li>
<li class="leaf sierra"><a href="/hardware/sierra">Sierra</a></li>
<li class="leaf xray"><a href="/hardware/xray">Xray</a></li>
<li class="expanded network"><a href="/network">Network</a><br />
<ul class="menu">
<li class="leaf futuregrid-network-impairments-device-nid first last"><a href="/manual/services/network-impairment-device">FutureGrid Network Impairments Device (NID)</a></li>
</ul>
</li>
<li class="expanded storage last"><a href="/storage">Storage</a><br />
<ul class="menu">
<li class="leaf using-hpss-from-futuregrid first last"><a href="/tutorials/hpss">Using HPSS from FutureGrid</a></li>
</ul>
</li>
</ul>
</li>
<li class="leaf status"><a href="/status">Status</a></li>
<li class="leaf accessing-futuregrid-resources-via-ssh"><a href="/manual/accessing-futuregrid-resources-ssh">Accessing FutureGrid resources via SSH</a></li>
<li class="expanded hpc-services"><a href="/manual/hpcservices">HPC Services</a><br />
<ul class="menu">
<li class="leaf using-hpc-services-on-futuregrid first"><a href="/tutorials/hpc">Using HPC Services on FutureGrid</a></li>
<li class="expanded log-in-to-hpc-services"><a href="/manual/user/login">Log in to HPC services</a><br />
<ul class="menu">
<li class="leaf generating-ssh-keys-for-futuregrid-access first last"><a href="/generating-ssh-keys-futuregrid-access">Generating SSH Keys for FutureGrid Access</a></li>
</ul>
</li>
<li class="leaf working-with-hpc-job-services"><a href="/working-hpc-job-services">Working with HPC Job Services</a></li>
<li class="expanded analyzing-code-performance"><a href="/manual/hpc/performance">Analyzing Code Performance</a><br />
<ul class="menu">
<li class="leaf papi first"><a href="/manual/papi">PAPI</a></li>
<li class="leaf vampir"><a href="/manual/performance/vampir">Vampir</a></li>
<li class="leaf vampirtrace last"><a href="/manual/vampir/trace">VampirTrace</a></li>
</ul>
</li>
<li class="leaf official-hpcc-results-from-the-acceptance-tests"><a href="/manual/official-hpcc-results-acceptance-tests">Official HPCC Results from the Acceptance Tests</a></li>
<li class="leaf foxtrot"><a href="/manual/foxtrot">Foxtrot</a></li>
<li class="leaf india"><a href="/manual/india">India</a></li>
<li class="leaf sierra"><a href="/manual/sierra">Sierra</a></li>
<li class="leaf xray"><a href="/manual/xray">Xray</a></li>
<li class="leaf alamo"><a href="/manual/software/alamo">Alamo</a></li>
<li class="expanded delta"><a href="/manual/delta">Delta</a><br />
<ul class="menu">
<li class="leaf running-mpi-gpu-program-on-the-delta-cluster first"><a href="/manual/running-mpigpu-program-delta-cluster">Running MPI/GPU program on the Delta cluster</a></li>
<li class="leaf running-programs-on-a-single-gpu"><a href="/manual/gpu/running-programs-single-gpu">Running programs on a single GPU </a></li>
<li class="leaf c-means-clustering-using-cuda-on-gpu last"><a href="/contrib/c-means-clustering-using-cuda-gpu">C-means clustering using CUDA on GPU</a></li>
</ul>
</li>
<li class="leaf scalemp-vsmp last"><a href="/manual/scalemp-vsmp">ScaleMP vSMP</a></li>
</ul>
</li>
<li class="expanded iaas-infrastructure-as-a-service"><a href="/manual/iaas">IaaS - Infrastructure as a Service</a><br />
<ul class="menu">
<li class="leaf using-iaas-clouds-on-futuregrid first"><a href="/using/clouds">Using IaaS Clouds on FutureGrid</a></li>
<li class="expanded using-nimbus-on-futuregrid"><a href="/tutorials/nimbus">Using Nimbus on FutureGrid</a><br />
<ul class="menu">
<li class="leaf cloud-quick-start-launch-a-vm-with-1-command first"><a href="/manual/nimbus/cloud-quick-start-launch-vm-1-command">Cloud Quick Start : Launch a VM with 1 command</a></li>
<li class="leaf futuregrid-tutorial-nm2-nimbus-one-click-cluster-guide last"><a href="/tutorials/nm2">FutureGrid Tutorial NM2 - Nimbus One-Click Cluster Guide </a></li>
</ul>
</li>
<li class="leaf using-eucalyptus-on-futuregrid"><a href="/tutorials/eucalyptus">Using Eucalyptus on FutureGrid</a></li>
<li class="leaf using-openstack-on-futuregrid"><a href="/manual/using-openstack-futuregrid">Using OpenStack on FutureGrid</a></li>
<li class="expanded image-management-and-rain-on-futuregrid"><a href="/image-management-and-rain-futuregrid">Image Management and Rain on FutureGrid</a><br />
<ul class="menu">
<li class="leaf generate-and-register-an-os-image-on-futuregrid-using-the-fg-shell first"><a href="/manual/generate-and-register-os-image-futuregrid-using-fg-shell">Generate and Register an OS Image on FutureGrid using the FG Shell</a></li>
<li class="leaf futuregrid-standalone-image-repository"><a href="/futuregrid-standalone-image-repository">FutureGrid Standalone Image Repository</a></li>
<li class="leaf manual-image-customization"><a href="/manually-customize-image">Manual Image Customization</a></li>
<li class="expanded rain-manual-pages last"><a href="/rain-manual-pages">RAIN Manual Pages</a><br />
<ul class="menu">
<li class="leaf fg-repo first"><a href="/man/fg-repo">fg-repo</a></li>
<li class="leaf fg-rain"><a href="/man/fg-rain">fg-rain</a></li>
<li class="leaf fg-generate"><a href="/man/fg-generate">fg-generate</a></li>
<li class="leaf fg-register"><a href="/man/fg-register">fg-register</a></li>
<li class="leaf fg-shell"><a href="/man/fg-shell">fg-shell</a></li>
<li class="leaf fg-portal-manage last"><a href="/man/fg-portal-manage">fg-portal-manage</a></li>
</ul>
</li>
</ul>
</li>
<li class="leaf vine"><a href="/vine">ViNe</a></li>
<li class="leaf opennebula-2-0-tutorial last"><a href="/tutorials/opennebula">OpenNebula 2.0 Tutorial</a></li>
</ul>
</li>
<li class="expanded paas-platform-as-a-service"><a href="/manual/paas">PaaS - Platform as a Service</a><br />
<ul class="menu">
<li class="leaf using-map-reduce-in-futuregrid first"><a href="/using/mapreduce">Using Map/Reduce in FutureGrid</a></li>
<li class="leaf running-hadoop-as-a-batch-job-using-myhadoop"><a href="/tutorials/running-hadoop-batch-job-using-myhadoop">Running Hadoop as a Batch Job using MyHadoop</a></li>
<li class="leaf using-salsahadoop-on-futuregrid"><a href="/using-salsahadoop-futuregrid">Using SalsaHadoop on FutureGrid</a></li>
<li class="leaf hadoop-blast"><a href="/manual/hadoop-blast">Hadoop Blast</a></li>
<li class="leaf hadoop-wordcount"><a href="/manual/hadoop-wordcount">Hadoop WordCount</a></li>
<li class="leaf using-twister-on-futuregrid"><a href="/manual/twister">Using Twister on FutureGrid</a></li>
<li class="leaf twister-blast"><a href="/manual/twister-blast">Twister Blast</a></li>
<li class="leaf eucalyptus-and-twister-on-futuregrid"><a href="/tutorials/eucalyptus-and-twister-futuregrid">Eucalyptus and Twister on FutureGrid</a></li>
<li class="leaf using-pegasus-on-futuregrid last"><a href="/manual/pegasus">Using Pegasus on FutureGrid</a></li>
</ul>
</li>
<li class="expanded management-services"><a href="/manual/management-services">Management Services</a><br />
<ul class="menu">
<li class="leaf nimbus-phantom first"><a href="/nimbus-phantom">Nimbus Phantom</a></li>
<li class="leaf precip-pegasus-repeatable-experiments-for-the-cloud-in-python"><a href="/manual/precip">Precip - Pegasus Repeatable Experiments for the Cloud in Python</a></li>
<li class="leaf cloudinit-d last"><a href="/cloudinitd">cloudinit.d</a></li>
</ul>
</li>
<li class="expanded grid-services"><a href="/manual/grid-services">Grid Services</a><br />
<ul class="menu">
<li class="leaf unicore first"><a href="/manual/unicore">Unicore</a></li>
<li class="leaf genesis-ii"><a href="/genesisii">Genesis II</a></li>
<li class="leaf saga-supporting-distributed-applications-on-grids-clouds-on-futuregrid"><a href="/contrib/saga-supporting-distributed-applications-grids-clouds-futuregrid">SAGA supporting Distributed Applications on Grids, Clouds on FutureGrid</a></li>
<li class="leaf emi-unicore-tutorial last"><a href="/contrib/emi-unicore-tutorial">EMI Unicore Tutorial</a></li>
</ul>
</li>
<li class="expanded tutorials"><a href="/tutorials">Tutorials</a><br />
<ul class="menu">
<li class="leaf futuregrid-grid-appliance-for-nimbus-and-eucalyptus first"><a href="/tutorials/ga6old">FutureGrid Grid Appliance for Nimbus and Eucalyptus</a></li>
<li class="leaf one-click-hadoop-wordcount-on-eucalyptus-futuregrid"><a href="/tutorials/one-click-hadoop-wordcount-eucalyptus-futuregrid">One-click Hadoop WordCount on Eucalyptus FutureGrid</a></li>
<li class="leaf one-click-twister-k-means-on-eucalyptus-futuregrid"><a href="/tutorials/one-click-twister-k-means-eucalyptus-futuregrid">One-click Twister K-means on Eucalyptus FutureGrid</a></li>
<li class="leaf register-virtual-box-image-on-openstack last"><a href="/register-virtual-box-image-openstack">Register Virtual Box Image on OpenStack</a></li>
</ul>
</li>
<li class="leaf virtual-appliances"><a href="/community/appliances">Virtual Appliances</a></li>
<li class="leaf development-projects"><a href="/development-projects">Development Projects</a></li>
<li class="expanded appendix"><a href="/appendix">Appendix</a><br />
<ul class="menu">
<li class="leaf upgrading-nimbus-on-fg-clusters first last"><a href="/upgrading-nimbus-fg-clusters">Upgrading Nimbus On FG clusters</a></li>
</ul>
</li>
<li class="leaf faq"><a href="/node/2477">FAQ</a></li>
<li class="leaf faq last"><a href="/manual/faq">FAQ</a></li>
</ul>
</li>
</ul>
<p><em><span style="font-size: 10px;">This material is based upon work supported in part by the National Science Foundation under Grant No. 0910812 to Indiana University for &quot;FutureGrid: An Experimental, High-Performance Grid Test-bed.&quot; Partners in the FutureGrid project include U. Chicago, U. Florida, San Diego Supercomputer Center - UC San Diego, U. Southern California, U. Texas at Austin, U. Tennessee at Knoxville, U. of Virginia, Purdue I., and T-U. Dresden. -Or the shorter- This material is based upon work supported in part by the National Science Foundation under Grant No. 0910812.</span></em></p>
</div>
  <div id="node-133" class="section-2">
  <h1 class="book-heading">Preface</h1>
  <p><br />
	FutureGrid is a project led by Indiana University and funded by the National Science Foundation (NSF) to develop a high-performance grid test bed that will allow scientists to collaboratively develop and test innovative approaches to parallel, grid, and cloud computing. &nbsp;FutureGrid will provide the infrastructure to researchers that allows them to perform their own computational experiments using distributed systems. The goal is to make it easier for scientists to conduct such experiments in a transparent manner.</p>
<p>FutureGrid users will be able to deploy their own hardware and software configurations on a public/private cloud, and run their experiments. They will be able to save their configurations and execute their experiments using the provided tools. The FutureGrid test bed is composed of a high-speed network connecting distributed clusters of high performance computers. FutureGrid will employ virtualization technology that will allow the test bed to support a wide range of operating systems.</p>
<p>The NSF awarded $10.1 million to enable joint development of FutureGrid through a partnership of Indiana University, Purdue University, University of California - San Diego, University of Chicago/Argonne National Labs, University of Florida, University of Southern California, University of Texas, and the Center for Information Services and High Performance Computing at Technische Universit&auml;t Dresden. The principal investigator is Dr. Geoffrey C. Fox, Director of the&nbsp;<a href="http://pti.iu.edu/dsc">Digital Science Center</a>&nbsp;at the IU&nbsp;<a href="http://pti.iu.edu/">Pervasive Technology Institute</a>.<br />
	&nbsp;</p>
<h2>Citation</h2>
If you use FutureGrid, we ask you kindly to include the following reference in your papers:
<p class="rteindent2"><a href="https://portal.futuregrid.org/biblio/author/11">Fox, G.</a>,&nbsp;<a href="https://portal.futuregrid.org/biblio/author/1">G. von Laszewski</a>,&nbsp;<a href="https://portal.futuregrid.org/biblio/author/61">J. Diaz</a>,&nbsp;<a href="https://portal.futuregrid.org/biblio/author/3">K. Keahey</a>,&nbsp;<a href="https://portal.futuregrid.org/biblio/author/18">J. Fortes</a>,&nbsp;<a href="https://portal.futuregrid.org/biblio/author/43">R. Figueiredo</a>,&nbsp;<a href="https://portal.futuregrid.org/biblio/author/24">S. Smallen</a>,&nbsp;<a href="https://portal.futuregrid.org/biblio/author/16">W. Smith</a>, and&nbsp;<a href="https://portal.futuregrid.org/biblio/author/17">A. Grimshaw</a>,&nbsp;&quot;<a href="https://portal.futuregrid.org/references/futuregrid-recon-figurable-testbed-cloud-hpc-and-grid-computing">FutureGrid - a reconfigurable testbed for Cloud, HPC and Grid Computing</a>&quot;,&nbsp;Contemporary High Performance Computing: From Petascale toward Exascale, April, 2013. Editor J. Vetter.&nbsp;Download:&nbsp;<a href="https://portal.futuregrid.org/biblio/view/2034">vonLaszewski-fg-bookchapter.pdf</a></p>

<h2>Acknowledgement</h2>

<p>The FutureGrid project is funded by the National Science Foundation (NSF) and is led by&nbsp;<a href="http://www.iub.edu/" target="_blank" title="Indiana University - Bloomington">Indiana University</a>&nbsp;with&nbsp;<a href="http://www.uchicago.edu/index.shtml" target="_blank" title="University of Chicago">University of Chicago</a>,&nbsp;<a href="http://www.ufl.edu/" target="_blank" title="University of Florida">University of Florida</a>,&nbsp;<a href="http://www.sdsc.edu/" target="_blank" title="San Diego Supercomputing Center">San Diego Supercomputing Center</a>,&nbsp;<a href="http://www.tacc.utexas.edu/" target="_blank" title="Texas Advanced Computing Center">Texas Advanced Computing Center</a>,&nbsp;<a href="http://www.virginia.edu/">University of Virginia</a>,<a href="http://www.utk.edu/" target="_blank" title="University of Tennessee">University of Tennessee</a>,&nbsp;<a href="http://www3.isi.edu/home" target="_blank" title="University of California - Information Sciences Institute">University of Southern California</a>,&nbsp;<a href="http://tu-dresden.de/">Dresden</a>,&nbsp;<a href="http://www.purdue.edu/" target="_blank" title="Purdue University">Purdue University</a>, and&nbsp;<a href="https://www.grid5000.fr/mediawiki/index.php/Grid5000:Home" target="_blank" title="Grid&#039;5000">Grid 5000</a>&nbsp;as partner sites. This material is based upon work supported in part by the National Science Foundation under Grant No. 0910812.</p>
About this Manual
<p>This manual is the primary location of&nbsp; information about FutureGrid software and services. All FG team members update this manual regularly.<br />
	<br />
	We would also like to<em><strong> ask the community to </strong></em><em><strong>help</strong></em>â€‹.&nbsp; If you would enjoy contributing sections and chapters as part of your community activities, please contact Gregor at&nbsp;<a href="mailto:laszewski@gmail.com">laszewski@gmail.com</a>. We welcome additional contributors and editors to this manual.</p>
<p>Enjoy using and expanding the FutureGrid User Manual!</p>
<p>Gregor von Laszewski<br />
	&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
&nbsp;  <div id="node-98" class="section-3">
  <h1 class="book-heading">Sponsors</h1>
  <h1>Citation</h1>
<p>If you use FutureGrid, we ask you kindly to include the following reference in your papers:</p>
<ol>
<li>
<p>Fox, G., G. von Laszewski, J. Diaz, K. Keahey, J. Fortes, R. Figueiredo, S. Smallen, W. Smith, and A. Grimshaw, &quot;FutureGrid - a reconfigurable testbed for Cloud, HPC and Grid Computing&quot;, Contemporary High Performance Computing: From Petascale toward Exascale, April, 2013. Editor J. Vetter. &nbsp;<a href="https://portal.futuregrid.org/sites/default/files/vonLaszewski-fg-bookchapter.pdf">[pdf]</a></p>
</li>
</ol>
<h1>Sponsors</h1>
<p>
	FutureGrid has received funding from a number of agencies. The current sponsors of FutureGrid include:</p>
<table align="left" border="0" cellpadding="1" cellspacing="1" style="width: 100%; ">
<tbody>
<tr>
<td style="width: 10%; ">
<p><img alt="" height="78" src="/sites/default/files/u30/nsf.jpg" style="width: 78px; height: 78px;" width="78" /></p>
</td>
<td>
<p>				<strong>NSF</p>
<p>				You must include the following in all papers and oral presentations if you use FG:&nbsp;</strong></p>
<p class="rteindent1"><em><span style="background-color:#e6e6fa;">This material is based upon work supported in part by the National Science Foundation under Grant No. 0910812 to Indiana University for &quot;</span><span style="background-color:#e6e6fa;">FutureGrid</span><span style="background-color:#e6e6fa;">: An Experimental, High-Performance Grid Test-bed.&quot; Partners in the&nbsp;</span><span style="background-color:#e6e6fa;">FutureGrid</span><span style="background-color:#e6e6fa;">&nbsp;project include U. Chicago, U. Florida, San Diego Supercomputer Center -&nbsp;</span><span style="background-color:#e6e6fa;">UC</span><span style="background-color:#e6e6fa;">&nbsp;San Diego, U. Southern California, U. Texas at Austin, U. Tennessee at Knoxville, U. of Virginia, and T-U. Dresden.</span></em></p>
<div style="text-align: justify; ">
					-Or the shorter version-<br />
					&nbsp;</div>
<div class="rteindent1" style="text-align: justify; "><em><span style="background-color:#e6e6fa;">This material is based upon work supported in part by the National Science Foundation under Grant No. 0910812.</span></em><br />
					&nbsp;</div>
</td>
</tr>
<tr>
<td>
<p><img alt="" height="78" src="/sites/default/files/images/lilly_endowment.jpg" title="" width="47" /></p>
</td>
<td>
<p><strong>Lilly Endowment</strong></p>
<p>Provided a $15 million grant to Indiana University to establish Pervasive Technology Institute (PTI).</p>
</td>
</tr>
<tr>
<td>
<p><img alt="" height="64" src="/sites/default/files/resize/u23/iu-logo-50x64.jpeg" style="width: 50px; height: 64px; " width="50" /></p>
</td>
<td>
<p><strong>Indiana University Pervasive Technology Institute</strong></p>
<p>
					Indiana University has sponsored this project with $5M&nbsp;in matching funding.</p>
<div>&nbsp;</div>
</td>
</tr>
</tbody>
</table>
  </div>
</div>
<div id="node-49" class="section-2">
  <h1 class="book-heading">About</h1>
  <p>The&nbsp;<a href="https://portal.futuregrid.org/award-abstract-091081-futuregrid-experimental-high-performance-grid-test-bed-0">FutureGrid Project</a>&nbsp;makes it possible for researchers to tackle complex research challenges in computer science related to the use and security of grids and clouds. These include topics ranging from authentication, authorization, scheduling, virtualization, middleware design, interface design, and cybersecurity, to the optimization of grid-enabled and cloud-enabled computational schemes for researchers in astronomy, chemistry, biology, engineering, atmospheric science and epidemiology. The project team provides a significant new experimental computing grid and cloud test-bed, named FutureGrid, to the research community, together with user support for third-party researchers conducting experiments on FutureGrid.</p>

	<p>The test-bed makes it possible for researchers to conduct experiments by submitting an experiment plan that is then executed via a sophisticated workflow engine, preserving the provenance and state information necessary to allow reproducibility.<br />
		<br />
		The test-bed also includes a geographically distributed set of heterogeneous computing systems, a data management system that holds both metadata and a growing library of software images, and a dedicated network allowing isolatable, secure experiments. The test-bed supports virtual machine-based environments, as well as native operating systems for experiments aimed at minimizing overhead and maximizing performance. The project partners integrate existing open-source software packages to create an easy-to-use software environment that supports the instantiation, execution, and recording of grid and cloud computing experiments.</p>
	<p>One of the goals of the project is to understand the behavior and utility of cloud computing approaches. Researchers are able to measure the overhead of cloud technology by requesting linked experiments on both virtual and bare-metal systems. FutureGrid enables US scientists to develop and test new approaches to parallel, grid, and cloud computing, and compare and collaborate with international efforts in this area. The FutureGrid project provides an experimental platform that accommodates batch, grid, and cloud computing, allowing researchers to attack a range of research questions associated with optimizing, integrating and scheduling the different service models. The FutureGrid also provides a test-bed for middleware development and, because of its private network, allows middleware researchers to do controlled experiments under different network conditions and to test approaches to middleware that include direct interaction with the network control layer. Another component of the project is the development of benchmarks appropriate for grid computing, including workflow-based benchmarks derived from applications in astronomy, bioinformatics, seismology, and physics.<br />
		<br />
		The FutureGrid forms part of NSF&#39;s high-performance cyberinfrastructure. It increases the capability of the XSEDE to support innovative computer science research requiring access to lower levels of the grid software stack, the networking software stack, and to virtualization and workflow orchestration tools.<br />
		<br />
		Education and broader outreach activities include the dissemination of curricular materials on the use of FutureGrid, pre-packaged FutureGrid virtual machines configured for particular course modules, and educational modules based on virtual appliance networks and social networking technologies that focus on education in networking, parallel computing, virtualization and distributed computing. The project advances education and training in distributed computing at academic institutions with less diverse computational resources. It does this through the development of instructional resources that include preconfigured environments that provide students with sandboxed virtual clusters. These can be used for teaching courses in parallel, cloud, and grid computing. Such resources also provide academic institutions with a simple opportunity to experiment with cloud technology to see if such technology can enhance their campus resources. The FutureGrid project leverages the fruits of several software development projects funded by the National Science Foundation and the Department of Energy.</p>
	<p>Some useful resources are a poster in<a href="/sites/default/files/future%20grid.jpg" title="11 October 09 Poster Small size">&nbsp;low</a>&nbsp;and&nbsp;<a href="/sites/default/files/FutureGrid%20poster%20JPEG_0.jpg">high</a>&nbsp;resolution as well as a generic presentation as of&nbsp;<a href="/sites/default/files/talk-FutureGrid-overview_1.pptx">October 11 2009</a>&nbsp;with an update on&nbsp;<a href="/sites/default/files/FutureGridOverviewNov06-09_0.ppt">November 6 2009</a>&nbsp;and&nbsp;<a href="http://grids.ucs.indiana.edu/ptliupages/presentations/FG-NSF-Sept15-10.pptx">September 15 2010</a>.</p>
	<p>This material is based upon work supported in part by the National Science Foundation under Grant No. 0910812 to Indiana University for &quot;FutureGrid: An Experimental, High-Performance Grid Test-bed.&quot; Partners in the FutureGrid project include U. Chicago, U. Florida, San Diego Supercomputer Center - UC San Diego, U. Southern California, U. Texas at Austin, U. Tennessee at Knoxville, U. of Virginia, Purdue I., and T-U. Dresden.&nbsp;</p>
	
		&nbsp;  </div>
<div id="node-134" class="section-2">
  <h1 class="book-heading">Table of Contents</h1>
  <p>The manual is also available as a <a href="https://portal.futuregrid.org/book/export/html/104"> single HTML page</a>. </p>

<ul class="menu"><li class="expanded user-manual first last"><a href="/manual">User Manual</a><ul class="menu"><li class="expanded preface first"><a href="/preface">Preface</a><ul class="menu"><li class="leaf sponsors first last"><a href="/sponsors">Sponsors</a></li>
</ul></li>
<li class="leaf about"><a href="/about">About</a></li>
<li class="leaf table-of-contents"><a href="/manual/toc">Table of Contents</a></li>
<li class="expanded introduction"><a href="/manual/introduction">Introduction</a><ul class="menu"><li class="leaf overview first"><a href="/overview-0">Overview</a></li>
<li class="leaf getting-started"><a href="/manual/gettingstarted">Getting Started</a></li>
<li class="expanded accessing-futuregrid"><a href="/manual/access">Accessing FutureGrid</a><ul class="menu"><li class="leaf account-creation first last"><a href="/manual/account-creation">Account Creation</a></li>
</ul></li>
<li class="leaf help-and-support"><a href="/manual/help-and-support">Help and Support</a></li>
<li class="leaf guide-to-using-the-futuregrid-portal last"><a href="/manual/portal">Guide to Using the FutureGrid Portal</a></li>
</ul></li>
<li class="expanded overview-of-the-hardware"><a href="/manual/hardware">Overview of the Hardware</a><ul class="menu"><li class="leaf compute-resources first"><a href="/compute-resources">Compute Resources</a></li>
<li class="leaf alamo"><a href="/hardware/alamo">Alamo</a></li>
<li class="leaf bravo"><a href="/hardware/bravo">Bravo</a></li>
<li class="leaf delta"><a href="/hardware/delta">Delta</a></li>
<li class="leaf foxtrot"><a href="/hardware/foxtrot">Foxtrot</a></li>
<li class="leaf hotel"><a href="/hardware/hotel">Hotel</a></li>
<li class="leaf india"><a href="/hardware/india">India</a></li>
<li class="leaf sierra"><a href="/hardware/sierra">Sierra</a></li>
<li class="leaf xray"><a href="/hardware/xray">Xray</a></li>
<li class="expanded network"><a href="/network">Network</a><ul class="menu"><li class="leaf futuregrid-network-impairments-device-nid first last"><a href="/manual/services/network-impairment-device">FutureGrid Network Impairments Device (NID)</a></li>
</ul></li>
<li class="expanded storage last"><a href="/storage">Storage</a><ul class="menu"><li class="leaf using-hpss-from-futuregrid first last"><a href="/tutorials/hpss">Using HPSS from FutureGrid</a></li>
</ul></li>
</ul></li>
<li class="leaf status"><a href="/status">Status</a></li>
<li class="leaf accessing-futuregrid-resources-via-ssh"><a href="/manual/accessing-futuregrid-resources-ssh">Accessing FutureGrid resources via SSH</a></li>
<li class="expanded hpc-services"><a href="/manual/hpcservices">HPC Services</a><ul class="menu"><li class="leaf using-hpc-services-on-futuregrid first"><a href="/tutorials/hpc">Using HPC Services on FutureGrid</a></li>
<li class="expanded log-in-to-hpc-services"><a href="/manual/user/login">Log in to HPC services</a><ul class="menu"><li class="leaf generating-ssh-keys-for-futuregrid-access first last"><a href="/generating-ssh-keys-futuregrid-access">Generating SSH Keys for FutureGrid Access</a></li>
</ul></li>
<li class="leaf working-with-hpc-job-services"><a href="/working-hpc-job-services">Working with HPC Job Services</a></li>
<li class="expanded analyzing-code-performance"><a href="/manual/hpc/performance">Analyzing Code Performance</a><ul class="menu"><li class="leaf papi first"><a href="/manual/papi">PAPI</a></li>
<li class="leaf vampir"><a href="/manual/performance/vampir">Vampir</a></li>
<li class="leaf vampirtrace last"><a href="/manual/vampir/trace">VampirTrace</a></li>
</ul></li>
<li class="leaf official-hpcc-results-from-the-acceptance-tests"><a href="/manual/official-hpcc-results-acceptance-tests">Official HPCC Results from the Acceptance Tests</a></li>
<li class="leaf foxtrot"><a href="/manual/foxtrot">Foxtrot</a></li>
<li class="leaf india"><a href="/manual/india">India</a></li>
<li class="leaf sierra"><a href="/manual/sierra">Sierra</a></li>
<li class="leaf xray"><a href="/manual/xray">Xray</a></li>
<li class="leaf alamo"><a href="/manual/software/alamo">Alamo</a></li>
<li class="expanded delta"><a href="/manual/delta">Delta</a><ul class="menu"><li class="leaf running-mpi-gpu-program-on-the-delta-cluster first"><a href="/manual/running-mpigpu-program-delta-cluster">Running MPI/GPU program on the Delta cluster</a></li>
<li class="leaf running-programs-on-a-single-gpu"><a href="/manual/gpu/running-programs-single-gpu">Running programs on a single GPU </a></li>
<li class="leaf c-means-clustering-using-cuda-on-gpu last"><a href="/contrib/c-means-clustering-using-cuda-gpu">C-means clustering using CUDA on GPU</a></li>
</ul></li>
<li class="leaf scalemp-vsmp last"><a href="/manual/scalemp-vsmp">ScaleMP vSMP</a></li>
</ul></li>
<li class="expanded iaas-infrastructure-as-a-service"><a href="/manual/iaas">IaaS - Infrastructure as a Service</a><ul class="menu"><li class="leaf using-iaas-clouds-on-futuregrid first"><a href="/using/clouds">Using IaaS Clouds on FutureGrid</a></li>
<li class="expanded using-nimbus-on-futuregrid"><a href="/tutorials/nimbus">Using Nimbus on FutureGrid</a><ul class="menu"><li class="leaf cloud-quick-start-launch-a-vm-with-1-command first"><a href="/manual/nimbus/cloud-quick-start-launch-vm-1-command">Cloud Quick Start : Launch a VM with 1 command</a></li>
<li class="leaf futuregrid-tutorial-nm2-nimbus-one-click-cluster-guide last"><a href="/tutorials/nm2">FutureGrid Tutorial NM2 - Nimbus One-Click Cluster Guide </a></li>
</ul></li>
<li class="leaf using-eucalyptus-on-futuregrid"><a href="/tutorials/eucalyptus">Using Eucalyptus on FutureGrid</a></li>
<li class="leaf using-openstack-on-futuregrid"><a href="/manual/using-openstack-futuregrid">Using OpenStack on FutureGrid</a></li>
<li class="expanded image-management-and-rain-on-futuregrid"><a href="/image-management-and-rain-futuregrid">Image Management and Rain on FutureGrid</a><ul class="menu"><li class="leaf generate-and-register-an-os-image-on-futuregrid-using-the-fg-shell first"><a href="/manual/generate-and-register-os-image-futuregrid-using-fg-shell">Generate and Register an OS Image on FutureGrid using the FG Shell</a></li>
<li class="leaf futuregrid-standalone-image-repository"><a href="/futuregrid-standalone-image-repository">FutureGrid Standalone Image Repository</a></li>
<li class="leaf manual-image-customization"><a href="/manually-customize-image">Manual Image Customization</a></li>
<li class="expanded rain-manual-pages last"><a href="/rain-manual-pages">RAIN Manual Pages</a><ul class="menu"><li class="leaf fg-repo first"><a href="/man/fg-repo">fg-repo</a></li>
<li class="leaf fg-rain"><a href="/man/fg-rain">fg-rain</a></li>
<li class="leaf fg-generate"><a href="/man/fg-generate">fg-generate</a></li>
<li class="leaf fg-register"><a href="/man/fg-register">fg-register</a></li>
<li class="leaf fg-shell"><a href="/man/fg-shell">fg-shell</a></li>
<li class="leaf fg-portal-manage last"><a href="/man/fg-portal-manage">fg-portal-manage</a></li>
</ul></li>
</ul></li>
<li class="leaf vine"><a href="/vine">ViNe</a></li>
<li class="leaf opennebula-2-0-tutorial last"><a href="/tutorials/opennebula">OpenNebula 2.0 Tutorial</a></li>
</ul></li>
<li class="expanded paas-platform-as-a-service"><a href="/manual/paas">PaaS - Platform as a Service</a><ul class="menu"><li class="leaf using-map-reduce-in-futuregrid first"><a href="/using/mapreduce">Using Map/Reduce in FutureGrid</a></li>
<li class="leaf running-hadoop-as-a-batch-job-using-myhadoop"><a href="/tutorials/running-hadoop-batch-job-using-myhadoop">Running Hadoop as a Batch Job using MyHadoop</a></li>
<li class="leaf using-salsahadoop-on-futuregrid"><a href="/using-salsahadoop-futuregrid">Using SalsaHadoop on FutureGrid</a></li>
<li class="leaf hadoop-blast"><a href="/manual/hadoop-blast">Hadoop Blast</a></li>
<li class="leaf hadoop-wordcount"><a href="/manual/hadoop-wordcount">Hadoop WordCount</a></li>
<li class="leaf using-twister-on-futuregrid"><a href="/manual/twister">Using Twister on FutureGrid</a></li>
<li class="leaf twister-blast"><a href="/manual/twister-blast">Twister Blast</a></li>
<li class="leaf eucalyptus-and-twister-on-futuregrid"><a href="/tutorials/eucalyptus-and-twister-futuregrid">Eucalyptus and Twister on FutureGrid</a></li>
<li class="leaf using-pegasus-on-futuregrid last"><a href="/manual/pegasus">Using Pegasus on FutureGrid</a></li>
</ul></li>
<li class="expanded management-services"><a href="/manual/management-services">Management Services</a><ul class="menu"><li class="leaf nimbus-phantom first"><a href="/nimbus-phantom">Nimbus Phantom</a></li>
<li class="leaf precip-pegasus-repeatable-experiments-for-the-cloud-in-python"><a href="/manual/precip">Precip - Pegasus Repeatable Experiments for the Cloud in Python</a></li>
<li class="leaf cloudinit-d last"><a href="/cloudinitd">cloudinit.d</a></li>
</ul></li>
<li class="expanded grid-services"><a href="/manual/grid-services">Grid Services</a><ul class="menu"><li class="leaf unicore first"><a href="/manual/unicore">Unicore</a></li>
<li class="leaf genesis-ii"><a href="/genesisii">Genesis II</a></li>
<li class="leaf saga-supporting-distributed-applications-on-grids-clouds-on-futuregrid"><a href="/contrib/saga-supporting-distributed-applications-grids-clouds-futuregrid">SAGA supporting Distributed Applications on Grids, Clouds on FutureGrid</a></li>
<li class="leaf emi-unicore-tutorial last"><a href="/contrib/emi-unicore-tutorial">EMI Unicore Tutorial</a></li>
</ul></li>
<li class="expanded tutorials"><a href="/tutorials">Tutorials</a><ul class="menu"><li class="leaf futuregrid-grid-appliance-for-nimbus-and-eucalyptus first"><a href="/tutorials/ga6old">FutureGrid Grid Appliance for Nimbus and Eucalyptus</a></li>
<li class="leaf one-click-hadoop-wordcount-on-eucalyptus-futuregrid"><a href="/tutorials/one-click-hadoop-wordcount-eucalyptus-futuregrid">One-click Hadoop WordCount on Eucalyptus FutureGrid</a></li>
<li class="leaf one-click-twister-k-means-on-eucalyptus-futuregrid"><a href="/tutorials/one-click-twister-k-means-eucalyptus-futuregrid">One-click Twister K-means on Eucalyptus FutureGrid</a></li>
<li class="leaf register-virtual-box-image-on-openstack last"><a href="/register-virtual-box-image-openstack">Register Virtual Box Image on OpenStack</a></li>
</ul></li>
<li class="leaf virtual-appliances"><a href="/community/appliances">Virtual Appliances</a></li>
<li class="leaf development-projects"><a href="/development-projects">Development Projects</a></li>
<li class="expanded appendix"><a href="/appendix">Appendix</a><ul class="menu"><li class="leaf upgrading-nimbus-on-fg-clusters first last"><a href="/upgrading-nimbus-fg-clusters">Upgrading Nimbus On FG clusters</a></li>
</ul></li>
<li class="leaf faq"><a href="/node/2477">FAQ</a></li>
<li class="leaf faq last"><a href="/manual/faq">FAQ</a></li>
</ul></li>
</ul>  </div>
<div id="node-1332" class="section-2">
  <h1 class="book-heading">Introduction</h1>
    <div id="node-135" class="section-3">
  <h1 class="book-heading">Overview</h1>
  <p>&nbsp;</p>
<p>The&nbsp;<a href="https://portal.futuregrid.org/award-abstract-091081-futuregrid-experimental-high-performance-grid-test-bed-0">FutureGrid Project</a>&nbsp;allows researchers to tackle complex research challenges in computer science related to the use and security of grids and clouds. We provide a significant new experimental computing grid and cloud test-bed, named FutureGrid, to the research community, together with user support for third-party researchers conducting experiments on FutureGrid.</p>
<h2>Project &amp; Account Application</h2>
<p>FutureGrid allows you to easily create a project and use FG resources. All you need to do is to create a portal account and apply for a project. Detailed information is provided in the <a href="https://portal.futuregrid.org/manual/access">manual</a>.</p>
<h2>Cloud Services</h2>
<p>Currently, FutureGrid provides three cloud services on a variety of resources: Nimbus, Eucalyptus, and OpenStack. However, not all services on the different resources are integrated, and an additional account request is necessary for accessing Eucalyptus and OpenStack&nbsp;. To find out how the machines are&nbsp;divided, we provide a convenient&nbsp;<a href="http://inca.futuregrid.org:8080/inca/jsp/partitionTable.jsp">status monitor</a>.</p>
<h3><strong>Nimbus</strong></h3>
<p>Nimbus is an open-source service package that allows users to run virtual machines on FutureGrid hardware. You can easily upload your own VM image or customize an image provided by us. When you boot a VM, it is assigned a public IP address (and/or an optional private address); you are authorized to log in as root via SSH. You can then run services, perform computations, and configure the system as desired. After using and configuring the VM, you can save the modified VM image back to the Nimbus image repository. Users can find more details in the&nbsp;<a href="https://portal.futuregrid.org/tutorials/nimbus">Nimbus tutorial</a>.</p>
<h3>Eucalyptus</h3>
<p>Eucalyptus is an open-source software platform that implements IaaS-style cloud computing. Eucalyptus provides a Amazon Web Services (AWS) compliant EC2-based web service interface for interacting with the Cloud service. Eucalyptus also provides services such as the AWS-compliant Walrus and a user interface for managing users and images. Users can find more details in the&nbsp;<a href="https://portal.futuregrid.org/tutorials/eucalyptus">Eucalyptus tutorial</a>.</p>
<h3>OpenStack</h3>
<p>OpenStack is a collection of open source components to deliver public and private clouds. These components currently include OpenStack Compute (called Nova), OpenStack Object Storage (called Swift), and OpenStack Image Service (called Glance). OpenStack is a new effort and has received considerable momentum due to its openness and the support of companies. Users can find more details in the <a href="https://portal.futuregrid.org/tutorials/openstack">OpenStack&nbsp;Tutorial</a>.</p>
<h3>OpenNebula</h3>
<p><strong>Not yet available to the public</strong>, OpenNebula is an open and flexible tool that fits into existing data center environments to build any type of IaaS Cloud deployment. OpenNebula can be primarily used as a virtualization tool to manage your virtual infrastructure in the data center or cluster, which is usually referred to as Private Cloud. OpenNebula supports Hybrid Cloud to combine local infrastructure with public cloud-based infrastructure, enabling highly scalable hosting environments. OpenNebula also supports Public Clouds by providing Cloud interfaces to expose its functionality for virtual machine, storage, and network management. Users can find how to use this software in the <a href="https://portal.futuregrid.org/tutorials/opennebula">OpenNebula tutorial</a>.&nbsp;</p>
<h2>High Performance Computing</h2>
<p>High Performance Computing can be defined as the application of supercomputing techniques to solve computational problems that are too large for standard computers or would take too much time. This is one of the more important features that the scientific community needs&nbsp;to achieve their projects. Thus, FutureGrid provides users the possibility of executing their parallel applications or using scientific software. A guide to accessing HPC services can be found in the&nbsp;<a href="https://portal.futuregrid.org/manual/access">Accessing FutureGrid</a>&nbsp;and&nbsp;<a href="https://portal.futuregrid.org/manual/hpcservices">HPC services</a>&nbsp;sections&nbsp;of the&nbsp;<a href="https://portal.futuregrid.org/manual">User Manual</a>.</p>
<h2>Storage</h2>
<p>Users can find different storage systems to cover a wide number of purposes. In the&nbsp;<a href="https://portal.futuregrid.org/manual/services/storage">Storage Manual</a>, users can find the information needed to get access and learn the usage.&nbsp;A summary of the external storage systems available can be found at: <a href="http://portal.futuregrid.org/manual/hardware">http://portal.futuregrid.org/manual/hardware</a>.</p>
<h2>Information Services</h2>
<p>These services gather the information of the different elements that make up FutureGrid to&nbsp;provide accurate and complete knowledge of the computational environment.&nbsp;This information is presented using different web portals:&nbsp;<a href="https://portal.futuregrid.org/status">General System Status</a>,&nbsp;<a href="http://inca.futuregrid.org/">Cloud, Cluster, Services Status</a>&nbsp;and&nbsp;<a href="http://noc.futuregrid.org/">Network Status</a>.</p>
<h2>Hardware</h2>
<p>FutureGrid includes a geographically distributed set of heterogeneous computing systems, data management systems, and dedicated networks. These resources are provided by different institutions across the United States. Detailed information on the different sites can be found&nbsp;<a href="https://portal.futuregrid.org/hardware">here</a>&nbsp;and in the&nbsp;<a href="https://portal.futuregrid.org/manual">User Manual</a>.</p>
<h2>Support</h2>
<p>The best place to start obtaining information about FutureGrid is to visit our expanding&nbsp;<a href="https://portal.futuregrid.org/manual">FutureGrid User Manual</a>, of which this page is a part. To obtain support for FutureGrid, you can visit the&nbsp;<a href="http://kb.iu.edu/index.cgi?searchOptionBtn=KB&amp;search=futuregrid&amp;Search=Search&amp;maxdocs=300">Knowledge Base</a>, which includes a collection of FAQs about FutureGrid. We also provide some user&nbsp;<a href="https://portal.futuregrid.org/forum">Forums</a>. Please note that some information may already be outdated. We try our best, however, to keep the manual and the Knowledge Base as up to date as possible.</p>
<p>If you need help or observe things that are not correct, see <a href="https://portal.futuregrid.org/help" title="https://portal.futuregrid.org/help">https://portal.futuregrid.org/help</a>.</p>
<h2>Acknowledgement</h2>
<p>You must include in all papers and oral presentations the following acknowledgment:</p>
<p><em>&quot;This material is based upon work supported in part by the National Science Foundation under Grant No. 0910812 to Indiana University for &quot;FutureGrid: An Experimental, High-Performance Grid Test-bed.&quot; Partners in the FutureGrid project include U. Chicago, U. Florida, San Diego Supercomputer Center - UC San Diego, U. Southern California, U. Texas at Austin, U. Tennessee at Knoxville, U. of Virginia, Purdue U., and T-U. Dresden.&quot; </em></p>
<p>If you run out of space you can use a shorter version:</p>
<p><em>&quot;This material is based upon work supported in part by the National Science Foundation under Grant No. 0910812.&quot;</em><br />
	&nbsp;</p>
<p>Additionally, you should forward a copy of each publication or presentation to&nbsp;<a href="mailto:help@futuregrid.org">https://portal.futuregrid.org/help</a>. Please use this instead of sending e-mail. This will allow faster assignment to our support staff.</p>  </div>
<div id="node-1033" class="section-3">
  <h1 class="book-heading">Getting Started</h1>
  <p>In order for you to gain access to the FutureGrid resources, you need to follow real simple steps:</p>
<ol>
<li>Create a FutureGrid portal account</li>
<li>Create or join a project</li>
<li>Upload your SSH key</li>
<li>Explore our Manual</li>
</ol>
<p>We will introduce these steps in more detail next.</p>
<h2>Step 1: Create a FutureGrid Portal Account</h2>
<p>In order to utilize&nbsp;<strong>any</strong>&nbsp;FutureGrid resource, you must posses a FutureGrid&nbsp;<strong>portal account</strong>. Thus,&nbsp;<em>apply for your&nbsp;<strong>portal account&nbsp;</strong></em>before you attempt anything else.&nbsp;This account is used to gather some information that we will use in the next steps. You must make sure that the information is complete before you proceed to the second step. &nbsp;FutureGrid performs basic verification of the information you provide when creating an account, so it may take a little while before your account is approved. Once you have a portal account, please proceed.</p>
<p>	<span style="color:#ff0000;">Please note that you cannot access FutureGrid resources until you complete the next steps. &nbsp;</span></p>
<p>	Here are a few tips that make it easy for you</p>
<ul style="">
<li>On the portal&#39;s main page at <a href="https://portal.futuregrid.org" title="https://portal.futuregrid.org">https://portal.futuregrid.org</a> appears a&nbsp;<a href="https://portal.futuregrid.org/user/register "><strong>Register</strong></a>&nbsp;Link.&nbsp;</li>
<li>Following you will be able to&nbsp;<strong>Create a new account</strong>&nbsp;on the portal.&nbsp;</li>
<li>Fill in <strong>ALL&nbsp;</strong>fields as much as you can.</li>
<li>Note that fields with <span style="color:#ff0000;">*&nbsp;</span>are mandatory</li>
<li>It is important that you specify your address information completely.</li>
<li>If you are a graduate or undergraduate student please fill out your advisors contact information in the field specially dedicated for it. If he has a FutureGrid Portal name, please also add his portal name if you know it in that field.</li>
<li>If you have an e-mail address from your institution, we ask that you use this address instead of one from gmail, hotmail, or other e-mail services that we cannot trace back to your name or institution.</li>
<li>Usage of all non institutional addresses will prolong the application process.<br />
		&nbsp;</li>
<li>Please note that creating<span style="color: rgb(255, 0, 0); "> a portal account does not give you access to any FutureGrid resources</span>, for that you have to complete step 2 and 3.<br />
		&nbsp;</li>
<li>Please remember that checking your information will take time. Thus we recommend that you wait&nbsp;till you get a message that tells you that your portal account has been approved. Then continue to The next step. We are not conducting any portal approval outside of 10am-4pm EST. If you are easily to be identified your approval will take 1-2 days, if not, we have either problems verifying your data or something else is not right. In case you appear to be a spammer we will not notify you.&nbsp;<br />
		&nbsp;</li>
<li>In case you are teaching a class class we have some special instructions for you and after you apply for a portal account you may want to get in contact with us via the <a href="https://portal.futuregrid.org/help">help form</a></li>
</ul>
<h2>Step 2: Create a new Project or join an existing one</h2>
<p>You need to either apply for a new FutureGrid project or join an existing project to use FutureGrid resources. To apply for a new project, fill out the <a href="https://portal.futuregrid.org/node/add/fg-projects">project creation form</a>. To join an existing project, ask the project lead or project manager for that project to add you to their project using that same form. If the project is set to &quot;accept public join request&quot;, you may also send a request in the portal. To do this, first view the <a href="https://portal.futuregrid.org/projects">project list </a>and go to the project detail page by clicking the project title. If the project is set by the project lead to &quot;accept join request&quot;, then you&#39;ll see a large gray &#39;Join this project&#39; button in the upper right corner of the page. Click the button to send the join request to the project lead and manager so they can process your request.</p>
<p>Once you have been approved to work on a project, you will be able to access the resources and services that your project has requested and been authorized to use. See the <a href="https://portal.futuregrid.org/node/add/fg-projects">project creation form</a> for a list of FutureGrid resources and services.</p>
<p>	Here are a view links that may help you:</p>
<ul>
<li><a href="https://portal.futuregrid.org/node/add/fg-projects">Create a new project creation form</a><br />
		&nbsp;</li>
<li><a href="https://portal.futuregrid.org/projects">See the project&nbsp;list to identify the project you like to join</a><br />
		&nbsp;</li>
<li><a href="https://portal.futuregrid.org/faq">Read some FAQs about the account creation</a></li>
</ul>
<p></p>
<h2>Step 3: Upload Your SSH Public Key(s)</h2>
<p>In order to be able to log into the started VMs, among other purposes, you need to provide FG with a secure-shell (ssh) public key.&nbsp;If you are already a frequent user of ssh, and have a private and public key pair, it is perfectly reasonable to provide your public key. It&#39;s&nbsp;<em>public</em>, after all.</p>
<p>To upload the chosen public key:</p>
<ol>
<li>Copy your public identity into your system clipboard.</li>
<li>Log into the FG portal&nbsp;<a class="external-link" href="../../" rel="nofollow">https://portal.futuregrid.org/</a></li>
<li>In the&nbsp;<strong>Accounts</strong>&nbsp;menu, select&nbsp;<strong>My Portal and HPC Account</strong>&nbsp;page. and activate the panel saying <strong>SSH keys</strong></li>
<li>Click the link that says Add a public key.</li>
</ol>
<p>This step should be fairly instantaneous.</p>
<p>If you are not familiar with ssh key generation, or&nbsp;if you have difficulty generating a key pair, please inform yourself about ssh keys or contact us via our <a href="https://portal.futuregrid.org/help">help form</a> . Detailed instructions on how to generate ssh key pairs will be added to this document in the near future.</p>
<p></p>
<h2>Step 4: Explore the Documentation<br />
	&nbsp;</h2>
<p>Once you have access to FutureGrid resources, a good place to start learning about how to use FutureGrid are the tutorials, specifically the following:</p>
<ul>
<li>The&nbsp;<a href="http://portal.futuregrid.org/manual">Manual</a> for detailed information</li>
</ul>
<p>Our manual will include a variety of topics that are of interest to our users from many different user communities. It would be a disservice to you to just list a view of them. Hence we provide you with a convenient link to our table of contents. Please note that the manual also contains links to our tutorials and our MOOC.</p>
<ul>
<li><a href="https://portal.futuregrid.org/manual/toc">Manual Table of Contents</a></li>
</ul>
<p>It will be also easy for you to search for some topics in our search box at the top of the Web page.</p>
<h1>&nbsp;</h1>
<p></p>
<h2>&nbsp;</h2>
  </div>
<div id="node-137" class="section-3">
  <h1 class="book-heading">Accessing FutureGrid</h1>
  <p>To use FutureGrid&nbsp;you must be part of a valid &quot;project&quot;. Project leaders&nbsp;are requested to fill out project applications about the use of FutureGrid. The <a href="https://portal.futuregrid.org/node/add/fg-projects">form</a> gathers some important information about their projects to be conducted. At this time this information is publicly shared. This information is used to report and document not only to us but also to our sponsors which activities are conducted on FutureGrid. The more precise you are in your descriptions and filling out the forms the better we can highlight your project. Once a project is formed, project members can join a project. This must be conducted by the project lead. &nbsp;A user retains an active account on FutureGrid when they are in at least one active project. A user that is inactive does not have to apply for a new account, but instead apply for a new project. Once that project is activated the user account becomes active.</p>
<h2><span>Account Management Service</span></h2>
<p><span>Please note the current process of applying for account may change.&nbsp;</span></p>
<ol>
<li><span>Any user can apply easily for a Portal account: Please go to&nbsp;</span>
<ul>
<li><a href="http://portal.futuregrid.org/user/register">https://portal.futuregrid.org/user/register</a></li>
<li>it may take a day or two to get a portal account. Portal accounts&nbsp;will not be created over the weekend.</li>
</ul>
</li>
<li><span>Once logged in the user has a couple of options</span>
<ul>
<li><span><a href="https://portal.futuregrid.org/manage-my-portal-account">User Profile Management</a>: Update information regarding the user profile</span></li>
<li><span>Project Management: apply for <a href="https://portal.futuregrid.org/node/add/fg-projects">new projects</a>, join existing projects, update information and results of a project, manage members and roles of users participating in your projects</span></li>
<li><span>Managing Certificates and Keys: Integrate OpenID login for the portal (with for example your google ID), manage your ssh key for access to the HPC service, Manage Nimbus and Eucalyptus accounts and keys<span id="cke_bm_400E" style="display: none;">&nbsp;</span></span></li>
</ul>
</li>
</ol>
<h3><span>Apply for a Project or Request an Account</span></h3>
<p>To get access to FutureGrid (FG), you need to register your project in it. Please go to:</p>
<ul>
<li>
<p><a href="https://portal.futuregrid.org/node/add/fg-projects" title="https://portal.futuregrid.org/node/add/fg-projects">https://portal.futuregrid.org/node/add/fg-projects</a></p>
</li>
</ul>
<p>to apply for a new project. It may take some time for your project to get approved. No projects will be approved over the weekend.</p>
<p>In case you like to join an existing project, please find the list of projects at:</p>
<ul>
<li><a href="https://portal.futuregrid.org/projects" title="https://portal.futuregrid.org/projects">https://portal.futuregrid.org/projects</a></li>
</ul>
<p>Clicking on a project title will bring you to the project information page, where you may see a large gray button on the upper right corner of the page named &#39;Join this project&#39;. Click to send join request to that project. Please notice the PI of the project has to approve you before you are part of that project.</p>
<p>	Some project may not accept external members so there would be no join button for them. Please notice this behavior is controlled by the owner of the project.</p>
<p>	You can always communicate with the project PI through external channel of the FutureGrid portal if you know him/her in person by letting him/her know your portal username. He/she can then directly add you as a member to his/her project without going through the join request process through the portal.</p>
<h4>Implicit Project Responsibilities for Project Members and PI Agreement for Reporting</h4>
<p>The Project PI has agreed to certain reporting requirements to provide information to FutureGrid. He will be responsible to make sure that they are completed and also implemented with the users joining the project. Thus the user is responsible to comply with the terms of the project in regards to reporting and acknowledgements in case of publications. Each project PI has the responsibility to communicate such requirements to the members and managers. The project agreements overwrite the individuals agreement.&nbsp;</p>
<h3>Cloud Accounts</h3>
<p>The cloud accounts are handled currently separately from the HPC account creation process. In fact the Eucalyptus clouds are disjunctive on each machine and have their own user management. For Nimbus uploading your ssh key is sufficient. The turnaround time for you getting access to the system is typically between 30 minutes and one day.</p>
<p>	Please be kind and only apply for these cloud accounts if you really need them.</p>
<h2>Key Reset or Adding new Keys</h2>
<p>To reset or add a new you ssh key, please update your keys first by visiting the page</p>
<ul>
<li><a href="https://portal.futuregrid.org/user/23/ssh-keys" title="https://portal.futuregrid.org/user/23/ssh-keys">https://portal.futuregrid.org/user/23/ssh-keys</a></li>
</ul>
<p>and change the keys as needed. Your reset will take 30 minutes to one day to propagate through the system services.</p>
<p>You are not allowed to use password less keys. &nbsp;Your account may be deactivated.</p>
<p>&nbsp;</p>
<ul></ul>
  <div id="node-4" class="section-4">
  <h1 class="book-heading">Account Creation</h1>
  <h2>Creating an HPC account</h2>
<p>All you need to do to obtain an HPC account is to be in a valid project and upload your ssh key. Typically you will get the account within one business day. There will be typically no accounts approved in non business hours including weekends.</p>
<p>Please add your SSH keys in your profile which you can find at:</p>
<ul>
<li>
<a href="https://portal.futuregrid.org/user/23/ssh-keys" title="https://portal.futuregrid.org/user/23/ssh-keys">https://portal.futuregrid.org/user/23/ssh-keys</a></li>
</ul>
<p> Once you have done that, please go back to this form and complete it.  After submission, this form will create an e-mail request to FutureGrid. The FG administrators may contact you to verify this request.</p>
<p>Please, make sure you are a member of a valid project.<br />
Project IDs can be found at </p>
<ul>
<li> <a href="https://portal.futuregrid.org/projects" title="https://portal.futuregrid.org/projects">https://portal.futuregrid.org/projects</a> </li>
</ul>
<p>The project lead is responsible for determining if you can be added to the project. </p>
<p>Note: Do not send mail to FG staff members about joining a project, as we are not managing individual project memberships</p>
<p>To view your current memberships and status of your account application, please visit</p>
<ul>
<li><a href="https://portal.futuregrid.org/manage-my-portal-account" title="https://portal.futuregrid.org/manage-my-portal-account">https://portal.futuregrid.org/manage-my-portal-account</a></li>
</ul>
<h2>Resetting a ssh-key</h2>
<p>Simply visit the ssh-key page and upload a new key. YoU can optionally delete other keys if you do n longer need them.</p>
<h2> Nimbus, Eucalyptus, OpenStack </h2>
<p>Once you have uploaded your SSH key, the Nimbus, Eucalyptus, and OpenStack access will be granted. Please visit the manual pages for more details on accessing them.</p>
  </div>
</div>
<div id="node-136" class="section-3">
  <h1 class="book-heading">Help and Support</h1>
  <h2>Help and Support</h2>
<p class="rteindent1">FutureGrid provides help and support to its users through various services. These services include a ticket system, mailinglists&nbsp;&nbsp;(soon to be replaced by a user forums), manuals, a KnowledgeBase, and an educational outreach activities developing tutorials and other educational material.</p>
<p><span style="display: none;">&nbsp;</span></p>
<h2>Manual</h2>
<p class="rteindent1" style="text-align: justify;">We are creating gradually a manual for FutureGrid. This manual contains contributions from the FG staff and FG users. The link for the manual is</p>
<ul class="rteindent1">
<li style="text-align: justify;"><a href="https://portal.futuregrid.org/manual">https://portal.futuregrid.org/manual</a></li>
</ul>
<p class="rteindent1" style="text-align: justify;">In case you have a useful contribution, you can simply comment on each page, or if you like to create a chapter to be included, please create a community page.&nbsp;&nbsp;A community page can be created by clicking on the following link</p>
<ul class="rteindent1">
<li style="text-align: justify;"><a href="https://portal.futuregrid.org/node/add/page-community">Create a Community&nbsp;Page</a></li>
</ul>
<p class="rteindent1" style="text-align: justify;">Community pages can also be used to report on elaborate experiment results. Once you are done with your contribution, please send a ticket to us so we can make it more prominently visible in the portal:</p>
<ul>
<li class="rteindent1" style="text-align: justify;"><a href="https://portal.futuregrid.org/help">https://portal.futuregrid.org/help</a></li>
</ul>
<h2>User Forum</h2>
<p style="margin-top: 0.5em; margin-bottom: 0.9em; text-align: justify; padding-left: 30px;">Based on advice from other projects we have established a number of user forums that are available while following this link</p>
<ul style="margin-left: 40px;">
<li style="text-align: justify; padding-left: 30px;"><a href="https://portal.futuregrid.org/forum" style="text-decoration: none; color: rgb(16, 74, 145);">User Forum</a></li>
</ul>
<p style="margin-top: 0.5em; margin-bottom: 0.9em; text-align: justify; padding-left: 30px;">To post to the forum, you must create a portal account.</p>
<h2>Help Ticketing System</h2>
<p style="text-align: justify; margin-top: 0.5em; margin-bottom: 0.9em; margin-left: 40px;">To create a ticket for FutureGrid support, please use out ticket form from the web page at</p>
<ul>
<li style="text-align: justify; margin-top: 0.5em; margin-bottom: 0.9em; margin-left: 40px;"><a href="https://portal.futuregrid.org/help">https://portal.futuregrid.org/help</a></li>
</ul>
<p style="text-align: justify; margin-top: 0.5em; margin-bottom: 0.9em; margin-left: 40px;">in which you describe problems like feature request, or bug report. A ticket will be automatically generated and you&#39;ll receive an auto-reply mail with the ticket number for further reference. FutureGrid staff will be looking into the ticket and working on it. You will receive updates and resolution through email upon the completion of the investigation. Please be aware that feedback may not be instantaneous. Tickets you have submitted can be seen at</p>
<ul>
<li style="text-align: justify; margin-top: 0.5em; margin-bottom: 0.9em; margin-left: 40px;"><a href="https://portal.futuregrid.org/tickets">https://portal.futuregrid.org/tickets</a></li>
</ul>
<p style="text-align: justify; margin-top: 0.5em; padding-left: 30px; margin-bottom: 0.9em;">&nbsp;</p>
<h2>FutureGrid Experts Team</h2>
<p style="text-align: justify; margin-top: 0.5em; margin-bottom: 0.9em; margin-left: 40px;">To facilitate the support of projects, FG has established an expert team. Each project will be assigned an expert that can be consulted in case of questions or technical issues. If the expert can not answer the question, he will consult with other experts. The communication with the expert is initially conducted simply via e-mail. In future, we will have forums and a dedicated ticket system available that logs interactions with these experts.&nbsp;On general topics a forum is used that is monitored by the experts. For information that can not be publicly shared please use&nbsp;</p>
<ul>
<li style="text-align: justify; margin-top: 0.5em; margin-bottom: 0.9em; margin-left: 40px;">https://portal.futuregrid.org/help</li>
</ul>
<p style="text-align: justify; margin-top: 0.5em; margin-bottom: 0.9em; margin-left: 40px;">The current team of experts is coordinated by Geoffrey C. Fox.&nbsp;The team includes</p>
<blockquote><div class="views_view view view-expert-list view-id-expert_list view-display-id-default view-dom-id-4">
<div class="views-admin-links views-hide">
<ul class="links">
<li class="0 edit first"><a href="/admin/build/views/edit/expert_list?destination=book%2Fexport%2Fhtml%2F104#views-tab-default">Edit</a></li>
<li class="1 export"><a href="/admin/build/views/export/expert_list">Export</a></li>
<li class="2 clone last"><a href="/admin/build/views/clone/expert_list">Clone</a></li>
</ul>
</div>
<div class="view-content">
<table class="views-table cols-3">
<thead>
<tr>
<th class="views-field views-field-value">
          Firstname        </th>
<th class="views-field views-field-value-2">
          Lastname        </th>
<th class="views-field views-field-value-1">
          Institution        </th>
</tr>
</thead>
<tbody>
<tr class="odd views-row-first">
<td class="views-field views-field-value">
            <a href="/users/ajyounge">Andrew</a>          </td>
<td class="views-field views-field-value-2">
            <a href="/users/ajyounge">Younge</a>          </td>
<td class="views-field views-field-value-1">
            <a href="/users/ajyounge">Community Grids Laboratory</a>          </td>
</tr>
<tr class="even">
<td class="views-field views-field-value">
            <a href="/users/gvonlasz">Gregor</a>          </td>
<td class="views-field views-field-value-2">
            <a href="/users/gvonlasz">von Laszewski</a>          </td>
<td class="views-field views-field-value-1">
            <a href="/users/gvonlasz">Community Grids Laboratory</a>          </td>
</tr>
<tr class="odd">
<td class="views-field views-field-value">
            <a href="/users/gaoxm">Xiaoming</a>          </td>
<td class="views-field views-field-value-2">
            <a href="/users/gaoxm">Gao</a>          </td>
<td class="views-field views-field-value-1">
            <a href="/users/gaoxm">Pervasive Technology Institute</a>          </td>
</tr>
<tr class="even">
<td class="views-field views-field-value">
            <a href="/users/jdiaz">Javier</a>          </td>
<td class="views-field views-field-value-2">
            <a href="/users/jdiaz">Diaz Montes</a>          </td>
<td class="views-field views-field-value-1">
            <a href="/users/jdiaz">Rutgers Discovery Informatics Institute (RDI2) / NSF Center for Cloud and Autonomic Computing (CAC)</a>          </td>
</tr>
<tr class="odd">
<td class="views-field views-field-value">
            <a href="/users/gcf">Geoffrey</a>          </td>
<td class="views-field views-field-value-2">
            <a href="/users/gcf">Fox</a>          </td>
<td class="views-field views-field-value-1">
            <a href="/users/gcf">Community Grids Laboratory</a>          </td>
</tr>
<tr class="even">
<td class="views-field views-field-value">
            <a href="/users/zhguo">Zhenhua</a>          </td>
<td class="views-field views-field-value-2">
            <a href="/users/zhguo">Guo</a>          </td>
<td class="views-field views-field-value-1">
            <a href="/users/zhguo">Pervasive Technology Institute</a>          </td>
</tr>
<tr class="odd">
<td class="views-field views-field-value">
            <a href="/users/taklwu">Tak-Lon</a>          </td>
<td class="views-field views-field-value-2">
            <a href="/users/taklwu">Wu</a>          </td>
<td class="views-field views-field-value-1">
            <a href="/users/taklwu">Pervasive Technology Institute / Community Grids Laboratory</a>          </td>
</tr>
<tr class="even">
<td class="views-field views-field-value">
            <a href="/users/yuduo">Yuduo</a>          </td>
<td class="views-field views-field-value-2">
            <a href="/users/yuduo">Zhou</a>          </td>
<td class="views-field views-field-value-1">
            <a href="/users/yuduo">Pervasive Technology Institute</a>          </td>
</tr>
<tr class="odd">
<td class="views-field views-field-value">
            <a href="/users/taohuang">Tao</a>          </td>
<td class="views-field views-field-value-2">
            <a href="/users/taohuang">Huang</a>          </td>
<td class="views-field views-field-value-1">
            <a href="/users/taohuang">IU PTI</a>          </td>
</tr>
<tr class="even">
<td class="views-field views-field-value">
            <a href="/users/jklingin">Jonathan</a>          </td>
<td class="views-field views-field-value-2">
            <a href="/users/jklingin">Klinginsmith</a>          </td>
<td class="views-field views-field-value-1">
            <a href="/users/jklingin">School of Informatics</a>          </td>
</tr>
<tr class="odd">
<td class="views-field views-field-value">
            <a href="/users/thilina">Thilina</a>          </td>
<td class="views-field views-field-value-2">
            <a href="/users/thilina">Gunarathne</a>          </td>
<td class="views-field views-field-value-1">
            <a href="/users/thilina">Community Grids Laboratory</a>          </td>
</tr>
<tr class="even">
<td class="views-field views-field-value">
            <a href="/users/sekanaya">Saliya</a>          </td>
<td class="views-field views-field-value-2">
            <a href="/users/sekanaya">Ekanayake</a>          </td>
<td class="views-field views-field-value-1">
            <a href="/users/sekanaya">Pervasive Technology Institute</a>          </td>
</tr>
<tr class="odd">
<td class="views-field views-field-value">
            <a href="/users/leggett">Ti</a>          </td>
<td class="views-field views-field-value-2">
            <a href="/users/leggett">Leggett</a>          </td>
<td class="views-field views-field-value-1">
            <a href="/users/leggett">Computation Institute</a>          </td>
</tr>
<tr class="even">
<td class="views-field views-field-value">
            <a href="/users/xqiu">Judy</a>          </td>
<td class="views-field views-field-value-2">
            <a href="/users/xqiu">Qiu</a>          </td>
<td class="views-field views-field-value-1">
            <a href="/users/xqiu">School of Informatics and Computing</a>          </td>
</tr>
<tr class="odd">
<td class="views-field views-field-value">
            <a href="/users/tsugawa">Mauricio</a>          </td>
<td class="views-field views-field-value-2">
            <a href="/users/tsugawa">Tsugawa</a>          </td>
<td class="views-field views-field-value-1">
            <a href="/users/tsugawa">University of Florida</a>          </td>
</tr>
<tr class="even">
<td class="views-field views-field-value">
            <a href="/users/jemitche">Jerome</a>          </td>
<td class="views-field views-field-value-2">
            <a href="/users/jemitche">Mitchell</a>          </td>
<td class="views-field views-field-value-1">
            <a href="/users/jemitche">Indiana University</a>          </td>
</tr>
<tr class="odd">
<td class="views-field views-field-value">
            <a href="/users/zhangbj">Bingjing</a>          </td>
<td class="views-field views-field-value-2">
            <a href="/users/zhangbj">Zhang</a>          </td>
<td class="views-field views-field-value-1">
            <a href="/users/zhangbj">Pervasive Technology Institute</a>          </td>
</tr>
<tr class="even">
<td class="views-field views-field-value">
            <a href="/users/ssmallen">Shava</a>          </td>
<td class="views-field views-field-value-2">
            <a href="/users/ssmallen">Smallen</a>          </td>
<td class="views-field views-field-value-1">
            <a href="/users/ssmallen">San Diego Supercomputer Center</a>          </td>
</tr>
<tr class="odd">
<td class="views-field views-field-value">
            <a href="/users/dgignac">David</a>          </td>
<td class="views-field views-field-value-2">
            <a href="/users/dgignac">Gignac</a>          </td>
<td class="views-field views-field-value-1">
            <a href="/users/dgignac">TACC</a>          </td>
</tr>
<tr class="even">
<td class="views-field views-field-value">
            <a href="/users/rhartman">Ryan</a>          </td>
<td class="views-field views-field-value-2">
            <a href="/users/rhartman">Hartman</a>          </td>
<td class="views-field views-field-value-1">
            <a href="/users/rhartman">University Information Technological Services</a>          </td>
</tr>
<tr class="odd">
<td class="views-field views-field-value">
            <a href="/users/yangruan">Yang</a>          </td>
<td class="views-field views-field-value-2">
            <a href="/users/yangruan">Ruan</a>          </td>
<td class="views-field views-field-value-1">
            <a href="/users/yangruan">Pervasive Technology Institute</a>          </td>
</tr>
<tr class="even">
<td class="views-field views-field-value">
            <a href="/users/fuwang">Fugang</a>          </td>
<td class="views-field views-field-value-2">
            <a href="/users/fuwang">Wang</a>          </td>
<td class="views-field views-field-value-1">
            <a href="/users/fuwang">Community Grids Lab at the Pervasive Technology Institute</a>          </td>
</tr>
<tr class="odd">
<td class="views-field views-field-value">
            <a href="/users/ktanaka">Koji</a>          </td>
<td class="views-field views-field-value-2">
            <a href="/users/ktanaka">Tanaka</a>          </td>
<td class="views-field views-field-value-1">
            <a href="/users/ktanaka">Community Grids Laboratory</a>          </td>
</tr>
<tr class="even">
<td class="views-field views-field-value">
            <a href="/users/hrlee">Hyungro</a>          </td>
<td class="views-field views-field-value-2">
            <a href="/users/hrlee">Lee</a>          </td>
<td class="views-field views-field-value-1">
            <a href="/users/hrlee">Community Grids Laboratory</a>          </td>
</tr>
<tr class="odd">
<td class="views-field views-field-value">
            <a href="/users/gmiksik">Gary</a>          </td>
<td class="views-field views-field-value-2">
            <a href="/users/gmiksik">Miksik</a>          </td>
<td class="views-field views-field-value-1">
            <a href="/users/gmiksik">Pervasive Technology Institute / Digital Science Center/ Community Grids Laboratory</a>          </td>
</tr>
<tr class="even">
<td class="views-field views-field-value">
            <a href="/users/junwang">Jun</a>          </td>
<td class="views-field views-field-value-2">
            <a href="/users/junwang">Wang</a>          </td>
<td class="views-field views-field-value-1">
            <a href="/users/junwang">PTI</a>          </td>
</tr>
<tr class="odd">
<td class="views-field views-field-value">
            <a href="/users/baoleary">Barbara Ann</a>          </td>
<td class="views-field views-field-value-2">
            <a href="/users/baoleary">O&#039;Leary</a>          </td>
<td class="views-field views-field-value-1">
            <a href="/users/baoleary">Pervasive Technology Institute</a>          </td>
</tr>
<tr class="even views-row-last">
<td class="views-field views-field-value">
            <a href="/users/cmarnold">Carrie</a>          </td>
<td class="views-field views-field-value-2">
            <a href="/users/cmarnold">Arnold</a>          </td>
<td class="views-field views-field-value-1">
            <a href="/users/cmarnold">Texas Advanced Computing Center</a>          </td>
</tr>
</tbody>
</table>
</div>
</div>
<!-- /.view --><!-- /.view --></blockquote>
<p style="text-align: justify;">&nbsp;</p>
<p style="text-align: justify; margin-top: 0.5em; margin-bottom: 0.9em; margin-left: 40px;">Responsibilities of an expert include</p>
<ul>
<li style="text-align: justify; margin-left: 40px;">help projects through the application process if contacted&nbsp;</li>
<li style="text-align: justify; margin-left: 40px;">help on technical questions related to FG services</li>
<li style="text-align: justify; margin-left: 40px;">help creating manual pages from the information they have been asked by FG users</li>
<li style="text-align: justify; margin-left: 40px;">help on gathering results from the projects</li>
<li style="text-align: justify; margin-left: 40px;">help on establishing a web presence of the project on the FG Web site</li>
</ul>
<h2>Training and Education</h2>
<p style="text-align: justify; margin-top: 0.5em; margin-bottom: 0.9em; margin-left: 40px;">FutureGrid provides training and educational materials through manuals and tutorials.</p>
<p style="text-align: justify; margin-top: 0.5em; margin-bottom: 0.9em; margin-left: 40px;">FutureGrid leverages technologies contributed by its partners and by the open-source community in the packaging, configuration, and deployment of virtual clusters - including the plug-and-play, self-configuring Grid appliance, the Nimbus science cloud middleware, the IPOP/GroupVPN self-configuring virtual network, and the ViNe virtual network.</p>
<p style="text-align: justify; margin-top: 0.5em; margin-bottom: 0.9em; margin-left: 40px;">For links to the initial appliance-based FutureGrid tutorials, see the FutureGrid&nbsp;<a href="https://portal.futuregrid.org/outreach" style="color: rgb(16, 74, 145); text-decoration: none;">Education and Outreach page</a>. Additionally, for video tutorials on the use of the appliances, see the&nbsp;<a href="http://www.youtube.com/acisp2p#p/c/D77781CEF51F72F3" style="color: rgb(16, 74, 145); text-decoration: none;">Grid appliance YouTube channel</a>.</p>
<p></p>
<div style="text-align: justify; margin-left: 40px;">&nbsp;</div>
<div class="book-navigation" id="book-navigation-998">
<div class="page-links clear-block" style="border-bottom: 1px solid rgb(136, 136, 136); text-align: center; padding: 0.5em; display: block; border-top: 1px solid rgb(136, 136, 136);"><a class="page-previous" href="https://portal.futuregrid.org/gettingstarted" style="text-align: left; width: 337px; display: block; float: left; color: rgb(16, 74, 145); text-decoration: none;" title="Go to previous page">&lsaquo; Quickstart</a></div>
</div>
  </div>
<div id="node-816" class="section-3">
  <h1 class="book-heading">Guide to Using the FutureGrid Portal</h1>
  <h2>
		Functions of the FutureGrid Portal</h2>
	<p><br />
		The FutureGrid portal aims to:</p>
	<ol>
		<li>
			Be the definite&nbsp;source for information about FutureGrid (manuals, papers, forums, FAQ, ...)</li>
		<li>
			Allow management of your FG accounts (portal, services, and resources)</li>
		<li>
			Allow management of your futuregrid projects</li>
		<li>
			Allow management of FG experiments</li>
		<li>
			Allow the dynamic provisioning via RAIN&nbsp;</li>
	</ol>
	<h2>
		A FutureGrid&nbsp;User Dashboard&nbsp;</h2>
	<p>After login, you will be redirected to a dashboard-like page (go to&nbsp;the menu Accounts -&gt; My Portal Account), where you will see the following:</p>
	<ol>
		<li>
			A list of useful links, including links to profile, account, SSH key, and OpenID management information.</li>
		<li>
			A projects summary section that lists the summarized information about projects that you are the owner of, that you manage, that you are member of, and that you support as a FutureGrid expert, respectively. Clicking the project title will bring you to the project detail info page. For those projects that you own or manage, an &#39;edit&#39; link is also there so you can quickly update the project information.</li>
		<li>
			A &#39;My Content&#39; section where the content that you are responsible for maintaining (and/or that you have contributed) is listed. This gives a convenient view so you can easily go back to the content and update it.</li>
		<li>
			A &#39;My Publications&#39; section that lists your publications.</li>
	</ol>
	<h2>
		Update Project Information and Add Results</h2>
	<p>Another frequently used feature is the ability to update your project information (e.g., add project members) and fill in results in the &#39;Project Results&#39; section. You can do so only when you are either the owner of the project or the project manager (if the owner has delegated that to you). By following the links provided in the &#39;Dashboard&#39; section, you can review and edit the project information.</p>
	<p>To add a user to your project as a member, the user must have a FutureGrid&nbsp;portal account first. Then, while editing the project, you can type a user&#39;s first name, and the suggestion feature will pop up with the user&#39;s username to be added. If you have many members to add, click the &#39;Add another item&#39; in the &#39;Project Members&#39; section to add more. See also <a href="https://portal.futuregrid.org/how-can-i-add-people-project">this FAQ</a>.</p>
	<p>For updating your project results, there is a &#39;Project Results&#39; section with a &#39;Results&#39; window that supports WYSIWYG editing. It supports simple formatted text, embedded images, etc. For text, you can edit directly in the window, or copy the content you developed in your favorite editor and paste the content in the edit window. In the case of images, you&#39;ll need to upload the image to the server first, and then insert it to the window, or alternatively refer to an external URL for an image hosted somewhere else.</p>
	<p>For more detailed info on how to include an image, please see <a href="https://portal.futuregrid.org/how-upload-andor-include-image-while-creating-pagenews-etc">this FAQ</a>.</p>
	<h2>
		Contribute to the FutureGrid Community</h2>
	<p>The FutureGrid portal also provides its users a place where they can contribute to the community by sharing their ideas, research topics, FG experience, etc.; in this way people can learn from you, and also you can learn from others. Emphasizing user participation and collaboration&nbsp;is one of the main goals shaping the portal to its current state.</p>
	<p>You can contribute by <a href="https://portal.futuregrid.org/node/add/page-community">creating a &#39;Community Page&#39;</a>. You can find the link in the left side navigation block, under the &#39;Create content&#39; menu. After entering the edit page, you&#39;ll see a &#39;Title&#39; text box, where you put the content/article title, and a &#39;Body&#39; window where you put the content. Once again, it supports formatted text and embedded images, etc.</p>
	<p>You can cite FutureGrid references also, by enclosing a citekey within the &#39;bib&#39; tag as stated under the editor window (NOTE: Please use &#39;[]&#39; instead of &#39;&lt;&gt;&#39;), where CITEKEY could be found in the <a href="https://portal.futuregrid.org/biblio">biblio page</a>&nbsp;(the content within but not including the &#39;[ ]&#39;).</p>
	<p>An example of a user contributed page can be found <a href="https://portal.futuregrid.org/contrib/testexample-page-user-contributed-page">here</a>.</p>
	<h2>
		File Upload and Attachment to a Page</h2>
	Please see <a href="https://portal.futuregrid.org/faq/how-uploadattach-file-page">this FAQ</a> for instructions on file upload.  </div>
</div>
<div id="node-139" class="section-2">
  <h1 class="book-heading">Overview of the Hardware</h1>
  <p>&nbsp;</p>
<p><span>These are the current resources available in FutureGrid. More detailed information is provided <a href="https://portal.futuregrid.org/manual/hardware">here</a>.</p>
<p>	<strong>Compute Resources</strong></span></p>
<table border="1" cellpadding="1" cellspacing="1" style="width: 663px; ">
<tbody>
<tr>
<td style="background-color: rgb(204, 204, 204); "><strong>Name</strong></td>
<td style="background-color: rgb(204, 204, 204); "><strong>System Type</strong></td>
<td style="background-color: rgb(204, 204, 204); "><strong># Nodes</strong></td>
<td style="background-color: rgb(204, 204, 204); width: 45px; "><strong># CPUS</strong></td>
<td style="background-color: rgb(204, 204, 204); width: 48px; "><strong># Cores</strong></td>
<td style="background-color: rgb(204, 204, 204); width: 50px; "><strong>TFLOPS</strong></td>
<td style="background-color: rgb(204, 204, 204); "><strong>RAM (GB</strong></td>
<td style="background-color: rgb(204, 204, 204); width: 83px; "><strong>Storage (TB)</strong></td>
<td style="width: 60px; background-color: rgb(204, 204, 204); "><strong>Site</strong></td>
</tr>
<tr>
<td><a href="https://portal.futuregrid.org/hardware/india">india</a></td>
<td>IBM iDataplex</td>
<td>128</td>
<td style="width: 45px; ">256</td>
<td style="width: 48px; ">1024</td>
<td style="width: 50px; ">11</td>
<td>3072</td>
<td style="width: 83px; ">335</td>
<td style="width: 60px; ">IU</td>
</tr>
<tr>
<td><a href="https://portal.futuregrid.org/hardware/hotel">hotel</a></td>
<td>IBM iDataplex</td>
<td>84</td>
<td style="width: 45px; ">168</td>
<td style="width: 48px; ">672</td>
<td style="width: 50px; ">7</td>
<td>2016</td>
<td style="width: 83px; ">120</td>
<td style="width: 60px; ">UC</td>
</tr>
<tr>
<td><a href="https://portal.futuregrid.org/hardware/sierra">sierra</a></td>
<td>IBM iDataplex</td>
<td>84</td>
<td style="width: 45px; ">168</td>
<td style="width: 48px; ">672</td>
<td style="width: 50px; ">7</td>
<td>2688</td>
<td style="width: 83px; ">96</td>
<td style="width: 60px; ">SDSC</td>
</tr>
<tr>
<td><a href="https://portal.futuregrid.org/hardware/foxtrot">foxtrot</a></td>
<td>IBM iDataplex</td>
<td>32</td>
<td style="width: 45px; ">64</td>
<td style="width: 48px; ">256</td>
<td style="width: 50px; ">3</td>
<td>768</td>
<td style="width: 83px; ">0</td>
<td style="width: 60px; ">UF</td>
</tr>
<tr>
<td><a href="https://portal.futuregrid.org/hardware/alamo">alamo</a></td>
<td>Dell Poweredge</td>
<td>96</td>
<td style="width: 45px; ">192</td>
<td style="width: 48px; ">768</td>
<td style="width: 50px; ">8</td>
<td>1152</td>
<td style="width: 83px; ">30</td>
<td style="width: 60px; ">TACC</td>
</tr>
<tr>
<td><a href="https://portal.futuregrid.org/hardware/xray">xray</a></td>
<td>Cray XT5m</td>
<td>1</td>
<td style="width: 45px; ">166</td>
<td style="width: 48px; ">664</td>
<td style="width: 50px; ">6</td>
<td>1328</td>
<td style="width: 83px; ">5.4</td>
<td style="width: 60px; ">IU</td>
</tr>
<tr>
<td><a href="https://portal.futuregrid.org/hardware/bravo">bravo</a></td>
<td>HP Proliant</td>
<td>16</td>
<td style="width: 45px; ">32</td>
<td style="width: 48px; ">128</td>
<td style="width: 50px; ">1.7</td>
<td>3072</td>
<td style="width: 83px; ">128</td>
<td style="width: 60px; ">IU</td>
</tr>
<tr>
<td><a href="https://portal.futuregrid.org/hardware/delta">delta</a></td>
<td>GPU Cluster(SuperMicro)</td>
<td>16</td>
<td style="width: 45px; ">32</td>
<td style="width: 48px; ">192</td>
<td style="width: 50px; ">&nbsp;</td>
<td>1333</td>
<td style="width: 83px; ">144</td>
<td style="width: 60px; ">IU</td>
</tr>
<tr>
<td><a href="https://portal.futuregrid.org/hardware/lima">lima</a></td>
<td>Aeon Eclipse64&nbsp;</td>
<td>8</td>
<td style="width: 45px; ">16</td>
<td style="width: 48px; ">128</td>
<td style="width: 50px; ">1.3</td>
<td>512</td>
<td style="width: 83px; ">3.8 (SSD)<br />
				8.0 (HDD)</td>
<td style="width: 60px; ">SDSC</td>
</tr>
</tbody>
</table>
<p>	<strong>Storage Resources</strong></p>
<table border="1" cellpadding="1" cellspacing="1" style="width: 500px; ">
<tbody>
<tr>
<td style="background-color: rgb(204, 204, 204); "><strong>System Type</strong></td>
<td style="background-color: rgb(204, 204, 204); "><strong>Capacity (TB)</strong></td>
<td style="background-color: rgb(204, 204, 204); "><strong>File System</strong></td>
<td style="background-color: rgb(204, 204, 204); "><strong>Site</strong></td>
</tr>
<tr>
<td>DDN 9550<br />
				Data Capacitor</td>
<td style="width: 197px;">339 shared with IU +<br />
				16 TB dedicated</td>
<td style="width: 129px;">Luster</td>
<td style="width: 5px;">IU</td>
</tr>
<tr>
<td>DDN 6620</td>
<td style="width: 197px;">120</td>
<td style="width: 129px;">GPFS</td>
<td style="width: 5px;">UC</td>
</tr>
<tr>
<td>SunFire x4540</td>
<td style="width: 197px;">96</td>
<td style="width: 129px;">ZFS</td>
<td style="width: 5px;">SDSC</td>
</tr>
<tr>
<td>Dell MD3000</td>
<td style="width: 197px;">30</td>
<td style="width: 129px;">NFS</td>
<td style="width: 5px;">TACC</td>
</tr>
<tr>
<td>IBM dx360 M3</td>
<td style="width: 197px;">24</td>
<td style="width: 129px;">NFS</td>
<td style="width: 5px;">UF</td>
</tr>
</tbody>
</table>
<h2>Status</h2>
<p>The status of the resources can be monitored through:</p>
<ul>
<li><a href="https://portal.futuregrid.org/status">https://portal.futuregrid.org/status</a></li>
</ul>
<p>This page also contains a link to our operational status of FutureGrid resources and services, see the FutureGrid Inca server at:</p>
<ul>
<li><a href="http://inca.futuregrid.org/">http://inca.futuregrid.org</a></li>
</ul>
<h2>Maintenance</h2>
<p>Activities during the regular maintenance window for FutureGrid machines are listed in the FutureGrid wiki at:</p>
<ul>
<li><a href="https://wiki.futuregrid.org/index.php/Hw:MaintActivities">https://wiki.futuregrid.org/index.php/Hw:MaintActivities</a>.</li>
</ul>
<p>Scheduled outages and maintenance windows on the FutureGrid network are collected in the Network Operations Calendar at:</p>
<ul>
<li><a href="https://noc.futuregrid.org/futuregrid/support/operations-calendar3.html">https://noc.futuregrid.org/futuregrid/support/operations-calendar3.html</a></li>
</ul>
  <div id="node-118" class="section-3">
  <h1 class="book-heading">Compute Resources</h1>
  <h2>
	GVL: This section belongs to HPC Services</p>
<p>	Compute Hardware Resources &amp; HPC Job Queue Information</h2>
<table border="1" cellpadding="2" cellspacing="0" style="width: 800px">
<thead>
<tr>
<th scope="col">
				Resource</th>
<th scope="col">
				Queue name</th>
<th scope="col">
				Default Wallclock Limit</th>
<th>
				Max Wallclock Limit</th>
<th>
				NOTES</th>
</tr>
</thead>
<tbody>
<tr>
<td>
				india</td>
<td>
				batch</td>
<td>
				4 hours</td>
<td>
				24 hours</td>
<td>
				&nbsp;</td>
</tr>
<tr>
<td>
				&nbsp;</td>
<td>
				long</td>
<td>
				8 hours</td>
<td>
				168 hours</td>
<td>
				&nbsp;</td>
</tr>
<tr>
<td>
				&nbsp;</td>
<td>
				scalemp</td>
<td>
				8 hours</td>
<td>
				168 hours</td>
<td>
				restricted access</td>
</tr>
<tr>
<td>
				&nbsp;</td>
<td>
				b534</td>
<td>
				none</td>
<td>
				none</td>
<td>
				restricted access</td>
</tr>
<tr>
<td>
				&nbsp;</td>
<td>
				ajyounge</td>
<td>
				none</td>
<td>
				none</td>
<td>
				restricted access</td>
</tr>
<tr>
<td>
				sierra</td>
<td>
				batch</td>
<td>
				4 hours</td>
<td>
				24 hours</td>
<td>
				&nbsp;</td>
</tr>
<tr>
<td>
				&nbsp;</td>
<td>
				long</td>
<td>
				8 hours</td>
<td>
				168 hours</td>
<td>
				&nbsp;</td>
</tr>
<tr>
<td>
				hotel</td>
<td>
				extended</td>
<td>
				none</td>
<td>
				none</td>
<td>
				&nbsp;</td>
</tr>
<tr>
<td>
				alamo</td>
<td>
				shortq</td>
<td>
				none</td>
<td>
				24 hours</td>
<td>
				&nbsp;</td>
</tr>
<tr>
<td>
				&nbsp;</td>
<td>
				longq</td>
<td>
				none</td>
<td>
				24 hours</td>
<td>
				&nbsp;</td>
</tr>
<tr>
<td>
				foxtrot</td>
<td>
				batch</td>
<td>
				1 hour</td>
<td>
				none</td>
<td>
				not for general use</td>
</tr>
</tbody>
</table>
<p></p>
<p>For availability, please visit: <a href="http://portal.futuregrid.org/status">http://portal.futuregrid.org/status</a> .</p>
<p>	GVL: This image belongs to the specific cluster desciption:</p>
<p><img alt="" height="425" src="/sites/default/files/resize/images/FutureGrid_iDataPlex_Cray_IU-sm-640x425.jpg" style="width: 640px; height: 425px" width="640" /></p>
<p>IU iDataplex &amp; Cray</p>
<p>GVL: This section belongs to the specific cluster description:</p>
<p><img alt="" height="640" src="/sites/default/files/resize/images/Cray_XT5m_Front_closed-small-427x640.jpg" style="width: 427px; height: 640px" width="427" /></p>
<p>IU Cray</p>
<p>GVL: This belongs to networking:</p>
<h2>
	Compute Networks</h2>
<table border="1" cellpadding="0" cellspacing="0" class="MsoTableLightShading" style="border-bottom: medium none; border-left: medium none; border-collapse: collapse; border-top: medium none; border-right: medium none">
<tbody>
<tr>
<td style="padding-bottom: 0cm; padding-left: 5.4pt; width: 216.1pt; padding-right: 5.4pt; background: rgb(227,108,10); padding-top: 0cm; -moz-background-inline-policy: continuous" valign="top" width="360">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt"><span style="font-size: medium"><strong><span style="color: black">Resource Name</span></strong></span></p>
</td>
<td style="padding-bottom: 0cm; padding-left: 5.4pt; width: 355.8pt; padding-right: 5.4pt; background: rgb(227,108,10); padding-top: 0cm; -moz-background-inline-policy: continuous" valign="top" width="593">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt"><span style="font-size: medium"><strong><span style="color: black">Network Devices</span></strong></span></p>
</td>
</tr>
<tr>
<td style="padding-bottom: 0cm; padding-left: 5.4pt; width: 216.1pt; padding-right: 5.4pt; background: rgb(221,217,195); padding-top: 0cm; -moz-background-inline-policy: continuous" valign="top" width="360">
<p class="MsoNormal" style="line-height: normal"><span style="font-size: medium"><span style="color: black">IU Cray </span><span style="color: black">&nbsp;</span></span></p>
</td>
<td style="padding-bottom: 0cm; padding-left: 5.4pt; width: 355.8pt; padding-right: 5.4pt; background: rgb(221,217,195); padding-top: 0cm; -moz-background-inline-policy: continuous" valign="top" width="593">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt"><span style="font-size: medium"><span style="color: black">Cray 2D Torus SeaStar</span><span style="color: black">&nbsp;</span></span></p>
</td>
</tr>
<tr>
<td rowspan="3" style="padding-bottom: 0cm; padding-left: 5.4pt; width: 216.1pt; padding-right: 5.4pt; background: rgb(221,217,195); padding-top: 0cm; -moz-background-inline-policy: continuous" valign="top" width="360">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt"><span style="font-size: medium"><span style="color: black">&nbsp;</span></span></p>
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt"><span style="font-size: medium"><span style="color: black">IU iDataPlex&nbsp;</span><span style="color: black">&nbsp;</span></span></p>
</td>
<td style="border-bottom: medium none; border-left: medium none; padding-bottom: 0cm; padding-left: 5.4pt; width: 355.8pt; padding-right: 5.4pt; background: rgb(221,217,195); border-top: medium none; border-right: medium none; padding-top: 0cm; -moz-background-inline-policy: continuous" valign="top" width="593">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt"><span style="font-size: medium"><span style="color: black">DDR IB&nbsp;</span><span style="color: black">&nbsp;</span></span></p>
</td>
</tr>
<tr>
<td style="border-bottom: medium none; border-left: medium none; padding-bottom: 0cm; padding-left: 5.4pt; width: 355.8pt; padding-right: 5.4pt; background: white; border-top: medium none; border-right: medium none; padding-top: 0cm; -moz-background-inline-policy: continuous" valign="top" width="593">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt"><span style="font-size: medium"><span style="color: black">QLogic switch with Mellanox ConnectX adapters</span></span></p>
</td>
</tr>
<tr>
<td style="padding-bottom: 0cm; padding-left: 5.4pt; width: 355.8pt; padding-right: 5.4pt; background: rgb(221,217,195); padding-top: 0cm; -moz-background-inline-policy: continuous" valign="top" width="593">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt"><span style="font-size: medium"><span style="color: black">Blade Network Technologies &amp; Force10 Ethernet switches</span></span></p>
</td>
</tr>
<tr>
<td rowspan="3" style="padding-bottom: 0cm; padding-left: 5.4pt; width: 216.1pt; padding-right: 5.4pt; background: rgb(221,217,195); padding-top: 0cm; -moz-background-inline-policy: continuous" valign="top" width="360">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt"><span style="font-size: medium"><span style="color: black">&nbsp; </span></span></p>
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt"><span style="font-size: medium"><span style="color: black">SDSC</span><span style="color: black">&nbsp;</span></span></p>
</td>
<td style="border-bottom: medium none; border-left: medium none; padding-bottom: 0cm; padding-left: 5.4pt; width: 355.8pt; padding-right: 5.4pt; background: rgb(221,217,195); border-top: medium none; border-right: medium none; padding-top: 0cm; -moz-background-inline-policy: continuous" valign="top" width="593">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt"><span style="font-size: medium"><span style="color: black">DDR IB</span><span style="color: black">&nbsp;</span></span></p>
</td>
</tr>
<tr>
<td style="border-bottom: medium none; border-left: medium none; padding-bottom: 0cm; padding-left: 5.4pt; width: 355.8pt; padding-right: 5.4pt; background: white; border-top: medium none; border-right: medium none; padding-top: 0cm; -moz-background-inline-policy: continuous" valign="top" width="593">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt"><span style="font-size: medium"><span style="color: black">Cisco switch with Mellanox ConnectX adapters</span></span></p>
</td>
</tr>
<tr>
<td style="padding-bottom: 0cm; padding-left: 5.4pt; width: 355.8pt; padding-right: 5.4pt; background: rgb(221,217,195); padding-top: 0cm; -moz-background-inline-policy: continuous" valign="top" width="593">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt"><span style="font-size: medium"><span style="color: black">Juniper Ethernet switches</span></span></p>
</td>
</tr>
<tr>
<td rowspan="3" style="padding-bottom: 0cm; padding-left: 5.4pt; width: 216.1pt; padding-right: 5.4pt; background: rgb(221,217,195); padding-top: 0cm; -moz-background-inline-policy: continuous" valign="top" width="360">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt"><span style="font-size: medium"><span style="color: black">&nbsp;</span></span></p>
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt"><span style="font-size: medium"><span style="color: black">TACC</span><span style="color: black">&nbsp;</span></span></p>
</td>
<td style="border-bottom: medium none; border-left: medium none; padding-bottom: 0cm; padding-left: 5.4pt; width: 355.8pt; padding-right: 5.4pt; background: rgb(221,217,195); border-top: medium none; border-right: medium none; padding-top: 0cm; -moz-background-inline-policy: continuous" valign="top" width="593">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt"><span style="font-size: medium"><span style="color: black">QDR IB&nbsp;</span><span style="color: black">&nbsp;</span></span></p>
</td>
</tr>
<tr>
<td style="border-bottom: medium none; border-left: medium none; padding-bottom: 0cm; padding-left: 5.4pt; width: 355.8pt; padding-right: 5.4pt; background: white; border-top: medium none; border-right: medium none; padding-top: 0cm; -moz-background-inline-policy: continuous" valign="top" width="593">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt"><span style="font-size: medium"><span style="color: black">Mellanox switches and adapters</span></span></p>
</td>
</tr>
<tr>
<td style="padding-bottom: 0cm; padding-left: 5.4pt; width: 355.8pt; padding-right: 5.4pt; background: rgb(221,217,195); padding-top: 0cm; -moz-background-inline-policy: continuous" valign="top" width="593">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt"><span style="font-size: medium"><span style="color: black">Dell Ethernet switches</span></span></p>
</td>
</tr>
<tr>
<td rowspan="3" style="padding-bottom: 0cm; padding-left: 5.4pt; width: 216.1pt; padding-right: 5.4pt; background: rgb(221,217,195); padding-top: 0cm; -moz-background-inline-policy: continuous" valign="top" width="360">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt"><span style="font-size: medium"><span style="color: black">&nbsp;</span></span></p>
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt"><span style="font-size: medium"><span style="color: black">UC</span><span style="color: black">&nbsp;</span></span></p>
</td>
<td style="border-bottom: medium none; border-left: medium none; padding-bottom: 0cm; padding-left: 5.4pt; width: 355.8pt; padding-right: 5.4pt; background: rgb(221,217,195); border-top: medium none; border-right: medium none; padding-top: 0cm; -moz-background-inline-policy: continuous" valign="top" width="593">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt"><span style="font-size: medium"><span style="color: black">DDR IB</span><span style="color: black">&nbsp;</span></span></p>
</td>
</tr>
<tr>
<td style="border-bottom: medium none; border-left: medium none; padding-bottom: 0cm; padding-left: 5.4pt; width: 355.8pt; padding-right: 5.4pt; background: white; border-top: medium none; border-right: medium none; padding-top: 0cm; -moz-background-inline-policy: continuous" valign="top" width="593">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt"><span style="font-size: medium"><span style="color: black">QLogic switch with Mellanox ConnectX adapters</span></span></p>
</td>
</tr>
<tr>
<td style="padding-bottom: 0cm; padding-left: 5.4pt; width: 355.8pt; padding-right: 5.4pt; background: rgb(221,217,195); padding-top: 0cm; -moz-background-inline-policy: continuous" valign="top" width="593">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt"><span style="font-size: medium"><span style="color: black">Blade Network Technologies &amp; Juniper switches</span></span></p>
</td>
</tr>
<tr>
<td style="padding-bottom: 0cm; padding-left: 5.4pt; width: 216.1pt; padding-right: 5.4pt; background: rgb(221,217,195); padding-top: 0cm; -moz-background-inline-policy: continuous" valign="top" width="360">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt"><span style="font-size: medium"><span style="color: black">UF</span></span></p>
</td>
<td style="padding-bottom: 0cm; padding-left: 5.4pt; width: 355.8pt; padding-right: 5.4pt; background: rgb(221,217,195); padding-top: 0cm; -moz-background-inline-policy: continuous" valign="top" width="593">
<p class="MsoNormal" style="line-height: normal"><span style="font-size: medium"><span style="color: black">Ethernet only (Blade Network Technologies &amp; Force10 switches)</span></span></p>
</td>
</tr>
</tbody>
</table>
<h2 style="text-align: left">
	&nbsp;</h2>
  </div>
<div id="node-1492" class="section-3">
  <h1 class="book-heading">Alamo</h1>
  <b>ALAMO</b>

	<br />
	<em>â€‹Texas Advanced Computing Center</em><br />
	<br />
	Alamo consists of 96 nodes with dual Intel&nbsp;X5550&nbsp;processors and 1152 GB of memory. Following are detailed specifications for Alamo.<br />
	<br />
	SPECIFICATIONS<br />
	<br />
	<table border="1" cellpadding="1" cellspacing="1">
		
			<tr>
				<td>
					Machine Type</td>
				<td>
					Cluster</td>
			</tr>
			<tr>
				<td>
					System Type</td>
				<td>
					Dell PowerEdge&nbsp;M610&nbsp;Blade</td>
			</tr>
			<tr>
				<td>
					CPU type</td>
				<td>
					Intel&nbsp;Xeon&nbsp;X5550</td>
			</tr>
			<tr>
				<td>
					Host Name</td>
				<td>
					alamo</td>
			</tr>
			<tr>
				<td>
					CPU Speed</td>
				<td>
					2.66GHz</td>
			</tr>
			<tr>
				<td>
					Number of CPUs</td>
				<td>
					192</td>
			</tr>
			<tr>
				<td>
					Number of nodes</td>
				<td>
					96</td>
			</tr>
			<tr>
				<td>
					RAM</td>
				<td>
					12 GB&nbsp;DDR3&nbsp;1333Mhz</td>
			</tr>
			<tr>
				<td>
					Total RAM (GB)</td>
				<td>
					1152</td>
			</tr>
			<tr>
				<td>
					Number of cores</td>
				<td>
					768</td>
			</tr>
			<tr>
				<td>
					Operating System</td>
				<td>
					Linux</td>
			</tr>
			<tr>
				<td>
					Tflops</td>
				<td>
					8</td>
			</tr>
			<tr>
				<td>
					Disk Size (TB)</td>
				<td>
					48</td>
			</tr>
			<tr>
				<td>
					Hard Drives</td>
				<td>
					500 GB Internal 7200 RPM&nbsp;SAS Drive</td>
			</tr>
			<tr>
				<td>
					Primary storage, shared by all nodes</td>
				<td>
					NFS<br />
					&nbsp;</td>
			</tr>
			<tr>
				<td>
					Connection configuration</td>
				<td>
					Mellanox&nbsp;4x&nbsp;QDR&nbsp;InfiniBand&nbsp;adapters<br />
					&nbsp;</td>
			</tr>
		
	</table>

<br />  </div>
<div id="node-1478" class="section-3">
  <h1 class="book-heading">Bravo</h1>
  <strong>BRAVO</strong>

	<br />
	<em>â€‹Indiana University, Bloomington</em><br />
	<br />
	Bravo consists of 16 nodes with dual Intel Xeon E5620 processors and 192 GB of memory. Following are detailed specifications for Bravo:<br />
	<br />
	SPECIFICATIONS<br />
	<br />
	<table border="1" cellpadding="1" cellspacing="1">
		
			<tr>
				<td>
					Machine Type</td>
				<td>
					Cluster</td>
			</tr>
			<tr>
				<td>
					System Type</td>
				<td>
					HP Proliant</td>
			</tr>
			<tr>
				<td>
					CPU type</td>
				<td>
					Intel Xeon E5620</td>
			</tr>
			<tr>
				<td>
					Host Name</td>
				<td>
					bravo</td>
			</tr>
			<tr>
				<td>
					CPU Speed</td>
				<td>
					2.40GHz</td>
			</tr>
			<tr>
				<td>
					Number of CPUs</td>
				<td>
					32</td>
			</tr>
			<tr>
				<td>
					Number of nodes</td>
				<td>
					16</td>
			</tr>
			<tr>
				<td>
					RAM</td>
				<td>
					192 GB DDR3 1333Mhz</td>
			</tr>
			<tr>
				<td>
					Total RAM (GB)</td>
				<td>
					3072</td>
			</tr>
			<tr>
				<td>
					Number of cores</td>
				<td>
					128</td>
			</tr>
			<tr>
				<td>
					Operating System</td>
				<td>
					Linux</td>
			</tr>
			<tr>
				<td>
					Tflops</td>
				<td>
					1.7</td>
			</tr>
			<tr>
				<td>
					Hard Drives</td>
				<td>
					6x2TB Internal 7200 RPM SATA Drive</td>
			</tr>
			<tr>
				<td>
					Primary storage, shared by all nodes</td>
				<td>
					NFS<br />
					&nbsp;</td>
			</tr>
			<tr>
				<td>
					Connection configuration</td>
				<td>
					Mellanox 4x&nbsp;DDR InfiniBand&nbsp;adapters</td>
			</tr>
		
	</table>
	<a href="https://portal.futuregrid.org/manual/bravo">Instructions for submitting jobs in bravo.</a>  </div>
<div id="node-1477" class="section-3">
  <h1 class="book-heading">Delta</h1>
  <strong>DELTA</strong><br />
<br />
<em>â€‹Indiana University, Bloomington</em><br />
<br />
Delta consists of 16 nodes with two core Intel X5560 processors and 192 GB of memory. Each node supports two nVIDIA Tesla C2070 GPUs.<br />
<br />
SPECIFICATIONS<br />
<br />
<table border="1" cellpadding="1" cellspacing="1">
	
		<tr>
			<td>Machine Type</td>
			<td>Cluster</td>
		</tr>
		<tr>
			<td>CPU type</td>
			<td>Intel Xeon&nbsp;5660</td>
		</tr>
		<tr>
			<td>Host Name</td>
			<td>delta</td>
		</tr>
		<tr>
			<td>CPU Speed</td>
			<td>2.80 GHz</td>
		</tr>
		<tr>
			<td>CPUs (cores) per node</td>
			<td>2 (12)</td>
		</tr>
		<tr>
			<td>Number of nodes</td>
			<td>16</td>
		</tr>
		<tr>
			<td>GPU type</td>
			<td>nVIDIA Tesla C2070</td>
		</tr>
		<tr>
			<td>GPUs per node</td>
			<td>2</td>
		</tr>
		<tr>
			<td>RAM</td>
			<td>16 GB DDR3 1333 Mhz</td>
		</tr>
		<tr>
			<td>Memory per node [GB]</td>
			<td>192</td>
		</tr>
		<tr>
			<td>Total CPUs (cores)</td>
			<td>32 (192)</td>
		</tr>
		<tr>
			<td>Total Memory [GB]</td>
			<td>3072</td>
		</tr>
		<tr>
			<td>Total GPUs</td>
			<td>32</td>
		</tr>
		<tr>
			<td>Cores per GPU</td>
			<td>448</td>
		</tr>
		<tr>
			<td>Operating System</td>
			<td>Linux</td>
		</tr>
		<tr>
			<td>Hard Drives</td>
			<td>Seagate Constellation 7.2 K RPM<br />
				64 MB Cache SATA 92GB</td>
		</tr>
		<tr>
			<td>Storage details</td>
			<td>RAID 9260-4i 1pt SAS2<br />
				512 MB SGL</td>
		</tr>
		<tr>
			<td>Batch system</td>
			<td>Torque</td>
		</tr>
		<tr>
			<td>Disk Size [TB]</td>
			<td>15</td>
		</tr>
		<tr>
			<td>Local storage, per node [GB]</td>
			<td>92</td>
		</tr>
		<tr>
			<td>Primary storage, shared by all nodes</td>
			<td>NFS</td>
		</tr>
	
</table>
<br />
<br />
For more, see the <a href="https://portal.futuregrid.org/manual/delta  ">DELTA GPU User Manual</a>.<br />
<br />
<br />  </div>
<div id="node-1491" class="section-3">
  <h1 class="book-heading">Foxtrot</h1>
  <b>FOXTROT</b><br />
	<em>â€‹University&nbsp;of Florida, Gainesville</em><br />
	<br />
	Foxtrot consists of 32 nodes with dual Intel&nbsp;X5520&nbsp;processors and 768 GB of memory. Following are detailed specifications for Foxtrot.<br />
	<br />
	SPECIFICATIONS

	<br />
	<table border="1" cellpadding="1" cellspacing="1">
		
			<tr>
				<td>
					Machine Type</td>
				<td>
					Cluster</td>
			</tr>
			<tr>
				<td>
					System Type</td>
				<td>
					IBM&nbsp;iDataPlex&nbsp;dx&nbsp;360&nbsp;M2</td>
			</tr>
			<tr>
				<td>
					CPU type</td>
				<td>
					Intel&nbsp;Xeon&nbsp;X5520</td>
			</tr>
			<tr>
				<td>
					Host Name</td>
				<td>
					foxtrot</td>
			</tr>
			<tr>
				<td>
					CPU Speed</td>
				<td>
					2.26GHz</td>
			</tr>
			<tr>
				<td>
					Number of CPUs</td>
				<td>
					64</td>
			</tr>
			<tr>
				<td>
					Number of nodes</td>
				<td>
					32</td>
			</tr>
			<tr>
				<td>
					RAM</td>
				<td>
					24 GB&nbsp;DDR3&nbsp;1333Mhz</td>
			</tr>
			<tr>
				<td>
					Total RAM (GB)</td>
				<td>
					768</td>
			</tr>
			<tr>
				<td>
					Number of cores</td>
				<td>
					256</td>
			</tr>
			<tr>
				<td>
					Operating System</td>
				<td>
					Linux</td>
			</tr>
			<tr>
				<td>
					Tflops</td>
				<td>
					3</td>
			</tr>
			<tr>
				<td>
					Disk Size (TB)</td>
				<td>
					20</td>
			</tr>
			<tr>
				<td>
					Hard Drives</td>
				<td>
					500 GB Internal 7200 RPM&nbsp;SATA&nbsp;Drive</td>
			</tr>
			<tr>
				<td>
					Primary storage, shared by all nodes</td>
				<td>
					NFS<br />
					&nbsp;</td>
			</tr>
		
	</table>

<br />  </div>
<div id="node-1489" class="section-3">
  <h1 class="book-heading">Hotel</h1>
  <b>HOTEL</b>

	<br />
	<em>â€‹University of Illinois, Chicago</em><br />
	<br />
	Hotel consists of 84 nodes with dual Intel&nbsp;X5550&nbsp;processors and 2016 GB of memory. Following are detailed specifications for Hotel.<br />
	<br />
	SPECIFICATIONS<br />
	<br />
	<table border="1" cellpadding="1" cellspacing="1">
		
			<tr>
				<td>
					Machine Type</td>
				<td>
					Cluster</td>
			</tr>
			<tr>
				<td>
					System Type</td>
				<td>
					IBM&nbsp;iDataPlex&nbsp;dx&nbsp;360&nbsp;M2</td>
			</tr>
			<tr>
				<td>
					CPU type</td>
				<td>
					Intel&nbsp;Xeon&nbsp;X5550</td>
			</tr>
			<tr>
				<td>
					Host Name</td>
				<td>
					hotel</td>
			</tr>
			<tr>
				<td>
					CPU Speed</td>
				<td>
					2.66GHz</td>
			</tr>
			<tr>
				<td>
					Number of CPUs</td>
				<td>
					168</td>
			</tr>
			<tr>
				<td>
					Number of nodes</td>
				<td>
					84</td>
			</tr>
			<tr>
				<td>
					RAM</td>
				<td>
					24 GB&nbsp;DDR3&nbsp;1333Mhz</td>
			</tr>
			<tr>
				<td>
					Total RAM (GB)</td>
				<td>
					2016</td>
			</tr>
			<tr>
				<td>
					Number of cores</td>
				<td>
					672</td>
			</tr>
			<tr>
				<td>
					Operating System</td>
				<td>
					Linux</td>
			</tr>
			<tr>
				<td>
					Tflops</td>
				<td>
					7</td>
			</tr>
			<tr>
				<td>
					Disk Size (TB)</td>
				<td>
					120</td>
			</tr>
			<tr>
				<td>
					Hard Drives</td>
				<td>
					1 TB Internal 7200 RPM&nbsp;SATA&nbsp;Drive</td>
			</tr>
			<tr>
				<td>
					Primary storage, shared by all nodes</td>
				<td>
					GPFS<br />
					&nbsp;</td>
			</tr>
			<tr>
				<td>
					Connection configuration</td>
				<td>
					Mellanox&nbsp;4x&nbsp;DDR&nbsp;InfiniBand&nbsp;adapters<br />
					&nbsp;</td>
			</tr>
		
	</table>

<br />  </div>
<div id="node-1488" class="section-3">
  <h1 class="book-heading">India</h1>
  <strong>INDIA</strong>

	<br />
	<em>â€‹Indiana University, Bloomington</em><br />
	<br />
	India consists of 128 nodes with dual Intel X5550 processors and 24 GB of memory. Following are detailed specifications for India.<br />
	<br />
	SPECIFICATIONS<br />
	<br />
	<table border="1" cellpadding="1" cellspacing="1">
		
			<tr>
				<td>
					Machine Type</td>
				<td>
					Cluster</td>
			</tr>
			<tr>
				<td>
					System Type</td>
				<td>
					IBM iDataPlex dx 360 M2</td>
			</tr>
			<tr>
				<td>
					CPU type</td>
				<td>
					Intel Xeon X5550</td>
			</tr>
			<tr>
				<td>
					Host Name</td>
				<td>
					india</td>
			</tr>
			<tr>
				<td>
					CPU Speed</td>
				<td>
					2.66GHz</td>
			</tr>
			<tr>
				<td>
					Number of CPUs</td>
				<td>
					256</td>
			</tr>
			<tr>
				<td>
					Number of nodes</td>
				<td>
					128</td>
			</tr>
			<tr>
				<td>
					RAM</td>
				<td>
					24 GB DDR3 1333Mhz</td>
			</tr>
			<tr>
				<td>
					Total RAM (GB)</td>
				<td>
					3072</td>
			</tr>
			<tr>
				<td>
					Number of cores</td>
				<td>
					1024</td>
			</tr>
			<tr>
				<td>
					Operating System</td>
				<td>
					Linux</td>
			</tr>
			<tr>
				<td>
					Tflops</td>
				<td>
					11</td>
			</tr>
			<tr>
				<td>
					Disk Size (TB)</td>
				<td>
					335</td>
			</tr>
			<tr>
				<td>
					Hard Drives</td>
				<td>
					3000 GB Internal 7200 RPM SATA Drive</td>
			</tr>
			<tr>
				<td>
					Primary storage, shared by all nodes</td>
				<td>
					<br />
					NFS<br />
					&nbsp;</td>
			</tr>
			<tr>
				<td>
					Connection configuration</td>
				<td>
					Mellanox 4x&nbsp;DDR InfiniBand&nbsp;adapters</td>
			</tr>
		
	</table>

<br />  </div>
<div id="node-1490" class="section-3">
  <h1 class="book-heading">Sierra</h1>
  <b>SIERRA</b><br />
	<em>San Diego Supercomputer Center</em><br />
	<br />
	Sierra consists of 84 nodes with dual Intel L5420 processors and 2688 GB of memory. Following are detailed specifications for Sierra.<br />
	<br />
	SPECIFICATIONS<br />
	<br />
	<table border="1" cellpadding="1" cellspacing="1">
		
			<tr>
				<td>
					Machine Type</td>
				<td>
					Cluster</td>
			</tr>
			<tr>
				<td>
					System Type</td>
				<td>
					IBM&nbsp;iDataPlex&nbsp;dx&nbsp;340</td>
			</tr>
			<tr>
				<td>
					CPU type</td>
				<td>
					Intel&nbsp;Xeon&nbsp;L5420</td>
			</tr>
			<tr>
				<td>
					Host Name</td>
				<td>
					sierra</td>
			</tr>
			<tr>
				<td>
					CPU Speed</td>
				<td>
					2.5GHz</td>
			</tr>
			<tr>
				<td>
					Number of CPUs</td>
				<td>
					168</td>
			</tr>
			<tr>
				<td>
					Number of nodes</td>
				<td>
					84</td>
			</tr>
			<tr>
				<td>
					RAM</td>
				<td>
					32 GB&nbsp;DDR2-667</td>
			</tr>
			<tr>
				<td>
					Total RAM (GB)</td>
				<td>
					2688</td>
			</tr>
			<tr>
				<td>
					Number of cores</td>
				<td>
					672</td>
			</tr>
			<tr>
				<td>
					Operating System</td>
				<td>
					Linux</td>
			</tr>
			<tr>
				<td>
					Tflops</td>
				<td>
					7</td>
			</tr>
			<tr>
				<td>
					Disk Size (TB)</td>
				<td>
					72</td>
			</tr>
			<tr>
				<td>
					Hard Drives</td>
				<td>
					160 GB Internal 7200 RPM&nbsp;SATA&nbsp;Drive</td>
			</tr>
			<tr>
				<td>
					Primary storage, shared by all nodes</td>
				<td>
					ZFS filesystem with 76.8 TB raid2 storage and 5.4 TB of raid0 (for scratch)<br />
					&nbsp;</td>
			</tr>
			<tr>
				<td>
					Connection configuration</td>
				<td>
					Mellanox&nbsp;4x&nbsp;DDR&nbsp;InfiniBand&nbsp;adapters<br />
					&nbsp;</td>
			</tr>
		
	</table>

<br />  </div>
<div id="node-1493" class="section-3">
  <h1 class="book-heading">Xray</h1>
  <strong>XRAY&nbsp;</strong>

	<br />
	<em>â€‹Indiana University, Bloomington</em><br />
	<br />
	Xray consists of a single node with AMD OPteron 2378 processor and 1344 GB of memory. Following are detailed specifications for Xray.<br />
	<br />
	SPECIFICATIONS<br />
	<br />
	<table border="1" cellpadding="1" cellspacing="1">
		
			<tr>
				<td>
					Machine Type</td>
				<td>
					Cluster</td>
			</tr>
			<tr>
				<td>
					System Type</td>
				<td>
					Cray XT5m</td>
			</tr>
			<tr>
				<td>
					CPU type</td>
				<td>
					AMD Opteron&nbsp;2378</td>
			</tr>
			<tr>
				<td>
					Host Name</td>
				<td>
					xray</td>
			</tr>
			<tr>
				<td>
					CPU Speed</td>
				<td>
					2.4GHz</td>
			</tr>
			<tr>
				<td>
					Number of CPUs</td>
				<td>
					168</td>
			</tr>
			<tr>
				<td>
					Number of nodes</td>
				<td>
					1</td>
			</tr>
			<tr>
				<td>
					RAM</td>
				<td>
					8 GB DDR2-800</td>
			</tr>
			<tr>
				<td>
					Total RAM (GB)</td>
				<td>
					1344</td>
			</tr>
			<tr>
				<td>
					Number of cores</td>
				<td>
					672</td>
			</tr>
			<tr>
				<td>
					Operating System</td>
				<td>
					Linux</td>
			</tr>
			<tr>
				<td>
					Tflops</td>
				<td>
					6</td>
			</tr>
			<tr>
				<td>
					Disk Size (TB)</td>
				<td>
					335</td>
			</tr>
			<tr>
				<td>
					Hard Drives</td>
				<td>
					6 TB Internal Lustre Storage&nbsp;</td>
			</tr>
			<tr>
				<td>
					Primary storage, shared by all nodes</td>
				<td>
					NFS<br />
					&nbsp;</td>
			</tr>
			<tr>
				<td>
					Connection configuration</td>
				<td>
					Cray SeaStar Interconnect<br />
					&nbsp;</td>
			</tr>
		
	</table>

<br />  </div>
<div id="node-155" class="section-3">
  <h1 class="book-heading">Network</h1>
  <p>The FutureGrid network provides for connectivity among FutureGrid participants, and network access to the Network Impairments Device (NID).&nbsp; Five participants connect through a variety of network providers (see Figure 1).<br />
	&nbsp;</p>

	<img alt="" height="509" src="/sites/default/files/images/FutureGrid%20Logocal%20v3.png" width="833" />
<br />
<em>Figure 1:&nbsp; Diagram of FutureGrid Network</em><br />
&nbsp;<br />
FutureGrid partners with XSEDE to allow participants of each to utilize the resources of both networks. Through interconnects at the Indiana Gigapop, Internet2 and NLR extend access to FutureGrid resources to researchers nationally.<br />
&nbsp;<br />
FutureGrid deployed a Juniper EX8208 at the Core in Chicago&rsquo;s StarLight facility.<br />
<br />

	<img alt="" height="184" src="/sites/default/files/resize/images/Juniper%20EX8208-140x184.png" width="140" />
<br />
<br />
<em>Figure 2: Juniper EX8208</em><br />
&nbsp;
<p>The Juniper EX series provides for Layer2 and Layer3 connectivity.&nbsp; FutureGrid uses the EX to fulfill the network services (i.e., interconnectivity and external connectivity). The EX provides a special feature labeled &lsquo;firewall based forwarding&rsquo;, allowing seamless integration with network impairments.</p>
&nbsp;<br />
GlobalNOC at Indiana University provides network engineering services, and the Operations Center provides email and phone support 24x7. GlobalNOC resources for public wan information can be found at <a href="http://noc.futuregrid.org/">http://noc.futuregrid.org/</a>. Available tools include:<br />
<ul>
	<li>
		<strong><a href="http://noc.futuregrid.org/futuregrid/live-network-status/maps--graphs/futuregrid-atlas.html">FutureGrid Atlas</a>:</strong>&nbsp;View the current level of FutureGrid Network traffic as displayed on a geographical map.</li>
	<li>
		<strong><a href="http://noc.futuregrid.org/futuregrid/live-network-status/traffic-statistics/futuregrid-snapp-trafic-graphs2.html">FutureGrid SNAPP Traffic Graphs</a>:</strong>&nbsp;View high-speed traffic graphs collected at one-minute samples using the Indiana University-developed SNAPP tool. Create custom views of the FutureGrid network and view historic utilization with greater data resolution.</li>
	<li>
		<p><strong><a href="http://noc.futuregrid.org/futuregrid/live-network-status/traffic-statistics/router-proxy3.html">FutureGrid NOC Router Proxy</a>:</strong> Submit show commands to the FutureGrid router.</p>
	</li>
	<li>
		<p><strong><a href="http://noc.futuregrid.org/futuregrid/maps--documentation/maps.html#FutureGrid%20Physical%20Map">FutureGrid Physical Map</a></strong></p>
	</li>
	<li>
		<p><strong><a href="http://noc.futuregrid.org/futuregrid/maps--documentation/maps.html#FutureGrid%20Topology%20Map">FutureGrid Topology Map</a></strong></p>
	</li>
</ul>

	<p>As IPv6 test beds are not available at all FutureGrid partner sites, early implementation of iPv6 would slow important software development work. As a result, current plans call for FutureGrid to continue using IPv4. Any change in plans will be noted here.<br />
		<br />
		Below is further information about networking:<br />
		<br />
		FutureGrid Core: Juniper EX8200<br />
		India; Force10, C-150<br />
		Bravo, Delta, Echo; Force10, S60<br />
		Sierra: Juniper EX4200<br />
		Hotel: EX4200<br />
		Dlamo: Dell PowerConnect 6000 Series<br />
		Xray: Force10, C-150<br />
		foxtrot:<br />
		internal network switch: IBM/BLADE Rack Switch G8000<br />
		public network switch: Force10 S50<br />
		Node NICs: built-in (IBM iDataPlex DX360 M2) dual Intel 82575EB Gigabit Network Connection<br />
		10Gbps: Myricom Myri-10G Dual-Protocol NIC (available on login node)<br />
		Alamo: Dell PowerConnett 6224<br />
		<br />
		Juniper, EX series -&nbsp;<a href="https://www.juniper.net/us/en/products-services/switching/ex-series/Force10" target="_blank">https://www.juniper.net/us/en/products-services/switching/ex-series/Force10</a>&nbsp;(now Dell),<br />
		<br />
		C Series and S Series:<br />
		</p>
	<ul>
		<li>
			<a href="http://www.dell.com/us/enterprise/p/force10-c150/pd" target="_blank">http://www.dell.com/us/enterprise/p/force10-c150/pd</a>&nbsp;</li>
		<li>
			<a href="http://www.dell.com/us/enterprise/p/force10-s60/pd" target="_blank">http://www.dell.com/us/enterprise/p/force10-s60/pd</a></li>
	</ul>
	<p> Dell, PowerConnect -&nbsp;<a href="http://www.dell.com/us/enterprise/p/switch-powerconnect" target="_blank">http://www.dell.com/us/enterprise/p/switch-powerconnect</a><br />
		  IBM (formerly BNT) -&nbsp;<a href="http://www-03.ibm.com/systems/networking/switches/rack.html" target="_blank">http://www-03.ibm.com/systems/networking/switches/rack.html</a><br />
		     &nbsp;<br />
		<br />
		<img alt="" height="546" src="/sites/default/files/u23/futuregrid-physical.png" width="744" /><br />
		<img alt="" height="351" src="/sites/default/files/u23/futuregrid-topology.png" width="531" /><br />
		&nbsp;</p>  <div id="node-1150" class="section-4">
  <h1 class="book-heading">FutureGrid Network Impairments Device (NID)</h1>
  <strong>FutureGrid Network Impairments Device (NID)</strong><br />
<br />
Researchers on FutureGrid may perodically employ the use of a Spirent XGEM, a Network Impairments Emulator.&nbsp; The XGEM allows users to accurately create the delays and impairments that occur over live production networks for validating and evaluating new products and technologies.&nbsp; The XGEM supports a variety of impairments with the most common being delay, packet loss, jitter and re-ordering.<br />
<br />

	<img alt="" height="109" src="/sites/default/files/images/Spirent%20XGEM.png" width="321" />
<br />
<em>Figure 1: Spirent XGEM</em><br />
&nbsp;<br />
The XGEM contains two blades, each with a 10GE interface.&nbsp; Traffic received on one blade is automatically transmitted on the other blade, and vice-versa.&nbsp; This allows the XGEM to be deployed as a pass-through device.&nbsp; Impairments are applied unidirectionally.&nbsp; An identical or different impairment can be applied in either direction, or simultaneously in both directions.<br />
&nbsp;<br />
FutureGrid also utilizes a Juniper EX8208 as the primary network element between all of the FutureGrid participants.&nbsp; Juniper&rsquo;s EX platform contains firewall-based forwarding, which allows us to insert the XGEM between FutureGrid participants with only software changes (see Figure 2).<br />
<br />

	<img alt="" height="509" src="/sites/default/files/images/FutureGrid%20Logocal%20v3.png" width="833" />
<br />
<em>Figure 2.&nbsp; Diagram of FutureGrid Network.</em><br />
&nbsp;<br />
The firewall-based forwarding feature can be configured to forward traffic unidirectionally or bidirectionally through the XGEM using a single IP address or any size subnet.&nbsp; Only traffic defined by the Juniper EX8208 will be impaired, leaving all other traffic between FutureGrid participants unaffected.<br />
&nbsp;<br />
This implementation requires traffic to traverse the FutureGrid Core in order to be impaired.&nbsp; Additional configuration might be required at the participants&#39; individual sites for impairments to occur locally.<br />
&nbsp;  </div>
</div>
<div id="node-2417" class="section-3">
  <h1 class="book-heading">Storage</h1>
  <table cellpadding="4" class="kbtable">
	
		
		
		
		
		
		
		
	
	
		<tr valign="top">
			<th align="left" class="kbtd" id="">
				Clustername(site)</th>
			<th align="left" class="kbtd" id="">
				Mountpoint<code></code></th>
			<th align="left" class="kbtd" id="">
				Size</th>
			<th align="left" class="kbtd" id="">
				Type</th>
			<th align="left" class="kbtd" id="">
				Backups</th>
			<th align="left" class="kbtd" id="">
				Use</th>
			<th align="left" class="kbtd" id="">
				Notes</th>
		</tr>
		<tr valign="top">
			<th align="left" class="kbtd" id="" rowspan="4">
				<a class="kb-link" href="https://portal.futuregrid.org/kb/document/bbns">Sierra</a>(UCSD/SDSC)</th>
			<td align="left" class="kbtd" id="">
				/N/u/<cite>username</cite></td>
			<td align="left" class="kbtd" id="">
				40.6TB</td>
			<td align="left" class="kbtd" id="">
				ZFS (RAID2)</td>
			<td align="left" class="kbtd" id="">
				Yes (nightly incremental)</td>
			<td align="left" class="kbtd" id="">
				Home dir</td>
			<td align="left" class="kbtd" id="" rowspan="4">
				By default, quotas on home directories are 50 GB and quotas on scratch directories are 100 GB.</td>
		</tr>
		<tr valign="top">
			<td align="left" class="kbtd" id="">
				/N/scratch/<cite>username</cite></td>
			<td align="left" class="kbtd" id="">
				5.44TB</td>
			<td align="left" class="kbtd" id="">
				ZFS (RAID0)</td>
			<td align="left" class="kbtd" id="">
				No</td>
			<td align="left" class="kbtd" id="">
				Scratch</td>
		</tr>
		<tr valign="top">
			<td align="left" class="kbtd" id="">
				/N/soft</td>
			<td align="left" class="kbtd" id="">
				50GB</td>
			<td align="left" class="kbtd" id="">
				ZFS (RAID2)</td>
			<td align="left" class="kbtd" id="">
				Yes (nightly incremental)</td>
			<td align="left" class="kbtd" id="">
				Software installs</td>
		</tr>
		<tr valign="top">
			<td align="left" class="kbtd" id="">
				/N/images</td>
			<td align="left" class="kbtd" id="">
				6TB</td>
			<td align="left" class="kbtd" id="">
				ZFS (RAID2)</td>
			<td align="left" class="kbtd" id="">
				Yes (nightly incremental)</td>
			<td align="left" class="kbtd" id="">
				VM images</td>
		</tr>
		<tr valign="top">
			<th align="left" class="kbtd" id="" rowspan="3">
				<a class="kb-link" href="https://portal.futuregrid.org/kb/document/bbms">India (IU)</a></th>
			<td align="left" class="kbtd" id="">
				/N/u/<cite>username</cite></td>
			<td align="left" class="kbtd" id="">
				15TB</td>
			<td align="left" class="kbtd" id="">
				NFS (RAID5)</td>
			<td align="left" class="kbtd" id="">
				Yes (nightly incremental)</td>
			<td align="left" class="kbtd" id="">
				Home dir</td>
			<td align="left" class="kbtd" id="" rowspan="3">
				At the moment, we do not have any quota implemented on India and we use the local/tmp (77 GB) as scratch space.</td>
		</tr>
		<tr valign="top">
			<td align="left" class="kbtd" id="">
				/share/project</td>
			<td align="left" class="kbtd" id="">
				14TB</td>
			<td align="left" class="kbtd" id="">
				NFS (RAID5)</td>
			<td align="left" class="kbtd" id="">
				Yes (nightly incremental)</td>
			<td align="left" class="kbtd" id="">
				Shared/group folders</td>
		</tr>
		<tr valign="top">
			<td align="left" class="kbtd" id="">
				/tmp</td>
			<td align="left" class="kbtd" id="">
				77GB</td>
			<td align="left" class="kbtd" id="">
				local disk</td>
			<td align="left" class="kbtd" id="">
				No</td>
			<td align="left" class="kbtd" id="">
				Scratch</td>
		</tr>
		<tr valign="top">
			<th align="left" class="kbtd" id="" rowspan="2">
				<a class="kb-link" href="https://portal.futuregrid.org/kb/document/bcao">Bravo</a> (IU)</th>
			<td align="left" class="kbtd" id="">
				/N/u/<cite>username</cite></td>
			<td align="left" class="kbtd" id="">
				15TB</td>
			<td align="left" class="kbtd" id="">
				NFS (RAID5)</td>
			<td align="left" class="kbtd" id="">
				Yes (nightly incremental)</td>
			<td align="left" class="kbtd" id="">
				Home dir</td>
			<td align="left" class="kbtd" id="" rowspan="2">
				The same NFS shares in India are mounted in Bravo (users do not log in here; jobs are submitted through India). There are two local partitions, which are used for HDFS and swift tests.</td>
		</tr>
		<tr valign="top">
			<td align="left" class="kbtd" id="">
				/share/project</td>
			<td align="left" class="kbtd" id="">
				14TB</td>
			<td align="left" class="kbtd" id="">
				NFS (RAID5)</td>
			<td align="left" class="kbtd" id="">
				Yes (nightly incremental)</td>
			<td align="left" class="kbtd" id="">
				Shared/group folders</td>
		</tr>
		<tr valign="top">
			<th align="left" class="kbtd" id="" rowspan="2">
				<a class="kb-link" href="https://portal.futuregrid.org/kb/document/bcaj">Delta</a> (IU)</th>
			<td align="left" class="kbtd" id="">
				/N/u/<cite>username</cite></td>
			<td align="left" class="kbtd" id="">
				15TB</td>
			<td align="left" class="kbtd" id="">
				NFS (RAID5)</td>
			<td align="left" class="kbtd" id="">
				Yes (nightly incremental)</td>
			<td align="left" class="kbtd" id="">
				Home dir</td>
			<td align="left" class="kbtd" id="" rowspan="2">
				Same as Bravo. The NFS shares are mounted for user and group share (users do not log in directly here; jobs are submitted through India).</td>
		</tr>
		<tr valign="top">
			<td align="left" class="kbtd" id="">
				/share/project</td>
			<td align="left" class="kbtd" id="">
				14TB</td>
			<td align="left" class="kbtd" id="">
				NFS (RAID5)</td>
			<td align="left" class="kbtd" id="">
				Yes (nightly incremental)</td>
			<td align="left" class="kbtd" id="">
				Shared/group folders</td>
		</tr>
		<tr valign="top">
			<th align="left" class="kbtd" id="" rowspan="5">
				Hotel (UC)</th>
			<td align="left" class="kbtd" id="">
				/gpfs/home</td>
			<td align="left" class="kbtd" id="">
				15TB</td>
			<td align="left" class="kbtd" id="">
				GPFS (RAID6)</td>
			<td align="left" class="kbtd" id="">
				No</td>
			<td align="left" class="kbtd" id="">
				Home dir</td>
			<td align="left" class="kbtd" id="" rowspan="5">
				By default, quotas on home directories are 10 GB.</td>
		</tr>
		<tr valign="top">
			<td align="left" class="kbtd" id="">
				/gpfs/scratch</td>
			<td align="left" class="kbtd" id="">
				57TB</td>
			<td align="left" class="kbtd" id="">
				GPFS (RAID6)</td>
			<td align="left" class="kbtd" id="">
				No</td>
			<td align="left" class="kbtd" id="">
				Scratch</td>
		</tr>
		<tr valign="top">
			<td align="left" class="kbtd" id="">
				/gpfs/software</td>
			<td align="left" class="kbtd" id="">
				7.1GB</td>
			<td align="left" class="kbtd" id="">
				GPFS (RAID6)</td>
			<td align="left" class="kbtd" id="">
				No</td>
			<td align="left" class="kbtd" id="">
				Software installs</td>
		</tr>
		<tr valign="top">
			<td align="left" class="kbtd" id="">
				/gpfs/images</td>
			<td align="left" class="kbtd" id="">
				7.1TB</td>
			<td align="left" class="kbtd" id="">
				GPFS (RAID6)</td>
			<td align="left" class="kbtd" id="">
				No</td>
			<td align="left" class="kbtd" id="">
				VM images</td>
		</tr>
		<tr valign="top">
			<td align="left" class="kbtd" id="">
				/scratch/local</td>
			<td align="left" class="kbtd" id="">
				862GB</td>
			<td align="left" class="kbtd" id="">
				ext3 (local disk)</td>
			<td align="left" class="kbtd" id="">
				No</td>
			<td align="left" class="kbtd" id="">
				Local scratch</td>
		</tr>
		<tr valign="top">
			<th align="left" class="kbtd" id="">
				Foxtrot (UFL)</th>
			<td align="left" class="kbtd" id="">
				/N/u/<cite>username</cite></td>
			<td align="left" class="kbtd" id="">
				16TiB</td>
			<td align="left" class="kbtd" id="">
				NFS (RAID5)</td>
			<td align="left" class="kbtd" id="">
				No</td>
			<td align="left" class="kbtd" id="">
				Home dir</td>
			<td align="left" class="kbtd" id="">
				At the moment, we do not have any quota implemented on Foxtrot.</td>
		</tr>
	
</table>  <div id="node-1414" class="section-4">
  <h1 class="book-heading">Using HPSS from FutureGrid</h1>
  <p><strong>Note</strong>: FutureGrid does not provide an HPSS server. The HSI is used to access IU&#39;s HPSS service from INDIA. This is available only for IU faculty, staff, and students.</p>
<p>Through the <a href="http://rc.uits.iu.edu/storage/sda">SDA</a> (formerly known as MDSS) service, IU provides distributed storage service to faculty, staff, and graduate students. The <a href="http://rc.uits.iu.edu/storage/hsi">HSI</a> (Hierarchical Storage Interface) client is available in INDIA. To use the HSI client:</p>
<ul>
<li>
		First, activate your SDA account. Detailed instructions are available at IU&#39;s <a href="http://rc.uits.iu.edu/storage/mdss-starter-kit">MDSS Service Starter Kit</a> page.</li>
<li>
		Then, from INDIA, load the HSI module as follows:</li>
</ul>
<pre>
$ module load hsi
hsi version 3.5.3 loaded
</pre><ul>
<li>
		Connect to the SDA:</li>
</ul>
<pre>
$ hsi -A combo
Principal: your_iu_userid&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;
[youriuid]Password:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;
Username: your_iu_userid&nbsp; UID: 1122636&nbsp; Acct: 1122636(1122636) Copies: 1 Firewall: off [hsi.3.5.3 Fri Nov 20 10:01:25 EST 2009]
?</pre><p><strong>Note: </strong>Your Principal is your IU Network ID, and your password is the IU passphrase.</p>
<ul>
<li>
		Enable firewall mode; otherwise, you will receive this error:</p>
<pre wrap="">
put: Error -5 on transfer</pre></li>
</ul>
<pre>
? firewall -on
A: firewall mode set ON, I/O mode set to extended (parallel=off), autoscheduling currently set to OFF</pre><ul>
<li>
		List local folder:</li>
</ul>
<pre>
 ? lls
testfile.txt</pre><ul>
<li>
		List the current directory in HPSS:</li>
</ul>
<pre>
? pwd
pwd0: /hpss/pathtoyouriuusername</pre><ul>
<li>
		For transferring files (<em>put</em> and <em>get</em>), search the <a href="http://kb.iu.edu/?search=hsi">IU Knowledge Base</a>.</li>
</ul>
<p></p>
  </div>
</div>
</div>
<div id="node-112" class="section-2">
  <h1 class="book-heading">Status</h1>
  <h3>System Status</h3>
<blockquote><p>Please note that the information on this page <span style="color: rgb(255, 0, 0);">is not 100% accurate</span> as it is maintained by hand. However, dynamic monitoring tools are available and can be consulted for more details.</p>
<p>&nbsp;</p>
</blockquote>
<h3>Ongoing outages</h3>
<blockquote><p>The <strong><span style="color: rgb(255, 0, 0);">first Tuesday of each month</span></strong> is the standard maintenance window.</p>
<div class="views_view view view-active-outage-list view-id-active_outage_list view-display-id-default view-dom-id-5">
<div class="views-admin-links views-hide">
<ul class="links">
<li class="0 edit first"><a href="/admin/build/views/edit/active_outage_list?destination=book%2Fexport%2Fhtml%2F104#views-tab-default">Edit</a></li>
<li class="1 export"><a href="/admin/build/views/export/active_outage_list">Export</a></li>
<li class="2 clone last"><a href="/admin/build/views/clone/active_outage_list">Clone</a></li>
</ul>
</div>
<div class="view-content">
<table class="views-table cols-8">
<thead>
<tr>
<th class="views-field views-field-field-outage-status-value">
          Status        </th>
<th class="views-field views-field-field-outage-type-value">
          Type        </th>
<th class="views-field views-field-title">
          Title        </th>
<th class="views-field views-field-field-outage-system-value">
          Impacted Systems        </th>
<th class="views-field views-field-field-outage-start-value">
          Start of Outage        </th>
<th class="views-field views-field-field-outage-end-value">
          Anticipated End of Outage        </th>
<th class="views-field views-field-field-outage-resolution-value">
          Resolution        </th>
<th class="views-field views-field-edit-node">
          Edit link        </th>
</tr>
</thead>
<tbody>
<tr class="odd views-row-first">
<td class="views-field views-field-field-outage-status-value">
            Ongoing          </td>
<td class="views-field views-field-field-outage-type-value">
            Software System          </td>
<td class="views-field views-field-title">
            <a href="/outages/130514/bravo-reserved-6-weeks">Bravo is reserved in 6 weeks</a>          </td>
<td class="views-field views-field-field-outage-system-value">
            other          </td>
<td class="views-field views-field-field-outage-start-value">
            <span class="date-display-single">Tue, 14 May 2013, 17:00 EDT</span>          </td>
<td class="views-field views-field-field-outage-end-value">
                      </td>
<td class="views-field views-field-field-outage-resolution-value">
                      </td>
<td class="views-field views-field-edit-node">
            <a href="/node/2513/edit?destination=book%2Fexport%2Fhtml%2F104">edit</a>          </td>
</tr>
<tr class="even views-row-last">
<td class="views-field views-field-field-outage-status-value">
            Planned          </td>
<td class="views-field views-field-field-outage-type-value">
            Software System          </td>
<td class="views-field views-field-title">
            <a href="/outages/120901/eucalyptus-gui-not-available">Eucalyptus GUI not available</a>          </td>
<td class="views-field views-field-field-outage-system-value">
            india          </td>
<td class="views-field views-field-field-outage-start-value">
            <span class="date-display-single">Sat, 01 Sep 2012 (All day)</span>          </td>
<td class="views-field views-field-field-outage-end-value">
            <span class="date-display-single">Fri, 05 Oct 2012 (All day)</span>          </td>
<td class="views-field views-field-field-outage-resolution-value">
                      </td>
<td class="views-field views-field-edit-node">
            <a href="/node/2226/edit?destination=book%2Fexport%2Fhtml%2F104">edit</a>          </td>
</tr>
</tbody>
</table>
</div>
</div>
<!-- /.view --><!-- /.view --></blockquote>
<p>You can find a list of previous outages <a href="/outages_all">here</a> including an <a href="/feeds/fg_outages_all_rss.xml">RSS</a> feed.</p>
<h3>
	&nbsp;</h3>
<table align="left" border="0" cellpadding="1" cellspacing="1" style="width: 100%; ">
<tbody>
<tr>
<td style="vertical-align: top; width: 33%; text-align: left; ">
<h3>System configuration</h3>
<blockquote><p>The system is configured at this time using either&nbsp;HPC, Nimbus, or Eucalyptus services. The distribution used at this time can be found&nbsp;<a href="http://inca.futuregrid.org:8080/inca/jsp/partitionTable.jsp">here</a>&nbsp;and&nbsp;<a href="http://inca.futuregrid.org:8080/inca/jsp/status.jsp?suiteNames=Info&amp;xsl=info.xsl">here</a>.</p></blockquote>
<blockquote><p><a href="http://inca.futuregrid.org:8080/inca/jsp/partitionTable.jsp"><img alt="" src="/sites/default/files/images/status_incapart.PNG" style="width: 175px; height: 117px; border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; " /></a></p></blockquote>
</td>
<td style="vertical-align: top; width: 33%; text-align: left; ">
<h3>Status of&nbsp;FutureGrid&nbsp;services</h3>
<blockquote><p>Lists the status of keyFutureGrid&nbsp;services (e.g.,&nbsp;SSH, Nimbus, Eucalyptus) in a sortable table.</p></blockquote>
<blockquote><p><a href="http://inca.futuregrid.org:8080/inca/jsp/status.jsp?queryNames=Health&amp;xsl=table.xsl&amp;resourceIds=FutureGrid"><img alt="" src="/sites/default/files/ScreenSnapz.jpg" style="border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; width: 100px; height: 146px; " /></a></p></blockquote>
</td>
<td style="width: 33%; text-align: left; vertical-align: top; ">
<h3>Cluster Monitoring</h3>
<blockquote><p>Ganglia:<br />
					<br class="Apple-interchange-newline" /><br />
					<a href="http://ganglia.futuregrid.org"><img alt="" src="/sites/default/files/ganglia.png" style="width: 180px; border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; " /></a></p>
<p>
					&nbsp;</p></blockquote>
</td>
</tr>
<tr>
<td style="width: 33%; text-align: left; vertical-align: top; ">
<h3>Network Status</h3>
<blockquote><p>The network status can be viewed via the&nbsp;<a href="http://noc.futuregrid.org">FutureGrid&nbsp;Network Operations Center page</a>. &nbsp;Upcoming network events are maintained on the&nbsp;<a href="http://noc.futuregrid.org/futuregrid/support/operations-calendar3.html" style="text-decoration: none; ">Network Operations Calendar</a>.</p></blockquote>
<blockquote><p><a href="http://noc.futuregrid.org"><img alt="" src="/sites/default/files/images/large_status_nocmap.PNG" style="width: 180px; height: 180px; border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; " /></a></p>
</blockquote>
</td>
<td style="text-align: left; vertical-align: top; ">
<h3>Software Status</h3>
<blockquote><p>The operational status of&nbsp;FutureGrid&nbsp;machines are continuously monitored via a number of tools. To view some of the contents, please visit&nbsp;<a href="http://inca.futuregrid.org" title="http://inca.futuregrid.org">http://inca.futuregrid.org</a></p>
<p>&nbsp;</p>
<p><a href="http://inca.futuregrid.org"><img alt="" src="/sites/default/files/u23/Screen shot 2011-01-14 at 7.48.06 PM.png" style="width: 176px; height: 179px; border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; " /></a></p>
</blockquote>
</td>
<td style="text-align: left; vertical-align: top; ">
<h3>Cloud Status</h3>
<p class="rteindent1"><a href="https://portal.futuregrid.org/monitoring/cloud">Here</a>&nbsp;you will find information about how&nbsp;FG&nbsp;cloud services are currently used.</p>
<blockquote><p><a href="https://portal.futuregrid.org/monitoring/cloud" style="text-decoration: none; "><img alt="" src="/sites/default/files/u23/Screen shot 2011-04-07 at 3.23.05 PM.png" style="border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; width: 175px; height: 159px; " /></a></p>
<p>
					&nbsp;</p></blockquote>
</td>
</tr>
<tr>
<td style="text-align: left; vertical-align: top; ">
<h3>FutureGrid Cloud Metrics</h3>
<blockquote><p>Metric system provides an integrated accounting service to view cloud usage statistics and graphs regarding the utilization of virtual machine (VM) instances.<br />
					<a href="https://portal.futuregrid.org/metrics"><img alt="" src="/sites/default/files/screenshot-for-status-small.png" style="width: 200px; height: 210px; " /></a></p></blockquote>
</td>
<td style="vertical-align: top; text-align: left; ">
<h3>System software version info</h3>
<blockquote><p>The version info of the installed system software across all&nbsp;FG&nbsp;sites:<br />
					<a href="http://inca.futuregrid.org:8080/inca/HTML/rest/HPC/FutureGrid"><img alt="" src="/sites/default/files/fg-sys-sw-ver.PNG" style="width: 175px; height: 75px; " /></a></p></blockquote>
</td>
<td style="text-align: left; vertical-align: top; ">
<h3>Nimbus Usage Reports</h3>
<p class="rteindent1" style="margin-top: 0.5em; margin-bottom: 0.9em; "><a href="http://inca.futuregrid.org/nimbus-stats">Displays</a>&nbsp;weekly usage graphs of each of the&nbsp;FutureGrid&nbsp;Nimbus deployments.</p>
<blockquote><p><a href="http://inca.futuregrid.org/nimbus-stats" style="text-decoration: none; "><img alt="" src="/sites/default/files/u15/nimbus-usage.png" style="border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; width: 200px; height: 150px; " /></a></p></blockquote>
</td>
</tr>
</tbody>
</table>
<h3>&nbsp;</h3>
<h3 style="padding-bottom: 5px; margin-top: 10px; margin-right: 0px; margin-bottom: 10px; margin-left: 0px; line-height: 17px; font-size: 14px; ">&nbsp;</h3>
<h3>&nbsp;</h3>
<h3>&nbsp;</h3>
<blockquote><p>
	&nbsp;</p></blockquote>
  </div>
<div id="node-2155" class="section-2">
  <h1 class="book-heading">Accessing FutureGrid resources via SSH</h1>
  <p><span style="color:#ff0000;">To properly view this manual page, please log into the FutureGrid portal with your FutureGrid name.</span></p>
<p>To access the various FutureGrid resources, you need to provide a public ssh key to FutureGrid. In this manual, we explain how to generate a ssh key, upload it to the FutureGrid portal and log onto the resources. This manual covers both UNIX and Windows Users.</p>
<h1>Requirement for Windows Users</h1>
<p>Windows users need to have some special software to be able to use the SSH commands. We recommend you use Cygwin (Linux-like environment for Windows) because it will ease your experience with FutureGrid. We have prepared a Cygwin version that is ready to use (If for some reason you decide to download and install Cygwin from the official site, remember that you need to install the ssh packages).</p>
<ol>
<li>Download Cygwin from our Portal&nbsp;<a href="https://portal.futuregrid.org/sites/default/files/cygwin.zip">https://portal.futuregrid.org/sites/default/files/cygwin.zip</a>.</li>
<li>Uncompress the file.</li>
<li>Execute the file the &#39;Windows Batch File&#39; called Cygwin.bat
<p>		<img alt="" src="/sites/default/files/u30/cygwim1.png" style="width: 605px; height: 338px;" /><br />
		&nbsp;</li>
<li>You may get a warning. Click in the Run button
<p>		<img alt="" src="/sites/default/files/u30/cygwin2.png" style="width: 414px; height: 310px;" /><br />
		&nbsp;</li>
<li>You get a Linux-like terminal that will allow you to continue with this manual.
<p>		<img alt="" src="/sites/default/files/u30/cygwinfirst.png" style="width: 562px; height: 302px;" /><br />
		&nbsp;</li>
</ol>
<p><strong>NOTE</strong>: When showing examples of commands, the $ symbol precedes the actual command. So, the other lines are the output obtained after executing the command.</p>
<h1>Instructions for both Windows and Unix users</h1>
<h2>Generate SSH key</h2>
<div>
<p>Use the tool ssh-keygen. This program is commonly available on most UNIX systems (this includes Cygwin). It will ask you for the location and name of the new key. It will also ask you for a passphrase, we <strong><span style="color:#ff0000;">STRONGLY RECOMMEND</span></strong> that you use a passphrase. We have seem advise by teachers and teachin assistants to not use passphrases: this is <strong><span style="color:#ff0000;">WRONG</span></strong>. If you are not using a pasphrase and someone were to steal your private key they have easily access to your account. We recommend using the default location ~/.ssh/ and the default name id_rsa. A sample session:</p>
<pre style="margin-left: 0.5in;">$ ssh-keygen

Generating public/private rsa key pair.
Enter file in which to save the key (/home/Javi/.ssh/id_rsa): 
Enter passphrase (empty for no passphrase):
Enter same passphrase again:
Your identification has been saved in /home/Javi/.ssh/id_rsa
Your public key has been saved in /home/Javi/.ssh/id_rsa.pub.
The key fingerprint is:
90:46:9b:cf:09:16:94:17:df:43:f4:99:97:0d:42:4a Javi@Javi-PC
The key&#39;s randomart image is:</pre><pre style="margin-left: 0.5in;">+--[ RSA 2048]----+
|     .+...Eo= .&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  |
|     ..=.o + o +o&nbsp;&nbsp;&nbsp; |
|      O.  o o +.o&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |
|     o = .   . .&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |
|        S &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;       |
|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                 |
|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                 |
|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |
|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                 |
+-----------------+</pre><p>
		This command requires the interaction of the user.</p>
<p>		&nbsp; &nbsp; 1. The first question is:</p>
<pre class="rteindent1">Enter file in which to save the key (/home/Javi/.ssh/id_rsa): </pre><div class="rteindent1">We recommend you use the default. To do so, just press the enter key. In case you already have a ssh key in your machine, you can skip this whole section or use a different file name.</div>
<div>
		&nbsp; &nbsp; 2. The second and third question is to protect your ssh key with a passphrase. This password will protect your key because you need to type it when you want to use it. Thus, you can either type a passphrase or press enter to leave it without passphrase. To avoid security problems, we DO recommend that chose a passphrase as discussed previously. Make sure to not just type return for an empty passphrase.</div>
</div>
<pre style="margin-left: 0.5in;">Enter passphrase (empty for no passphrase):</pre><p style="margin-left: 0.5in;">and</p>
<pre style="margin-left: 0.5in;">Enter same passphrase again:</pre><div>
	&nbsp;</div>
<h2>Check your ssh key</h2>
<p>Once, you have generated your key, you should have them in the .ssh directory</p>
<pre class="rteindent1">$ ls -l ~/.ssh</pre><h2>Copy the content of your public key</h2>
<p>You need to copy the content of your public key to upload it to the portal. A sample asumming that you used the default options during the key generation:</p>
<pre>$ cat ~/.ssh/id_rsa.pub

ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCXJH2iG2FMHqC6T/U7uB8kt6KlRh4kUOjgw9sc4Uu+Uwe/EwD0wk6CBQMB+HKb9upvCRW/851UyRUagtlQexCRM2rMCi0VvhTVZhj61pTdhyl1t8hlkoL19JVnVBPP5kIN3wVyNAJjYBrAUNW4dXKXtmfkXp98T3OW4mxAtTH434MaT+QcPTcxims/hwsUeDAVKZY7UgZhEbiExxkejtnRBHTipi0W03W05TOUGRW7EuKf/4ftNVPilCO4DpfY44NFG1xPwHeimUk+t9h48pBQj16FrUCp0rS02Pj+4/9dNeS1kmNJu5ZYS8HVRhvuoTXuAY/UVcynEPUegkp+qYnR Javi@Javi-PC</pre><div>Go ahead and select the ouptut, right click, and copy</p>
<pre>$ cat ~/.ssh/id_rsa.pub
<span style="background-color: rgb(211, 211, 211);">
ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCXJH2iG2FMHqC6T/U7uB8kt6KlRh4kUOjgw9sc4Uu+Uwe/EwD0wk6CBQMB+HKb9upvCRW/851UyRUagtlQexCRM2rMCi0VvhTVZhj61pTdhyl1t8hlkoL19JVnVBPP5kIN3wVyNAJjYBrAUNW4dXKXtmfkXp98T3OW4mxAtTH434MaT+QcPTcxims/hwsUeDAVKZY7UgZhEbiExxkejtnRBHTipi0W03W05TOUGRW7EuKf/4ftNVPilCO4DpfY44NFG1xPwHeimUk+t9h48pBQj16FrUCp0rS02Pj+4/9dNeS1kmNJu5ZYS8HVRhvuoTXuAY/UVcynEPUegkp+qYnR</span><span style="background-color: rgb(211, 211, 211);"> Javi@Javi-PC</span></pre></div>
<h2>Upload the key to the FutureGrid Portal</h2>
<p>Click on the button bellow to add your SSH key (Note: The quick link button below only works if you are logged in before visiting this page. Otherwise please make sure you login first and REFRESH this page.)<br />
<a href="https://portal.futuregrid.org/user/23/ssh-keys" target="\&quot;_blank\&quot;"><img alt="" height="102" src="/sites/default/files/u23/register-sshkey.png" style="width: 298px; height: 102px;" width="298" /></a></p>
<ol style="">
<li>If you were logged into the Portal, this button redirects you to a page that includes a link Add a public key.</li>
<li>Otherwise, this button redirects you to the login page.
<ol>
<li>Log into the portal
<p>				<img alt="" src="/sites/default/files/u30/portalLogin_0.png" style="width: 592px; height: 290px;" /><br />
				&nbsp;</li>
<li>Click in the &quot;ssh key&quot; button
<p>				<img alt="" src="/sites/default/files/u30/portalsshkey.png" style="width: 592px; height: 221px;" /><br />
				&nbsp;</li>
</ol>
</li>
<li>Click in the &quot;add a public key&quot; link.
<p>		<img alt="" src="/sites/default/files/u30/portalclikaddkey_0.png" style="width: 592px; height: 343px;" /><br />
		&nbsp;</li>
<li>Paste your ssh key into the box marked Key.
<p>		<img alt="" src="/sites/default/files/u30/portalkeypaste_0.png" style="width: 593px; height: 339px;" /><br />
		&nbsp;</li>
<li>Click the submit button.</li>
</ol>
<ul>
<li><strong><span style="background-color: rgb(255, 255, 0);">IMPORTANT</span></strong>:
<ul>
<li>Leave the Title field blank.</li>
<li>Make sure that when you paste your key, it does not contain newlines or carriage returns that may have been introduced by incorrect pasting and copying. If so, please remove them.</li>
</ul>
</li>
</ul>
<p>At this point you are all set. However you will still need to wait till all accounts have been set up to use the resources. Please, check your email for further updates. You can also refresh this page and see if the boxes in your account status information are all green. Than you can continue.</p>
<p></p>
<h2>Testing your ssh key</h2>
<p>Test you key by logging onto India. India cluster gets the new ssh key updated almost immediately. For other clusters like Hotel, it can take around 10 minutes to update the ssh keys. If you are viewing this page anonymously, please replace &lt;USER&gt; with your FutureGrid user name (the one used to log into the Portal).</p>
<p>If you placed the ssh key in the default location:</p>
<pre>$ ssh -A gvonlasz@india.futuregrid.org</pre><p>If you used a different path or name for your key:</p>
<pre>$ ssh -A -i &lt;path to private key&gt; <a href="mailto:gvonlasz@india.futuregrid.org">gvonlasz@india.futuregrid.org</a> </pre><div>
	The first time you ssh into a machine you will see a message like the one shown in the picture. You have to type yes and press enter:</div>
<pre></pre><div>
	<strong>Note</strong>: the presence of the -A argument above is required for Nimbus tutorials.</div>
<p></p>
<div><strong>Note 1</strong>: If you are asked for a password when trying to ssh onto Hotel, do <strong>NOT</strong> type any password. This means that your ssh key is not updated yet. You need to wait a bit more.</div>
<p></p>
<h2>Testing your ssh key on Hotel</h2>
<p>After uploading your ssh key, it can take around 10 minutes to update the ssh keys of Hotel. So, if you were able to log onto India, you have set up properly your ssh key. So, after a while you will be able to log onto Hotel.&nbsp; If you are viewing this page anonymously, Please replace &lt;USER&gt; with your FutureGrid user name (the one used to log into the Portal).</p>
<p>If you placed the ssh key in the default location:</p>
<pre>$ ssh -A gvonlasz@hotel.futuregrid.org</pre><p>If you used a different path or name for your key:</p>
<pre>$ ssh -A -i &lt;path to private key&gt; <a href="mailto:gvonlasz@hotel.futuregrid.org">gvonlasz@hotel.futuregrid.org</a> </pre><div></p>
<div>The first time you ssh into a machine you will see a message like this:</div>
<pre>The authenticity of host &#39;hotel.futuregrid.org (149.165.148.5)&#39; can&#39;t be established.
RSA key fingerprint is f8:96:15:b7:21:eb:64:92:6c:de:e0:79:f3:fb:86:dd.
Are you sure you want to continue connecting (yes/no)? yes </pre></div>
<div><strong>Note</strong>: the presence of the -A argument above is required for Nimbus tutorials.</div>
<p></p>
<div><strong>Note 1</strong>: If you are asked for a password when trying to ssh onto Hotel, do&nbsp;<strong>NOT</strong>&nbsp;type any password. This means that your ssh key is not updated yet. You need to wait a bit more.</div>
<div>&nbsp;</div>
  </div>
<div id="node-159" class="section-2">
  <h1 class="book-heading">HPC Services</h1>
    <div id="node-1101" class="section-3">
  <h1 class="book-heading">Using HPC Services on FutureGrid</h1>
  <h2>
	Accessing Systems</h2>
Several of the clusters that are part of FutureGrid have partitions that operate as High Performance Computing (HPC) systems. These partitions are batch scheduled, are not virtualized, have computer nodes with fixed operating systems, and are suitable for running parallel applications. FutureGrid provides a <a href="http://inca.futuregrid.org:8080/inca/jsp/partitionTable.jsp">list of HPC partitions</a> that currently consists of nodes on Alamo, Hotel, India, Sierra, and Xray.<br />
<br />
To access the FutureGrid HPC partitions, you need a FutureGrid account and an SSH public key you have uploaded to FutureGrid (this process is described on our <a href="https://portal.futuregrid.org/gettingstarted">Getting Started page</a>). You can then simply ssh to the login node of the FutureGrid system you would like to use. These login nodes are named <em>&lt;system&gt;.futuregrid.org</em>, specifically:
<ul>
	<li>
		alamo.futuregrid.org</li>
	<li>
		bravo.futuregrid.org</li>
	<li>
		hotel.futuregrid.org</li>
	<li>
		india.futuregrid.org</li>
	<li>
		sierra.futuregrid.org</li>
	<li>
		xray.futuregrid.org</li>
</ul>
If your FutureGrid username is different from your username on your system, you will need to include it in your ssh command: <em>ssh &lt;futuregrid user name&gt;@&lt;system&gt;.futuregrid.org</em>. You can find out your HPC account name by visiting your Portal account page.<br />
<br />
<h2>
	Filesystem Layout</h2>
<ul>
	<li>
		<em>Home</em> ($HOME) directories are located at <em>/N/u/&lt;username&gt;</em>, with automated nightly backups. This is where users are encouraged to keep source files, configuration files and executables. Users should not run code from their $HOME directories. Please note that this is an NFS file system, and may result in slower access for some applications.<br />
		&nbsp;</li>
	<li>
		<em>Scratch</em> directories are located at different locations on the systems. To find out more about the file layout, please see <a href="http://portal.futuregrid.org/kb/document/bcgv">Storage information for FutureGrid hardware.</a><br />
		&nbsp;</li>
	<li>
		<em>System software</em> directories are located at<em> /N/soft,</em> with automated nightly backups. System and community software are typically installed here.</li>
</ul>
<h2>
	Modules</h2>
Resources in the FutureGrid HPC partitions have the Modules utility to let you dynamically control your environment. Modules allows you to load and unload packages and ensure a coherent working environment. The most basic Modules commands let you add and remove packages from your environment:
<pre>
module load &lt;package name&gt;/&lt;optional package version&gt;
module unload &lt;package name&gt;/&lt;optional package version&gt;</pre>
<p>To display the list of available modules:</p>
<pre>
module avail</pre>
<p>To display the list of currently loaded modules:</p>
<pre>
module list</pre>
<p>It is very important to make sure the proper modules are loaded in the environment before you try to use FutureGrid HPC partitions. This ensures that your $PATH, $LD_LIBRARY_PATH, $LD_PRELOAD and other environment variables are properly set and that you can access the programs and libraries you need. Additional information about the Modules utility is available via &#39;man module&#39; on any FutureGrid login node.<br />
	&nbsp;</p>
<h2>
	Managing Applications with Torque</h2>
To run any jobs on resources within FutureGrid&nbsp;HPC&nbsp;partitions (single core, OpenMP or MPI&nbsp;jobs), users must use the job scheduler and a job submission script. Users should NOT run jobs on the login or headnodes. On FutureGrid machines, the job scheduler is the Torque (a variant of PBS). To load torque into your environment, execute:<br />
<pre>
-bash-3.2$ module load torque</pre>
<br />
To run a serial job, you start by creating a job submission script that both describes your job and will be executed on the compute nodes by Torque. An example of a job script for India, Sierra, and Alamo that runs <em>/bin/hostname</em> is:<br />
<br />
<pre>
#!/bin/bash

#PBS -N hostname_test
#PBS -o hostname.out
#PBS -e hostname.err
#PBS -q short
#PBS -l nodes=1
#PBS -l walltime=00:20:00

/bin/hostname
</pre>
Options are passed to Torque on lines that begin with #PBS. The options above are:
<ul>
	<li>
		-N: An optional job name</li>
	<li>
		-o: The name of the file to write stdout to</li>
	<li>
		-e: The name of the file to write stderr to</li>
	<li>
		-q: The queue to submit the job to</li>
	<li>
		-l: The resources needed by the job (in the case above, 1 node for 20 minutes)</li>
</ul>
Additional information about the options that can be specified in a submit script is available in the qsub manual page via &#39;man qsub&#39;. Note that there are multiple queues available on each FutureGrid system:<br />

	<ul>
		<li>
			Alamo: short, long, default</li>
		<li>
			Hotel: extended, batch, long and route</li>
		<li>
			India: scalemp, batch, long and b534</li>
		<li>
			Sierra: batch and long</li>
		<li>
			Xray: batch</li>
	</ul>
	You can find information (such as limits) that will help you select which queue to use by running qstat -q on the login node for the system you are interested in.
	<p>Once you have created a submission script, you can then use the Torque qsub command to submit this job to be executed on the compute nodes:</p>
	<pre>
-bash-3.2$ qsub ring.sh
19095.master1.cm.cluster</pre>
	The qsub command outputs either a job identifier or an error message describing why Torque would not accept your job. If your job is submitted successfully, you can track its execution using the qstat command:
	<pre>
-bash-3.2$ qstat
Job id                    Name             User            Time Use S Queue
------------------------- ---------------- --------------- -------- - -----
...
19095.master1             hostname_test    user            00:00:00 R short
...
</pre>
	If the system is busy, your job will initially be queued (Q) waiting for resources to become available. It will then be in the running state (R), and finally it will complete and not be visible in the qstat output. The full set of Torque job states is provided in the qstat manual page via man qstat on a FutureGrid login node. The stdout and stderr from your job will be placed in the files you specified in your submission script.
	<p>A final Torque command you will use occasionally is the qdel command that asks Torque to delete a job. If the job hasn&#39;t begun running, it is simply deleted from the queue. If the job has begun, it is killed on the nodes it&#39;s running on, and deleted from the queue.</p>
	<p>A list of all available Torque commands is available from the <a href="http://www.clusterresources.com/torquedocs21/">Torque manual page</a>.</p>

<p>&nbsp;</p>
<h2>
	Message Passing Interface (MPI)</h2>
The Message Passing Interface Standard (MPI) is a message passing library standard based on the consensus of the MPI Forum, which has dozens of participating organizations, including vendors, researchers, software library developers, and users. The goal of the Message Passing Interface is to establish a portable, efficient, and flexible standard for message passing that will be widely used for writing message passing programs. MPI is the <em>de facto</em> standard communication library for almost all HPC systems, and is available in a variety of implementations.<br />
<br />
For more information, please visit:<br />
<ul>
	<li>
		<a href="http://www.mpi-forum.org/">http://www.mpi-forum.org/</a></li>
	<li>
		<a href="http://www.mcs.anl.gov/research/projects/mpi/tutorial/">http://www.mcs.anl.gov/research/projects/mpi/tutorial/</a></li>
</ul>
<br />
For more information on OpenMPI, the default MPI distribution on FutureGrid, please visit:<br />
<ul>
	<li>
		<a href="http://www.open-mpi.org/">http://www.open-mpi.org/</a></li>
</ul>
<br />
<h2>
	MPI Libraries</h2>
<br />
The FutureGrid systems that support HPC-style usage have an MPI implementation. In most cases, it is OpenMPI-1.4.x compiled with Intel 11.1 compilers.&nbsp;<br />
<br />
<table align="center" border="1" cellpadding="1" cellspacing="1">
	
		<tr>
			<td class="rtecenter">
				<strong>System</strong></td>
			<td class="rtecenter">
				<strong>MPI version</strong></td>
			<td class="rtecenter">
				<strong>Compiler</strong></td>
			<td class="rtecenter">
				<strong>Infiniband Support</strong></td>
			<td class="rtecenter">
				<strong>Module</strong></td>
		</tr>
		<tr>
			<td class="rtecenter">
				Alamo</td>
			<td class="rtecenter">
				OpenMPI 1.4.3</td>
			<td class="rtecenter">
				Intel 11.1</td>
			<td class="rtecenter">
				yes</td>
			<td class="rtecenter">
				openmpi</td>
		</tr>
		<tr>
			<td class="rtecenter">
				Bravo</td>
			<td class="rtecenter">
				OpenMPI 1.4.2</td>
			<td class="rtecenter">
				Intel 11.1</td>
			<td class="rtecenter">
				no</td>
			<td class="rtecenter">
				openmpi</td>
		</tr>
		<tr>
			<td class="rtecenter">
				&nbsp;</td>
			<td class="rtecenter">
				OpenMPI 1.4.3</td>
			<td class="rtecenter">
				gcc 4.4.6</td>
			<td class="rtecenter">
				no</td>
			<td class="rtecenter">
				openmpi/1.4.3-gnu</td>
		</tr>
		<tr>
			<td class="rtecenter">
				&nbsp;</td>
			<td class="rtecenter">
				OpenMPI 1.4.3</td>
			<td class="rtecenter">
				Intel 11.1</td>
			<td class="rtecenter">
				no</td>
			<td class="rtecenter">
				openmpi/1.4.3-intel</td>
		</tr>
		<tr>
			<td class="rtecenter">
				&nbsp;</td>
			<td class="rtecenter">
				OpenMPI 1.5.4</td>
			<td class="rtecenter">
				gcc 4.4.6</td>
			<td class="rtecenter">
				no</td>
			<td class="rtecenter">
				openmpi/1.5.4-[gnu,intel]</td>
		</tr>
		<tr>
			<td class="rtecenter">
				Hotel</td>
			<td class="rtecenter">
				OpenMPI 1.4.3</td>
			<td class="rtecenter">
				gcc 4.1.2</td>
			<td class="rtecenter">
				yes</td>
			<td class="rtecenter">
				openmpi</td>
		</tr>
		<tr>
			<td class="rtecenter">
				India</td>
			<td class="rtecenter">
				OpenMPI 1.4.2</td>
			<td class="rtecenter">
				Intel 11.1</td>
			<td class="rtecenter">
				yes</td>
			<td class="rtecenter">
				openmpi</td>
		</tr>
		<tr>
			<td class="rtecenter">
				Sierra</td>
			<td class="rtecenter">
				OpenMPI 1.4.2</td>
			<td class="rtecenter">
				Intel 11.1</td>
			<td class="rtecenter">
				no</td>
			<td class="rtecenter">
				openmpi</td>
		</tr>
		<tr>
			<td class="rtecenter">
				Xray</td>
			<td class="rtecenter">
				&nbsp;</td>
			<td class="rtecenter">
				&nbsp;</td>
			<td class="rtecenter">
				N/A</td>
			<td class="rtecenter">
				&nbsp;</td>
		</tr>
	
</table>
<br />
In cases where the OpenMPI is compiled with the Intel compilers, loading the OpenMPI module will automatically load the Intel compilers as a dependency:<br />
<pre class="rteindent1">
-bash-3.2$ module load openmpi
Intel compiler suite version 11.1/072 loaded
OpenMPI version 1.4.3 loaded</pre>

	Loading the OpenMPI module adds the MPI compilers to your $PATH environment variable and the OpenMPI shared library directory to your $LD_LIBRARY_PATH. This is an important step to ensure MPI applications will compile and run successfully. Loading the torque module allows you to submit jobs to the scheduler.<br />
	&nbsp;
<h2>
	Compiling MPI&nbsp;Applications</h2>
To compile MPI applications, users have two options:
<ol>
	<li>
		Use the MPI&nbsp;compilers instead of regular Intel/GNU compilers</li>
	<li>
		Use the regular compilers (Intel/GNU) with MPI compilation flags</li>
</ol>
We recommend using the MPI compilers to avoid compilation issues. This is accomplished by making the following replacements:
<ul>
	<li>
		CC/icc/gcc with mpicc</li>
	<li>
		CXX/icpc/g++ with mpicxx</li>
	<li>
		F90/F77/FC/ifort/gfortran with mpif90</li>
</ul>
Alternatively, for some codes that require intricate compilation flags and complicated make systems, and where changing compilers is not an option, you can edit the compilation/linking options for your codes. These options are machine, compiler, and language dependent. To view the options required for C, C++ and Fortran on any machine, you can issue the commands mpicc-show, mpicxx-show, and mpif90-show. Extra care must be taken when using these flags, as dependencies govern the order in which they appear in the link line. Should you run into compilation errors or problems, please submit a consulting ticket.<br />
<br />
Assuming you have loaded the openmpi module into your environment, you can compile a <a href="/tutorials/hpc/ring">simple MPI application</a> as easily as executing:<br />
<pre class="rteindent1">
-bash-3.2$ mpicc -o ring ring.c</pre>
<br />
<h2>
	Running MPI&nbsp;Applications</h2>
Once your MPI application is compiled, you run it on the compute nodes of a cluster via Torque. An example of an MPI parallel job script for India, Sierra, and Alamo that runs the ring application is:<br />
<br />
<pre class="rteindent1">
#!/bin/bash

#PBS -N ring_test
#PBS -o ring_$PBS_JOBID.out
#PBS -e ring_$PBS_JOBID.err
#PBS -q short
#PBS -l nodes=4:ppn=8
#PBS -l walltime=00:20:00

# make sure MPI is in the environment
module load openmpi

# launch the parallel application with the correct number of processs
# Typical usage: mpirun -np &lt;number of processes&gt; &lt;executable&gt; &lt;arguments&gt;
mpirun -np 32 ring -t 1000</pre>
There are two important differences between this script and the submit script shown previously. The first is that :ppn=8 is added to the request for four nodes. What this does is indicate that your application wants to allocate eight virtual processors per node. A virtual processor corresponds to a processing core. Alamo, Hotel, India, and Sierra all have eight cores per node, so the script above asks for exclusive access to four nodes with a total of 32 cores. The second importand difference from the previous submit script is that it executes mpirun with arguments that describe your MPI application. Note that the number of processes specified to mpirun is 32&mdash;matching the 32 cores allocated by Torque.<br />
<br />
A minor difference between this script and the previous one is that the environment variable $PBS_JOBID is used when creating the stdin and stdout files. Torque sets a number of environment variables that you can use in your submit script, starting with PBS_ .<br />  </div>
<div id="node-141" class="section-3">
  <h1 class="book-heading">Log in to HPC services</h1>
  <p>&nbsp;</p>
<p>To access a FutureGrid system via Torque/Moab, you should ssh to the login node for the system. The login node is one of the following:</p>
<ul>
	<li>
		india.futuregrid.org</li>
	<li>
		bravo.futuregrid.org</li>
	<li>
		sierra.futuregrid.org</li>
	<li>
		foxtrot.futuregrid.org</li>
	<li>
		hotel.futuregrid.org</li>
	<li>
		alamo.futuregrid.org</li>
	<li>
		xray.futuregrid.org</li>
</ul>
<p>An example session follows:</p>
<blockquote>
	<pre>
$ ssh sierra.futuregrid.org
Last login: Thu Aug 12 19:19:22 2010 from ....
Welcome to Sierra.FutureGrid.Org
$
</pre>
</blockquote>
<p>Once you ssh into these nodes, you&#39;ll have access to the HPC queuing services for the machine you have logged into. You will enter into a Unix/Linux shell in which you can enter the typical Unix commands. However, access to the clusters is provided through&nbsp;Torque/Moab commands from the command line.&nbsp;</p>  <div id="node-861" class="section-4">
  <h1 class="book-heading">Generating SSH Keys for FutureGrid Access</h1>
  <p>&nbsp;</p>
<h1>Key Generation</h1>
<p class="rteindent1">To gain access to FutureGrid&nbsp;Resources including HPC and Nimbus services, you need to provide a public key to FutureGrid. We recommend that you are familiar with public keys and have the understanding that we do REQUIRE passphrase protected keys. To generate and send such a key, please follow the following steps. To find more out about open ssh&nbsp;you can also go to&nbsp;</p>
<ul class="rteindent1">
<li><a href="http://openssh.com/manual.html" title="http://openssh.com/manual.html">http://openssh.com/manual.html</a></li>
</ul>
<p class="rteindent1">Other good resources include&nbsp;</p>
<ul>
<li class="rteindent1">http://help.github.com/key-setup-redirect</li>
<li class="rteindent1">http://help.github.com/working-with-key-passphrases/</li>
<li class="rteindent1">http://www.dribin.org/dave/blog/archives/2007/11/28/ssh_agent_leopard/</li>
</ul>
<h2><strong>1.&nbsp;</strong><strong>Generate Public/Private Key Pair</strong></h2>
<p class="rteindent1">First, you have to generate a key. You do this as follows:</p>
<ul>
<li class="rteindent1">Step 1: use the command &ldquo;ssh-keygen -t rsa -C &lt;your-e-mail&gt;&rdquo; to generate the key</li>
<li class="rteindent1">Step 2:&nbsp;specifiy the KeyPair location and name. We recommend that you use the default location if you do not yet have another key there. &nbsp;e.g. /home/username/.ssh/id_rsa</li>
<li class="rteindent1">Step 3: type user defined passphrase when asking passphrase for the key</li>
</ul>
<p class="rteindent1">Example:</p>
<pre class="rteindent1"><span style="font-family:lucida sans unicode,lucida grande,sans-serif;">ssh-keygen -t rsa -C <a href="mailto:johndoe@indiana.edu">johndoe@indiana.edu</a>

Generating public/private rsa key pair.
Enter file in which to save the key (/home/johndoe/.ssh/id_rsa): 
Enter passphrase (empty for no passphrase):
Enter same passphrase again:
Your identification has been saved in /home/johndoe/.ssh/id_rsa.
Your public key has been saved in /home/johndoe/.ssh/id_rsa.pub.
The key fingerprint is:
34:87:67:ea:c2:49:ee:c2:81:d2:10:84:b1:3e:05:59 <a href="mailto:johndoe@indiana.edu">johndoe@indiana.edu</a>
</span></pre><h2><strong>2.&nbsp;</strong><strong>List the result</strong></h2>
<p class="rteindent1">You can find your key under the key location. As we user the .ssh directory it will be located there.&nbsp;<br />
	&nbsp;</p>
<pre class="rteindent1">$ls -lisa ~/.ssh
-rw-------  1 johndoe johndoe        1743 2011-02-10 09:44 id_rsa
-rw-r--r--  1 johndoe johndoe         399 2011-02-10 09:44 id_rsa.pub</pre><p class="rteindent1">&nbsp;</p>
<h2><strong>3.&nbsp;</strong><strong>Add or Replace Passphrase for an Already Generated Key</strong></h2>
<p class="rteindent1">In case you need to change your change passphrase, you can simply run &ldquo;ssh-keygen -p&rdquo; command. Then specify the location of your current key, and input (old and) new passphrases. There is no need to re-generate keys.</p>
<pre class="rteindent1">ssh-keygen -p

Enter file in which the key is (/home/johndoe/.ssh/id_rsa):
Enter old passphrase:
Key has comment &#39;/home/johndoe/.ssh/id_rsa&#39;
Enter new passphrase (empty for no passphrase):
Enter same passphrase again:
Your identification has been saved with the new passphrase.<span id="cke_bm_158E" style="display: none; "> </span><span id="cke_bm_157E" style="display: none; "> </span></pre><p class="rteindent1">&nbsp;</p>
<h2><strong>4.</strong>&nbsp;&nbsp;<strong>Capture the Public Key for FutureGrid</strong></h2>
<p class="rteindent1">Use a text editor to open the &ldquo;id_rsa.pub&rdquo;.&nbsp;Copy the <strong>entire</strong> contents of this file into the ssh key field as part of your profile information. You can now add this key to your keys at the following page:</p>
<h2>5. Key Management</h2>
<p class="rteindent1">This is a future section that will include material about how to use ssh-add and keychain. You can find instructions on them via the github&nbsp;link that we provided above. However, we are not github ;-)</p>
<h2>6. Resetting the SSH key</h2>
<p class="rteindent1">Please follow the instructions given at&nbsp;</p>
<ul>
<li class="rteindent1"><a href="https://portal.futuregrid.org/how-do-i-reset-my-ssh-key">https://portal.futuregrid.org/how-do-i-reset-my-ssh-key</a></li>
</ul>
<p><title></title></p>
<p>&nbsp;</p>
<h2>7. I still can not access FG resources</h2>
<p class="rteindent1">In order for you to access FG resources you must be in an active project. Please make sure you join a project or create your own while applying for one.<br />
	&nbsp;</p>
<div>&nbsp;</div>
<h1 class="rteindent1">&nbsp;</h1>
<p class="rteindent1">&nbsp;</p>
  </div>
</div>
<div id="node-142" class="section-3">
  <h1 class="book-heading">Working with HPC Job Services</h1>
  <p>&nbsp;</p>
<h2>
	Running Queued Jobs as Part of the HPC Services</h2>
<p>To run a job in the HPC service, you need to create a job script that tells the job manager how to run the job and how to handle things like output and notifications. You can then submit your job to the scheduler, monitor its progress in the job queue, and examine the output when it finishes.</p>
<h3>
	&nbsp;A Simple Job Script</h3>
<p>An example job script looks like this:</p>
<blockquote>
	<pre>
#!/bin/bash
#PBS -N testjob 
#PBS -l nodes=1:ppn=1 
#PBS -q batch 
#PBS -j oe 
##PBS -M <a href="mailto:username@example.com">username@example.com</a> 
##PBS -m ae ##PBS -o testjob.out 
## 
## Everything following is run by the scheduler 
## 
sleep 10 
echo -n &quot;Host operating system version: &quot; 
uname -a 
echo &quot;Nodes allocated to this job: &quot; 
cat $PBS_NODEFILE 
echo 
sleep 10 
## 
## End of job script 
##</pre>
</blockquote>
<p>In the job script, lines that begin with&nbsp;<strong>#PBS</strong>&nbsp;are directives to the job scheduler. You can disable any of these lines by adding an extra&nbsp;<strong>#</strong>character at the beginning of the line, for example:</p>
<blockquote>
	<pre>
##PBS -M username@example.com</pre>
</blockquote>
<p>This job script shows some common examples of directives that you might want to use in your job scripts. The directives in this job script are described below:</p>
<blockquote>
	<pre>
#!/bin/bash </pre>
</blockquote>
<p>This line isn&#39;t strictly required, but it is added as a fail-safe in case something unexpected happens. Normally, the job manager reads your script and processes the directives, and then runs your script as a normal shell script. This simply ensures that the system uses the standard bash shell to run your script.</p>
<blockquote>
	<pre>
#PBS -N testjob </pre>
</blockquote>
<p>This line gives your job a name of&nbsp;<strong>testjob</strong>. This name will be used by the job manager when it shows a job listing, and will be used for your output file(s) unless you explicitly specify an output file.</p>
<blockquote>
	<pre>
#PBS -l nodes=1:ppn=1 </pre>
</blockquote>
<p>This line tells the job manager what your job requires for resources. In this case, your job is asking for one node (<strong>nodes=1</strong>) and at least one processor per node (<strong>ppn=1</strong>). See the [[Sw:Manual/PBSDirectives|PBSDirectives] page for other options you can specify here.</p>
<blockquote>
	<pre>
#PBS -q batch </pre>
</blockquote>
<p>This line tells the job manager which job queue your job should be sent to. Each job queue has different characteristics, such as the maximum time a job is allowed to run, or the maximum number of nodes a job can use.</p>
<blockquote>
	<pre>
#PBS -j oe </pre>
</blockquote>
<p>This line tells the job manager to join the job standard output and standard error into a single file. For jobs with a small amount of output, this is usually helpful. If your job produces a lot of standard output, it may be helpful to keep the files separate so you can easily locate error messages in the single error file.</p>
<blockquote>
	<pre>
##PBS -M <a href="mailto:username@example.com">username@example.com</a> </pre>
</blockquote>
<p>Note that this line is a comment since it starts with&nbsp;<strong>##</strong>&nbsp;instead of&nbsp;<strong>#PBS</strong>. If you remove the first&nbsp;<strong>#</strong>, this line will set the email address that will get notified about events related to this job. The events that get reported are set by the next line.</p>
<blockquote>
	<pre>
##PBS -m ae </pre>
</blockquote>
<p>Again, note that this line is commented out. If you remove the first&nbsp;<strong>#</strong>, this line will send email whenever the job fails (or&nbsp;<strong>a</strong>borts) (<strong>a</strong>&nbsp;option), and when the job ends (<strong>e</strong>&nbsp;option). This is particularly helpful if your job has to wait a long time in the queue before it runs.</p>
<blockquote>
	<pre>
##PBS -o testjob.out </pre>
</blockquote>
<p>Again, note that this line is commented out. If you remove the first&nbsp;<strong>#</strong>, this line will specify the file name to be used for job output.</p>
<h3>
	&nbsp; Submitting Your Job</h3>
<p>You can submit your job with the&nbsp;<strong>qsub</strong>&nbsp;or&nbsp;<strong>msub</strong>&nbsp;commands. The&nbsp;<strong>msub</strong>&nbsp;and&nbsp;<strong>qsub</strong>&nbsp;are almost identical, and can mostly be used interchangeably. See the respective man pages for specific differences. Neither submission command provides much output.&nbsp;Examples of a job submission using both commands follows:</p>
<p>Using&nbsp;<strong>msub</strong>:</p>
<blockquote>
	<pre>
[62]s1::gpike&gt; msub testjob.pbs 
292250 
[63]s1::gpike&gt;</pre>
</blockquote>
<p>Using&nbsp;<strong>qsub</strong>:</p>
<blockquote>
	<pre>
[63]s1::gpike&gt; qsub testjob.pbs 
292251.s82 
[64]s1::gpike&gt;</pre>
</blockquote>
<p>In both cases, the number that gets returned is the job number that the scheduler assigned to your job. In the case of&nbsp;<strong>qsub</strong>, the job number is followed by the host name where you submitted the job.</p>
<h2>
	Monitoring Your Job</h2>
<p>To monitor your job after it has been submitted, you can use the&nbsp;<strong>qstat</strong>&nbsp;or&nbsp;<strong>showq</strong>&nbsp;commands. Both commands will show you the state of the job manager, but the information is displayed in different formats. In general, the&nbsp;<strong>showq</strong>&nbsp;command gives more complete information, and in a form that is a bit easier to read. The&nbsp;<strong>qstat</strong>&nbsp;command gives a very concise listing of the job queue, and in some instances this may give you a better quick overview of the resource.</p>
<p>Using the test job script as an example, here is the output from the&nbsp;<strong>showq</strong>&nbsp;command:</p>
<blockquote>
	<pre>
[66]s1::gpike&gt; showq 
active jobs
------------------------ 
JOBID    USERNAME       STATE PROCS    REMAINING            STARTTIME 
292252   greg       Running     16        3:59:59 Tue Aug 17 09:02:40 
1 active job 16 of 264 processors in use by local jobs (6.06%) 
                  2 of 33 nodes active (6.06%) eligible jobs
----------------------
JOBID    USERNAME       STATE PROCS    REMAINING            STARTTIME
0 eligible jobs blocked jobs
----------------------- 
JOBID    USERNAME       STATE PROCS    REMAINING            STARTTIME
0 blocked jobs 
Total job: 1 </pre>
</blockquote>
<p>You can see the output is divided into three sections:&nbsp;<strong>active jobs</strong>,&nbsp;<strong>eligible jobs</strong>, and&nbsp;<strong>blocked jobs</strong>.</p>
<p><strong>1. Active jobs</strong>&nbsp;are jobs that are currently running on the resource.</p>
<p><strong>2. </strong><strong>Eligible jobs</strong>&nbsp;are jobs that are waiting for nodes to become available before they can run. As a general rule, jobs are listed in the order that they will be scheduled, but scheduling algorithms may change the order over time.</p>
<p><strong>3. </strong><strong>Blocked jobs</strong>&nbsp;are jobs that the scheduler cannot run for some reason. Usually a job becomes blocked because it is requesting something that is impossible, such as more nodes than currently exist, or more processors per node than are installed.</p>
<p>&nbsp;</p>
<p>Using the test job as an example again, here is the output from the&nbsp;<strong>qstat</strong>&nbsp;command:</p>
<blockquote>
	<pre>
[109]i136::gpike&gt; qstat 
Job id                             Name               User          Time Use S Queue 
------------------------- --------------------- ------------------- -------- - ----- 
1981.i136                       sub19327.sub      inca               00:00:00 C batch 
1982.i136                       testjob           greg                      0 R batch 
</pre>
</blockquote>
<p>The&nbsp;<strong>qstat</strong>&nbsp;command provides output in six columns:</p>
<ol>
	<li>
		Job id is the identifier assigned to your job.</li>
	<li>
		Name is the name that you assigned to your job.</li>
	<li>
		User is the username of the person who submitted the job.</li>
	<li>
		Time Use is the amount of time the job has been running.</li>
	<li>
		S shows the job state. Common job states are R for a running job, Q for a job that is queued and waiting to run, C for a job that has completed, and H for a job that is being held.</li>
	<li>
		Queue is the name of the job queue where your job will run.</li>
</ol>
<p>&nbsp;</p>
<h2>
	Examining Your Job Output</h2>
<p>If you gave your job a name with the&nbsp;<strong>#PBS -N &lt;jobname&gt;</strong>&nbsp;directive in your job script or by specifying the job name on the command line, your job output will be available in a file named&nbsp;<strong>jobname.o######</strong>, where the&nbsp;<strong>######</strong>&nbsp;is the job number assigned by the job manager. You can type&nbsp;<strong>ls jobname.o*</strong>&nbsp;to see all output files from the same job name.</p>
<p>If you explicitly name an output file with the&nbsp;<strong>#PBS -o &lt;outfile&gt;</strong>&nbsp;directive in your job script or by specifying the output file on the command line, your output will be in the file you specified. If you run the job again, the output file will be overwritten.</p>
<p>If you don&#39;t specify any output file, your job output will have the same name as your job script, and will be numbered in the same manner as if you had specified a job name (<strong>jobname,o######</strong>).</p>  </div>
<div id="node-143" class="section-3">
  <h1 class="book-heading">Analyzing Code Performance</h1>
    <div id="node-144" class="section-4">
  <h1 class="book-heading">PAPI</h1>
  <p><img alt="" height="50" src="/sites/default/files/u30/icl_footer.gif" style="color: rgb(41, 41, 41); font-size: 13px; line-height: 15px; text-align: center; width: 100px; height: 50px; " width="100" /></p>
<p style="margin-top: 0.5em; margin-bottom: 0.9em;"><strong><span style="font-size: medium;">Summary</span></strong></p>
<p style="margin-top: 0.5em; margin-bottom: 0.9em; margin-left: 40px;"><span style="font-size: small;"><a href="http://icl.cs.utk.edu/papi/overview/index.html" style="color: rgb(16, 74, 145); text-decoration: none;">PAPI</a>&nbsp;is an acronym for&nbsp;<b>P</b>erformance&nbsp;<b>A</b>pplication&nbsp;<b>P</b>rogramming&nbsp;<b>I</b>nterface. The PAPI Project is being developed at the </span><span style="font-size: small;">Computer Science Department</span><span style="font-size: small;"> of the&nbsp;<a href="http://icl.cs.utk.edu/" style="color: rgb(16, 74, 145); text-decoration: none;">University of Tennessee&rsquo;s Innovative Computing Laboratory</a>. This project was created to design, standardize, and implement a portable and efficient API (Application Programming Interface) to access the hardware performance counters found on most modern microprocessors.</span>&nbsp;&nbsp;For more information, please see the user guides listed below. &nbsp;<a href="http://icl.cs.utk.edu/projects/papi/wiki/User_Guide" style="color: rgb(16, 74, 145); text-decoration: none;">Read more ...</a></p>
<p style="margin-top: 0.5em; margin-bottom: 0.9em;"><span style="font-size: medium;"><strong>Availability</strong></span></p>
<p style="margin-top: 0.5em; margin-bottom: 0.9em; margin-left: 40px;">PAPI 4.2.0 is available on the Bravo machine and PAPI version 3.6.2.2 is available on the Xray machine. To load PAPI on Bravo, &#39;module add papi&#39; as below:</p>
<blockquote>
	<code>% module add papi<br />
        papi version 4.2.0 loaded<br/>
	% env | grep papi<br />
	MANPATH=/opt/papi-4.2.0/man:/usr/share/man <br/>
        LD_LIBRARY_PATH=/opt/papi-4.2.0/lib:/N/u/inca/openssl/lib:<br/>
        PATH=/opt/papi-4.2.0/bin:...<br/>
        PAPI_ROOT=/opt/papi-4.2.0</code></blockquote>
<p style="margin-top: 0.5em; margin-bottom: 0.9em; margin-left: 40px;">To load PAPI on Xray, type &#39;module add xt-papi&#39; as below:</p>
<blockquote>
	<code>% module add xt-papi<br />
	% env | grep PAPI<br />
	PAPI_POST_LINK_OPTS= -L/opt/xt-tools/papi/3.6.2.2/lib -lpapi -lpfm<br />
	PAPI_VERSION=3.6.2.2<br />
	PAPI_INCLUDE_OPTS= -I/opt/xt-tools/papi/3.6.2.2/include</code></blockquote>
<div style="margin-left: 40px;">
	Our plans are to make PAPI 4.2.0 available on Alamo, India, Sierra, and Hotel when the machines are upgraded to Redhat 6.</div>
<div>
	&nbsp;</div>
<p style="margin-top: 0.5em; margin-bottom: 0.9em;"><strong>PAPI User Guide</strong></p>
<ul>
	<li style="margin-top: 0.5em; padding-left: 30px; margin-bottom: 0.9em; ">
		<span style="font-size: small;"><span style="font-size: small;"><a href="http://icl.cs.utk.edu/projects/papi/wiki/User_Guide" style="color: rgb(16, 74, 145); text-decoration: none;">User Guide</a></span></span></li>
</ul>
<p class="rtecenter" style="margin-top: 0.5em; padding-left: 30px; margin-bottom: 0.9em;">&nbsp;</p>


  </div>
<div id="node-145" class="section-4">
  <h1 class="book-heading">Vampir</h1>
  <p><strong>Introduction</strong></p>
<p>Performance optimization is a key issue for the development of efficient parallel software applications. Vampir provides a manageable framework for analysis, which enables developers to quickly display program behavior at any level of detail. Detailed performance data obtained from a parallel program execution can be analyzed with a collection of different performance views. Intuitive navigation and zooming are the key features of the tool, which help to quickly identify inefficient or faulty parts of a program code. Vampir implements optimized event analysis algorithms and customizable displays which enable a fast and interactive rendering of very complex performance monitoring data. Ultra-large data volumes can be analyzed with a parallel version of Vampir, which is available on request. Vampir has a product history of more than 15 years and is well established on Unix-based HPC systems. This tool experience is now available for HPC systems that are based on Microsoft Windows HPC Server 2008. This new Windows edition of Vampir combines modern scalable event processing techniques with a fully redesigned graphical user interface.</p>
<h2>
	<strong>Vampir on FutureGrid</strong></h2>
<p>VampirServer is currently available on India at&nbsp;/N/soft/x86_64/el5/india/vampirserver. &nbsp;The VampirTrace modules are installed on Alamo, Hotel, India, and Sierra. &nbsp;To load, type &#39;module load vampirtrace&#39;.&nbsp;</p>
<h2>
	<strong>Event-based Performance Tracing and Profiling</strong></h2>
<p>In software analysis, the term profiling refers to the creation of tables which summarize the runtime behavior of programs by means of accumulated performance measurements. Its simplest variant lists all program functions in combination with the number of invocations and the time that was consumed. This type of profiling is also called inclusive profiling, as the time spent in subroutines is included in the statistics computation. A commonly applied method for analyzing details of parallel program runs is to record so-called trace log files during runtime. The data collection process itself is also referred to as tracing a program. Unlike profiling, the tracing approach records timed application events like function calls and message communication as a combination of timestamp, event type, and event specific data. This creates a stream of events, which allows very detailed observations of parallel programs. With this technology, synchronization and communication patterns of parallel program runs can be traced and analyzed in terms of performance and correctness. The analysis is usually carried out in a postmortem step, i. e., after completion of the program. Needless to say, program traces can also be used to calculate the profiles mentioned above. Computing profiles from trace data allows arbitrary time intervals and process groups to be specified. This is in contrast to <em>fixed profiles accumulated during runtime.</em></p>
<h2>
	<strong>The Open Trace Format (OTF)</strong></h2>
<p>The Open Trace Format (OTF) was designed as a well-defined trace format with open, public domain libraries for writing and reading. This open specification of the trace information provides analysis and visualization tools like Vampir to operate efficiently at large scale. The format addresses large applications written in an arbitrary combination of Fortran77, Fortran (90/95/etc.), C, and C++.</p>
<p><img class="image image-_original " height="510" src="/sites/default/files/images/otf_0.png" width="800" /></p>
<p align="center"><strong>Representation of Streams by Multiple Files</strong></p>
<p>OTF uses a special ASCII data representation to encode its data items with numbers and tokens in hexadecimal code without special prefixes. That enables a very powerful format with respect to storage size, human readability, and search capabilities on timed event records. In order to support fast and selective access to large amounts of performance trace data, OTF is based on a stream-model, i.e., single separate units representing segments of the overall data. OTF streams may contain multiple independent processes, whereas a process belongs to a single stream exclusively. As shown in the figure, each stream is represented by multiple files, which store definition records, performance events, status information, and event summaries separately. A single global master file holds the necessary information for the process to stream mappings. Each file name starts with an arbitrary common prefix defined by the user. The master file is always named {name}.otf. The global definition file is named {name}.0.def. Events and local definitions are placed in files {name}.x.events and {name}.x.defs, where the latter files are optional. Snapshots and statistics are placed in files named {name}.x.snaps and {name}.x.stats, which are also optional.<br />
	<br />
	<strong>Note</strong>: Open the master file (*.otf) to load a trace. When copying, moving, or deleting traces, it is important to take all according files into account; otherwise, Vampir will render the whole trace invalid! Good practice is to hold all files belonging to one trace in a dedicated directory. Detailed information about the Open Trace Format can be found in the <a href="http://www.tu-dresden.de/zih/otf "><em>Open Trace Format (OTF)</em>&nbsp;documentation</a>.</p>
<h1>
	<strong>Getting Started</strong></h1>
<h2>
	<strong>Generation of Trace Data</strong></h2>
<p>The generation of trace files for the (Vampir) performance visualization tool requires a working monitoring system to be attached to your parallel program. Contrary to Windows HPC Server 2008 &mdash; whereby the performance monitor is integrated into the operating system &mdash; recording performance under Linux is done by a separate performance monitor. We recommend our VampirTrace monitoring facility, which is available as open source software. During a program run of an application, VampirTrace generates an OTF trace file, which can be analyzed and visualized by Vampir. The VampirTrace library allows MPI communication events of a parallel program to be recorded in a trace file. Additionally, certain program-specific events can also be included. To record MPI communication events, simply relink the program with the VampirTrace library. A new compilation of the program source code is only necessary if program-specific events should be added. Detailed information on the installation and usage of VampirTrace can be found at <a href="https://portal.futuregrid.org/manual/vampir/trace">VampirTrace</a>.</p>
<h2>
	<strong>Enabling Performance Tracing</strong></h2>
<p>To perform measurements with VampirTrace, the application program needs to be instrumented. VampirTrace handles this automatically by default, while manual instrumentation is also possible. All the necessary instrumentation of user functions, MPI, and OpenMP events is handled by the compiler wrappers of VampirTrace (vtcc, vtcxx, vtf77, vtf90). All compile and link commands in the used makefile should be replaced by the VampirTrace compiler wrapper, which performs the necessary instrumentation of the program and links the suitable VampirTrace library. Automatic instrumentation is the most convenient method to instrument your program. Therefore, simply use the compiler wrappers without any parameters, e.g.:</p>
<blockquote>
	<pre>
vtf90 hello.f90 -o hello</pre>
</blockquote>
<p>For manual instrumentation with the VampirTrace API, simply include:</p>
<blockquote>
	<pre>
vt_user.inc <em>(Fortran)</em><em>
</em>
vt_user.h <em>(C, C++)</em></pre>
</blockquote>
<p>and label any user defined sequence of statements for instrumentation as follows:</p>
<blockquote>
	<pre>
VT_USER_START(name) ... VT_USER_END(name)</pre>
</blockquote>
<p>in Fortran and C, respectively, and in C++ as follows:</p>
<blockquote>
	<pre>
VT_TRACER(``name);</pre>
</blockquote>
<p>Afterwards, use</p>
<blockquote>
	<pre>
vtcc -DVTRACE hello.c -o hello</pre>
</blockquote>
<p>to combine the manual instrumentation with automatic compiler instrumentation or</p>
<blockquote>
	<pre>
vtcc -vt:inst manual -DVTRACE hello.c -o hello</pre>
</blockquote>
<p>to prevent an additional compiler instrumentation.</p>
<h2>
	<strong>Tracing an Application</strong></h2>
<p>Running a VampirTrace instrumented application should normally result in an OTF trace file in the current working directory where the application was executed. On Linux, Mac OS, and Sun Solaris, the default name of the trace file will be equal to the application name. For other systems, the default name is&nbsp;<em>a.otf</em>&nbsp;but can be defined manually by setting the environment variable VT_FILE_PREFIX to the desired name. After a run of an instrumented application, the traces of the single processes need to be unified in terms of timestamps and event IDs. In most cases, this happens automatically. If it is necessary to perform unification of local traces manually, use the following command:</p>
<blockquote>
	<pre>
vtunify &lt;nproc&gt;</pre>
</blockquote>
<p>If VampirTrace was built with support for OpenMP and/or MPI, it is possible to speed up the unification of local traces significantly. To distribute the unification on multiple processes, the MPI parallel version vtunify-mpi can be used as follows:</p>
<blockquote>
	<pre>
mpirun -np &lt;nranks&gt; vtunify-mpi &lt;nproc&gt;</pre>
</blockquote>
<h2>
	<strong>Starting Vampir and Loading a Trace File</strong></h2>
<p>To open a trace file, from the &quot;File&quot; menu, select &quot;Open...&quot;. This will provide the file-open dialog depicted below. It is possible to filter the files in the list. The file type input selector determines the visible files. The default &quot;OTF Trace Files (*.otf )&quot; shows only files that can be processed by the tool. All file types can be displayed by using &quot;All Files (*)&quot;. Alternatively, on Windows, a command-line invocation is possible:</p>
<blockquote>
	<pre>
C:\Program Files\Vampir\Vampir.exe [trace file]</pre>
</blockquote>
<p>To open multiple trace files at once, you can take them one after another as command-line arguments:</p>
<blockquote>
	<pre>
C:\Program Files\Vampir\Vampir.exe [file 1]...[file n]</pre>
</blockquote>
<p>It is also possible to start the application by double-clicking on an *.otf file (if Vampir was associated with *.otf files during the installation process). The trace files to be loaded have to be compliant with the Open Trace Format (OTF) standard. Microsoft HPC Server 2008 is shipped with the translator program etl2otf.exe, which produces appropriate input files.</p>
<p><img class="image image-_original " height="452" src="/sites/default/files/images/open_file.png" width="570" /></p>
<p align="center"><strong>Loading a Trace Log File in Vampir</strong></p>
<p>While Vampir is loading the trace file, an empty &quot;Trace View&quot; window with a progress bar at the bottom opens. After Vampir loaded the trace data completely, a default set of charts will appear. The illustrated loading process can be interrupted at any point of time by clicking on the cancel button in the lower right corner. Because events in the trace file are traversed one after another, the GUI will also open, but will show only the earliest information from the tracefile. For huge tracefiles with performance problems assumed to be at the beginning, this proceeding is a suitable strategy to save time.</p>
<p><img class="image image-_original " height="262" src="/sites/default/files/images/cancel_loading_resize.png" width="558" /></p>
<p align="center"><strong>Progress Bar and Cancel Loading Button</strong></p>
<p>Basic functionality and navigation elements are described in&nbsp;<a href="https://wiki.futuregrid.org/index.php/Docs/Performance/Vampir#Basics" title="Docs/Performance/Vampir">Basics</a>. The available charts and the information provided by them are explained in&nbsp;<a href="https://wiki.futuregrid.org/index.php/Docs/Performance/Vampir#Performance_Data_Visualization" title="Docs/Performance/Vampir">Performance_Data_Visualization</a>.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h1>
	<strong>Basics</strong></h1>
<p>After loading has been completed, the&nbsp;<em>Trace View</em>&nbsp;window title displays the trace file&#39;s name. By default, the&nbsp;<em>Charts</em>&nbsp;toolbar and the&nbsp;<em>Zoom Toolbar</em>&nbsp;are available.</p>
<p><img class="image image-_original " height="600" src="/sites/default/files/images/Startup.png" width="800" /></p>
<p align="center"><strong>Trace View Window with Charts Toolbar (A) and Zoom Toolbar (B)</strong></p>
<p>Furthermore, the default set of charts is opened automatically after loading has been finished. The charts can be divided into three groups: timeline, statistical, and informational charts. Timeline charts show detailed event-based information for arbitrary time intervals, while statistical charts reveal accumulated measures computed from the corresponding event data. Informational charts provide additional or explanatory information regarding timeline and statistical charts. All available charts can be opened with the&nbsp;<em>Charts </em>toolbar (explained in <a href="https://wiki.futuregrid.org/index.php/Docs/Performance/Vampir#The_Charts_Toolbar" title="Docs/Performance/Vampir">The Charts Toolbar</a>). In the following section, we will explain the basic functions of the Vampir GUI which are generic to all charts.</p>
<h2>
	<strong>Chart Arrangement</strong></h2>
<p>The utility of charts can be increased by correlating them and their provided information. Vampir supports this mode of operation by allowing you to display multiple charts at the same time. Charts that display a sequence of events such as the&nbsp;<em>Master Timeline</em>&nbsp;and the&nbsp;<em>Process Timeline </em>chart are aligned vertically. This alignment ensures that the temporal relationship of events is preserved across chart boundaries. The user can arrange the placement of the charts according to his preferences by dragging them into the desired position. When the left mouse button is pressed while the mouse pointer is located above a placement decoration, the layout engine will give visual clues as to where the chart may be moved. As soon as the user releases the left mouse button, the chart arrangement will be changed according to his intentions. The entire procedure is depicted in figures below. The flexible display architecture also allows increasing or decreasing the screen space that is used by a chart. Charts of particular interest may get more space in order to render information in more detail.</p>
<p><img class="image image-_original " height="600" src="/sites/default/files/images/Display_arranging_a.png" width="800" /></p>
<p align="center"><strong>Moving and Arranging Charts in the Trace View Window</strong></p>
<p><img class="image image-_original " height="600" src="/sites/default/files/images/Display_arranging_b.png" width="800" /></p>
<p align="center"><strong>Moving and Arranging Charts in the Trace View Window</strong></p>
<p><img class="image image-_original " height="600" src="/sites/default/files/images/Custom_arrangement.png" width="800" /></p>
<p align="center"><strong>A Custom Chart Arrangement in the Trace View Window</strong></p>
<p><img class="image image-_original " height="266" src="/sites/default/files/images/close_display.png" width="854" /></p>
<p align="center"><strong>Closing (right) and Undocking (left) a Chart</strong></p>
<p>The&nbsp;<em>Trace View</em>&nbsp;window can host an arbitrary number of charts. Charts can be added by clicking on the respective&nbsp;<em>Charts</em>&nbsp;toolbar icon or the corresponding&nbsp;<em>Chart</em>&nbsp;menu entry. With a few more clicks, charts can be combined to a custom chart arrangement. Customized layouts can be saved as described in&nbsp;<a href="https://wiki.futuregrid.org/index.php/Docs/Performance/Vampir#Saving_Policy" title="Docs/Performance/Vampir">Saving Policy</a>. Every chart can be undocked or closed by clicking the dedicated icon in its upper right corner. Undocking a chart means to free the chart from the current arrangement and present it in its own window.</p>
<p><img class="image image-_original " height="600" src="/sites/default/files/images/Undocking_1.png" width="800" /></p>
<p align="center"><strong>Undocking of a Chart</strong></p>
<p><img class="image image-_original " height="600" src="/sites/default/files/images/Undocking_2.png" width="800" /></p>
<p align="center"><strong>Docking a Chart</strong></p>
<p>Considering that labels (e.g., those showing names or values of functions) often need more space to show their whole text, there is a further form of resizing/arranging. In order to read labels completely, it is possible to resize the distribution of space owned by the labels and the graphical representation in a chart. When one hovers over the blank space between labels and graphical representation, a moveable separator appears. After clicking a separator decoration, moving the mouse while holding the left mouse button causes resizing.</p>
<p><img class="image image-_original " height="600" src="/sites/default/files/images/Resize_labels.png" width="800" /></p>
<p align="center"><strong>Resizing Labels: (A) Hover over a Separator Decoration; (B) Drag and Drop the Separator</strong></p>
<h2>
	<strong>Context Menus</strong></h2>
<p>All of the chart displays have their own context menus with common entries as well as display-specific ones. In the following section, only the most common entries will be discussed. A context menu can be accessed by right clicking in the display window. Common entries are:</p>
<ul>
	<li>
		<strong>Reset Zoom:</strong> Go back to the initial state in horizontal zooming.</li>
	<li>
		<strong>Reset Vertical Zoom:</strong> Go back to the initial state in vertical zooming.</li>
	<li>
		<strong>Set Metric:</strong> Change values which should be represented in the chart, e.g.&nbsp;<em>Exclusive Time</em>&nbsp;to&nbsp;<em>Inclusive Time</em>.</li>
	<li>
		<strong>Sort By: </strong>Rearrange values or bars by a certain characteristic.</li>
</ul>
<h2>
	<strong>Zooming</strong></h2>
<p>Zooming is a key feature of Vampir. In most charts it is possible to zoom in and out to get abstract and detailed views of the visualized data. In the timeline charts, zooming produces a more detailed view of a special time interval and therefore reveals new information that could not be seen in the larger section. Short function calls in the&nbsp;<em>Master Timeline</em>&nbsp;may not be visible unless an appropriate zooming level has been reached. If the execution time of these short functions is too short regarding the pixel resolution of your computer display, the selection of a shorter time interval is required. Note: Other charts can be affected when zooming in timeline displays: The interval chosen in a timeline chart such as&nbsp;<em>Master Timeline</em>&nbsp;or&nbsp;<em>Process Timeline</em>&nbsp;also defines the time interval for the calculation of accumulated measurements in the statistical charts. Statistical charts like the&nbsp;<em>Function Summary</em>&nbsp;provide zooming of statistic values. In these cases zooming does not affect any other chart. Zooming is disabled in the&nbsp;<em>Pie Chart</em>&nbsp;mode of the&nbsp;<em>Function Summary</em>&nbsp;reachable via context menu under&nbsp;<em>Set Chart Mode-&gt;Pie Chart</em>.</p>
<p><img class="image image-_original " height="600" src="/sites/default/files/images/Zooming.png" width="800" /></p>
<p align="center"><strong>Zooming within a Chart</strong></p>
<p>To zoom into an area, click and hold the left mouse button and select the area. It is possible to zoom horizontally and in some charts also vertically. Horizontal zooming in the&nbsp;<em>Master Timeline</em>&nbsp;defines the time interval to be visualized whereas vertical zooming selects a group of processes to be displayed. To scroll horizontally move the slider at the bottom or use the mouse wheel. Additionally, the zoom can be accessed with help of the&nbsp;<em>Zoom Toolbar</em>&nbsp;by dragging the borders of the selection rectangle or scrolling down the mouse wheel. To return to the previous zooming state, the global &quot;Undo&quot; is provided that in the &quot;Edit&quot; menu; alternatively, press &quot;Ctrl+Z&quot; to revert to the last zoom. Accordingly, a zooming action can be repeated by selecting &quot;Redo&quot; in the &quot;Edit&quot; menu or pressing &quot;Ctrl+Shift+Z&quot;. Both functions work independently of the current mouse position. Next to &quot;Undo&quot; and &quot;Redo&quot; it is shown which kind of action in which display could be undone and redone, respectively. To get back to the initial state of zooming in a fast way select&nbsp;<em>Reset Horizontal Zoom</em>&nbsp;or&nbsp;<em>Reset Vertical Zoom</em>&nbsp;in the context menu of the desired timeline display. To reset zoom is also an action that can be reverted by &quot;Undo&quot;.</p>
<h2>
	<strong>The Zoom Toolbar</strong></h2>
<p>Vampir provides a&nbsp;<em>Zoom Toolbar</em> that can be used for zooming and navigation in the trace data. It is situated in the upper right corner of the <em>Trace View</em>&nbsp;window. Of course it is possible to drag and drop it as desired. The&nbsp;<em>Zoom Toolbar</em>&nbsp;offers an overview of the data displayed in the corresponding charts. The current zoomed area can be seen highlighted as a rectangle within the&nbsp;<em>Zoom Toolbar</em>. Clicking on one of the two boundaries and moving it (with left mouse button held) to the intended position executes horizontal zooming in all charts.<br />
	<strong> Note</strong>: Instead of dragging boundaries, it is also possible to use the mouse wheel for zooming. Hover over the&nbsp;<em>Zoom Toolbar</em>&nbsp;and scroll up to zoom in and scroll down to zoom out. Dragging the zoom area changes the section that is displayed without changing the zoom factor. For dragging, click in the highlighted zoom area and drag and drop it to the desired region. If the user double clicks in the&nbsp;<em>Zoom Toolbar</em>, the initial zooming state is reverted to.</p>
<p><img class="image image-_original " height="600" src="/sites/default/files/images/Zoom_toolbar.png" width="800" /></p>
<p align="center"><strong>Zooming and Navigation within the Zoom Toolbar: (A+B) Zooming in/out with Mouse Wheel; (C) Scrolling by Moving the Highlighted Zoom Area; (D) Zooming by Selecting and Moving a Boundary of the Highlighted Zoom Area</strong></p>
<p>The colors represent user-defined groups of functions or activities. Please note that all charts added to the&nbsp;<em>Trace View</em>&nbsp;window will adapt their statistics information according to this time interval selection. The&nbsp;<em>Zoom Toolbar</em>&nbsp;can be disabled and enabled with the toolbar&#39;s context menu entry&nbsp;<em>Zoom Toolbar</em>.</p>
<h2>
	<strong>The Charts Toolbar</strong></h2>
<p>Use the&nbsp;<em>Charts</em>&nbsp;toolbar to open instances of the different charts. It is situated in the upper left corner of the main window by default. Of course, it is also possible to drag and drop it as desired. The&nbsp;<em>Charts</em>&nbsp;toolbar can be disabled with the toolbar&#39;s context menu entry&nbsp;<em>Charts</em>. The table below shows the different icons representing the charts in&nbsp;<em>Charts</em>&nbsp;toolbar. The icons are arranged in three groups, divided by a small separator. The first group represents timeline charts, whose zooming states affect all other charts. The second group consists of statistical charts, providing special information and statistics for a chosen interval. Vampir allows multiple instances for charts of these categories. The last group comprises informational charts, providing specific textual information or legends. Only one instance of an informational chart can be opened at a time.</p>
<p align="center"><strong>Icons of the Toolbar</strong></p>
<table border="1" cellpadding="1" cellspacing="1">
	
		<tr>
			<td>
				Icon</td>
			<td>
				Name</td>
			<td>
				Description</td>
		</tr>
		<tr>
			<td>
				<p><img class="image image-_original " height="100" src="/sites/default/files/images/icon_master_tl.png" width="100" /></p>
			</td>
			<td>
				<p>Master Timeline</p>
			</td>
			<td>
				<a href="https://wiki.futuregrid.org/index.php/Docs/Performance/Vampir#Master_Timeline_and_Process_Timeline" title="Docs/Performance/Vampir">Master Timeline</a></td>
		</tr>
		<tr>
			<td>
				<img class="image image-_original " height="100" src="/sites/default/files/images/icon_process_tl.png" width="100" /></td>
			<td>
				Process Timeline</td>
			<td>
				<a href="https://wiki.futuregrid.org/index.php/Docs/Performance/Vampir#Master_Timeline_and_Process_Timeline" title="Docs/Performance/Vampir">Process Timeline</a></td>
		</tr>
		<tr>
			<td>
				<p><img class="image image-_original " height="100" src="/sites/default/files/images/icon_counter_tl.png" width="100" /></p>
			</td>
			<td>
				Counter Data Timeline</td>
			<td>
				<a href="https://wiki.futuregrid.org/index.php/Docs/Performance/Vampir#Counter_Data_Timeline" title="Docs/Performance/Vampir">Counter Data</a></td>
		</tr>
		<tr>
			<td>
				<img class="image image-_original " height="100" src="/sites/default/files/images/icon_radar.png" width="100" /></td>
			<td>
				Performance Radar</td>
			<td>
				<a href="https://wiki.futuregrid.org/index.php/Docs/Performance/Vampir#Performance_Radar" title="Docs/Performance/Vampir">Performance Radar</a></td>
		</tr>
		<tr>
			<td>
				<img class="image image-_original " height="100" src="/sites/default/files/images/icon_function_summ.png" width="100" /></td>
			<td>
				Function Summary</td>
			<td>
				<a href="https://wiki.futuregrid.org/index.php/Docs/Performance/Vampir#Function_Summary" title="Docs/Performance/Vampir">Function Summary</a></td>
		</tr>
		<tr>
			<td>
				<img class="image image-_original " height="100" src="/sites/default/files/images/icon_message_summ.png" width="100" /></td>
			<td>
				Message Summary</td>
			<td>
				<a href="https://wiki.futuregrid.org/index.php/Docs/Performance/Vampir#Message_Summary" title="Docs/Performance/Vampir">Message Summary</a></td>
		</tr>
		<tr>
			<td>
				<img class="image image-_original " height="100" src="/sites/default/files/images/icon_process_summ.png" width="100" /></td>
			<td>
				Process Summary</td>
			<td>
				<a href="https://wiki.futuregrid.org/index.php/Docs/Performance/Vampir#Process_Summary" title="Docs/Performance/Vampir">Process Summary</a></td>
		</tr>
		<tr>
			<td>
				<img class="image image-_original " height="100" src="/sites/default/files/images/icon_matrix.png" width="100" /></td>
			<td>
				Communication Matrix View</td>
			<td>
				<a href="https://wiki.futuregrid.org/index.php/Docs/Performance/Vampir#Communication_Matrix_View" title="Docs/Performance/Vampir">Communication Matrix View</a></td>
		</tr>
		<tr>
			<td>
				<img class="image image-_original " height="100" src="/sites/default/files/images/icon_calltree.png" width="100" /></td>
			<td>
				Call Tree</td>
			<td>
				<a href="https://wiki.futuregrid.org/index.php/Docs/Performance/Vampir#Call_Tree" title="Docs/Performance/Vampir">Call Tree</a></td>
		</tr>
		<tr>
			<td>
				<img class="image image-_original " height="100" src="/sites/default/files/images/icon_legend.png" width="100" /></td>
			<td>
				Function Legend</td>
			<td>
				<a href="https://wiki.futuregrid.org/index.php/Docs/Performance/Vampir#Function_Legend" title="Docs/Performance/Vampir">Function Legend</a></td>
		</tr>
		<tr>
			<td>
				<img class="image image-_original " height="100" src="/sites/default/files/images/icon_context.png" width="100" /></td>
			<td>
				Context View</td>
			<td>
				<a href="https://wiki.futuregrid.org/index.php/Docs/Performance/Vampir#Context_View" title="Docs/Performance/Vampir">Context View</a></td>
		</tr>
		<tr>
			<td>
				<img class="image image-thumbnail " height="94" src="/sites/default/files/images/icon_marker.png" width="91" /></td>
			<td>
				Marker View</td>
			<td>
				<a href="https://wiki.futuregrid.org/index.php/Docs/Performance/Vampir#Information_Filtering_and_Reduction" title="Docs/Performance/Vampir">Marker View</a></td>
		</tr>
	
</table>
<h2>
	<strong>Properties of the Tracefile</strong></h2>
<p>Vampir provides a display containing the most important characterizations of the used tracefile. This tabular is called&nbsp;<em>Trace Properties</em>&nbsp;and can be accessed by&nbsp;<em>File-&gt;Trace Properties</em>. The information, such as the filename, the creator and its version, originates from the tracefile and is not changed by Vampir.</p>
<h1>
	<strong>Performance Data Visualization</strong></h1>
<p>This chapter deals with the different charts that can be used to analyze the behavior of a program and the comparison between different function groups, e.g., MPI and Calculation. In addition, the chapter addresses communication performance issues. Various charts address the visualization of data transfers between processes. The following sections describe them in detail.</p>
<h2>
	<strong>Timeline Charts</strong></h2>
<p>A very common chart type used in event-based performance analysis is the so-called timeline chart. This chart type graphically presents the chain of events of monitored processes or counters on a horizontal time axis. Multiple timeline chart instances can be added to the&nbsp;<em>Trace View</em>&nbsp;window via the&nbsp;<em>Chart</em>&nbsp;menu or the&nbsp;<em>Charts</em>&nbsp;toolbar.</p>
<p><strong>Note</strong>: To measure the duration between two events in a timeline chart, Vampir provides a tool called ruler. Click on the first event in a timeline display and move the mouse while keeping the left mouse key and&nbsp;<em>Shift</em>&nbsp;pressed. A ruler-like pattern appears in the current timeline chart, which provides rough measurement directly. The exact time of the start event and the mouse position and the interval in between is given at the very bottom. If the&nbsp;<em>Shift</em>&nbsp;key is released before the left mouse key, Vampir will proceed with zooming.</p>
<h3>
	<strong>Master Timeline and Process Timeline</strong></h3>
<p>In the Master and Process Timelines, detailed information about functions, communication, and synchronization events is shown. Timeline charts are available for individual processes (<em>Process Timeline</em>) as well as for a collection of processes (<em>Master Timeline</em>). The&nbsp;<em>Master Timeline</em>&nbsp;consists of a collection of rows. Each row represents a single process, as shown in the figure below. A&nbsp;<em>Process Timeline</em>&nbsp;shows the different levels of function calls in a stacked bar chart for a single process, as depicted in the second figure.</p>
<p><img class="image image-_original " height="600" src="/sites/default/files/images/Master_timeline.png" width="800" /></p>
<p align="center"><strong>Master Timeline</strong></p>
<p><img class="image image-_original " height="600" src="/sites/default/files/images/Process_timeline.png" width="800" /></p>
<p align="center"><strong>Process Timeline</strong></p>
<p>Every timeline row consists of a process name on the left and a colored sequence of function calls or program phases on the right. The color of a function is defined by its group membership; e.g., MPI_Send() belonging to the function group MPI has the same color, presumably red, as MPI_Recv(), which also belongs to the function group MPI. Clicking on a function highlights it and causes the&nbsp;<em>Context View</em>&nbsp;display to show detailed information about that particular function, e.g., its corresponding function group name, time interval, and the complete name. The&nbsp;<em>Context View</em>&nbsp;display is explained in its own section below. Some function invocations are very short, and will not show up in the overall view because of a lack of display pixels. A zooming mechanism is provided to inspect a specific time interval in more detail. If zooming is performed, panning in a horizontal direction is possible with the scroll bar at the bottom. The&nbsp;<em>Process Timeline</em>&nbsp;resembles the&nbsp;<em>Master Timeline </em>with slight differences. The chart&#39;s timeline is divided into levels, which represent the different call stack levels of function calls. The initial function begins at the first level, a sub-function called by that function is located a level beneath, and so forth. If a sub-function returns to its caller, the graphical representation also returns to the level above. In addition to the display of categorized function invocations, Vampir&#39;s <em>Master</em>&nbsp;and&nbsp;<em>Process Timeline</em>&nbsp;also provide information about communication events. Messages exchanged between two different processes are depicted as black lines. In timeline charts, the progress in time is reproduced from left to right. The leftmost starting point of a message line and its underlying process bar therefore identify the sender of the message, whereas the rightmost position of the same line represents the receiver of the message. The corresponding function calls normally reflect a pair of MPI communication directives like MPI_Send() and MPI_Recv(). It is also possible to show a collective communication like MPI_Allreduce() by selecting one corresponding message as shown in the figure.</p>
<p><img class="image image-_original " height="88" src="/sites/default/files/images/collectives.png" width="189" /></p>
<p align="center"><strong>Selected MPI Collective in Master Timeline</strong></p>
<p>Additional information like message bursts, markers, and I/O events is also available. The table shows the symbols and descriptions of these objects.</p>
<p>&nbsp;</p>
<p align="center"><strong>Additional Information in Master and Process Timeline</strong></p>
<table border="1" cellpadding="1" cellspacing="1">
	
		<tr>
			<td>
				<strong>Symbol</strong></td>
			<td>
				<strong>Description</strong></td>
		</tr>
		<tr>
			<td>
				<p>Message Burst</p>
				<p><img class="image image-_original " height="13" src="/sites/default/files/images/burst.png" width="53" /></p>
			</td>
			<td>
				Because of a lack of pixels it is not possible to display a large number of messages in a very short interval. Therefore, these messages are summarized as so-called message bursts. Zooming into this interval reveals the corresponding single messages.</td>
		</tr>
		<tr>
			<td>
				<p>Markers</p>
				<p><img class="image image-_original " height="9" src="/sites/default/files/images/marker-multiple.png" width="13" />multiple</p>
				<p><img class="image image-_original " height="9" src="/sites/default/files/images/marker-template.png" width="13" />single</p>
			</td>
			<td>
				To indicate particular points (like errors or warnings) during the runtime of an application, markers can be used in a tracefile. They are drawn as triangles, which are colored according to their types. To illustrate that two or more markers are placed at the same pixel, a multiple marker is drawn.</td>
		</tr>
		<tr>
			<td>
				<p>I/O Events</p>
				<p><img class="image image-_original " height="23" src="/sites/default/files/images/io-multiple.png" width="46" />multiple</p>
				<p><img class="image image-_original " height="37" src="/sites/default/files/images/io-single.png" width="49" />single</p>
				<p><img class="image image-_original " height="36" src="/sites/default/files/images/io-single-selected.png" width="50" />single, selected</p>
			</td>
			<td>
				<p>Vampir shows detailed information about I/O operations, if they are included in the tracefile. I/O events are depicted as triangles at the beginning of an I/O interval. Multiple I/O events are tricolored and occupy a line to the end of the interval. To see the whole interval of a single I/O event, the triangle has to be selected. In that case, a second triangle at the end of the interval appears.</p>
				<p>Since the&nbsp;<em>Process Timeline</em>&nbsp;reveals information of one process only, short black arrows are used to indicate outgoing communication. Clicking on message lines or arrows shows message details like sender process, receiver process, message length, message duration, and message tag in the&nbsp;<em>Context View</em>&nbsp;display.</p>
			</td>
		</tr>
	
</table>
<h3>
	<strong>Counter Data Timeline</strong></h3>
<p>Counters are values collected over time to count certain events like floating point operations or cache misses. Counter values can be used to store not just hardware performance counters but arbitrary sample values. There can be counters for different statistical information as well, for instance, counting the number of function calls or a value in an iterative approximation of the final result. Counters are defined during the instrumentation of the application and can be individually assigned to processes.</p>
<p><img class="image image-_original " height="600" src="/sites/default/files/images/Counter_data_timeline.png" width="800" /></p>
<p align="center"><strong>Counter Data Timeline</strong></p>
<p>The chart is restricted to one counter at a time. It shows the selected counter for one process. Using multiple instances of the&nbsp;<em>Counter Data Timeline,</em> counters or processes can be compared easily. The context menu entry&nbsp;<em>Set Counter</em>&nbsp;allows you to choose the displayed counter directly from a drop-down list. The entry&nbsp;<em>Set Process</em>&nbsp;selects the particular process for which the counter is shown.</p>
<h3>
	<strong>Performance Radar</strong></h3>
<p>The Performance Radar chart provides the search of function occurrences in the trace file and the extended visualization of counters. It can happen that a function is not shown in&nbsp;<em>Master</em>&nbsp;and&nbsp;<em>Process Timeline</em>&nbsp;due to a short runtime. An alternative to zooming is the option&nbsp;<em>Find Function...</em>. A color-coded timeline indicates the intervals in which the function is executed.</p>
<p><img class="image image-_original " height="332" src="/sites/default/files/images/performance_radar_find_function.png" width="614" /></p>
<p align="center"><strong>Performance Radar Timeline - Search of Functions</strong></p>
<p>By default, the Performance Radar shows the values of one counter for each process (thread). In this mode the user can choose between <em>Line Plot</em>&nbsp;and&nbsp;<em>Color Coded</em>&nbsp;drawing. In the latter case, a color scale on the bottom provides information about the range of values. Clicking on&nbsp;<em>Set Counter...</em>&nbsp;leads to a dialog that offers the option of choosing another counter and calculating the sum or average values. Summarizing means that the values of the selected counter of all processes are summed up. The average is this sum divided by the number of processes. Both options provide a single graph.</p>
<p><img class="image image-_original " height="332" src="/sites/default/files/images/performance_radar_set_counter.png" width="614" /></p>
<p align="center"><strong>Performance Radar Timeline - Visualization of Counters</strong></p>
<h2>
	<strong>Statistical Charts</strong></h2>
<h3>
	<strong>Call Tree</strong></h3>
<p>The&nbsp;<em>Call Tree</em> illustrates the invocation hierarchy of all monitored functions in a tree representation. The display reveals information about the number of invocations of a given function, the time spent in the different calls, and the caller-callee relationship.</p>
<p><img class="image image-_original " height="600" src="/sites/default/files/images/Call_tree.png" width="800" /></p>
<p align="center"><strong>Call Tree</strong></p>
<p>The entries of the&nbsp;<em>Call Tree</em>&nbsp;can be sorted in various ways. Simply click on one header of the tree representation to use its characteristic to resort the&nbsp;<em>Call Tree</em>. Please note that not all available characteristics are enabled by default. To add or remove characteristics, a context menu is accessible by right-clicking on any of the tree headers. To leaf through the different function calls, it is possible to fold and unfold the levels of the tree. This can be achieved by double-clicking a level, or by using the fold level buttons next to the function name. Functions can be called by many different caller functions, which is hardly obvious in the tree representation. Therefore, a relation view shows all callers and callees of the currently selected function in two separated lists, as shown in the lower area. To find a certain function by its name, Vampir provides a search option accessible with the context menu entry&nbsp;<em>Show Find View</em>. The entered keyword has to be confirmed by pressing the Return key. The&nbsp;<em>Previous</em>&nbsp;and&nbsp;<em>Next</em>&nbsp;buttons can be used to flip through the results afterwards.</p>
<h3>
	<strong>Function Summary</strong></h3>
<p>The&nbsp;<em>Function Summary</em>&nbsp;chart gives an overview of the accumulated time consumption across all function groups and functions. For example every time a process calls the MPI_Send() function, the elapsed time of that function is added to the MPI function group time. The chart gives a condensed view on the execution of the application and a comparison between the different function groups can be made so that dominant function groups can be distinguished easily.</p>
<p><img class="image image-_original " height="600" src="/sites/default/files/images/Function_summary.png" width="800" /></p>
<p align="center"><strong>Function Summary</strong></p>
<p>It is possible to change the information displayed via the context menu entry&nbsp;<em>Set Metric</em>, which offers values like&nbsp;<em>Average Exclusive Time</em>, <em>Number of Invocations</em>,&nbsp;<em>Accumulated Inclusive Time</em>&nbsp;and others. Note:&nbsp;<em>Inclusive</em>&nbsp;means the amount of time spent in a function and all of its subroutines.&nbsp;<em>Exclusive</em>&nbsp;means the amount of time just spent in this function. The context menu entry&nbsp;<em>Set Event Category</em>&nbsp;specifies whether either function groups or functions should be displayed in the chart. The functions own the color of their function group. It is possible to hide functions and function groups from the displayed information with the context menu entry&nbsp;<em>Filter</em>. To mark the function or function group to be filtered, click the associated label or color representation in the chart. Using the&nbsp;<em>Process Filter</em>&nbsp;allows you to restrict this view to a set of processes. As a result, only the consumed time of these processes is displayed for each function group or function. Instead of using the filter (which affects all other displays by hiding processes), it is possible to select a single process via&nbsp;<em>Set Process</em>&nbsp;in the context menu of the <em>Function Summary</em>. This does not have any effect on other timeline displays. The&nbsp;<em>Function Summary</em>&nbsp;can be shown as a&nbsp;<em>Histogram</em>&nbsp;(a bar chart, as in timeline charts) or as a&nbsp;<em>Pie Chart</em>. To switch between these representations, use the&nbsp;<em>Set Chart Mode</em>&nbsp;entry of the context menu. The shown functions or function groups can be sorted by name or value via the context menu option&nbsp;<em>Sort By</em>.</p>
<h3>
	<strong>Process Summary</strong></h3>
<p>The&nbsp;<em>Process Summary</em>&nbsp;is similar to the&nbsp;<em>Function Summary</em>&nbsp;but shows the information for every process independently.</p>
<p><img class="image image-_original " height="600" src="/sites/default/files/images/Process_summary.png" width="800" /></p>
<p align="center"><strong>Process Summary</strong></p>
<p>This is useful for analyzing the balance between processes to reveal bottlenecks. For instance, finding that one process spends a significantly high time performing the calculations could indicate an unbalanced distribution of work that can slow down the entire application. The context menu entry&nbsp;<em>Set Event Category</em>&nbsp;specifies whether either function groups or functions should be displayed in the chart. The functions own the color of their function group. The chart can calculate the analysis based on&nbsp;<em>Exclusive Time</em>&nbsp;or&nbsp;<em>Inclusive Time</em>. To change between these two modes, use the context menu entry&nbsp;<em>Set Metric</em>. It is possible to hide functions and function groups from the displayed information with the context menu entry&nbsp;<em>Filter</em>. To mark the function or function group to be filtered, click on the associated color representation in the chart. Using the&nbsp;<em>Process Filter</em>&nbsp;allows you to restrict this view to a set of processes.</p>
<h3>
	<strong>Message Summary</strong></h3>
<p>The&nbsp;<em>Message Summary</em>&nbsp;is a statistical chart showing an overview of the different messages grouped by certain characteristics.</p>
<p><img class="image image-_original " height="600" src="/sites/default/files/images/Messagesummary.png" width="800" /></p>
<p align="center"><strong>Message Summary Chart with metric set to&nbsp;<em>Message Transfer Rate</em>&nbsp;showing the average transfer rate&nbsp;(A), and the minimal/maximal transfer rate&nbsp;(B)</strong></p>
<p>All values are represented in a bar chart fashion. The number next to each bar is the group base, while the number inside a bar depicts the different values depending on the chosen metric. Therefore, the&nbsp;<em>Set Metric</em>&nbsp;sub-menu of the context menu can be used to switch between <em>Aggregated Message Volume</em>,&nbsp;<em>Message Size</em>,&nbsp;<em>Number of Messages</em>, and&nbsp;<em>Message Transfer Rate</em>. The group base can be changed via the context menu entry&nbsp;<em>Group By</em>. It is possible to choose between&nbsp;<em>Message Size</em>,&nbsp;<em>Message Tag</em>, and&nbsp;<em>Communicator (MPI)</em>.<br />
	<br />
	<strong>Note</strong>: There will be one bar for every occurring group. However, if metric is set to&nbsp;<em>Message Transfer Rate</em>, the minimal and the maximal transfer rate is given in an additional bar beneath the one showing the average transfer rate. The additional bar starts at the minimal rate and ends at the maximal one. To filter out messages, click on the associated label or color representation in the chart and choose&nbsp;<em>Filter</em>&nbsp;from the context menu afterwards.</p>
<h3>
	<strong>Communication Matrix View</strong></h3>
<p>The&nbsp;<em>Communication Matrix View</em>&nbsp;is another way of analyzing communication imbalances. It shows information about messages sent between processes.</p>
<p><img class="image image-_original " height="600" src="/sites/default/files/images/Communication_matrix_view.png" width="800" /></p>
<p align="center"><strong>Communication Matrix View</strong></p>
<p>The chart is realized as a table. Its rows represent the sending processes while its columns represent the receivers. The color legend on the right indicates the displayed values. Depending on the displayed information, the color legend changes. It is possible to change the type of displayed values. Different metrics like the average duration of messages passed from sender to recipient or minimum and maximum bandwidth are offered. To change the type of value that is displayed, use the context menu option&nbsp;<em>Set Metric</em>. Use the&nbsp;<em>Process Filter</em>&nbsp;to define which processes/groups should be displayed.<br />
	<br />
	<strong>Note</strong>: A high duration is not automatically caused by a slow communication path between two processes, but can also be due to the fact that the time between starting transmission and successful reception of the message can be increased by a recipient that delays reception for some reason. This will cause the duration to increase (by this delay) and the message rate, which is the size of the message divided by the duration, to decrease accordingly.</p>
<h2>
	<strong>Informational Charts</strong></h2>
<h2>
	<strong>Function Legend</strong></h2>
<p>The&nbsp;<em>Function Legend</em>&nbsp;lists all visible function groups of the loaded trace file along with its corresponding color.</p>
<p><img class="image image-_original " height="606" src="/sites/default/files/images/Function_legend.png" width="800" /></p>
<p align="center"><strong>Function Legend</strong></p>
<p>If colors of functions are changed, they appear in a tree-like fashion under their respective function group as well.</p>
<p><img class="image image-_original " height="600" src="/sites/default/files/images/Marker_view.png" width="800" /></p>
<p align="center"><strong>A chosen marker (A) and its representation in the Marker View (B)</strong></p>
<p>The display is given in a tree-like fashion and organizes the marker events in their respective groups and types. Additional information, like the time of occurrence in the trace file and its description, is provided for each marker. By clicking on a marker event in the&nbsp;<em>Marker View</em>, this event gets selected in the timeline displays that are currently open, and vice-versa. If this marker event is not visible, the zooming area jumps to this event automatically. It is possible to select markers and types. Then all events belonging to that marker or type get selected in the&nbsp;<em>Master Timeline</em>&nbsp;and the&nbsp;<em>Process Timeline</em>. If&nbsp;<em>Ctrl</em>&nbsp;or&nbsp;<em>Shift</em>&nbsp;is pressed, the user can highlight several events. In this case, the user can fit the borders of the zooming area in the timeline charts to the timestamps of the two marker events that were chosen at last.</p>
<h3>
	<strong>Context View</strong></h3>
<p><img class="image image-_original " height="600" src="/sites/default/files/images/Context_view.png" width="800" /></p>
<p align="center"><strong>Context View, showing context information (B) of a selected function (A)</strong></p>
<p>As implied by its name, the&nbsp;<em>Context View</em>&nbsp;provides more detailed information of a selected object compared to its graphical representation. An object, e.g., a function, function group, message, or message burst, can be selected directly in a chart by clicking its graphical representation. For different types of objects, different context information is provided by the&nbsp;<em>Context View</em>. For example, the object-specific information for functions holds properties like&nbsp;<em>Interval Begin</em>,&nbsp;<em>Interval End</em>, and&nbsp;<em>Duration</em>. The&nbsp;<em>Context View</em>&nbsp;may contain several tabs, and a new empty one can be added by clicking on the&nbsp;<em>add</em>-symbol on the right hand side. If an object in another chart is selected, its information is displayed in the current tab. If the&nbsp;<em>Context View</em>&nbsp;is closed, it opens automatically in that moment. The&nbsp;<em>Context View</em>&nbsp;offers a comparison between the information that is displayed in different tabs. Just use the&nbsp;<em>=</em>&nbsp;on the left hand side and choose two objects in the emerged dialog. It is possible to compare different elements from different charts, which can be useful in some cases. The comparison shows a list of common properties. The corresponding values are displayed, along with their difference if the values are numbers. The first line always shows the names of the displays.</p>
<p><img class="image image-_original " height="394" src="/sites/default/files/images/context_compare.png" width="761" /></p>
<p align="center"><strong>Comparison between Context Information</strong></p>
<h2>
	<strong>Information Filtering and Reduction</strong></h2>
<p>Due to the large amount of information that can be stored in trace files, it is usually necessary to reduce the displayed information according to some filter criteria. In Vampir, there are different ways of filtering. It is possible to limit the displayed information to a certain choice of processes or to specific types of communication events, e.g., to certain types of messages or collective operations. Deselecting an item in a filter means that this item is fully masked. In Vampir, filters are global. Therefore, masked items will no longer show up in any chart. Filtering not only affects the different charts, but also the <em>Zoom Toolbar. The different filters can be reached via the&nbsp;</em>Filter <em>entry in the main menu.</em></p>
<p>The example below shows a typical process representation in the&nbsp;<em>Process Filter</em>&nbsp;window. This kind of representation is equal to all other filters. Processes can be filtered by their&nbsp;<em>Process Group</em>,&nbsp;<em>Communicators</em>&nbsp;and&nbsp;<em>Process Hierarchy</em>. Items to be filtered are arranged in a spreadsheet representation. In addition to selecting or deselecting an entire group of processes, it is certainly possible to filter single processes.</p>
<p><img class="image image-_original " height="382" src="/sites/default/files/images/process_filter.png" width="599" /></p>
<p align="center"><strong>Process Filter</strong></p>
<p>Different selection methods can be used in a filter. The check box&nbsp;<em>Include/Exclude All</em>&nbsp;either selects or deselects every item. Specific items can be selected/deselected by clicking the check box next to it. Furthermore, it is possible to select/deselect multiple items at once; mark the desired entries by clicking their names while holding either the&nbsp;<em>Shift</em>&nbsp;or the&nbsp;<em>Ctrl</em>&nbsp;key. By holding the&nbsp;<em>Shift</em>&nbsp;key every item in between the two clicked items will be marked. Holding the&nbsp;<em>Ctrl</em>&nbsp;key, on the other hand, enables you to add or remove specific items from/to the marked ones. Clicking the check box of one of the marked entries will cause selection/deselection for all of them.</p>
<p align="center"><strong>Options of Filtering</strong></p>
<table align="center" border="1" cellpadding="1" cellspacing="1">
	
		<tr>
			<td>
				<strong>Filter Object</strong></td>
			<td>
				<strong>Filter Criteria</strong></td>
		</tr>
		<tr>
			<td>
				Processes</td>
			<td>
				Process Groups</td>
		</tr>
		<tr>
			<td>
				&nbsp;</td>
			<td>
				Communicators</td>
		</tr>
		<tr>
			<td>
				&nbsp;</td>
			<td>
				Process Hierarchy</td>
		</tr>
		<tr>
			<td>
				&nbsp;</td>
			<td>
				Single Processes</td>
		</tr>
		<tr>
			<td>
				Collective Operations</td>
			<td>
				Communicators</td>
		</tr>
		<tr>
			<td>
				&nbsp;</td>
			<td>
				Collective Operations</td>
		</tr>
		<tr>
			<td>
				Messages</td>
			<td>
				Message Communicators</td>
		</tr>
		<tr>
			<td>
				&nbsp;</td>
			<td>
				Message Tags</td>
		</tr>
		<tr>
			<td>
				I/O Events</td>
			<td>
				I/O Groups</td>
		</tr>
		<tr>
			<td>
				&nbsp;</td>
			<td>
				Files</td>
		</tr>
		<tr>
			<td>
				&nbsp;</td>
			<td>
				Types</td>
		</tr>
	
</table>
<h1>
	<strong>Customization</strong></h1>
<p>The appearance of the trace file and various other application settings can be altered in the preferences accessible via the main menu entry <em>File-&gt;Preferences</em>. Settings concerning the trace file itself, e.g., layout or function group colors, are saved individually next to the tracefile in a file, whose end is&nbsp;<em>.vsettings</em>. In this way, it is possible to adjust the colors for one trace file without interfering with other trace files. The options <em>Import Preferences</em>&nbsp;and&nbsp;<em>Export Preferences</em>&nbsp;provide the loading and saving of preferences of arbitrary tracefiles.</p>
<h2>
	<strong>General Preferences</strong></h2>
<p>The&nbsp;<em>General</em>&nbsp;settings allow you to change application and trace specific values.</p>
<p><img class="image image-_original " height="522" src="/sites/default/files/images/pref_general.png" width="746" /></p>
<p align="center"><strong>General Settings</strong></p>
<p><em>Show time as </em>decides whether the time format for the trace analysis is based on seconds or ticks. The next point&nbsp;<em>Use color gradient in charts </em>allows you to switch off the color gradient used in the performance charts. The next option is to change the style and size of the font.&nbsp;<em>Show source code</em> allows you to open an editor showing the respective source file. In order to open a source file, first click on the intended function in the&nbsp;<em>Master Timeline</em>&nbsp;and then on the source code path in the&nbsp;<em>Context View</em>. For the source code location to work properly, you need a trace file with source code location support. The path of the source file can be adjusted in&nbsp;<em>Preferences</em>. A limit for the size of the file can be set, too. Finally, the user can decide if he wants Vampir to automatically check for new versions.</p>
<h2>
	<strong>Appearance</strong></h2>
<p>In the&nbsp;<em>Appearance</em>&nbsp;settings of the&nbsp;<em>Preferences</em>&nbsp;dialog, there are six different objects for which the color options can be changed: the functions/function groups, markers, counters, collectives, messages and I/O events. Choose an entry and click on its color to make a modification. A color picker dialog opens where it is possible to adjust the color. For messages and collectives, a change of the line width is also available.</p>
<p><img class="image image-_original " height="522" src="/sites/default/files/images/pref_appearance.png" width="748" /></p>
<p align="center"><strong>Appearance Settings</strong></p>
<p>In order to quickly find the desired item a search box is provided at the bottom of the dialog.</p>
<h2>
	<strong>Saving Policy</strong></h2>
<p>Vampir detects whenever changes to the various settings are made. In the&nbsp;<em>Saving Policy</em>&nbsp;dialog it is possible to adjust the saving behavior of the different components to your own needs.</p>
<p>&nbsp;</p>
<p align="center"><strong>Saving Policy Settings</strong></p>
<p>In the dialog&nbsp;<em>Saving Behavior</em>&nbsp;you tell Vampir what to do in the case of changed preferences. The user can choose the categories of settings (e.g., layout) that should be treated. Possible options are that the application automatically&nbsp;<em>Always</em>&nbsp;or&nbsp;<em>Never</em>&nbsp;saves changes. The default option is to have Vampir asking you whether to save or discard changes. Usually the settings are stored in the folder of the tracefile. If the user has no access to it, it is possible to place them in the&nbsp;<em>Application Data Folder</em>. They are listed in the tab&nbsp;<em>Locally Stored Preferences</em>&nbsp;with creation and modification date.<br />
	<br />
	<strong>Note</strong>: On loading, Vampir favors settings in the&nbsp;<em>Application Data Folder</em>.&nbsp;<em>Default Preferences</em>&nbsp;offers to save preferences of the current trace file as default settings, where they are then used for tracefiles without settings. Another option is to restore the default settings; in this case, the current preferences of the tracefile are reverted.</p>
<h1>
	<strong>Footnotes</strong></h1>
<p>Additional links that might be of interest to the reader:</p>
<p>... (OTF)&nbsp;<a href="http://www.tu-dresden.de/zih/otf" title="http://www.tu-dresden.de/zih/otf">http://www.tu-dresden.de/zih/otf</a></p>
<p>... WindowsHPC&nbsp;<a href="http://resourcekit.windowshpc.net/MORE_INFO/TracingMPIApplications.html" title="http://resourcekit.windowshpc.net/MORE_INFO/TracingMPIApplications.html">http://resourcekit.windowshpc.net/MORE_INFO/TracingMPIApplications.html</a></p>
<p>... Manual&nbsp;<a href="http://www.tu-dresden.de/zih/vampirtrace" title="http://www.tu-dresden.de/zih/vampirtrace">http://www.tu-dresden.de/zih/vampirtrace</a></p>
<p>Retrieved from &quot;<a href="https://wiki.futuregrid.org/index.php/Docs/Performance/Vampir">https://wiki.futuregrid.org/index.php/Docs/Performance/Vampir</a>&quot;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>  </div>
<div id="node-684" class="section-4">
  <h1 class="book-heading">VampirTrace</h1>
  <p>
<!--[if gte mso 10]> <style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:"Table Normal";
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-priority:99;
	mso-style-parent:"";
	mso-padding-alt:0in 5.4pt 0in 5.4pt;
	mso-para-margin-top:0in;
	mso-para-margin-right:0in;
	mso-para-margin-bottom:10.0pt;
	mso-para-margin-left:0in;
	line-height:115%;
	mso-pagination:widow-orphan;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";
	mso-ascii-font-family:Calibri;
	mso-ascii-theme-font:minor-latin;
	mso-hansi-font-family:Calibri;
	mso-hansi-theme-font:minor-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:minor-bidi;}
table.MsoTableGrid
	{mso-style-name:"Table Grid";
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-priority:59;
	mso-style-unhide:no;
	border:solid windowtext 1.0pt;
	mso-border-alt:solid windowtext .5pt;
	mso-padding-alt:0in 5.4pt 0in 5.4pt;
	mso-border-insideh:.5pt solid windowtext;
	mso-border-insidev:.5pt solid windowtext;
	mso-para-margin:0in;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";
	mso-ascii-font-family:Calibri;
	mso-ascii-theme-font:minor-latin;
	mso-hansi-font-family:Calibri;
	mso-hansi-theme-font:minor-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:minor-bidi;}
</style> <![endif]--><!--[if gte mso 10]> <style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:"Table Normal";
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-priority:99;
	mso-style-parent:"";
	mso-padding-alt:0in 5.4pt 0in 5.4pt;
	mso-para-margin-top:0in;
	mso-para-margin-right:0in;
	mso-para-margin-bottom:10.0pt;
	mso-para-margin-left:0in;
	line-height:115%;
	mso-pagination:widow-orphan;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";
	mso-ascii-font-family:Calibri;
	mso-ascii-theme-font:minor-latin;
	mso-hansi-font-family:Calibri;
	mso-hansi-theme-font:minor-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:minor-bidi;}
table.MsoTableGrid
	{mso-style-name:"Table Grid";
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-priority:59;
	mso-style-unhide:no;
	border:solid windowtext 1.0pt;
	mso-border-alt:solid windowtext .5pt;
	mso-padding-alt:0in 5.4pt 0in 5.4pt;
	mso-border-insideh:.5pt solid windowtext;
	mso-border-insidev:.5pt solid windowtext;
	mso-para-margin:0in;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";
	mso-ascii-font-family:Calibri;
	mso-ascii-theme-font:minor-latin;
	mso-hansi-font-family:Calibri;
	mso-hansi-theme-font:minor-latin;
	mso-bidi-font-family:"Times New Roman";
	mso-bidi-theme-font:minor-bidi;}
</style> <![endif]--></p>
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><a name="top"></a><span style="font-family: 'times new roman','serif'; font-size: 12pt;">&nbsp;</span></p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">VampirTrace consists of a tool set and a runtime library for instrumentation and tracing of software applications. It is particularly tailored to parallel and distributed High Performance Computing (HPC) applications. </span></p>
<p class="MsoNormal" style="line-height: normal;"><a name="availability"><strong><span style="font-family: 'times new roman','serif'; font-size: 24pt;">Availability</span></strong></a><strong><span style="font-family: 'times new roman','serif'; font-size: 24pt;"> </span></strong></p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">VampirTrace is currently available on FutureGrid machines under module &#39;vampirtrace&#39;. VampirTrace is also available in OpenMPI versions 1.5.x or higher. For example on Bravo, it is available as <em>openmpi/1.5.4-gnu</em> or <em>openmpi/1.5.4-intel</em>. </span></p>
<p class="MsoNormal" style="line-height: normal;"><a name="Overview"><strong><span style="font-family: 'times new roman','serif'; font-size: 24pt;">Overview</span></strong></a><strong><span style="font-family: 'times new roman','serif'; font-size: 24pt;"> </span></strong></p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">The instrumentation part of VampirTrace modifies a given application in order to inject additional measurement calls during runtime. The tracing part provides the actual measurement functionality used by the instrumentation calls. By this means, a variety of detailed performance properties can be collected and recorded during runtime. This includes function enter and leave events, MPI communication, OpenMP events, and performance counters. </span></p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">After a successful tracing run, VampirTrace writes all collected data to a trace file in the Open Trace Format (OTF). As a result, the information is available for post-mortem analysis and visualization by various tools. Most notably, VampirTrace provides the input data for the Vampir analysis and visualization tool. </span></p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Trace files can quickly become very large, especially with automatic instrumentation. Tracing applications for only a few seconds can result in trace files of several hundred megabytes. To protect users from creating trace files of several gigabytes, the default behavior of VampirTrace limits the internal buffer to 32MB per process (2GB on FutureGrid systems). Thus, even for larger scale runs the total trace file size will be moderate. </span></p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">The following list shows a summary of all instrumentation and tracing features that VampirTrace offers. Note that not all features are supported on all platforms. </span></p>
<p class="MsoNormal" style="line-height: normal;"><strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Tracing of User Functions</span></strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
<ul type="disc">
<li class="MsoNormal" style="line-height: normal;">
		<span style="font-family: 'times new roman','serif'; font-size: 12pt;">Record function enter and leave events </span></li>
<li class="MsoNormal" style="line-height: normal;">
		<span style="font-family: 'times new roman','serif'; font-size: 12pt;">Record name and source code location (file name, line) </span></li>
<li class="MsoNormal" style="line-height: normal;">
		<span style="font-family: 'times new roman','serif'; font-size: 12pt;">Manual instrumentation using VampirTrace API </span></li>
</ul>
<p class="MsoNormal" style="line-height: normal;"><strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;">MPI Tracing</span></strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
<ul type="disc">
<li class="MsoNormal" style="line-height: normal;">
		<span style="font-family: 'times new roman','serif'; font-size: 12pt;">Record MPI functions </span></li>
<li class="MsoNormal" style="line-height: normal;">
		<span style="font-family: 'times new roman','serif'; font-size: 12pt;">Record MPI communication: participating processes, transferred bytes, tag, communicator </span></li>
</ul>
<p class="MsoNormal" style="line-height: normal;"><strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;">OpenMP Tracing</span></strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
<ul type="disc">
<li class="MsoNormal" style="line-height: normal;">
		<span style="font-family: 'times new roman','serif'; font-size: 12pt;">OpenMP directives, synchronization, thread idle time </span></li>
<li class="MsoNormal" style="line-height: normal;">
		<span style="font-family: 'times new roman','serif'; font-size: 12pt;">Also hybrid (MPI and OpenMP) applications are supported </span></li>
</ul>
<p class="MsoNormal" style="line-height: normal;"><strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Pthread Tracing</span></strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
<ul type="disc">
<li class="MsoNormal" style="line-height: normal;">
		<span style="font-family: 'times new roman','serif'; font-size: 12pt;">Trace POSIX thread API calls </span></li>
<li class="MsoNormal" style="line-height: normal;">
		<span style="font-family: 'times new roman','serif'; font-size: 12pt;">Also hybrid (MPI and POSIX threads) applications are supported </span></li>
</ul>
<p class="MsoNormal" style="line-height: normal;"><strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Java Tracing</span></strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
<ul type="disc">
<li class="MsoNormal" style="line-height: normal;">
		<span style="font-family: 'times new roman','serif'; font-size: 12pt;">Record method calls </span></li>
<li class="MsoNormal" style="line-height: normal;">
		<span style="font-family: 'times new roman','serif'; font-size: 12pt;">Using JVMTI as interface between VampirTrace and Java Applications </span></li>
</ul>
<p class="MsoNormal" style="line-height: normal;"><strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;">3rd-Party Library tracing</span></strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
<ul type="disc">
<li class="MsoNormal" style="line-height: normal;">
		<span style="font-family: 'times new roman','serif'; font-size: 12pt;">Trace calls to arbitrary third party libraries </span></li>
<li class="MsoNormal" style="line-height: normal;">
		<span style="font-family: 'times new roman','serif'; font-size: 12pt;">Generate wrapper for library functions based on library&rsquo;s header file(s) </span></li>
<li class="MsoNormal" style="line-height: normal;">
		<span style="font-family: 'times new roman','serif'; font-size: 12pt;">No recompilation of application or library is required </span></li>
</ul>
<p class="MsoNormal" style="line-height: normal;"><strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;">MPI Correctness Checking</span></strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
<ul type="disc">
<li class="MsoNormal" style="line-height: normal;">
		<span style="font-family: 'times new roman','serif'; font-size: 12pt;">Record MPI usage errors </span></li>
<li class="MsoNormal" style="line-height: normal;">
		<span style="font-family: 'times new roman','serif'; font-size: 12pt;">Using UniMCI as interface between VampirTrace and a MPI correctness checking tool (e.g., Marmot) </span></li>
</ul>
<p class="MsoNormal" style="line-height: normal;"><strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;">User API</span></strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
<ul type="disc">
<li class="MsoNormal" style="line-height: normal;">
		<span style="font-family: 'times new roman','serif'; font-size: 12pt;">Manual instrumentation of source code regions </span></li>
<li class="MsoNormal" style="line-height: normal;">
		<span style="font-family: 'times new roman','serif'; font-size: 12pt;">Measurement controls </span></li>
<li class="MsoNormal" style="line-height: normal;">
		<span style="font-family: 'times new roman','serif'; font-size: 12pt;">User-defined counters </span></li>
<li class="MsoNormal" style="line-height: normal;">
		<span style="font-family: 'times new roman','serif'; font-size: 12pt;">User-defined marker </span></li>
</ul>
<p class="MsoNormal" style="line-height: normal;"><strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Performance Counters</span></strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
<ul type="disc">
<li class="MsoNormal" style="line-height: normal;">
		<span style="font-family: 'times new roman','serif'; font-size: 12pt;">Hardware performance counters using PAPI, CPC, or NEC SX performance counter </span></li>
<li class="MsoNormal" style="line-height: normal;">
		<span style="font-family: 'times new roman','serif'; font-size: 12pt;">Resource usage counters using getrusage </span></li>
</ul>
<p class="MsoNormal" style="line-height: normal;"><strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Memory Tracing</span></strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
<ul type="disc">
<li class="MsoNormal" style="line-height: normal;">
		<span style="font-family: 'times new roman','serif'; font-size: 12pt;">Trace GLIBC memory allocation and free functions </span></li>
<li class="MsoNormal" style="line-height: normal;">
		<span style="font-family: 'times new roman','serif'; font-size: 12pt;">Record size of currently allocated memory as counter </span></li>
</ul>
<p class="MsoNormal" style="line-height: normal;"><strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;">I/O Tracing</span></strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
<ul type="disc">
<li class="MsoNormal" style="line-height: normal;">
		<span style="font-family: 'times new roman','serif'; font-size: 12pt;">Trace LIBC I/O calls </span></li>
<li class="MsoNormal" style="line-height: normal;">
		<span style="font-family: 'times new roman','serif'; font-size: 12pt;">Record I/O events: file name, transferred bytes </span></li>
</ul>
<p class="MsoNormal" style="line-height: normal;"><strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;">CPU ID Tracing</span></strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
<ul type="disc">
<li class="MsoNormal" style="line-height: normal;">
		<span style="font-family: 'times new roman','serif'; font-size: 12pt;">Trace core ID of a CPU on which the calling thread is running </span></li>
<li class="MsoNormal" style="line-height: normal;">
		<span style="font-family: 'times new roman','serif'; font-size: 12pt;">Record core ID as counter </span></li>
</ul>
<p class="MsoNormal" style="line-height: normal;"><strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Fork/System/Exec Tracing</span></strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
<ul type="disc">
<li class="MsoNormal" style="line-height: normal;">
		<span style="font-family: 'times new roman','serif'; font-size: 12pt;">Trace applications calling LIBC&rsquo;s fork, system, or one of the exec functions </span></li>
<li class="MsoNormal" style="line-height: normal;">
		<span style="font-family: 'times new roman','serif'; font-size: 12pt;">Add forked processes to the trace </span></li>
</ul>
<p class="MsoNormal" style="line-height: normal;"><strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Filtering &amp; Grouping</span></strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
<ul type="disc">
<li class="MsoNormal" style="line-height: normal;">
		<span style="font-family: 'times new roman','serif'; font-size: 12pt;">Runtime and post-mortem filter (i.e., exclude functions from being recorded in the trace) </span></li>
<li class="MsoNormal" style="line-height: normal;">
		<span style="font-family: 'times new roman','serif'; font-size: 12pt;">Runtime grouping (i.e., assign functions to groups for improved analysis) </span></li>
</ul>
<p class="MsoNormal" style="line-height: normal;"><strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;">OTF Output</span></strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
<ul type="disc">
<li class="MsoNormal" style="line-height: normal;">
		<span style="font-family: 'times new roman','serif'; font-size: 12pt;">Writes compressed OTF files </span></li>
<li class="MsoNormal" style="line-height: normal;">
		<span style="font-family: 'times new roman','serif'; font-size: 12pt;">Output as trace file, statistical summary (profile), or both </span></li>
</ul>
<p class="MsoNormal" style="line-height: normal;"><a name="Instrumentation"><strong><span style="font-family: 'times new roman','serif'; font-size: 24pt;">Instrumentation </span></strong></a></p>
<p>&nbsp;</p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">To perform measurements with VampirTrace, the user&#39;s application program needs to be instrumented; that is, at specific points of interest (called &quot;events&quot;), VampirTrace measurement calls have to be activated. Common events are, among others, entering and leaving of functions as well as sending and receiving of MPI messages. VampirTrace handles this automatically by default. In order to enable the instrumentation of function calls, the user needs </span><span style="font-family: 'times new roman','serif'; font-size: 12pt;">only </span><span style="font-family: 'times new roman','serif'; font-size: 12pt;">to replace the compiler and linker commands with VampirTrace&rsquo;s wrappers (see below). VampirTrace supports different ways of instrumentation as described in the sections below. </span></p>
<p class="MsoNormal" style="line-height: normal;"><strong><span style="font-family: 'times new roman','serif'; font-size: 18pt;">Compiler Wrappers </span></strong></p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">All the necessary instrumentation of user functions, MPI, and OpenMP events is handled by VampirTrace&rsquo;s compiler wrappers (vtcc, vtcxx, vtf77, and vtf90). In the script used to build the application (e.g., a makefile), all compile and link commands should be replaced by the VampirTrace compiler wrapper. The wrappers perform the necessary instrumentation of the program and link the suitable VampirTrace library. The following list shows some examples specific to the parallelization type of the program: </span></p>
<ul style="margin-top: 0in;" type="disc">
<li class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;">
		<span style="font-family: 'times new roman','serif'; font-size: 12pt;">Serial programs</span></li>
</ul>
<p class="MsoNormal" style="line-height: normal; margin: 0in 0in 0pt 0.5in;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Compiling serial codes is the default behavior of the wrappers. Simply replace the compiler by VampirTrace&rsquo;s wrapper: </span></p>
<p class="MsoNormal" style="line-height: normal; margin: 0in 0in 0pt 0.5in;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">&nbsp;</span></p>
<table border="0" cellpadding="0" cellspacing="0" class="MsoTableGrid" style="border: medium none; border-collapse: collapse; background: none repeat scroll 0% 0% rgb(242, 242, 242);">
<tbody>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">original:<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>gfortran hello.f90 -o hello</span></p>
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">with instrumentation: <strong>vtf90</strong> hello.f90 -o hello<span>&nbsp; </span></span></p>
</td>
</tr>
</tbody>
</table>
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;"><span>&nbsp;</span></span></p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">This will instrument user functions (if supported by the compiler) and link the VampirTrace library. </span></p>
<ul style="margin-top: 0in;" type="disc">
<li class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;">
		<span style="font-family: 'times new roman','serif'; font-size: 12pt;">MPI parallel programs</span></li>
</ul>
<p class="MsoNormal" style="line-height: normal; margin: 0in 0in 0pt 0.5in;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">MPI instrumentation is always handled by means of the PMPI interface, which is part of the MPI standard. This requires the compiler wrapper to link with an MPI-aware version of the VampirTrace library. If your MPI implementation uses special MPI compilers (e.g. mpicc, mpxlf90), you will need to tell VampirTrace&rsquo;s wrapper to use this compiler instead of the serial one: </span></p>
<p class="MsoNormal" style="line-height: normal; margin: 0in 0in 0pt 0.5in;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">&nbsp;</span></p>
<table border="0" cellpadding="0" cellspacing="0" class="MsoTableGrid" style="border: medium none; border-collapse: collapse; background: none repeat scroll 0% 0% rgb(242, 242, 242); margin-left: 0.9pt;">
<tbody>
<tr>
<td style="padding: 0in 5.4pt; width: 477.9pt;" valign="top" width="637">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">original:<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>mpicc hello.c -o hello<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></p>
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">with instrumentation: <strong>vtcc -vt:cc mpicc</strong> hello.c -o hello</span></p>
</td>
</tr>
</tbody>
</table>
<p class="MsoNormal" style="line-height: normal; margin: 0in 0in 0pt 0.5in;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">&nbsp;</span></p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">MPI implementations without their own compilers require the user to link the MPI library manually. In this case, simply replace the compiler by VampirTrace&rsquo;s compiler wrapper: </span></p>
<table border="0" cellpadding="0" cellspacing="0" class="MsoTableGrid" style="border: medium none; border-collapse: collapse; background: none repeat scroll 0% 0% rgb(242, 242, 242);">
<tbody>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">original:<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>icc hello.c -o hello &ndash;lmpi </span></p>
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">with instrumentation: <strong>vtcc</strong> hello.c -o hello -lmpi</span></p>
</td>
</tr>
</tbody>
</table>
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">&nbsp;</span></p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">If you want to instrument MPI events only (this creates smaller trace files and less overhead), use the option <em>-vt:inst manual</em> to disable automatic instrumentation of user functions. </span></p>
<ul style="margin-top: 0in;" type="disc">
<li class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;">
		<span style="font-family: 'times new roman','serif'; font-size: 12pt;">Threaded parallel programs</span></li>
</ul>
<p class="MsoNormal" style="line-height: normal; margin: 0in 0in 0pt 0.5in;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">When VampirTrace detects OpenMP or Pthread flags on the command line, special instrumentation calls are invoked. For OpenMP events, OPARI is invoked for automatic source code instrumentation. </span></p>
<p class="MsoNormal" style="line-height: normal; margin: 0in 0in 0pt 0.5in;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">&nbsp;</span></p>
<table border="0" cellpadding="0" cellspacing="0" class="MsoTableGrid" style="border: medium none; border-collapse: collapse; background: none repeat scroll 0% 0% rgb(242, 242, 242);">
<tbody>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">original:<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>ifort &lt;-openmp|-pthread&gt; hello.f90 -o hello</span></p>
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">with instrumentation: <strong>vtf90</strong> &lt;-openmp|-pthread&gt; hello.f90 -o hello</span></p>
</td>
</tr>
</tbody>
</table>
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">&nbsp;</span></p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">For more information about OPARI, read the documentation available in VampirTrace&rsquo;s installation directory at: <a href="http://share/vampirtrace/doc/opari/Readme.html ">share/vampirtrace/doc/opari/Readme.html </a></span></p>
<ul style="margin-top: 0in;" type="disc">
<li class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;">
		<span style="font-family: 'times new roman','serif'; font-size: 12pt;">Hybrid MPI/Threaded parallel programs</span></li>
</ul>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">With a combination of the above mentioned approaches, hybrid applications can be instrumented: </span></p>
<table border="0" cellpadding="0" cellspacing="0" class="MsoTableGrid" style="border: medium none; border-collapse: collapse; background: none repeat scroll 0% 0% rgb(242, 242, 242);">
<tbody>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 9pt;">original:<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>mpif90 &lt;-openmp|-pthread&gt; hello.F90 -o hello<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></p>
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 9pt;">with instrumentation: <strong>vtf90 -vt:f90 mpif90</strong> &lt;-openmp|-pthread&gt; hello.F90 -o hello</span></p>
</td>
</tr>
</tbody>
</table>
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 9pt;">&nbsp;</span></p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">The VampirTrace compiler wrappers automatically try to detect which parallelization method is used by means of the compiler flags (e.g., -lmpi, -openmp or -pthread) and the compiler command (e.g. mpif90). If the compiler wrapper failed to detect this correctly, the instrumentation could be incomplete and an unsuitable VampirTrace library would be linked to the binary. In this case, you should tell the compiler wrapper which parallelization method your program uses by using the switches -vt:mpi, -vt:mt, and -vt:hyb for MPI, multithreaded, and hybrid programs, respectively. Note that these switches do not change the underlying compiler or compiler flags. Use the option -vt:verbose to see the command line that the compiler wrapper executes. </span></p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">The default settings of the compiler wrappers can be modified in the files <em>share/vampirtrace/vtcc-wrapper-data.txt</em> (and similar for the other languages) in the installation directory of VampirTrace. The settings include compilers, compiler flags, libraries, and instrumentation types. You could, for instance, modify the default C compiler from gcc to mpicc by changing the line <em>compiler=gcc</em> to <em>compiler=mpicc</em>. This may be convenient if you instrument MPI parallel programs only. </span></p>
<p class="MsoNormal" style="line-height: normal;"><a name="Instrumentation_Types"><strong><span style="font-family: 'times new roman','serif'; font-size: 18pt;">Instrumentation Types </span></strong></a></p>
<p>&nbsp;</p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">The wrapper option <em>-vt:inst &lt;insttype&gt;</em> specifies the instrumentation type to be used. The following values for <em>&lt;insttype&gt;</em> are possible: </span></p>
<ul style="margin-top: 0in;" type="disc">
<li class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;">
		<span style="font-family: 'times new roman','serif'; font-size: 12pt;">compinst </span></li>
</ul>
<p class="MsoNormal" style="line-height: normal; margin: 0in 0in 0pt 0.5in;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Fully-automatic instrumentation by the compiler </span></p>
<p>	&nbsp;</p>
<ul style="margin-top: 0in;" type="disc">
<li class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;">
		<span style="font-family: 'times new roman','serif'; font-size: 12pt;">manual </span></li>
</ul>
<p class="MsoNormal" style="line-height: normal; margin: 0in 0in 0pt 0.5in;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Manual instrumentation by using VampirTrace&rsquo;s API (needs source-code modifications) </span></p>
<p class="MsoNormal" style="line-height: normal;"><a name="Automatic_Instrumentation"><strong><span style="font-family: 'times new roman','serif'; font-size: 18pt;">Automatic Instrumentation </span></strong></a></p>
<p>&nbsp;</p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Automatic instrumentation is the most convenient method to instrument your program. If available, simply use the compiler wrappers without any parameters, e.g.: </span></p>
<table border="0" cellpadding="0" cellspacing="0" class="MsoTableGrid" style="border: medium none; border-collapse: collapse; background: none repeat scroll 0% 0% rgb(242, 242, 242);">
<tbody>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">vtf90 hello.f90 -o hello</span></p>
</td>
</tr>
</tbody>
</table>
<p class="MsoNormal" style="line-height: normal;"><a name="Notes_for_Using_the_GNU_or_Intel_Compile"></a><strong><span style="font-family: 'times new roman','serif'; font-size: 18pt;">Notes for Using the GNU or Intel Compiler </span></strong></p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">For these compilers, the command nm is required to get symbol information of the running application executable. To get the application executable for nm during runtime, VampirTrace uses the /proc file system. As /proc is not present on all operating systems, automatic symbol information might not be available. In this case, it is necessary to set the environment variable VT APPPATH to the pathname of the application executable to get symbols resolved via nm. </span></p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Should any problems emerge to get symbol information automatically, then the environment variable VT GNU NMFILE can be set to a symbol list file, which is created with the command nm, like: </span></p>
<table border="0" cellpadding="0" cellspacing="0" class="MsoTableGrid" style="border: medium none; border-collapse: collapse; background: none repeat scroll 0% 0% rgb(242, 242, 242);">
<tbody>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">nm hello &gt; hello.nm</span></p>
</td>
</tr>
</tbody>
</table>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">To get the source code line for the application functions use nm -l (on Linux systems). VampirTrace will include this information in the trace. Note that the output format of nm must be written in BSD-style. See the manual page of nm for help in dealing with the output format setting. </span></p>
<p class="MsoNormal" style="line-height: normal;"><a name="Notes_on_Instrumentation_of_Inline_Funct"></a><strong><span style="font-family: 'times new roman','serif'; font-size: 18pt;">Notes on Instrumentation of Inline Functions </span></strong></p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Compilers behave differently when they automatically instrument inlined functions. The GNU and Intel (10.0++) compilers instrument all functions by default when they are used with VampirTrace. They therefore switch off inlining completely, disregarding the optimization level chosen. One can prevent these particular functions from being instrumented by appending the following attribute to function declarations, hence making them able to be inlined (this works only for C/C++): </span></p>
<table border="0" cellpadding="0" cellspacing="0" class="MsoTableGrid" style="border: medium none; border-collapse: collapse; background: none repeat scroll 0% 0% rgb(242, 242, 242);">
<tbody>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">__attribute__ ((__no_instrument_function__))</span></p>
</td>
</tr>
</tbody>
</table>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">The PGI and IBM compilers prefer inlining over instrumentation when compiling with enabled inlining. Thus, one needs to disable inlining to enable the instrumentation of inline functions and vice versa. </span></p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">The bottom line is that a function cannot be inlined and instrumented at the same time. Note that you can also use the option <em>-vt:inst manual</em> with non-instrumented sources. Binaries created in this manner only contain MPI and OpenMP instrumentation, which might be desirable in some cases. For more on how to inline functions, read your compiler&rsquo;s manual. </span></p>
<p class="MsoNormal" style="line-height: normal;"><a name="Manual_Instrumentation"></a><strong><span style="font-family: 'times new roman','serif'; font-size: 18pt;">Manual Instrumentation </span></strong></p>
<p class="MsoNormal" style="line-height: normal;"><a name="Using_the_VampirTrace_API"></a><strong><span style="font-family: 'times new roman','serif'; font-size: 13.5pt;">Using the VampirTrace API </span></strong></p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">The <em>VT USER START, VT USER END</em> calls can be used to instrument any user-defined sequence of statements. </span></p>
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Fortran </span></p>
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">&nbsp;</span></p>
<table border="0" cellpadding="0" cellspacing="0" class="MsoTableGrid" style="border: medium none; border-collapse: collapse; background: none repeat scroll 0% 0% rgb(242, 242, 242);">
<tbody>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">#include &quot;vt_user.inc&quot;</span></p>
</td>
</tr>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_USER_START(&rsquo;name&rsquo;)</span></p>
</td>
</tr>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">...</span></p>
</td>
</tr>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_USER_END(&rsquo;name&rsquo;)</span></p>
</td>
</tr>
</tbody>
</table>
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">&nbsp;</span></p>
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">C </span></p>
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">&nbsp;</span></p>
<table border="0" cellpadding="0" cellspacing="0" class="MsoTableGrid" style="border: medium none; border-collapse: collapse; background: none repeat scroll 0% 0% rgb(242, 242, 242);">
<tbody>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">#include &quot;vt_user.h&quot;</span></p>
</td>
</tr>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_USER_START(&quot;name&quot;);</span></p>
</td>
</tr>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">...</span></p>
</td>
</tr>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_USER_END(&quot;name&quot;);</span></p>
</td>
</tr>
</tbody>
</table>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">If a block has several exit points (as is often the case for functions), all exit points have to be instrumented with VT USER END, too. </span></p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">For C++ it is simpler, as is demonstrated in the following example. Only entry points into a scope need to be marked. The exit points are detected automatically when C++ deletes scope-local variables. </span></p>
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">C++</span></p>
<table border="0" cellpadding="0" cellspacing="0" class="MsoTableGrid" style="border: medium none; border-collapse: collapse; background: none repeat scroll 0% 0% rgb(242, 242, 242);">
<tbody>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">#include &quot;vt_user.h&quot;</span></p>
</td>
</tr>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">{</span></p>
</td>
</tr>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;"><span>&nbsp;&nbsp;&nbsp; </span>VT_TRACER(&quot;name&quot;);</span></p>
</td>
</tr>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;"><span>&nbsp;&nbsp;&nbsp; </span>...</span></p>
</td>
</tr>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">}</span></p>
</td>
</tr>
</tbody>
</table>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">The instrumented sources have to be compiled with -DVTRACE for all three languages; otherwise the VT * calls are ignored. Note that Fortran source files instrumented this way have to be preprocessed, too. </span></p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">In addition, you can combine this particular instrumentation type with all other types. In such a way, all user functions can be instrumented by a compiler while special source code regions (e.g., loops) can be instrumented by VT&rsquo;s API. </span></p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Use VT&rsquo;s compiler wrapper (described above) for compiling and linking the instrumented source code, such as: </span></p>
<ul type="disc">
<li class="MsoNormal" style="line-height: normal;">
		<span style="font-family: 'times new roman','serif'; font-size: 12pt;">combined with automatic compiler instrumentation: </span></li>
</ul>
<table border="0" cellpadding="0" cellspacing="0" class="MsoTableGrid" style="border: medium none; border-collapse: collapse; background: none repeat scroll 0% 0% rgb(242, 242, 242);">
<tbody>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">vtcc <strong>-DVTRACE</strong> hello.c -o hello</span></p>
</td>
</tr>
</tbody>
</table>
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">&nbsp;</span></p>
<ul type="disc">
<li class="MsoNormal" style="line-height: normal;">
		<span style="font-family: 'times new roman','serif'; font-size: 12pt;">without compiler instrumentation: </span></li>
</ul>
<table border="0" cellpadding="0" cellspacing="0" class="MsoTableGrid" style="border: medium none; border-collapse: collapse; background: none repeat scroll 0% 0% rgb(242, 242, 242);">
<tbody>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">vtcc -vt:inst manual <strong>-DVTRACE</strong> hello.c -o hello</span></p>
</td>
</tr>
</tbody>
</table>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Note that you can also use the option -vt:inst manual with non-instrumented sources. Binaries created in this manner only contain MPI and OpenMP instrumentation, which might be desirable in some cases. </span></p>
<p class="MsoNormal" style="line-height: normal;"><a name="Measurement_Controls"></a><strong><span style="font-family: 'times new roman','serif'; font-size: 13.5pt;">Measurement Controls </span></strong></p>
<p class="MsoNormal" style="line-height: normal;"><strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Switching Tracing On/Off:</span></strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> In addition to instrumenting arbitrary blocks of code, one can use the VT_ON/ VT_OFF instrumentation calls to start and stop the recording of events. These constructs can be used to stop recording of events for a part of the application and later resume recording. For example, one could not collect trace events during the initialization phase of an application and turn on tracing for the computation part. </span></p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Furthermore, the &quot;on/off&quot; functionality can be used to control the tracing behavior of VampirTrace, and allows you to trace only parts of interests. Essentially, then, the amount of trace data can be reduced. </span></p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">To check whether if tracing is enabled or not, use the call VT_IS_ON. </span></p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Please note that stopping and starting the recording of events has to be performed at the same call stack level. If this is not the case, an error message will be printed during runtime, and VampirTrace will abort execution. </span></p>
<p class="MsoNormal" style="line-height: normal;"><strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Intermediate Buffer Flush:</span></strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> In addition to an automated buffer flush when the buffer is filled, it is possible to flush the buffer at any point of the application. This way you can guarantee that after a manual buffer flush there will be a sequence of the program with no automatic buffer flush interrupting. To flush the buffer, you can use the call VT_BUFFER_FLUSH. </span></p>
<p class="MsoNormal" style="line-height: normal;"><strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Intermediate Time Synchronisation:</span></strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> VampirTrace provides several mechanisms for timer synchronization. In addition, it is also possible to initiate a timer synchronization at any point of the application by calling VT_TIMESYNC. Please note that the user has to ensure that all processes are actual at a synchronized point in the program (e.g., at a barrier). To use this call, make sure that the enhanced timer synchronization is activated (set the environment variable VT_ETIMESYNC). </span></p>
<p class="MsoNormal" style="line-height: normal;"><strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Intermediate Counter Update:</span></strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> VampirTrace provides the functionality to collect the values of arbitrary hardware counters. Chosen counter values are automatically recorded whenever an event occurs. Sometimes (e.g., within a long-lasting function) it is desirable to get the counter values at an arbitrary point within the program. To record the counter values at any given point, you can call VT_UPDATE_COUNTER. </span></p>
<p class="MsoNormal" style="line-height: normal;"><strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Note:</span></strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> For all three languages the instrumented sources have to be compiled with -DVTRACE. Otherwise the VT * calls are ignored. In addition, if the sources contain further VampirTrace API calls and only the calls for measurement controls will be disabled, then the sources must also be compiled with -DVTRACE_NO_CONTROL. </span></p>
<p class="MsoNormal" style="line-height: normal;"><a name="Tracing_Calls_to_3rd-Party_Libraries"></a><strong><span style="font-family: 'times new roman','serif'; font-size: 18pt;">Tracing Calls to 3rd-Party Libraries </span></strong></p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">VampirTrace is also capable of tracing calls to third-party libraries which come with at least one C header file, even without the library&rsquo;s source code. If VampirTrace was built with support for library tracing, the tool vtlibwrapgen can be used to generate a wrapper library to intercept each call to the actual library functions. This wrapper library can be linked to the application, or used in combination with the LD PRELOAD mechanism provided by Linux. The generation of a wrapper library is done using the vtlibwrapgen command and consists of two steps. The first step generates a C source file, providing the wrapped functions of the library header file: </span></p>
<table border="0" cellpadding="0" cellspacing="0" class="MsoTableGrid" style="border: medium none; border-collapse: collapse; background: none repeat scroll 0% 0% rgb(242, 242, 242);">
<tbody>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">vtlibwrapgen -g SDL -o SDLwrap.c /usr/include/SDL/*.h</span></p>
</td>
</tr>
</tbody>
</table>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">This generates the source file <em>SDLwrap.c</em> that contains wrapper-functions for all library functions found in the header-files located in <em>/usr/include/SDL/ </em>, and instructs VampirTrace to assign these functions to the new group SDL. The generated wrapper source file can be edited in order to add manual instrumentation or alter attributes of the library wrapper. A detailed description can be found in the generated source file or in the header file <em>vt libwrap.h</em> , which can be found in the include directory of VampirTrace. To adapt the library instrumentation it is possible to pass a filter file to the generation process. The rules are like these for normal VampirTrace instrumentation, where only 0 (exclude functions) and -1 (generally include functions) are allowed. </span></p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">The second step is to compile the generated source file: </span></p>
<table border="0" cellpadding="0" cellspacing="0" class="MsoTableGrid" style="border: medium none; border-collapse: collapse; background: none repeat scroll 0% 0% rgb(242, 242, 242);">
<tbody>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">vtlibwrapgen --build --shared -o libSDLwrap SDLwrap.c</span></p>
</td>
</tr>
</tbody>
</table>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">This builds the shared library <em>libSDLwrap.so </em>, which can be linked to the application or preloaded by using the environment variable LD PRELOAD: </span></p>
<table border="0" cellpadding="0" cellspacing="0" class="MsoTableGrid" style="border: medium none; border-collapse: collapse; background: none repeat scroll 0% 0% rgb(242, 242, 242);">
<tbody>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">LD_PRELOAD=$PWD/libSDLwrap.so &lt;executable&gt;</span></p>
</td>
</tr>
</tbody>
</table>
<p class="MsoNormal" style="line-height: normal;"><a name="Runtime_Measurement"></a><strong><span style="font-family: 'times new roman','serif'; font-size: 24pt;">Runtime Measurement </span></strong></p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Running a VampirTrace instrumented application should normally result in an OTF trace file in the current working directory where the application was executed. If a problem occurs, set the environment variable VT_VERBOSE to 2 before executing the instrumented application in order to see control messages of the VampirTrace runtime system which might help tracking down the problem. </span></p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">The internal buffer of VampirTrace is limited to 32 MB per process. Use the environment variables VT_BUFFER_SIZE and VT_MAX_FLUSHES to increase this limit. </span></p>
<p class="MsoNormal" style="line-height: normal;"><a name="Trace_File_Name_and_Location"></a><strong><span style="font-family: 'times new roman','serif'; font-size: 18pt;">Trace File Name and Location </span></strong></p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">The default name of the trace file depends on the operating system where the application is run. On Linux, MacOS and Sun Solaris, the trace file will be named like the application, e.g., <em>hello.otf </em>for the executable hello. For other systems, the default name is <em>a.otf</em>. Optionally, the trace file name can be defined manually by setting the environment variable VT_FILE_PREFIX to the desired name. The suffix .<em>otf</em> will be added automatically. </span></p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">To prevent overwriting of trace files by repetitive program runs, one can enable unique trace file naming by setting VT_FILE_UNIQUE to yes. In this case, VampirTrace adds a unique number to the file names as soon as a second trace file with the same name is created. A *.lock file is used to count up the number of trace files in a directory. Be aware that VampirTrace potentially overwrites an existing trace file if you delete this lock file. The default value of VT_FILE_UNIQUE is no. You can also set this variable to a number greater than zero, which will be added to the trace file name. This way you can manually control the unique file naming. </span></p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">The default location of the final trace file is the working directory at application start time. If the trace file will be stored in another place, use VT_PFORM_GDIR to change the location of the trace file. </span></p>
<p class="MsoNormal" style="line-height: normal;"><a name="Environment_Variables"></a><strong><span style="font-family: 'times new roman','serif'; font-size: 18pt;">Environment Variables </span></strong></p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Environment variables can be used to control nearly every aspect of the measurement of a VampirTrace instrumented executable. (ToDo: link to CheatSheet and Doku-PDF) </span></p>
<table border="0" cellpadding="0" class="MsoNormalTable">
<tbody>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Variable</span></strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Purpose</span></strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Default</span></strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
				&nbsp;</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Global Settings </span></p>
</td>
<td style="padding: 2.25pt;">
				&nbsp;</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_APPPATH</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Path to the application executable. </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">- </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_BUFFER_SIZE</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Size of internal event trace buffer. This is the place where event records are stored, before being written to a file. </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">32M </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_CLEAN</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Remove temporary trace files? </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">yes </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_COMPRESSION</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Write compressed trace files? </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">yes </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_FILE_PREFIX</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Prefix used for trace filenames. </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">- </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_FILE_UNIQUE</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Enable unique trace file naming? Set to yes, no, or a numerical ID. </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">no </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_MAX_FLUSHES</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Maximum number of buffer flushes. </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">1 </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_MAX_THREADS</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Maximum number of threads per process that VampirTrace reserves resources for. </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">65536 </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_PFORM_GDIR</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Name of global directory to store final trace file in. </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">./</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_PFORM_LDIR</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Name of node-local directory which can be used to store temporary trace files. </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">/tmp/</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_UNIFY</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Unify local trace files afterwards? </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">yes </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_VERBOSE</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Level of VampirTrace related information messages: Quiet (0), Critical (1), Information (2) </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">1 </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
				&nbsp;</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Optional Features </span></p>
</td>
<td style="padding: 2.25pt;">
				&nbsp;</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_CPUIDTRACE</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Enable tracing of CPU ID? </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">no </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_ETIMESYNC</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Enable enhanced timer synchronization? </span><span style="font-family: 'cambria math','serif'; font-size: 12pt;">&rArr;</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> Section [#timer_synchronization [*]] </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">no </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_ETIMESYNC_INTV</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Interval between two successive synchronization phases in s. </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">120 </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_IOLIB_PATHNAME</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Provides an alternative library to use for LIBC I/O calls. </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">- </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_IOTRACE</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Enable tracing of application I/O calls? </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">no </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_LIBCTRACE</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Enable tracing of fork/system/exec calls? </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">yes </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_MEMTRACE</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Enable memory allocation counter? </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">no </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_MODE</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Colon-separated list of VampirTrace modes: Tracing (TRACE), Profiling (STAT). </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">TRACE </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_MPICHECK</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Enable MPI correctness checking via UniMCI? </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">no </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_MPICHECK_ERREXIT</span></span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Force trace write and application exit if an MPI usage error is detected? </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">no </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_MPITRACE</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Enable tracing of MPI events? </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">yes </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_PTHREAD_REUSE</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Reuse IDs of terminated Pthreads? </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">yes </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_STAT_INV</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Length of interval for writing the next profiling record </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">0 </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_STAT_PROPS</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Colon-separated list of event types that will be recorded in profiling mode: Functions (FUNC), Messages (MSG), Collective Ops. (COLLOP) or all of them (ALL) </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">ALL </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_SYNC_FLUSH</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Enable synchronized buffer flush? </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">no </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_SYNC_FLUSH_LEVEL</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Minimum buffer fill level for synchronized buffer flush in percent. </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">80 </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
				&nbsp;</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Counters </span></p>
</td>
<td style="padding: 2.25pt;">
				&nbsp;</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_METRICS</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Specify counter metrics to be recorded with trace events as a colon-separated list of names </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">- </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_RUSAGE</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Colon-separated list of resource usage counters which will be recorded. </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">- </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_RUSAGE_INTV</span></span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Sample interval for recording resource usage counters in ms. </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">100 </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
				&nbsp;</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Filtering, Grouping </span></p>
</td>
<td style="padding: 2.25pt;">
				&nbsp;</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_DYN_BLACKLIST</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Name of blacklist file for Dyninst instrumentation. </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">- </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_DYN_SHLIBS</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Colon-separated list of shared libraries for Dyninst instrumentation. </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">- </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_FILTER_SPEC</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Name of function/region filter file. </span></p>
</td>
<td style="padding: 0.75pt;">
				&nbsp;</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_GROUPS_SPEC</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Name of function grouping file. </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">- </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_JAVA_FILTER_SPEC</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Name of Java specific filter file. </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">- </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_GROUP_CLASSES</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Create a group for each Java class automatically? </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">yes </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_MAX_STACK_DEPTH</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Maximum number of stack level to be traced. (0 = unlimited) </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">0 </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
				&nbsp;</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Demangle, Symbol List </span></p>
</td>
<td style="padding: 2.25pt;">
				&nbsp;</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_GNU_DEMANGLE</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Decode (demangle) low-level symbol names into user-level names? </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">no </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_GNU_GETSRC</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Retrieve the source code line of functions instrumented automatically with the GNU interface? </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">yes </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_GNU_NMFILE</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Name of file with symbol list information. </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">- </span></p>
</td>
</tr>
</tbody>
</table>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">When you use these environment variables, make sure that they have the same value for all processes of your application on all nodes of your cluster. Some cluster environments do not automatically transfer your environment when executing parts of your job on remote nodes of the cluster, and you may need to explicitly set and export them in batch job submission scripts. </span></p>
<p class="MsoNormal" style="line-height: normal;"><a name="Influencing_Trace_Buffer_Size"></a><strong><span style="font-family: 'times new roman','serif'; font-size: 18pt;">Influencing Trace Buffer Size </span></strong></p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">The default values of the environment variables VT_BUFFER_SIZE and VT_MAX_FLUSHES limit the internal buffer of VampirTrace to 32 MB per process, and the number of times that the buffer is flushed to 1, respectively. Events that are to be recorded after the limit has been reached are no longer written into the trace file. The environment variables apply to every process of a parallel application, meaning that applications with n processes will typically create trace files n times the size of a serial application. </span></p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">To remove the limit and get a complete trace of an application, set VT_MAX_FLUSHES to 0. This causes VampirTrace to always write the buffer to disk when it is full. To change the size of the buffer, use the environment variable VT_BUFFER_SIZE. The optimal value for this variable depends on the application which is to be traced. Setting a small value will increase the memory available to the application, but will trigger frequent buffer flushes by VampirTrace. These buffer flushes can significantly change the behavior of the application. On the other hand, setting a large value, like 2G, will minimize buffer flushes by VampirTrace, but decrease the memory available to the application. If not enough memory is available to hold the VampirTrace buffer and the application data, parts of the application may be swapped to disk, leading to a significant change in the behavior of the application. </span></p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Note that you can decrease the size of trace files significantly by using the runtime function filtering. </span></p>
<p class="MsoNormal" style="line-height: normal;"><a name="Profiling_an_Application"></a><strong><span style="font-family: 'times new roman','serif'; font-size: 18pt;">Profiling an Application </span></strong></p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Profiling an application collects aggregated information about certain events during a program run, whereas tracing records information about individual events. Profiling can therefore be used to get a summary of the program activity and to detect events that are called very often. The profiling information can also be used to generate filter rules to reduce the trace file size. </span></p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">To profile an application, set the variable VT_MODE to STAT. Setting VT_MODE to STAT:TRACE tells VampirTrace to perform tracing and profiling at the same time. By setting the variable VT STAT PROPS, the user can influence whether functions, messages, and/or collective operations shall be profiled. </span></p>
<p class="MsoNormal" style="line-height: normal;"><a name="Unification_of_Local_Traces"></a><strong><span style="font-family: 'times new roman','serif'; font-size: 18pt;">Unification of Local Traces </span></strong></p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">After a run of an instrumented application, the traces of the single processes need to be unified in terms of timestamps and event IDs. In most cases, this happens automatically. If the environment variable VT_UNIFY is set to no, and in the case of certain other circumstances, it will be necessary to perform unification of local traces manually. To do this, use the following command: </span></p>
<table border="0" cellpadding="0" cellspacing="0" class="MsoTableGrid" style="border: medium none; border-collapse: collapse; background: none repeat scroll 0% 0% rgb(242, 242, 242);">
<tbody>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">vtunify &lt;nproc&gt; &lt;prefix&gt;</span></p>
</td>
</tr>
</tbody>
</table>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">If VampirTrace was built with support for OpenMP and/or MPI, it is possible to speedup the unification of local traces significantly. To distribute the unificationon multible processes, the MPI parallel version vtunify-mpi can be used as follows: </span></p>
<table border="0" cellpadding="0" cellspacing="0" class="MsoTableGrid" style="border: medium none; border-collapse: collapse; background: none repeat scroll 0% 0% rgb(242, 242, 242);">
<tbody>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">mpirun -np &lt;nranks&gt; vtunify-mpi &lt;nproc&gt; &lt;prefix&gt;</span></p>
</td>
</tr>
</tbody>
</table>
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">&nbsp;</span></p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Furthermore, both tools vtunify and vtunify-mpi are capable of opening additional OpenMP threads for unification. The number of threads can be specified by the OMP_NUM_THREADS environment variable. </span></p>
<p class="MsoNormal" style="line-height: normal;"><a name="Synchronized_Buffer_Flush"></a><strong><span style="font-family: 'times new roman','serif'; font-size: 18pt;">Synchronized Buffer Flush </span></strong></p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">When tracing an application, VampirTrace temporarily stores the recorded events in a trace buffer. Typically, if a buffer of a process or thread has reached its maximum fill level, the buffer has to be flushed and other processes or threads may have to wait for this process or thread. This will result in an asynchronous runtime behavior. </span></p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">To avoid this problem, VampirTrace provides a buffer flush in a synchronized manner. This means that if one buffer has reached its minimum buffer fill level VT_SYNC_FLUSH_LEVEL, all buffers will be flushed. This buffer flush is only available at appropriate points in the program flow. Currently, VampirTrace makes use of all MPI collective functions associated with MPI_COMM_WORLD. Use the environment variable VT_SYNC_FLUSH to enable synchronized buffer flush. </span></p>
<p class="MsoNormal" style="line-height: normal;"><a name="Enhanced_Timer_Synchronization"></a><strong><span style="font-family: 'times new roman','serif'; font-size: 18pt;">Enhanced Timer Synchronization </span></strong></p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Especially on cluster environments, where each process has its own local timer, tracing relies on precisely synchronized timers. Therefore, VampirTrace provides several mechanisms for timer synchronization. The default synchronization scheme is a linear synchronization at the very beginning and very end of a trace run with a master-slave communication pattern. </span></p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">However, this way of synchronization can become too imprecise for long trace runs. Therefore, we recommend the usage of the enhanced timer synchronization scheme of VampirTrace. This scheme inserts additional synchronization phases at appropriate points in the program flow. Currently, VampirTrace makes use of all MPI collective functions associated with MPI_COMM_WORLD. </span></p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">To enable this synchronization scheme, a LAPACK library with C wrapper support has to be provided for VampirTrace, and the environment variable VT_ETIMESYNC has to be set before the tracing. The length of the interval between two successive synchronization phases can be adjusted with VT_ETIMESYNC_INTV. The following LAPACK libraries provide a C-LAPACK API that can be used by VampirTrace for the enhanced timer synchronization: </span></p>
<ul type="disc">
<li class="MsoNormal" style="line-height: normal;">
		<span style="font-family: 'times new roman','serif'; font-size: 12pt;">CLAPACK </span></li>
<li class="MsoNormal" style="line-height: normal;">
		<span style="font-family: 'times new roman','serif'; font-size: 12pt;">AMD ACML </span></li>
<li class="MsoNormal" style="line-height: normal;">
		<span style="font-family: 'times new roman','serif'; font-size: 12pt;">IBM ESSL </span></li>
<li class="MsoNormal" style="line-height: normal;">
		<span style="font-family: 'times new roman','serif'; font-size: 12pt;">Intel MKL </span></li>
<li class="MsoNormal" style="line-height: normal;">
		<span style="font-family: 'times new roman','serif'; font-size: 12pt;">SUN Performance Library </span></li>
</ul>
<p class="MsoNormal" style="line-height: normal;"><strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Note:</span></strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> Systems equipped with a global timer do not need timer synchronization. </span></p>
<p class="MsoNormal" style="line-height: normal;"><strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Note:</span></strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> It is recommended to combine enhanced timer synchronization and synchronized buffer flush. </span></p>
<p class="MsoNormal" style="line-height: normal;"><strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Note:</span></strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> Be aware that the asynchronous behavior of the application will be disturbed since VampirTrace makes use of asynchronous MPI collective functions for timer synchronization and synchronized buffer flush. Only make use of these approaches if your application does not rely on an asynchronous behavior! Otherwise, keep this fact in mind during the process of performance analysis. </span></p>
<p class="MsoNormal" style="line-height: normal;"><a name="Recording_Additional_Events_and_Counters"></a><strong><span style="font-family: 'times new roman','serif'; font-size: 24pt;">Recording Additional Events and Counters </span></strong></p>
<p class="MsoNormal" style="line-height: normal;"><a name="Hardware_Performance_Counters"></a><strong><span style="font-family: 'times new roman','serif'; font-size: 18pt;">Hardware Performance Counters </span></strong></p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">If VampirTrace has been built with hardware counter support, it is capable of recording hardware counter information as part of the event records. To request the measurement of certain counters, the user is required to set the environment variable VT_METRICS. The variable should contain a colon-separated list of counter names or a predefined platform-specific group. </span></p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">The user can leave the environment variable unset to indicate that no counters are requested. If any of the requested counters are not recognized or the full list of counters cannot be recorded due to hardware resource limits, program execution will be aborted with an error message. </span></p>
<p class="MsoNormal" style="line-height: normal;"><a name="PAPI_Hardware_Performance_Counters"></a><strong><span style="font-family: 'times new roman','serif'; font-size: 13.5pt;">PAPI Hardware Performance Counters </span></strong></p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">If the PAPI library is used to access hardware performance counters, metric names can be any PAPI preset names or PAPI native counter names. For example, set </span></p>
<table border="0" cellpadding="0" cellspacing="0" class="MsoTableGrid" style="border: medium none; border-collapse: collapse; background: none repeat scroll 0% 0% rgb(242, 242, 242);">
<tbody>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_METRICS=PAPI_FP_OPS:PAPI_L2_TCM</span></p>
</td>
</tr>
</tbody>
</table>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">to record the number of floating point instructions and level 2 cache misses. </span></p>
<p class="MsoNormal" style="line-height: normal;"><a name="Resource_Usage_Counters"></a><strong><span style="font-family: 'times new roman','serif'; font-size: 18pt;">Resource Usage Counters </span></strong></p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">The Unix system call getrusage provides information about consumed resources and operating system events of processes such as user/system time, received signals, and context switches. </span></p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">If VampirTrace has been built with resource usage support, it is able to record this information as performance counters to the trace. You can enable tracing of specific resource counters by setting the environment variable VT_RUSAGE to a colon-separated list of counter names. For example, set </span></p>
<table border="0" cellpadding="0" cellspacing="0" class="MsoTableGrid" style="border: medium none; border-collapse: collapse; background: none repeat scroll 0% 0% rgb(242, 242, 242);">
<tbody>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_RUSAGE=ru_stime:ru_majflt</span></p>
</td>
</tr>
</tbody>
</table>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">to record the system time consumed by each process and the number of page faults. Alternatively, one can set this variable to the value all to enable recording of all 16 resource usage counters. Note that not all counters are supported by all Unix operating systems. Linux 2.6 kernels, for example, support only resource information for six of them. </span></p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">The resource usage counters are not recorded at every event. They are only read if 100 ms have passed since the last sampling. The interval can be changed by setting VT_RUSAGE_INTV to the number of desired milliseconds. Setting VT_RUSAGE_INTV to zero leads to sampling resource usage counters at every event, which may introduce a large runtime overhead. Note that in most cases the operating system does not update the resource usage information at the same high frequency as the hardware performance counters. Setting VT_RUSAGE_INTV to a value less than 10 ms does not </span><span style="font-family: 'times new roman','serif'; font-size: 12pt;">usually </span><span style="font-family: 'times new roman','serif'; font-size: 12pt;">improve the granularity. </span></p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Be aware that, when using the resource usage counters for multi-threaded programs, the information displayed is valid for the whole process and not for each single thread. </span></p>
<p class="MsoNormal" style="line-height: normal;"><a name="Memory_Allocation_Counter"></a><strong><span style="font-family: 'times new roman','serif'; font-size: 18pt;">Memory Allocation Counter </span></strong></p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">The GNU LIBC implementation provides a special hook mechanism that allows intercepting all calls to memory allocation and free functions (e.g. malloc, realloc, free). This is independent from compilation or source code access, but relies on the underlying system library. </span></p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">If VampirTrace has been built with memory-tracing support, VampirTrace is capable of recording memory allocation information as part of the event records. To request the measurement of the application&rsquo;s allocated memory, the user must set the environment variable VT_MEMTRACE to yes. </span></p>
<p class="MsoNormal" style="line-height: normal;"><strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Note:</span></strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> This approach to get memory allocation information requires changing internal function pointers in a non-thread-safe way, so VampirTrace currently does not support memory tracing for threadable programs, e.g., programs parallelized with OpenMP or Pthreads! </span></p>
<p class="MsoNormal" style="line-height: normal;"><a name="Pthread_API_Calls"></a><strong><span style="font-family: 'times new roman','serif'; font-size: 18pt;">Pthread API Calls </span></strong></p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">When tracing applications with Pthreads, only user events and functions are recorded which are automatically or manually instrumented. Pthread API functions will not be traced by default. To enable tracing of all C-Pthread API functions, include the header <em>vt user.h</em> and compile the instrumented sources with -DVTRACE PTHREAD. </span></p>
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">C/C++</span></p>
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">&nbsp;</span></p>
<table border="0" cellpadding="0" cellspacing="0" class="MsoTableGrid" style="border: medium none; border-collapse: collapse; background: none repeat scroll 0% 0% rgb(242, 242, 242);">
<tbody>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">#include &quot;vt_user.h&quot;</span></p>
</td>
</tr>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">vtcc <strong>-DVTRACE_PTHREAD</strong> hello.c -o hello</span></p>
</td>
</tr>
</tbody>
</table>
<p class="MsoNormal" style="line-height: normal;"><a name="I.2FO_Calls"></a><strong><span style="font-family: 'times new roman','serif'; font-size: 18pt;">I/O Calls </span></strong></p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Calls to functions which reside in external libraries can be intercepted by implementing identical functions and linking them before the external library. Such &quot;wrapper functions&quot; can record the parameters and return values of the library functions. </span></p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">If VampirTrace has been built with I/O tracing support, it uses this technique for recording calls to I/O functions of the standard C library, which are executed by the application. The following functions are intercepted by VampirTrace: </span></p>
<table border="0" cellpadding="0" class="MsoNormalTable">
<tbody>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin: 12pt 0in;"><span style="font-family: 'courier new'; font-size: 10pt;">close</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin: 12pt 0in;"><span style="font-family: 'courier new'; font-size: 10pt;">creat</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin: 12pt 0in;"><span style="font-family: 'courier new'; font-size: 10pt;">creat64</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin: 12pt 0in;"><span style="font-family: 'courier new'; font-size: 10pt;">dup</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin: 12pt 0in;"><span style="font-family: 'courier new'; font-size: 10pt;">dup2</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin: 12pt 0in;"><span style="font-family: 'courier new'; font-size: 10pt;">fclose</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin: 12pt 0in;"><span style="font-family: 'courier new'; font-size: 10pt;">fcntl</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin: 12pt 0in;"><span style="font-family: 'courier new'; font-size: 10pt;">fdopen</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin: 12pt 0in;"><span style="font-family: 'courier new'; font-size: 10pt;">fgetc</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin: 12pt 0in;"><span style="font-family: 'courier new'; font-size: 10pt;">fgets</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin: 12pt 0in;"><span style="font-family: 'courier new'; font-size: 10pt;">flockfile</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin: 12pt 0in;"><span style="font-family: 'courier new'; font-size: 10pt;">fopen</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin: 12pt 0in;"><span style="font-family: 'courier new'; font-size: 10pt;">fopen64</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin: 12pt 0in;"><span style="font-family: 'courier new'; font-size: 10pt;">fprintf</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin: 12pt 0in;"><span style="font-family: 'courier new'; font-size: 10pt;">fputc</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin: 12pt 0in;"><span style="font-family: 'courier new'; font-size: 10pt;">fputs</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin: 12pt 0in;"><span style="font-family: 'courier new'; font-size: 10pt;">fread</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin: 12pt 0in;"><span style="font-family: 'courier new'; font-size: 10pt;">fscanf</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin: 12pt 0in;"><span style="font-family: 'courier new'; font-size: 10pt;">fseek</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin: 12pt 0in;"><span style="font-family: 'courier new'; font-size: 10pt;">fseeko</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin: 12pt 0in;"><span style="font-family: 'courier new'; font-size: 10pt;">fseeko64</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin: 12pt 0in;"><span style="font-family: 'courier new'; font-size: 10pt;">fsetpos</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin: 12pt 0in;"><span style="font-family: 'courier new'; font-size: 10pt;">fsetpos64</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin: 12pt 0in;"><span style="font-family: 'courier new'; font-size: 10pt;">ftrylockfile</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin: 12pt 0in;"><span style="font-family: 'courier new'; font-size: 10pt;">funlockfile</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin: 12pt 0in;"><span style="font-family: 'courier new'; font-size: 10pt;">fwrite</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin: 12pt 0in;"><span style="font-family: 'courier new'; font-size: 10pt;">getc</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin: 12pt 0in;"><span style="font-family: 'courier new'; font-size: 10pt;">gets</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin: 12pt 0in;"><span style="font-family: 'courier new'; font-size: 10pt;">lockf</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin: 12pt 0in;"><span style="font-family: 'courier new'; font-size: 10pt;">lseek</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin: 12pt 0in;"><span style="font-family: 'courier new'; font-size: 10pt;">lseek64</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin: 12pt 0in;"><span style="font-family: 'courier new'; font-size: 10pt;">open</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin: 12pt 0in;"><span style="font-family: 'courier new'; font-size: 10pt;">open64</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin: 12pt 0in;"><span style="font-family: 'courier new'; font-size: 10pt;">pread</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin: 12pt 0in;"><span style="font-family: 'courier new'; font-size: 10pt;">pread64</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin: 12pt 0in;"><span style="font-family: 'courier new'; font-size: 10pt;">putc</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin: 12pt 0in;"><span style="font-family: 'courier new'; font-size: 10pt;">puts</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin: 12pt 0in;"><span style="font-family: 'courier new'; font-size: 10pt;">pwrite</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin: 12pt 0in;"><span style="font-family: 'courier new'; font-size: 10pt;">pwrite64</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin: 12pt 0in;"><span style="font-family: 'courier new'; font-size: 10pt;">read</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin: 12pt 0in;"><span style="font-family: 'courier new'; font-size: 10pt;">readv</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin: 12pt 0in;"><span style="font-family: 'courier new'; font-size: 10pt;">rewind</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin: 12pt 0in;"><span style="font-family: 'courier new'; font-size: 10pt;">unlink</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin: 12pt 0in;"><span style="font-family: 'courier new'; font-size: 10pt;">write</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin: 12pt 0in;"><span style="font-family: 'courier new'; font-size: 10pt;">writev</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin: 12pt 0in;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">&nbsp; </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin: 12pt 0in;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">&nbsp; </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin: 12pt 0in;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">&nbsp; </span></p>
</td>
</tr>
</tbody>
</table>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">The gathered information will be saved as I/O event records in the trace file. This feature has to be activated for each tracing run by setting the environment variable VT_IOTRACE to yes. </span></p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">This works for both dynamically and statically linked executables. Note that when linking statically, a warning like the following may be issued: Using &quot;dlopen&quot; in statically linked applications requires at runtime the shared libraries from the glibc version used for linking. This is ok as long as the mentioned libraries are available for running the application. </span></p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">If you&rsquo;d like to experiment with some other I/O library, set the environment variable VT_IOLIB_PATHNAME to the alternative one. Beware that this library must provide all I/O functions mentioned above; otherwise VampirTrace will abort. </span></p>
<p class="MsoNormal" style="line-height: normal;"><a name="fork.2Fsystem.2Fexec_Calls"></a><strong><span style="font-family: 'times new roman','serif'; font-size: 18pt;">fork/system/exec Calls </span></strong></p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">If VampirTrace has been built with LIBC trace support, it is capable of tracing programs which call functions from the LIBC exec family (execl, execlp, execle, execv, execvp, execve), system, and fork. VampirTrace records the call of the LIBC function to the trace. This feature works for sequential (i.e., no MPI or threaded parallelization) programs only. It works for both dynamically and statically linked executables. Note that when linking statically, a warning like the following may be issued: Using &quot;dlopen&quot; in statically linked applications requires at runtime the shared libraries from the glibc version used for linking. This is ok as long as the mentioned libraries are available for running the application. </span></p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">When VampirTrace detects a call of an exec function, the current trace file is closed before executing the new program. If the executed program is also instrumented with VampirTrace, it will create a different trace file. Note that VampirTrace aborts if the exec function returns unsuccessfully. Calling fork in an instrumented program creates an additional process in the same trace file. </span></p>
<p class="MsoNormal" style="line-height: normal;"><a name="MPI_Correctness_Checking_Using_UniMCI"></a><strong><span style="font-family: 'times new roman','serif'; font-size: 18pt;">MPI Correctness Checking Using UniMCI </span></strong></p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">VampirTrace supports the recording of MPI correctness events, e.g., usage of invalid MPI requests. This is implemented by using the Universal MPI Correctness Interface (UniMCI), which provides an interface between tools like VampirTrace and existing runtime MPI correctness checking tools. Correctness events are stored as markers in the trace file and are visualized by Vampir. If VampirTrace is built with UniMCI support, the user only has to enable MPI correctness checking. This is done by merely setting the environment variable VT_MPICHECK to yes. Further, if your application crashes due to an MPI error you should set VT_MPICHECK_ERREXIT to yes. This environmental variable forces VampirTrace to write its trace to disk and exit afterwards. As a result, the trace with the detected error is stored before the application might crash. </span></p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">To install VampirTrace with correctness checking support, it is necessary to have UniMCI installed on your system. UniMCI in turn requires you to have a supported MPI correctness checking tool installed (currently only the tool Marmot is known to have UniMCI support). So, all in all, you should use the following order to install with correctness checking support: </span></p>
<ol type="1">
<li class="MsoNormal" style="line-height: normal;">
		<span style="font-family: 'times new roman','serif'; font-size: 12pt;">Marmot </span></li>
</ol>
<p class="MsoNormal" style="line-height: normal; margin: 0in 0in 0pt 0.5in;"><a href="http://www.hlrs.de/organization/av/amt/research/marmot" title="http://www.hlrs.de/organization/av/amt/research/marmot"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">http://www.hlrs.de/organization/av/amt/research/marmot</span></a><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
<ol type="1">
<li class="MsoNormal" style="line-height: normal;">
		<span style="font-family: 'times new roman','serif'; font-size: 12pt;">UniMCI </span></li>
</ol>
<p class="MsoNormal" style="line-height: normal; margin: 0in 0in 0pt 0.5in;"><a href="http://www.tu-dresden.de/zih/unimci" title="http://www.tu-dresden.de/zih/unimci"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">http://www.tu-dresden.de/zih/unimci</span></a><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
<ol type="1">
<li class="MsoNormal" style="line-height: normal;">
		<span style="font-family: 'times new roman','serif'; font-size: 12pt;">VampirTrace </span></li>
</ol>
<p class="MsoNormal" style="line-height: normal; margin: 0in 0in 0pt 0.5in;"><a href="http://www.tu-dresden.de/zih/vampirtrace" title="http://www.tu-dresden.de/zih/vampirtrace"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">http://www.tu-dresden.de/zih/vampirtrace</span></a><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Information on how to install Marmot and UniMCI is given in their respective manuals. VampirTrace will automatically detect an UniMCI installation if the unimci-config tool is in path. </span></p>
<p class="MsoNormal" style="line-height: normal;"><a name="User-defined_Counters"></a><strong><span style="font-family: 'times new roman','serif'; font-size: 18pt;">User-defined Counters </span></strong></p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">In addition to the manual instrumentation, the VampirTrace API provides instrumentation calls which allow recording of program variable values (e.g., iteration counts, calculation results, ...) or any other numerical quantity. A user-defined counter is identified by its name, the counter group it belongs to, the type of its value (integer or floating-point) and the unit that the value is quoted (e.g. &quot;GFlop/sec&quot;). The VT_COUNT_GROUP_DEF and VT_COUNT_DEF instrumentation calls can be used to define counter groups and counters: </span></p>
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Fortran</span></p>
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">&nbsp;</span></p>
<table border="0" cellpadding="0" cellspacing="0" class="MsoTableGrid" style="border: medium none; border-collapse: collapse; background: none repeat scroll 0% 0% rgb(242, 242, 242);">
<tbody>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">#include &quot;vt_user.inc&quot;</span></p>
</td>
</tr>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">integer&nbsp;:: id, gid</span></p>
</td>
</tr>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_COUNT_GROUP_DEF(&rsquo;name&rsquo;, gid)</span></p>
</td>
</tr>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_COUNT_DEF(&rsquo;name&rsquo;, &rsquo;unit&rsquo;, type, gid, id)</span></p>
</td>
</tr>
</tbody>
</table>
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">&nbsp;</span></p>
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">C/C++</span></p>
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">&nbsp;</span></p>
<table border="0" cellpadding="0" cellspacing="0" class="MsoTableGrid" style="border: medium none; border-collapse: collapse; background: none repeat scroll 0% 0% rgb(242, 242, 242);">
<tbody>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">#include &quot;vt_user.h&quot;</span></p>
</td>
</tr>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">unsigned int id, gid;</span></p>
</td>
</tr>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">gid = VT_COUNT_GROUP_DEF(&quot;name&quot;);</span></p>
</td>
</tr>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">id = VT_COUNT_DEF(&quot;name&quot;, &quot;unit&quot;, type, gid);</span></p>
</td>
</tr>
</tbody>
</table>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">The definition of a counter group is optional. If no special counter group is desired, the default group &quot;User&quot; can be used. In this case, set the parameter gid of VT_COUNT_DEF() to VT_COUNT_DEFGROUP. The third parameter type of VT_COUNT_DEF specifies the data type of the counter value. To record a value for any of the defined counters, the corresponding instrumentation call VT_COUNT * VAL must be invoked. </span></p>
<table border="0" cellpadding="0" class="MsoNormalTable">
<tbody>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Fortran:</span></strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">&nbsp; </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">&nbsp; </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Type</span></strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Count call </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Data type </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_COUNT_TYPE_INTEGER</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_COUNT_INTEGER_VAL</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">integer (4 byte) </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_COUNT_TYPE_INTEGER8</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_COUNT_INTEGER8_VAL</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">integer (8 byte) </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_COUNT_TYPE_REAL</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_COUNT_REAL_VAL</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">real </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_COUNT_TYPE_DOUBLE</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_COUNT_DOUBLE_VAL</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">double precision </span></p>
</td>
</tr>
</tbody>
</table>
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="display: none; font-family: 'times new roman','serif'; font-size: 12pt;">&nbsp;</span></p>
<table border="0" cellpadding="0" class="MsoNormalTable">
<tbody>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;">C/C++:</span></strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">&nbsp; </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">&nbsp; </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Type</span></strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Count call </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Data type </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_COUNT_TYPE_SIGNED</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_COUNT_SIGNED_VAL</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">signed int (max. 64-bit) </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_COUNT_TYPE_UNSIGNED</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_COUNT_UNSIGNED_VAL</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">unsigned int (max. 64-bit) </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_COUNT_TYPE_FLOAT</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_COUNT_FLOAT_VAL</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">float </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_COUNT_TYPE_DOUBLE</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_COUNT_DOUBLE_VAL</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">double </span></p>
</td>
</tr>
</tbody>
</table>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">The following example records the loop index i: </span></p>
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Fortran</span></p>
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">&nbsp;</span></p>
<table border="0" cellpadding="0" cellspacing="0" class="MsoTableGrid" style="border: medium none; border-collapse: collapse; background: none repeat scroll 0% 0% rgb(242, 242, 242);">
<tbody>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">#include &quot;vt_user.inc&quot;</span></p>
</td>
</tr>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">program main</span></p>
</td>
</tr>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">integer&nbsp;:: i, cid, cgid</span></p>
</td>
</tr>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_COUNT_GROUP_DEF(&rsquo;loopindex&rsquo;, cgid)</span></p>
</td>
</tr>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_COUNT_DEF(&rsquo;i&rsquo;, &rsquo;#&rsquo;, VT_COUNT_TYPE_INTEGER, cgid, cid)</span></p>
</td>
</tr>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">do i=1,100</span></p>
</td>
</tr>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;"><span>&nbsp;&nbsp;&nbsp; </span>VT_COUNT_INTEGER_VAL(cid, i)</span></p>
</td>
</tr>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">end do</span></p>
</td>
</tr>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">end program main</span></p>
</td>
</tr>
</tbody>
</table>
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">&nbsp;</span></p>
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">C/C++ </span></p>
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">&nbsp;</span></p>
<table border="0" cellpadding="0" cellspacing="0" class="MsoTableGrid" style="border: medium none; border-collapse: collapse; background: none repeat scroll 0% 0% rgb(242, 242, 242);">
<tbody>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">#include &quot;vt_user.h&quot;</span></p>
</td>
</tr>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">int main() {</span></p>
</td>
</tr>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;"><span>&nbsp;&nbsp; </span>unsigned int i, cid, cgid;</span></p>
</td>
</tr>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;"><span>&nbsp;&nbsp; </span>cgid = VT_COUNT_GROUP_DEF(&rsquo;loopindex&rsquo;);</span></p>
</td>
</tr>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;"><span>&nbsp;&nbsp; </span>cid = VT_COUNT_DEF(&quot;i&quot;, &quot;#&quot;, VT_COUNT_TYPE_UNSIGNED, cgid);</span></p>
</td>
</tr>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;"><span>&nbsp;&nbsp; </span>for( i = 1; i &lt;= 100; i++ ) {</span></p>
</td>
</tr>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>VT_COUNT_UNSIGNED_VAL(cid, i);</span></p>
</td>
</tr>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;"><span>&nbsp;&nbsp; </span>}</span></p>
</td>
</tr>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;"><span>&nbsp;&nbsp; </span>return 0;</span></p>
</td>
</tr>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">}</span></p>
</td>
</tr>
</tbody>
</table>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">For all three languages, the instrumented sources have to be compiled with -DVTRACE. Otherwise, the VT * calls are ignored. Optionally, if the sources contain further VampirTrace API calls and only the calls for user-defined counters will be disabled, then the sources have to be compiled with -DVTRACE_NO_COUNT in addition to -DVTRACE . </span></p>
<p class="MsoNormal" style="line-height: normal;"><a name="User-defined_Markers"></a><strong><span style="font-family: 'times new roman','serif'; font-size: 18pt;">User-Defined Markers </span></strong></p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">In addition to the manual instrumentation, the VampirTrace API provides instrumentation calls which allow recording of special user information, which can be used to better identify parts of interest. A user-defined marker is identified by its name and type. </span></p>
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Fortran </span></p>
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">&nbsp;</span></p>
<table border="0" cellpadding="0" cellspacing="0" class="MsoTableGrid" style="border: medium none; border-collapse: collapse; background: none repeat scroll 0% 0% rgb(242, 242, 242);">
<tbody>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">#include &quot;vt_user.inc&quot;</span></p>
</td>
</tr>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">integer&nbsp;:: mid</span></p>
</td>
</tr>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_MARKER_DEF(&rsquo;name&rsquo;, type, mid)</span></p>
</td>
</tr>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_MARKER(mid, &rsquo;text&rsquo;)</span></p>
</td>
</tr>
</tbody>
</table>
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">&nbsp;</span></p>
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">C/C++ </span></p>
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">&nbsp;</span></p>
<table border="0" cellpadding="0" cellspacing="0" class="MsoTableGrid" style="border: medium none; border-collapse: collapse; background: none repeat scroll 0% 0% rgb(242, 242, 242);">
<tbody>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">#include &quot;vt_user.h&quot;</span></p>
</td>
</tr>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">unsigned int mid;</span></p>
</td>
</tr>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">mid = VT_MARKER_DEF(&quot;name&quot;,type);</span></p>
</td>
</tr>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_MARKER(mid, &quot;text&quot;);</span></p>
</td>
</tr>
</tbody>
</table>
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">&nbsp;</span></p>
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Types for Fortran/C/C++</span></p>
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">&nbsp;</span></p>
<table border="0" cellpadding="0" cellspacing="0" class="MsoTableGrid" style="border: medium none; border-collapse: collapse; background: none repeat scroll 0% 0% rgb(242, 242, 242);">
<tbody>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_MARKER_TYPE_ERROR</span></p>
</td>
</tr>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_MARKER_TYPE_WARNING</span></p>
</td>
</tr>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">VT_MARKER_TYPE_HINT</span></p>
</td>
</tr>
</tbody>
</table>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">For all three languages, the instrumented sources have to be compiled with -DVTRACE. Otherwise, the VT * calls are ignored. Optionally, if the sources contain further VampirTrace API calls and only the calls for user-defined markers will be disabled, then the sources have to be compiled with -DVTRACE_NO_MARKER in addition to -DVTRACE . </span></p>
<p class="MsoNormal" style="line-height: normal;"><a name="Filtering_and_Grouping"></a><strong><span style="font-family: 'times new roman','serif'; font-size: 24pt;">Filtering and Grouping </span></strong></p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">By default, all calls of instrumented functions will be traced; consequently, the resulting trace files can easily become very large. In order to decrease the size of a trace, VampirTrace allows the specification of filter directives before running an instrumented application. The user can decide on how often an instrumented function/region should be recorded to a trace file. To use a filter, the environment variable VT_FILTER_SPEC needs to be defined. It should contain the path and name of a file with filter directives. Following is an example of a file containing filter directives: </span></p>
<table border="0" cellpadding="0" cellspacing="0" class="MsoTableGrid" style="border: medium none; border-collapse: collapse; background: none repeat scroll 0% 0% rgb(242, 242, 242);">
<tbody>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">#VampirTrace region filter specification</span></p>
</td>
</tr>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">#</span></p>
</td>
</tr>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">#call limit definitions and region assignments</span></p>
</td>
</tr>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">#</span></p>
</td>
</tr>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">#syntax: &lt;regions&gt; -- &lt;limit&gt;</span></p>
</td>
</tr>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">#</span></p>
</td>
</tr>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">#regions<span>&nbsp; </span>semicolon-separated list of regions</span></p>
</td>
</tr>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">#<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>(can be wildcards)</span></p>
</td>
</tr>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">#limit<span>&nbsp;&nbsp;&nbsp; </span>assigned call limit</span></p>
</td>
</tr>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">#<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>0 = region(s) denied</span></p>
</td>
</tr>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">#<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>-1 = unlimited</span></p>
</td>
</tr>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">#</span></p>
</td>
</tr>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">add;sub;mul;div -- 1000</span></p>
</td>
</tr>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">* -- 3000000</span></p>
</td>
</tr>
</tbody>
</table>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">These region filter directives allow the functions add, sub, mul and div to be recorded at most 1000 times. The remaining functions * will be recorded at most 3,000,000 times. </span></p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Besides creating filter files manually, you can also use the vtfilter tool to generate them automatically. This tool reads a provided trace and decides whether a function should be filtered or not, based on the evaluation of certain parameters. </span></p>
<p class="MsoNormal" style="line-height: normal;"><strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Rank Specific Filtering</span></strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">An experimental extension allows rank specific filtering. Use @ clauses to restrict all following filters to the given ranks. The rank selection must be given as a list of &lt;from&gt; - &lt;to&gt; pairs or single values. </span></p>
<table border="0" cellpadding="0" cellspacing="0" class="MsoTableGrid" style="border: medium none; border-collapse: collapse; background: none repeat scroll 0% 0% rgb(242, 242, 242);">
<tbody>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">@ 4 - 10, 20 - 29, 34</span></p>
</td>
</tr>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">foo;bar -- 2000</span></p>
</td>
</tr>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">* -- 0</span></p>
</td>
</tr>
</tbody>
</table>
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">&nbsp;</span></p>
<p class="MsoNormal" style="line-height: normal; margin: 0in 0in 0pt 0.5in;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">The example defines two limits for the ranks 4 - 10, 20 - 29, and 34. </span></p>
<p class="MsoNormal" style="line-height: normal;"><strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Attention:</span></strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> The rank specific rules are activated later than usual at MPI Init, because the ranks are not available earlier. The special MPI routines MPI Init, MPI Init thread, and MPI Initialized cannot be filtered in this way. </span></p>
<p class="MsoNormal" style="line-height: normal;"><a name="Function_Grouping"></a><strong><span style="font-family: 'times new roman','serif'; font-size: 18pt;">Function Grouping </span></strong></p>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">VampirTrace allows assigning functions/regions to a group. Groups can, for instance, be highlighted by different colors in Vampir displays. The following standard groups are created by VampirTrace: </span></p>
<table border="0" cellpadding="0" class="MsoNormalTable">
<tbody>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Group name</span></strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Contained functions/regions</span></strong><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">MPI</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">MPI functions </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">OMP</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">OpenMP API function calls </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">OMP_SYNC</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">OpenMP barriers </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">OMP_PREG</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">OpenMP parallel regions </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">Pthreads</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Pthread API function calls </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">MEM</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Memory allocation functions (</span><span style="font-family: 'cambria math','serif'; font-size: 12pt;">&rArr;</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> Section&nbsp;[#mem_alloc_counter [*]]) </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">I/O</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">I/O functions (</span><span style="font-family: 'cambria math','serif'; font-size: 12pt;">&rArr;</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> Section&nbsp;[#io_calls [*]]) </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">LIBC</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">LIBC fork/system/exec functions (</span><span style="font-family: 'cambria math','serif'; font-size: 12pt;">&rArr;</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> Section&nbsp;[#execfork [*]]) </span></p>
</td>
</tr>
<tr>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">Application</span><span style="font-family: 'times new roman','serif'; font-size: 12pt;"> </span></p>
</td>
<td style="padding: 2.25pt;">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">remaining instrumented functions and source code regions </span></p>
</td>
</tr>
</tbody>
</table>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">Additionally, you can create your own groups, if, for example, you wish to better distinguish different phases of an application. To use function/region grouping, set the environment variable VT_GROUPS_SPEC to the path of a file which contains the group assignments. Below is an example of how to use group assignments: </span></p>
<table border="0" cellpadding="0" cellspacing="0" class="MsoTableGrid" style="border: medium none; border-collapse: collapse; background: none repeat scroll 0% 0% rgb(242, 242, 242);">
<tbody>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;"># VampirTrace region groups specification</span></p>
</td>
</tr>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">#</span></p>
</td>
</tr>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;"># group definitions and region assignments</span></p>
</td>
</tr>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">#</span></p>
</td>
</tr>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;"># syntax: &lt;group&gt;=&lt;regions&gt;</span></p>
</td>
</tr>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">#</span></p>
</td>
</tr>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;"># group<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>group name</span></p>
</td>
</tr>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;"># regions<span>&nbsp;&nbsp;&nbsp;&nbsp; </span>semicolon-separated list of regions</span></p>
</td>
</tr>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">#<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>(can be wildcards)</span></p>
</td>
</tr>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">#</span></p>
</td>
</tr>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">CALC=add;sub;mul;div</span></p>
</td>
</tr>
<tr>
<td style="padding: 0in 5.4pt; width: 6.65in;" valign="top" width="638">
<p class="MsoNormal" style="line-height: normal; margin-bottom: 0pt;"><span style="font-family: 'courier new'; font-size: 10pt;">USER=app_*</span></p>
</td>
</tr>
</tbody>
</table>
<p class="MsoNormal" style="line-height: normal;"><span style="font-family: 'times new roman','serif'; font-size: 12pt;">These group assignments associate the functions add, sub, mul and div with group &quot;CALC&quot;, and all functions with the prefix app are associated with group &quot;USER&quot;. </span></p>
<p class="MsoNormal">&nbsp;</p>
  </div>
</div>
<div id="node-1265" class="section-3">
  <h1 class="book-heading">Official HPCC Results from the Acceptance Tests</h1>
  <ul>
	<li class="toclevel-1"><a href="#HPCC_Results">1 HPCC Results</a>
		<ul>
			<li class="toclevel-2"><a href="#Official_HPCC_Results_from_the_Acceptance_Tests">1.1 Official HPCC Results from the Acceptance Tests</a>
				<ul>
					<li class="toclevel-3"><a href="#Alamo">1.1.1 Alamo</a></li>
					<li class="toclevel-3"><a href="#India">1.1.2 India</a></li>
					<li class="toclevel-3"><a href="#Hotel">1.1.3 Hotel</a></li>
					<li class="toclevel-3"><a href="#XRay">1.1.4 XRay</a></li>
				</ul>
			</li>
		</ul>
	</li>
	<li class="toclevel-1"><a href="#HPCC_Configuration">2 HPCC Configuration</a>
		<ul>
			<li class="toclevel-2"><a href="#General_Information">2.1 General Information</a>
				<ul>
					<li class="toclevel-3"><a href="#India_2">2.1.1 India</a></li>
					<li class="toclevel-3"><a href="#Hotel_2">2.1.2 Hotel</a></li>
					<li class="toclevel-3"><a href="#Xray_2">2.1.3 Xray</a></li>
				</ul>
			</li>
			<li class="toclevel-2"><a href="#Configuration_Files">2.2 Configuration Files</a>
				<ul>
					<li class="toclevel-3"><a href="#India_3">2.2.1 India</a></li>
					<li class="toclevel-3"><a href="#Hotel_3">2.2.2 Hotel</a></li>
					<li class="toclevel-3"><a href="#XRay_3">2.2.3 XRay</a></li>
				</ul>
			</li>
		</ul>
	</li>
</ul>
<a id="HPCC_Results" name="HPCC_Results"></a>
<h1>HPCC Results </h1>
<a id="Official_HPCC_Results_from_the_Acceptance_Tests" name="Official_HPCC_Results_from_the_Acceptance_Tests"></a>
<h2>Official HPCC Results from the Acceptance Tests </h2>
<a id="Alamo" name="Alamo"></a>
<h3>Alamo&nbsp;<b>(<a href="/manual/alamo" title="Manual/HPC">view machine details</a>)</b></h3>
<table border="1">
	
		<tr>
			<td colspan="3"><b>HPCC Results</b></td>
			<td><b>G-HPL</b></td>
			<td><b>G-PTRANS</b></td>
			<td><b>G-FFTE</b></td>
			<td><b>G-Random</b></td>
			<td><b>G-STREAM</b></td>
			<td><b>EP-STREAM</b></td>
			<td><b>EP-DGEMM</b></td>
			<td><b>Random Ring Bandwidth</b></td>
			<td><b>Random Ring Latency</b></td>
			<td><b>% HPL Peak(*)</b></td>
		</tr>
		<tr>
			<td>
				<b>Node</b>
			</td>
			<td>
				<b>CPU</b>
			</td>
			<td>
				<b>Core</b>
			</td>
			<td>
				<b>TFLOP/s</b>
			</td>
			<td>
				<b>GB/s</b>
			</td>
			<td>
				<b>GLFOP/s</b>
			</td>
			<td>
				<b>Gup/s</b>
			</td>
			<td>
				<b>GB/s</b>
			</td>
			<td>
				<b>GB/s</b>
			</td>
			<td>
				<b>GFLOP/s</b>
			</td>
			<td>
				<b>GB/s</b>
			</td>
			<td>
				<b>usec</b>
			</td>
			<td>
				<b>Percent</b>
			</td>
		</tr>
		<tr>
			<td>
				32
			</td>
			<td>
				64
			</td>
			<td>
				256
			</td>
			<td>
				2.291
			</td>
			<td>
				29.81
			</td>
			<td>
				93.54
			</td>
			<td>
				0.92
			</td>
			<td>
				3700.060
			</td>
			<td>
				3.71
			</td>
			<td>
				10.691
			</td>
			<td>
				0.219
			</td>
			<td>
				14.86
			</td>
			<td>
				84.12
			</td>
		</tr>
	
</table>
<a id="India" name="India"></a>
<h3>India&nbsp;<b>(<a href="/manual/india" title="Manual/HPC">view machine details</a>)</b></h3>
<table border="1">
	
		<tr>
			<td colspan="3"><b>HPCC Results</b></td>
			<td><b>G-HPL</b></td>
			<td><b>G-PTRANS</b></td>
			<td><b>G-FFTE</b></td>
			<td><b>G-Random</b></td>
			<td><b>G-STREAM</b></td>
			<td><b>EP-STREAM</b></td>
			<td><b>EP-DGEMM</b></td>
			<td><b>Random Ring Bandwidth</b></td>
			<td><b>Random Ring Latency</b></td>
			<td><b>% HPL Peak(*)</b></td>
		</tr>
		<tr>
			<td>
				<b>Node</b>
			</td>
			<td>
				<b>CPU</b>
			</td>
			<td>
				<b>Core</b>
			</td>
			<td>
				<b>TFLOP/s</b>
			</td>
			<td>
				<b>GB/s</b>
			</td>
			<td>
				<b>GLFOP/s</b>
			</td>
			<td>
				<b>Gup/s</b>
			</td>
			<td>
				<b>GB/s</b>
			</td>
			<td>
				<b>GB/s</b>
			</td>
			<td>
				<b>GFLOP/s</b>
			</td>
			<td>
				<b>GB/s</b>
			</td>
			<td>
				<b>usec</b>
			</td>
			<td>
				<b>Percent</b>
			</td>
		</tr>
		<tr>
			<td>
				128
			</td>
			<td>
				256
			</td>
			<td>
				1024
			</td>
			<td>
				11.3428
			</td>
			<td>
				59.5363
			</td>
			<td>
				225.7700
			</td>
			<td>
				2.2630
			</td>
			<td>
				3700.060
			</td>
			<td>
				3.6133
			</td>
			<td>
				12.0419
			</td>
			<td>
				0.0852
			</td>
			<td>
				19.6622
			</td>
			<td>
				94.513
			</td>
		</tr>
		<tr>
			<td>
				84
			</td>
			<td>
				168
			</td>
			<td>
				672
			</td>
			<td>
				7.3097
			</td>
			<td>
				65.9453
			</td>
			<td>
				135.6070
			</td>
			<td>
				1.7364
			</td>
			<td>
				2438.271
			</td>
			<td>
				3.6284
			</td>
			<td>
				11.7255
			</td>
			<td>
				0.0968
			</td>
			<td>
				18.1360
			</td>
			<td>
				92.812
			</td>
		</tr>
		<tr>
			<td>
				32
			</td>
			<td>
				64
			</td>
			<td>
				512
			</td>
			<td>
				2.8210
			</td>
			<td>
				21.1257
			</td>
			<td>
				70.3138
			</td>
			<td>
				0.0507
			</td>
			<td>
				865.193
			</td>
			<td>
				3.3797
			</td>
			<td>
				12.0083
			</td>
			<td>
				0.1264
			</td>
			<td>
				15.0372
			</td>
			<td>
				94.022
			</td>
		</tr>
	
</table>
<p>(*) Calculated using the base frequency of the processor. (Intel Turbo Boost technology was enabled)</p>
<a id="Hotel" name="Hotel"></a>
<h3>Hotel&nbsp;<b>(<a href="/manual/hotel" title="Manual/HPC">view machine details</a>)</b></h3>
<table border="1">
	
		<tr>
			<td colspan="3"><b>HPCC Results</b></td>
			<td><b>G-HPL</b></td>
			<td><b>G-PTRANS</b></td>
			<td><b>G-FFTE</b></td>
			<td><b>G-Random</b></td>
			<td><b>G-STREAM</b></td>
			<td><b>EP-STREAM</b></td>
			<td><b>EP-DGEMM</b></td>
			<td><b>Random Ring Bandwidth</b></td>
			<td><b>Random Ring Latency</b></td>
			<td><b>% HPL Peak(*)</b></td>
		</tr>
		<tr>
			<td>
				<b>Node</b>
			</td>
			<td>
				<b>CPU</b>
			</td>
			<td>
				<b>Core</b>
			</td>
			<td>
				<b>TFLOP/s</b>
			</td>
			<td>
				<b>GB/s</b>
			</td>
			<td>
				<b>GLFOP/s</b>
			</td>
			<td>
				<b>Gup/s</b>
			</td>
			<td>
				<b>GB/s</b>
			</td>
			<td>
				<b>GB/s</b>
			</td>
			<td>
				<b>GFLOP/s</b>
			</td>
			<td>
				<b>GB/s</b>
			</td>
			<td>
				<b>usec</b>
			</td>
			<td>
				<b>Percent</b>
			</td>
		</tr>
		<tr>
			<td>
				84
			</td>
			<td>
				168
			</td>
			<td>
				672
			</td>
			<td>
				6.9401
			</td>
			<td>
				83.3561
			</td>
			<td>
				158.4620
			</td>
			<td>
				2.3839
			</td>
			<td>
				2512.2854
			</td>
			<td>
				3.7385
			</td>
			<td>
				11.2254
			</td>
			<td>
				0.1280
			</td>
			<td>
				6.1591
			</td>
			<td>
				90.36
			</td>
		</tr>
		<tr>
			<td>
				32
			</td>
			<td>
				64
			</td>
			<td>
				256
			</td>
			<td>
				2.6360
			</td>
			<td>
				26.8054
			</td>
			<td>
				95.6900
			</td>
			<td>
				1.4378
			</td>
			<td>
				959.4496
			</td>
			<td>
				3.7479
			</td>
			<td>
				11.2031
			</td>
			<td>
				0.1502
			</td>
			<td>
				5.5892
			</td>
			<td>
				90.09
			</td>
		</tr>
	
</table>
<a id="XRay" name="XRay"></a>
<h3>XRay&nbsp;<b>(<a href="/manual/xray" title="Manual/HPC">view machine details</a>)</b></h3>
<table border="1">
	
		<tr>
			<td colspan="3"><b>HPCC Results</b></td>
			<td><b>G-HPL</b></td>
			<td><b>G-PTRANS</b></td>
			<td><b>G-FFTE</b></td>
			<td><b>G-Random</b></td>
			<td><b>G-STREAM</b></td>
			<td><b>EP-STREAM</b></td>
			<td><b>EP-DGEMM</b></td>
			<td><b>Random Ring Bandwidth</b></td>
			<td><b>Random Ring Latency</b></td>
			<td><b>% HPL Peak(*)</b></td>
		</tr>
		<tr>
			<td>
				<b>Node</b>
			</td>
			<td>
				<b>CPU</b>
			</td>
			<td>
				<b>Core</b>
			</td>
			<td>
				<b>TFLOP/s</b>
			</td>
			<td>
				<b>GB/s</b>
			</td>
			<td>
				<b>GLFOP/s</b>
			</td>
			<td>
				<b>Gup/s</b>
			</td>
			<td>
				<b>GB/s</b>
			</td>
			<td>
				<b>GB/s</b>
			</td>
			<td>
				<b>GFLOP/s</b>
			</td>
			<td>
				<b>GB/s</b>
			</td>
			<td>
				<b>usec</b>
			</td>
			<td>
				<b>Percent</b>
			</td>
		</tr>
		<tr>
			<td>
				84
			</td>
			<td>
				168
			</td>
			<td>
				672
			</td>
			<td>
				5.38
			</td>
			<td>
				29.27
			</td>
			<td>
				75.47
			</td>
			<td>
				0.62
			</td>
			<td>
				2017
			</td>
			<td>
				3.00
			</td>
			<td>
				8.93
			</td>
			<td>
				0.047
			</td>
			<td>
				26.8
			</td>
			<td>
				83.40
			</td>
		</tr>
	
</table>
<p><br />
	&nbsp;</p>
<a id="HPCC_Configuration" name="HPCC_Configuration"></a>
<h1>HPCC Configuration </h1>
<a id="General_Information" name="General_Information"></a>
<h2>General Information </h2>
<p>What version was used, how as it compiled etc.</p>
<a id="India_2" name="India_2"></a>
<h3>India </h3>
<ul>
	<li>HPCC version: 1.3.1</li>
	<li>Compiler: Intel compiler 11.1.038 with OpenMPI-1.3.1.</li>
	<li>Math Library: Intel MKL library.</li>
	<li>A few important settings in Makefile:
		<ul>
			<li>CC=mpicc</li>
			<li>LINKER=mpicc -mkl</li>
		</ul>
	</li>
</ul>
<a id="Hotel_2" name="Hotel_2"></a>
<h3>Hotel </h3>
<ul>
	<li>HPCC version: 1.3.1</li>
	<li>Compiler: Intel compiler 11.1.038 with Intel MPI-4.0.0.</li>
	<li>Math Library: Intel MKL library.</li>
	<li>A few important settings in Makefile:
		<ul>
			<li>CC=mpicc</li>
			<li>LINKER=mpicc -mkl</li>
		</ul>
	</li>
</ul>
<a id="Xray_2" name="Xray_2"></a>
<h3>Xray </h3>
<ul>
	<li>HPCC version: 1.3.1</li>
	<li>Compiler: Cray compiler (xt-asyncpe-3.4)</li>
	<li>A few important settings in Makefile:</li>
	<li>Settings in Makefile: CC=mpicc and LINKER=mpicc -mkl
		<ul>
			<li>CC=cc</li>
			<li>CCNOOPT=$(HPL_DEFS) -DLONG_IS_64BITS</li>
			<li>CCFLAGS=$(HPL_DEFS) -fast -Minfo=loop -Mneginfo=loop -DLONG_IS_64BITS -DFFTE_NP=4</li>
			<li>CCFLAGS_STREAM=$(HPL_DEFS) -Mnontemporal -Mprefetch=distance:8,nta -Msafeptr -fastsse -Minfo=loop -Mneginfo=loop -DLONG_IS_64BITS</li>
		</ul>
	</li>
</ul>
<a id="Configuration_Files" name="Configuration_Files"></a>
<h2>Configuration Files </h2>
<p>Below are the contents of input files, hpccinf.txt, for HPCC.</p>
<a id="India_3" name="India_3"></a>
<h3>India </h3>
<pre>HPLinpack benchmark input file
Innovative Computing Laboratory, University of Tennessee
HPL.out output file name (if any)
8 device out (6=stdout,7=stderr,file)
1 # of problems sizes (N)
409600 Ns
1 # of NBs
112 NBs
0 PMAP process mapping (0=Row-,1=Column-major)
1 # of process grids (P x Q)
32 Ps
32 Qs
16.0 threshold
1 # of panel fact
2 PFACTs (0=left, 1=Crout, 2=Right)
1 # of recursive stopping criterium
4 NBMINs (&gt;= 1)
1 # of panels in recursion
3 NDIVs
1 # of recursive panel fact.
2 RFACTs (0=left, 1=Crout, 2=Right)
1 # of broadcast
3 BCASTs (0=1rg,1=1rM,2=2rg,3=2rM,4=Lng,5=LnM)
1 # of lookahead depth
0 DEPTHs (&gt;=0)
2 SWAP (0=bin-exch,1=long,2=mix)
64 swapping threshold
0 L1 in (0=transposed,1=no-transposed) form
0 U in (0=transposed,1=no-transposed) form
1 Equilibration (0=no,1=yes)
16 memory alignment in double (&gt; 0)
##### This line (no. 32) is ignored (it serves as a separator). ######
0 Number of additional problem sizes for PTRANS
1200 10000 30000 values of N
0 number of additional blocking sizes for PTRANS
40 9 8 13 13 20 16 32 64 values of NB
</pre>
<p>&nbsp;</p>
<a id="Hotel_3" name="Hotel_3"></a>
<h3>Hotel </h3>
<pre>HPLinpack benchmark input file
Innovative Computing Laboratory, University of Tennessee
HPL.out output file name (if any)
8 device out (6=stdout,7=stderr,file)
1 # of problems sizes (N)
338688 Ns
1 # of NBs
112 NBs
0 PMAP process mapping (0=Row-,1=Column-major)
1 # of process grids (P x Q)
32 Ps
32 Qs
16.0 threshold
1 # of panel fact
2 PFACTs (0=left, 1=Crout, 2=Right)
1 # of recursive stopping criterium
4 NBMINs (&gt;= 1)
1 # of panels in recursion
3 NDIVs
1 # of recursive panel fact.
2 RFACTs (0=left, 1=Crout, 2=Right)
1 # of broadcast
3 BCASTs (0=1rg,1=1rM,2=2rg,3=2rM,4=Lng,5=LnM)
1 # of lookahead depth
0 DEPTHs (&gt;=0)
2 SWAP (0=bin-exch,1=long,2=mix)
64 swapping threshold
0 L1 in (0=transposed,1=no-transposed) form
0 U in (0=transposed,1=no-transposed) form
1 Equilibration (0=no,1=yes)
16 memory alignment in double (&gt; 0)
##### This line (no. 32) is ignored (it serves as a separator). ######
0 Number of additional problem sizes for PTRANS
1200 10000 30000 values of N
0 number of additional blocking sizes for PTRANS
40 9 8 13 13 20 16 32 64 values of NB
</pre>
<p>&nbsp;</p>
<p>&nbsp;</p>
<a id="XRay_3" name="XRay_3"></a>
<h3>XRay </h3>
<pre>HPLinpack benchmark input file
Innovative Computing Laboratory, University of Tennessee
HPL.out output file name (if any)
6 device out (6=stdout,7=stderr,file)
1 # of problems sizes (N)
373056 Ns
1 # of NBs
232 NBs
0 PMAP process mapping (0=Row-,1=Column-major)
1 # of process grids (P x Q)
24 Ps
28 Qs
16.0 threshold
1 # of panel fact
1 PFACTs (0=left, 1=Crout, 2=Right)
1 # of recursive stopping criterium
4 NBMINs (&gt;= 1)
1 # of panels in recursion
2 NDIVs
1 # of recursive panel fact.
2 RFACTs (0=left, 1=Crout, 2=Right)
1 # of broadcast
1 BCASTs (0=1rg,1=1rM,2=2rg,3=2rM,4=Lng,5=LnM)
1 # of lookahead depth
0 DEPTHs (&gt;=0)
2 SWAP (0=bin-exch,1=long,2=mix)
64 swapping threshold
0 L1 in (0=transposed,1=no-transposed) form
0 U in (0=transposed,1=no-transposed) form
1 Equilibration (0=no,1=yes)
8 memory alignment in double (&gt; 0)
##### This line (no. 32) is ignored (it serves as a separator). ######
0 Number of additional problem sizes for PTRANS
1200 values of N
4 number of additional blocking sizes for PTRANS
23 31 33 63 values of NB

HPLinpack benchmark input file
Innovative Computing Laboratory, University of Tennessee
HPL.out output file name (if any)
8 device out (6=stdout,7=stderr,file)
</pre>
<br />  </div>
<div id="node-148" class="section-3">
  <h1 class="book-heading">Foxtrot</h1>
  <p>&nbsp;</p>
<p style="margin-top: 0.5em; margin-bottom: 0.9em;">UF iDataPlex User Manual</p>
<h4 style="padding-bottom: 5px; line-height: 15px; margin: 10px 0px; padding-left: 30px; font-size: 13px;">
	<span style="font-size: small;"><span class="editsection">&nbsp;</span>&nbsp;<span class="mw-headline">Hostname</span></span></h4>
<p style="margin-top: 0.5em; padding-left: 60px; margin-bottom: 0.9em;"><span style="font-size: small;">&bull; foxtrot.futuregrid.org</span></p>
<h4 style="padding-bottom: 5px; line-height: 15px; margin: 10px 0px; padding-left: 30px; font-size: 13px;">
	<span style="font-size: small;"><span class="editsection">&nbsp;</span><span class="mw-headline">&nbsp;Login</span></span></h4>
<blockquote><pre style="border: 1px solid rgb(221, 221, 221); padding: 0.75em 1.5em 0.75em 30px; background-color: rgb(238, 238, 238); font-size: 12px;">
<span style="font-size: small;">ssh username@foxtrot.futuregrid.org</span>
</pre></blockquote>
<p style="margin-top: 0.5em; padding-left: 30px; margin-bottom: 0.9em;"><span style="font-size: small;">where <em>username</em> i<span style="font-size: 12px;">s your FutureGrid user</span>name. You must have an account on FutureGrid.</span></p>
<h4 style="padding-bottom: 5px; line-height: 15px; margin: 10px 0px; padding-left: 30px; font-size: 13px;">
	<span style="font-size: small;"><span class="mw-headline">Compute</span></span> <strong>(</strong>domain: idp.ufl.futuregrid.org)</h4>
<p style="margin-top: 0.5em; padding-left: 60px; margin-bottom: 0.9em;"><span style="font-size: small;"><strong>2x IBM x3650 M2 management nodes</strong> (fm1, fm2): </span></p>
<p style="margin-top: 0.5em; padding-left: 90px; margin-bottom: 0.9em;"><span style="font-size: small;">&bull; 2 x 4-Core Intel Xeon E5530 (Nehalem-EP) processors</span><br />
	<span style="font-size: small;">&bull; </span><span style="font-size: small;">24GB Main Memory&nbsp;</span><br />
	<span style="font-size: small;">&bull; </span><span style="font-size: small;">2 x 146GB 2.5-Inch 6Gbps SAS Disks</span></p>
<p style="margin-top: 0.5em; padding-left: 60px; margin-bottom: 0.9em;"><span style="font-size: small;"><strong>32x IBM iDataPlex dx360 M2 nodes</strong> (f1 through f2): </span></p>
<p style="margin-top: 0.5em; padding-left: 90px; margin-bottom: 0.9em;"><span style="font-size: small;">&bull; 2 x 4-Core Intel Xeon E5520 (Nehalem-EP) processors</span><br />
	<span style="font-size: small;">&bull; </span><span style="font-size: small;">24GB Main Memory&nbsp;</span><br />
	<span style="font-size: small;">&bull; </span><span style="font-size: small;">1 x 500GB 3.5-Inch SATA Disk</span></p>
<p style="margin-top: 0.5em; padding-left: 60px; margin-bottom: 0.9em;"><span style="font-size: small;"><strong>1x Dell PowerEdge R310 Network monitoring node</strong> </span>(bwctl.ufl.net.futuregrid.org)</p>
<h4 style="padding-bottom: 5px; line-height: 15px; margin: 10px 0px; padding-left: 30px; font-size: 13px;">
	<br />
	<span style="font-size: small;"><span class="mw-headline">Storage</span></span></h4>
<p style="margin-top: 0.5em; padding-left: 60px; margin-bottom: 0.9em;"><span style="font-size: small;"><strong>Hardware</strong>:&nbsp; IBM iDataPlex dx360 M3 storage node with 24TB raw capacity (fs1). </span></p>
<p style="margin-top: 0.5em; padding-left: 90px; margin-bottom: 0.9em;"><span style="font-size: small;">&bull; 2 x 4-Core Intel Xeon E5520 (Nehalem-EP) processors </span><br />
	<span style="font-size: small;">&bull; </span><span style="font-size: small;">24GB Main Memory&nbsp;</span><br />
	<span style="font-size: small;">&bull; </span><span style="font-size: small;">12 x 2TB 7200 rpm 3.5-Inch 6Gbps SAS Disks</span></p>
<p style="margin-top: 0.5em; padding-left: 60px; margin-bottom: 0.9em;"><span style="font-size: small;"><strong>Capacity</strong>:&nbsp; 20TB RAID5</span></p>
<p style="margin-top: 0.5em; padding-left: 60px; margin-bottom: 0.9em;"><span style="font-size: small;"><strong>Storage Interconnect</strong>:&nbsp; NFS export over GigE. </span></p>
<p style="margin-top: 0.5em; padding-left: 60px; margin-bottom: 0.9em;"><span style="font-size: small;"><strong>Filesystem Type</strong>:&nbsp; XFS&nbsp;</span></p>
<p style="margin-top: 0.5em; padding-left: 60px; margin-bottom: 0.9em;"><span style="font-size: small;"><strong>Filesystem Layout</strong>:</span></p>
<p style="margin-top: 0.5em; padding-left: 90px; margin-bottom: 0.9em;"><span style="font-size: small;">&bull; Home directories mounted to all foxtrot nodes (f1 thorugh f32) at /N/u/&lt;username&gt; </span><br />
	<span style="font-size: small;">&bull; </span><span style="font-size: small;">Backup is not provided</span></p>
<h4 style="padding-bottom: 5px; line-height: 15px; margin: 10px 0px; padding-left: 30px; font-size: 13px;">
	<span style="font-size: small;"><span class="mw-headline">Network</span></span></h4>
<p style="margin-top: 0.5em; padding-left: 60px; margin-bottom: 0.9em;"><span style="font-size: small;"><strong>Hardware</strong></span></p>
<p style="margin-top: 0.5em; padding-left: 90px; margin-bottom: 0.9em;"><span style="font-size: small;">&bull; Force10 S50 48-port GigE switch, with 10GigE uplink to Florida LambdaRail</span><br />
	<span style="font-size: small;">&bull; </span><span style="font-size: small;">BLADE Rackswitch 48-port GigE switch (Management Network)</span></p>
<h4 style="padding-bottom: 5px; line-height: 15px; margin: 10px 0px; padding-left: 30px; font-size: 13px;">
	<span style="font-size: small;"><span class="mw-headline">Services</span></span></h4>
<p style="margin-top: 0.5em; padding-left: 60px; margin-bottom: 0.9em;"><span style="font-size: small;"><strong>Nimbus</strong></span></p>
<p style="margin-top: 0.5em; padding-left: 90px; margin-bottom: 0.9em;"><span style="font-size: small;">&bull; Refer to <a href="https://portal.futuregrid.org/manual/services/nimbus">Nimbus manual.</a></span></p>
  </div>
<div id="node-150" class="section-3">
  <h1 class="book-heading">India</h1>
  <h2>
	IU iDataplex User Manual</h2>
<h4>
	&nbsp;&nbsp;Hostname</h4>
<p>&bull; india.futuregrid.org&nbsp;<br />
	&bull;&nbsp;i136r.idp.iu.futuregrid.org&nbsp;</p>
<h4>
	&nbsp;&nbsp;Login</h4>
<blockquote>
	<pre>
ssh username@india.futuregrid.org
</pre>
</blockquote>
<p>Above, <em>username</em> represents your FutureGrid username. You must have an account on FutureGrid to log in.</p>  </div>
<div id="node-151" class="section-3">
  <h1 class="book-heading">Sierra</h1>
  <h2>
	UCSD iDataPlex User Manual</h2>
<h4>
	&nbsp;&nbsp;Hostname</h4>
<p>&bull; sierra.futuregrid.org</p>
<h4>
	&nbsp;&nbsp;Login</h4>
<blockquote>
	<pre>
ssh sierra.futuregrid.org</pre>
</blockquote>
<h4>
	&nbsp;&nbsp;Storage</h4>
<p><strong>Hardware</strong>:&nbsp;&nbsp;Two Sun Fire x4540 Servers @&nbsp;48 TB&nbsp;each. &nbsp;Specifications for each&nbsp;Sun Fire X4540 Server are:&nbsp;</p>
<p>&bull; 2 x 6-Core AMD Opteron Model 2435, 2.6 GHz Processors&nbsp;<br />
	&bull;&nbsp;32 GB (16 x 2 GB DIMMs) Memory&nbsp;<br />
	&bull;&nbsp;48 x 1 TB 7200 rpm 3.5-Inch SATA Disks</p>
<p><strong>Capacity</strong>: &nbsp;76.8 TB raid2 and 5.4 TB of raid0 (for scratch)</p>
<p><strong>Storage Interconnect</strong>: &nbsp;Currently mounted to cluster over GigE ethernet. &nbsp;Our long-term plan is to mount over Infiniband.&nbsp;</p>
<p><strong>Filesystem Type</strong>:&nbsp;&nbsp;ZFS&nbsp;</p>
<p><strong>Filesystem Layout</strong>:</p>
<p>&bull; Home directories mounted to Sierra at /N/u/&lt;username&gt;, snapshots taken nightly, quota set at 50 GB&nbsp;<br />
	&bull;&nbsp;Scratch directories mount to Sierra at /N/scratch/&lt;username&gt;, no backup, quota at 100 GB&nbsp;<br />
	&bull;&nbsp;Project directories, software directory mounted to Sierra as /N/soft, snapshots taken nightly, quota set at 50 GB&nbsp;<br />
	&bull;&nbsp;Image directory (internal), mounts to Sierra at /images, snapshots taken nightly, quota set at 6 TB</p>
<p><strong>Overview of ZFS Data Snapshots</strong></p>
<p>A zfs snapshot is a read-only copy of a Solaris ZFS file system or volume. Snapshots can be created almost instantly and initially consume no additional disk space within the pool. All users on Sierra have access to their ZFS hidden file system at</p>
<blockquote>
	<p>$HOME/.zfs/</p>
</blockquote>
<p>ZFS supports the ability to restore lost files with the standard UNIX copy command. See the example below.</p>
<p>Users are expected to make their own permanent backups of valuable data on the home file system. ZFS Snapshots are NOT permanent backups. Users are currently limited to a quota of 50 GB of snapshots.&nbsp;</p>
<p><strong>Example of ZFS Data Snapshot Restore Session</strong></p>
<blockquote>
	<pre>
$ ls
1G  4G</pre>
	<pre>
$ ls .zfs
snapshot/</pre>
	<pre>
$ ls .zfs/snapshot
SNAPSHOT2009-06-22-1245668520/  SNAPSHOT2009-06-24-1245841320/
SNAPSHOT2009-06-22-1245668674/  SNAPSHOT2009-06-25-1245927720/
SNAPSHOT2009-06-23-1245754920/  SNAPSHOT2009-06-26-1246014120/</pre>
	<pre>
$ rm 1G
$ ls
4G</pre>
	<pre>
$ ls .zfs/snapshot/SNAPSHOT2009-06-26-1246014120/
1G  4G</pre>
	<pre>
$ cp .zfs/snapshot/SNAPSHOT2009-06-26-1246014120/1G .</pre>
	<pre>
$ ls
1G  4G
</pre>
</blockquote>
<h4>
	&nbsp;Dynamic Provisioning sing Moab</h4>
<p>THIS FEATURE IS NOT YET SUPPORTED OFFICIALLY</p>
<p>FutureGrid now supports dynamic provisioning through Moab, and in Sierra, some instructions are listed below:</p>
<p>&bull; The executable tools are installed at /usr/local/bin, and the $PATH should have been all set. So a user could start running from his home directory.&nbsp;<br />
	&bull;&nbsp;Command&nbsp;<em>qnodes</em>&nbsp;will list all the nodes and status. As for now, node s36~s39 is up and running and should be available for test/experiment.&nbsp;<br />
	&bull;&nbsp;<em>checknode s36</em>&nbsp;will list info on node s36. Os info can be found at line such as:</p>
<blockquote>
	<pre>
 Opsys:      statelessrhels5.5  Arch:      x86_64
</pre>
</blockquote>
<p>Now we have&nbsp;<em>statelessrhels5.5</em>&nbsp;and&nbsp;<em>statefulrhels5</em>&nbsp;as two options.</p>
<p>&bull;&nbsp;If all the four nodes are running stateless os, submit a command like this:</p>
<blockquote>
	<pre>
 msub -l os=statelessrhels5.5 testcmd.sh
</pre>
</blockquote>
<p>will schedule the job in some node.</p>
<p>&bull;&nbsp;<em>showq</em>&nbsp;will list the current queue info, and you could see the submitted job in the&nbsp;<em>active jobs</em>&nbsp;section.&nbsp;<br />
	&bull;&nbsp;Check job running status using command&nbsp;<em>checkjob &lt;jobid&gt;</em>. The resource allocation info could be found in some lines like these:</p>
<blockquote>
	<pre>
 Allocated Nodes:
 [s36:1]
</pre>
</blockquote>
<p>In this case the job is scheduled at node s36.</p>
<p>&bull;&nbsp;In the case where all four nodes are running stateless os, submitting a job like this:</p>
<blockquote>
	<pre>
 msub -l os=statefulrhels5 testcmd.sh
</pre>
</blockquote>
<p>will try first to dynamically provision the requested os at some node, and then schedule the job.</p>
<p>&bull;&nbsp;<em>showq</em>&nbsp;once again could list the jobs.&nbsp;<br />
	&bull;&nbsp;<em>checkjob &lt;jobid&gt;</em>&nbsp;will first tell you the dependency job&nbsp;<em>provisioning os</em>&nbsp;is not completed.</p>
<blockquote>
	<pre>
  NOTE:  job cannot run  (dependency provision-73 jobsuccessfulcomplete not met)
</pre>
</blockquote>
<p>&bull;&nbsp;<em>checkjob provision-68(the provision job id)</em>&nbsp;will list the provisioning status.&nbsp;<br />
	&bull;&nbsp;Once the provisioning is done,&nbsp;<em>checkjob &lt;jobid&gt;</em>&nbsp;will show the job is scheduled, and also allow us to see where is it scheduled, for example s37.&nbsp;<br />
	&bull;&nbsp;By running&nbsp;<em>checknode s37</em>&nbsp;again, we could see that the running os was changed from&nbsp;<em>statelessrhels5.5</em>&nbsp;to<em>statefulrhels5</em>.</p>
<p>&bull;&nbsp;<em>testcmd.sh</em>&nbsp;used in the example:</p>
<blockquote>
	<pre>
 $ cat testcmd.sh 
 #!/bin/bash
 /bin/date
 sleep 300
 /bin/date</pre>
</blockquote>
<p>&nbsp;</p>  </div>
<div id="node-172" class="section-3">
  <h1 class="book-heading">Xray</h1>
  <p>&nbsp;</p>
<h2>
	This section is maintained by Greg Pike; please contact &nbsp;<a href="https://portal.futuregrid.org/help">https://portal.futuregrid.org/help</a>&nbsp;for more information.</h2>
<p>It will include system specific information relevant to xray.</p>
<h2>
	IU Cray User Manual</h2>
<h4>
	&nbsp;&nbsp;Hostname</h4>
<p>&bull; xray.futuregrid.org</p>
<h4>
	&nbsp;&nbsp;Login</h4>
<blockquote>
	<pre>
ssh xray.futuregrid.org</pre>
</blockquote>
<h4>
	&nbsp;Filesystem</h4>
<h4>
	&nbsp;Compiler</h4>
<p>For MPI jobs, use cc (pgcc).</p>
<p>For best performance, add the xtpe-barcelona module&nbsp;</p>
<blockquote>
	<pre>
% module add xtpe-module</pre>
</blockquote>
<h4>
	&nbsp;Cray Programming Environment Manuals</h4>
<ul>
	<li>
		<a href="http://docs.cray.com/cgi-bin/craydoc.cgi?mode=View;id=S-2396-21" rel="nofollow" title="http://docs.cray.com/cgi-bin/craydoc.cgi?mode=View;id=S-2396-21">http://docs.cray.com/cgi-bin/craydoc.cgi?q=&amp;mode=Search&amp;hw=%22Cray+XT5%22</a></li>
	<li>
		<a href="http://docs.cray.com/cgi-bin/craydoc.cgi?mode=View;id=S-2396-21" rel="nofollow" title="http://docs.cray.com/cgi-bin/craydoc.cgi?mode=View;id=S-2396-21">http://docs.cray.com/cgi-bin/craydoc.cgi?mode=View;id=S-2396-21</a></li>
</ul>
<h4>
	&nbsp;&nbsp;Queue</h4>
<p>Currently there is only one queue (batch) available to users on the Cray, and all jobs are automatically routed to that queue.</p>
<h4>
	&nbsp;Listing Queues on Xray</h4>
<blockquote>
	<pre>
 qstat -Q</pre>
</blockquote>
<p>The primary queue for running jobs on Xray is batch. To obtain details of running jobs and available processors, use the showq command.</p>
<blockquote>
	<pre>
/opt/moab/default/bin/showq</pre>
</blockquote>
<h3>
	&nbsp;Submitting a job</h3>
<p><strong>MPI run cmd</strong>:&nbsp;&nbsp;aprun</p>
<p>Example&nbsp;<strong>job script (16 processors / 2 nodes):</strong></p>
<blockquote>
	<pre>
% cat job.sub </pre>
</blockquote>
<blockquote>
	<pre>
#!/bin/sh
#PBS -l mppwidth=16 
#PBS -l mppnppn=8 
#PBS -N hpcc-16 
#PBS -j oe 
#PBS -l walltime=7:00:00 
#cd to directory where job was submitted from 
cd $PBS_O_WORKDIR 
export MPICH_FAST_MEMCPY=1 
export MPICH_PTL_MATCH_OFF=1 
aprun -n 16 -N 8 -ss -cc cpu hpcc
% qsub job.sub </pre>
</blockquote>

	&nbsp;Looking at the Queue
<blockquote>
	<pre>
% qstat</pre>
</blockquote>
<h3>
	How Do I Submit a Job to the Cray XT5m on FutureGrid?</h3>
<p><a href="http://kb.iu.edu/data/azse.html" title="http://kb.iu.edu/data/azse.html">http://kb.iu.edu/data/azse.html</a></p>
<p>The XT5m is a 2D mesh of nodes. Each node has two sockets, and each socket has four cores.</p>
<p>The batch scheduler interfaces with a Cray resource scheduler called APLS. When you submit a job, the batch scheduler talks to ALPS to find out what resources are available, and ALPS then makes the reservation.</p>
<p>Currently ALPS is a &quot;gang scheduler&quot; and only allows one &quot;job&quot; per node. If a user submits a job in the format&nbsp;aprun -n 1 a.out&nbsp;, ALPS will put that job on one core of one node and leave the other seven cores empty. When the next job comes in, either from the same user or a different one, it will schedule that job to the next node.</p>
<p>If the user submits a job with&nbsp;aprun -n 10 a.out&nbsp;, then the scheduler will put the first eight tasks on the first node and the next two tasks on the second node, again leaving six empty cores on the second node. The user can modify the placement with&nbsp;-N&nbsp;,&nbsp;-S&nbsp;, and&nbsp;-cc&nbsp;.</p>
<p>A user might also run a single job with multiple treads, as with OpenMP. If a user runs this job&nbsp;aprun -n 1 -d 8 a.out&nbsp;, the job will be scheduled to one node and have eight threads running, one on each core.</p>
<p>You can run multiple, different binaries at the same time on the same node, but only from one submission. Submitting a script like this will&nbsp;not&nbsp;work:</p>
<blockquote>
	<pre>
OMP_NUM_THREADS=1 aprun -n 1 -d 1 -cc 0 ./my-binary
OMP_NUM_THREADS=1 aprun -n 1 -d 1 -cc 1 ./my-binary
OMP_NUM_THREADS=1 aprun -n 1 -d 1 -cc 2 ./my-binary
OMP_NUM_THREADS=1 aprun -n 1 -d 1 -cc 3 ./my-binary
OMP_NUM_THREADS=1 aprun -n 1 -d 1 -cc 4 ./my-binary
OMP_NUM_THREADS=1 aprun -n 1 -d 1 -cc 5 ./my-binary
OMP_NUM_THREADS=1 aprun -n 1 -d 1 -cc 6 ./my-binary
OMP_NUM_THREADS=1 aprun -n 1 -d 1 -cc 7 ./my-binary</pre>
</blockquote>
<p>This will run a job on each core, but&nbsp;not&nbsp;at the same time. To run all jobs at the same time, you need to first bury all the binaries under one&nbsp;aprun&nbsp;command:</p>
<blockquote>
	<pre>
$ more run.sh
./my-binary1
./my-binary2
./my-binary3
./my-binary4
./my-binary5
./my-binary6
./my-binary7
./my-binary8
$ aprun -n 1 run.sh</pre>
</blockquote>
<p>Alternatively, use the command&nbsp;aprun -n 1 -d 8 run.sh&nbsp;. To run multiple serial jobs, you must build a batch script to divide the number of jobs into groups of eight, and the</p>  </div>
<div id="node-2326" class="section-3">
  <h1 class="book-heading">Alamo</h1>
  Alamo is a 96 node Dell cluster running 2.66 GHz Intel Xeon X5550 processors. &nbsp;The OS is CentOS 5.8 and 6.3. &nbsp;It runs Torque and Moab for scheduling. &nbsp;Alamo has a QDR IB interconnect and 15 TB of attached disk storage. &nbsp; Alamo is partitioned into different resources for Nimbus and HPC. &nbsp;See the Alamo hardware page for more detail:&nbsp;<a href="https://portal.futuregrid.org/hardware/alamo">https://portal.futuregrid.org/hardware/alamo</a> .<br />
<br />
<strong>Nimbus partition -</strong>&nbsp;see nimbus documentation:&nbsp;<a href="https://portal.futuregrid.org/tutorials/nimbus">https://portal.futuregrid.org/tutorials/nimbus</a><br />
<br />
<strong>HPC partition</strong><br />
<br />
Max cores 584.&nbsp;&nbsp;Submit <a href="http:// https://portal.futuregrid.org/help">ticket</a> if you need to run larger than the 320 limit per user.&nbsp;<br />
<br />
Available queues:&nbsp;<br />
&nbsp; &nbsp;short - 24 hours runtime limit<br />
&nbsp; &nbsp;long - 72 hours runtime limit<br />
<br />
After registering your .ssh key on the portal, go to <a href="https://portal.futuregrid.org/manual/access">https://portal.futuregrid.org/manual/access</a> .<br />
<br />
If you key has been uploaded, you can ssh to the login node using the following command.&nbsp;<br />
<strong>Note</strong>: If you are prompted for a password, your account has not been set up correctly or the .ssh key has not been propagated.&nbsp;<br />
<br />
&nbsp; ssh alamo.futuregrid.org<br />
<br />
To submit a test job use the qsub command.<br />
<br />
ex. &nbsp;qsub -N job_name -l nodes=1 -q short &nbsp;job_script<br />
<ul>
	<li>
		qstat - show current jobs in the queue with status</li>
	<li>
		showq - show current running and queued jobs and job id</li>
	<li>
		checkjob -v &lt;jobid&gt; &nbsp; - more detailed information about your job</li>
</ul>
Applications are available via modules. &nbsp;To see a list of available applications:<br />
&nbsp; module avail<br />
<br />
File systems:<br />
&nbsp; &nbsp;/home &nbsp; - Quota enforced home directory, backed up nightly.<br />
&nbsp; &nbsp;/N/work - 6.3 TB work directory, not backed up. NFS mounted from login node.&nbsp;<br />
&nbsp; &nbsp;/N/images - 11 TB directory for system images, not backed up. NFS mounted from login node.<br />
<br />
Administrator: David Gignac<br />
For issues or questions please use&nbsp;<a href="https://tickets.futuregrid.org">https://tickets.futuregrid.org</a> . You can conveniently submit a ticket via&nbsp;<a href="https://portal.futuregrid.org/help">https://portal.futuregrid.org/help</a>. To look at your previously submitted tickets you can use&nbsp;<a href="https://portal.futuregrid.org/tickets">https://portal.futuregrid.org/tickets</a> .<br />
<br />
&nbsp;&nbsp;<br />
<br />  </div>
<div id="node-1484" class="section-3">
  <h1 class="book-heading">Delta</h1>
  <h2>
	GPU&nbsp;User Manual</h2>

	FutureGrid&#39;s supercomputer, Delta&nbsp;(delta.futuregrid.org), is a 16-node GPU cluster running Red Hat Linux,&nbsp;with TORQUE&nbsp;(also called PBS) and Moab for job management, and Module to simplify application and environment configuration.&nbsp;Delta consists of 16 nodes with two 6-core Intel X5560 processors at 2.8GHz, 192 GB of&nbsp;DDR3 memory, and 15TB of&nbsp;RAID5 disk storage. Each node supports 2 nVIDIA Tesla C2070 GPUs with&nbsp;448 processing cores. For details on Delta&#39;s hardware configuration, see&nbsp;the <a href="https://portal.futuregrid.org/hardware/delta">Delta </a>page.<br />
	<br />
	<br />
	The FutureGrid <em>delta</em> cluster is accessible via&nbsp;a batch queue that is managed from india (india.futuregrid.org). To use delta interactively, first log into india:<br />
	<pre>
<code> ssh <a href="mailto:username@india.futuregrid.org">username@india.futuregrid.org</a>
</code></pre>
	Then, on india, the following command lets you use one of the delta compute nodes:<br />
	<pre>
<code> qsub -I -q delta myprg
</code></pre>
	If you want to use delta with your job script, please use<br />
	<pre>
<code> #PBS -q </code></pre>
	<pre>
</pre>
	<pre>
<code>delta</code></pre>
	to indicate that you&#39;d like to use this queue.<br />
	<br />
	For more details about how to manage queues with qsub, see the Delta manual page.<br />
	<br />
	Utilization of GPU resources&nbsp;on Delta:<br />
	1) Utilize GPU&nbsp;node<br />
	&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://portal.futuregrid.org/manual/gpu/running-programs-single-gpu">&nbsp;Running Program on&nbsp;single GPU node</a><br />
	2) Utilize GPU cluster<br />
	<a href="https://portal.futuregrid.org/manual/running-mpigpu-program-delta-cluster">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Running MPI/CUDA program on the Delta cluster</a><br />
	3) Utilize GPU cloud<br />
	4) Mixing utilization of&nbsp;GPU&nbsp;and CPU<br />
	5) Non-trivial service or applications using&nbsp;GPU<br />
	<br />
	<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  <div id="node-1880" class="section-4">
  <h1 class="book-heading">Running MPI/GPU program on the Delta cluster</h1>
  GPUs provide the ability to use mathematical operations at a fraction of the cost and with higher performance than on the current generation of processors. FutureGrid provides the ability to test such an infrastructure as part of its delta cluster. Here, we provide a step-by-step guide on how to run a parallel&nbsp;matrix&nbsp;multiplication&nbsp;program using IntelMPI and CUDA on Delta machines. The MPI framework&nbsp;distributes the work&nbsp;among compute nodes,&nbsp;each of which use CUDA&nbsp;to&nbsp;execute&nbsp;the shared workload. We also provide the&nbsp;complete&nbsp;parallel matrix&nbsp;multiplication&nbsp;code&nbsp;using&nbsp;MPI/CUDA&nbsp;that&nbsp;has already been tested on Delta cluster in attachment.

	&nbsp;
<br />
<br />
<strong>MPI code: pmm_mpi.c</strong><br />
<br />
<pre class="rteindent1">
#include &lt;mpi.h&gt;

void invoke_cuda_vecadd();

       int main(int argc, char *argv[])
{
          int rank, size;

          MPI_Init (&amp;argc, &amp;argv); /* starts MPI */
          MPI_Comm_rank (MPI_COMM_WORLD, &amp;rank); /* get current process id */
          MPI_Comm_size (MPI_COMM_WORLD, &amp;size); /* get number of processes */
          invoke_cuda_vecadd();  /* the cuda code */
          MPI_Finalize();
 return 0;
} </pre>
<br />
<strong>CUDA code: dgemm_cuda.cu</strong><br />
<p class="prettyprint rtejustify rteindent1">#include &lt;stdio.h&gt;<br />
	<br />
	__global__ void cuda_vecadd(int *array1, int *array2, int *array3)<br />
	{<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int index = blockIdx.x * blockDim.x + threadIdx.x;<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; array3[index] = array1[index] + array2[index];<br />
	}<br />
	<br />
	&nbsp;&nbsp;extern &quot;C&quot; void invoke_cuda_vecadd()<br />
	&nbsp;{<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cudaMalloc((void**) &amp;devarray1, sizeof(int)*10);<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cudaMalloc((void**) &amp;devarray2, sizeof(int)*10);<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cudaMalloc((void**) &amp;devarray3, sizeof(int)*10);<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cudaMemcpy(devarray1, hostarray1, sizeof(int)*10, cudaMemcpyHostToDevice);<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cudaMemcpy(devarray2,&nbsp;hostarray2, sizeof(int)*10, cudaMemcpyHostToDevice);<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cuda_vec_add&lt;&lt;&lt;1, 10&gt;&gt;&gt;(devarray1, devarray2, devarray3);<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cudaMemcpy(hostarray3, devarray3, sizeof(int)*10, cudaMemcpyDeviceToHost);<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cudaFree(devarray1);<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cudaFree(devarray2);<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cudaFree(devarray3);<br />
	}</p>
<p class="prettyprint rtejustify rteindent1">Note: Mixing MPI and CUDA code may cause problems during linking because of&nbsp;the&nbsp;difference between C and C++ calling conventions. The use of extern &quot;C&quot; around invoke_cuda_code which instructs the nvcc (a wrapper of c++) compiler to make that function callable from the C runtime.&nbsp;</p>
<strong>Compiling the MPI/CUDA&nbsp;program:</strong><br />
<br />

	Load the Modules

	<br />
	&gt; module load IntelMPI # load Intel MPI<br />
	&gt; module load Intel # load icc

	&gt; module load cuda # load cuda tools

	<br />
	This will load the Intel MPI, the compiler, and the cuda tools. Next compile the code with&nbsp;<br />
	<br />
	&gt; nvcc -c&nbsp;dgemm_cuda.cu -o dgemm_cuda.o &nbsp;

	&gt; mpiicc -o&nbsp;pmm_mpi.c&nbsp;-o&nbsp;pmm_mpi.o<br />
	&gt; mpiicc -o mpicuda&nbsp;pmm_mpi.o&nbsp;dgemm_cuda.o -lcudart&nbsp;-lcublas&nbsp;-L /opt/cuda/lib64 -I /opt/cuda/include<br />
	<br />
	Note:&nbsp;The CUDA compiler nvcc is used only to compile the CUDA&nbsp;source file, and the IntelMPI compiler&nbsp;mpiicc&nbsp;is&nbsp;used to compile the&nbsp;C&nbsp;code and do the linking

	<br />
	&nbsp;
<strong>Setting Up&nbsp;and Submitting MPI&nbsp;Jobs:</strong><br />
<br />

	1.&nbsp;qsub -I -l nodes=4 -q delta&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # get&nbsp;4 nodes from FG<br />
	2.&nbsp;uniq /var/spool/torque/aux/399286.i136 &gt;&nbsp;gpu_nodes_list&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#create&nbsp;machine file list<br />
	3. module load IntelMPI&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# load Intel MPI<br />
	4. module load Intel&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # load&nbsp;icc<br />
	5. module load&nbsp;cuda&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # load&nbsp;cuda&nbsp;tools<br />
	6.&nbsp;mpdboot&nbsp;-r ssh -f&nbsp;gpu_nodes_list -n&nbsp;4&nbsp;&nbsp;# will start an mpd ring on&nbsp;4 nodes including local host&nbsp;<br />
	7. mpiexec -l -machinefile&nbsp;gpu_nodes_list -n&nbsp;4 ./mpicuda&nbsp;10000 1&nbsp;4&nbsp; #&nbsp;run&nbsp;mpi program&nbsp;using 4 nodes

	<br />
	<br />
	<strong>Comparison between&nbsp;four&nbsp;implementations of&nbsp;sequential&nbsp;matrix multiplication on Delta:</strong><br />
	<br />
	&nbsp;

	&nbsp;

	<img alt="" height="280" src="/sites/default/files/resize/u28/CUBLAS2-800x280.png" width="800" />
<br />
<strong>References:</strong> <a href="https://portal.futuregrid.org/sites/default/files/mpi_cuda_mkl.zip">Source Code Package</a><br />
[1] High Performance Computing&nbsp;using&nbsp;CUDA,2009 User Group Conference<br />
[2] <a href="http://www.nvidia.com/content/global/global.php" title="http://www.nvidia.com/content/global/global.php">http://www.nvidia.com/content/global/global.php</a><br />
<br />
To get source code: git clone git@github.com:futuregrid/GPU.git<br />
<br />
Compiling source code on Delta machine:
<pre class="rteindent1">
module load intelmpi
module load intel
module load cuda
cd mpi_cuda_mkl
make</pre>
<br /><table id="attachments" class="sticky-enabled">
 <thead><tr><th>Attachment</th><th>Size</th> </tr></thead>
<tbody>
 <tr class="odd"><td><a href="https://portal.futuregrid.org/sites/default/files/mpi_cuda_mkl.zip">mpi_cuda_mkl.zip</a></td><td>888.92 KB</td> </tr>
</tbody>
</table>
  </div>
<div id="node-1882" class="section-4">
  <h1 class="book-heading">Running programs on a single GPU </h1>
  <p class="rtejustify"><strong>Summary:</strong></p>

	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GPUs provide the ability&nbsp;to use mathematical operations at a fraction of the cost and with higher&nbsp;performance than on the current&nbsp;generation of processors. CUDA is a parallel programming model and software environment&nbsp;that leverages the parallel computational&nbsp;power of GPU&nbsp;for non-graphics computing in a fraction of the time required on a CPU. FutureGrid provides the ability to test&nbsp;such a&nbsp;hardware&nbsp;and software environment as part of its Delta cluster. Here, we illustrate some details of data-parallel computational model&nbsp;of CUDA, and&nbsp;then provide a step-by-step guide on how to&nbsp;make a parallel matrix multiplication program using CUDA. In the supplied attachment, we also provide the complete code that has already been tested on Delta node.<br />
	<br />
	&nbsp;&nbsp;&nbsp;<img alt="" height="300" src="/sites/default/files/resize/u28/cudaarchi_threadsmode-544x300.png" width="544" /><br />
	Figure&nbsp;1:&nbsp;GPU&nbsp;Kernel and Thread&nbsp;model&nbsp;[1]<br />
	<br />
	&nbsp;<strong>CUDA Kernel&nbsp;and Threads:</strong><br />
	&nbsp;

	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The fundamental part of the CUDA code&nbsp;is the kernel program. Kernel is&nbsp;the&nbsp;function that can&nbsp;be&nbsp;executed&nbsp;in parallel in&nbsp;the GPU device.&nbsp;A CUDA kernel&nbsp;is executed by&nbsp;an array of CUDA&nbsp;threads. All threads run the same code.&nbsp;Each thread has&nbsp;an ID that it uses to compute memory address&nbsp;and make a control decision.&nbsp;CUDA supports to run thousands of&nbsp;threads on the GPU.&nbsp;CUDA&nbsp;organizes&nbsp;thousands of&nbsp;threads&nbsp;into a hierarchy of a grid of thread blocks.&nbsp;A grid is a set of thread blocks that can be processed on the device&nbsp;in parallel. A thread block is a set of concurrent threads that can cooperate among themselves through a synchronization barrier and access to a shared memory space private to the block. Each thread is given a unique thread ID&mdash; thread.Idx within its thread block.&nbsp;Each thread block is given a unique block&nbsp;ID&mdash; block.Idx within its&nbsp;grid.&nbsp;<br />
	<br />
	&nbsp;

	<strong>CUDA Kernel&nbsp;code for Matrix Multiplication:</strong><br />
	<br />
	&nbsp;__global__ void&nbsp;matrixMul( float* C, float* A, float* B, int wA, int wB)<br />
	&nbsp;{<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// Block index<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int bx = blockIdx.x;<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int by = blockIdx.y;<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Thread index<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int tx = threadIdx.x;<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int ty = threadIdx.y;<br />
	<br />
	&nbsp;&nbsp;&nbsp;&nbsp; // Index of the first sub-matrix of A processed by the block<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int aBegin = wA * BLOCK_SIZE * by;<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// Index of the last sub-matrix of A processed by the block<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int aEnd&nbsp;&nbsp; = aBegin + wA - 1;<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// Step size used to iterate through the sub-matrices of A<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int aStep&nbsp; = BLOCK_SIZE;<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// Index of the first sub-matrix of B processed by the block<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int bBegin = BLOCK_SIZE * bx;<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// Step size used to iterate through the sub-matrices of B<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;bStep&nbsp; = BLOCK_SIZE * wB;<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Csub is used to store the element of the block sub-matrix&nbsp;that is computed by the thread<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;float&nbsp;Csub = 0;<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// Loop over all the sub-matrices of A and B&nbsp;required to compute the block sub-matrix<br />
	&nbsp;&nbsp;&nbsp;&nbsp; for (int a = aBegin, b = bBegin; a &lt;= aEnd; a += aStep, b += bStep) {<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Declaration of the shared memory array As used to&nbsp;store the sub-matrix of A<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; __shared__ float As[BLOCK_SIZE][BLOCK_SIZE];<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Declaration of the shared memory array Bs used to&nbsp;store the sub-matrix of B<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; __shared__ float Bs[BLOCK_SIZE][BLOCK_SIZE];<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; As[ty][tx] = A[a + wA * ty + tx];&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Bs[ty],[tx] = B[b + wB * ty + tx];&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Synchronize to make sure the matrices are loaded&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; __syncthreads();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;multiply two matrices together;&nbsp;each thread computes&nbsp;one element&nbsp;&nbsp;of&nbsp;&nbsp;sub-matrix<br />
	&nbsp;#pragma unroll&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for (int k = 0; k &lt; BLOCK_SIZE; ++k)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Csub += As[ty][k]&nbsp;* Bs[k][tx];&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Synchronize to make sure that the preceding&nbsp;computation is done&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; __syncthreads();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// Write the block sub-matrix to device memory; each thread only writes one&nbsp;element!<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int c = wB * BLOCK_SIZE * by + BLOCK_SIZE * bx;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; C[c + wB * ty + tx] = Csub;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
	}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
	<br />
	&nbsp;&nbsp;&nbsp;<br />
	&nbsp;&nbsp;<img alt="" height="173" src="/sites/default/files/resize/u28/cudaMemoryArchitecture-500x173.png" width="500" /><br />
	Figure 2: GPU memory&nbsp;architecture&nbsp;[1][1]&nbsp;[1]<br />
	<br />
	<br />
	&nbsp;<strong>CUDA Memory Architecture:</strong><br />
	&nbsp;&nbsp;&nbsp;&nbsp;All&nbsp;multiprocessors of the GPU&nbsp;device access a&nbsp;large global device memory for both gather and scatter operations. This&nbsp;memory is relatively slow because it does not provide caching. Shared memory is fast compared to device memory, and normally takes the same amount of time as required to access registers. Shared memory is &ldquo;local&rdquo; to each multiprocessor unlike device memory and allows more efficient local synchronization. It is divided into many parts. Each thread block within a multiprocessor accesses its own part of shared memory, and this part of shared memory is not accessible by any other thread block of this multiprocessor or of some other multiprocessor. All threads within a thread block that have the same lifetime as the block share this part&nbsp;of memory for both read and write operations. To declare variables in shared memory, __shared__ qualifier is used, and to declare in global memory, __device__ qualifier is used.<br />
	<br />
	<strong>CPU code invoke&nbsp;CUDA&nbsp;kernel code:</strong><br />
	<br />
	void&nbsp;invoke_matrixMul(int size){&nbsp;&nbsp;&nbsp;&nbsp;<br />
	<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int devID;<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cudaDeviceProp props;<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; checkCudaErrors(cudaGetDevice(&amp;devID));<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; checkCudaErrors(cudaGetDeviceProperties(&amp;props, devID));<br />
	<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int block_size = (props.major &lt; 2) ? 16 : 32;<br />
	&nbsp;&nbsp;&nbsp; unsigned int uiWA, uiHA,&nbsp;uiWB, uiHB, uiWC,&nbsp;uiHC;<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; uiWA = uiHA=&nbsp;uiWB =&nbsp;uiHB =&nbsp;uiWC =&nbsp;uiHC;<br />
	<br />
	&nbsp;&nbsp;&nbsp; // allocate host memory for matrices A and B<br />
	&nbsp;&nbsp;&nbsp; unsigned int size_A = uiWA * uiHA;<br />
	&nbsp;&nbsp;&nbsp; unsigned int mem_size_A = sizeof(float) * size_A;<br />
	&nbsp;&nbsp;&nbsp; float* h_A = (float*)malloc(mem_size_A);<br />
	&nbsp;&nbsp;&nbsp; unsigned int size_B = uiWB * uiHB;<br />
	&nbsp;&nbsp;&nbsp; unsigned int mem_size_B = sizeof(float) * size_B;<br />
	&nbsp;&nbsp;&nbsp; float* h_B = (float*)malloc(mem_size_B);<br />
	<br />
	<strong>&nbsp;&nbsp;&nbsp;&nbsp;</strong>// initialize host memory<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; srand(2012);<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; randomInit(h_A, size_A);<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; randomInit(h_B, size_B);<br />
	<br />
	&nbsp;&nbsp;&nbsp; // allocate device memory<br />
	&nbsp;&nbsp;&nbsp; float* d_A, *d_B, *d_C;<br />
	&nbsp;&nbsp;&nbsp; unsigned int size_C = uiWC * uiHC;<br />
	&nbsp;&nbsp;&nbsp; unsigned int mem_size_C = sizeof(float) * size_C;<br />
	<br />
	&nbsp;&nbsp;&nbsp; // allocate host memory for the result<br />
	&nbsp;&nbsp;&nbsp; float* h_C&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = (float*) malloc(mem_size_C);<br />
	&nbsp;&nbsp;&nbsp; float* h_CUBLAS = (float*) malloc(mem_size_C);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; checkCudaErrors(cudaMalloc((void**) &amp;d_A, mem_size_A));&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; checkCudaErrors(cudaMalloc((void**) &amp;d_B, mem_size_B));&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
	&nbsp;&nbsp;&nbsp; // copy host memory to device&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; checkCudaErrors(cudaMemcpy(d_A, h_A, mem_size_A, cudaMemcpyHostToDevice) );&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; checkCudaErrors(cudaMemcpy(d_B, h_B, mem_size_B, cudaMemcpyHostToDevice) );&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;checkCudaErrors(cudaMalloc((void**) &amp;d_C, mem_size_C));&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
	&nbsp;&nbsp;&nbsp; // setup execution parameters&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; dim3 threads(block_size, block_size);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; dim3 grid(uiWC / threads.x, uiHC / threads.y);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
	&nbsp;&nbsp;&nbsp;&nbsp; //Performs warmup operation using matrixMul CUDA kernel&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
	&nbsp;&nbsp;&nbsp; if (block_size 16) {<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; matrixMul&lt;16&gt;&lt;&lt;&lt; grid, threads &gt;&gt;&gt;(d_C, d_A, d_B, uiWA, uiWB);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
	&nbsp;&nbsp;&nbsp; } else {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; matrixMul&lt;32&gt;&lt;&lt;&lt; grid, threads &gt;&gt;&gt;(d_C, d_A, d_B, uiWA, uiWB);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
	&nbsp;&nbsp;&nbsp; }&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
	<p>&nbsp;&nbsp;&nbsp;&nbsp; cudaDeviceSynchronize();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>
	<p>&nbsp;&nbsp;&nbsp;&nbsp;// clean up memory&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
		&nbsp;&nbsp;&nbsp; free(h_A);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
		&nbsp;&nbsp;&nbsp; free(h_B);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
		&nbsp;&nbsp;&nbsp; free(h_C);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br />
		&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>

<p><strong>References:</strong><br />
	[1]&nbsp;High&nbsp;Performance&nbsp;Computing&nbsp;with&nbsp;CUDA,&nbsp;2009&nbsp;User&nbsp;Group&nbsp;Conference<br />
	[2]&nbsp;http://www.nvidia.com/content/global/global.php</p>
<p>source&nbsp;code:&nbsp;git clone&nbsp;git@github.com:futuregrid/GPU.git<br />
	<br />
	Usage:<br />
	module load cuda<br />
	module load&nbsp;intel<br />
	&nbsp;&nbsp;nvcc&nbsp;-c matrixMul.cu -L/opt/cuda/lib64&nbsp;-lcudart</p><table id="attachments" class="sticky-enabled">
 <thead><tr><th>Attachment</th><th>Size</th> </tr></thead>
<tbody>
 <tr class="odd"><td><a href="https://portal.futuregrid.org/sites/default/files/matrixMul_0.zip">matrixMul.zip</a></td><td>3.13 KB</td> </tr>
</tbody>
</table>
  </div>
<div id="node-1899" class="section-4">
  <h1 class="book-heading">C-means clustering using CUDA on GPU</h1>
  <strong>Summary:</strong><br />
	The computational&nbsp;demands for multivariate clustering&nbsp;are increasing&nbsp;rapidly, and therefore&nbsp;processing large data sets is time&nbsp;consuming on&nbsp;a single CPU. To address the computational demands,&nbsp;we implemented the cmeans&nbsp;clustering&nbsp;algorithm, using&nbsp;the&nbsp;NVIDIA&#39;s CUDA&#39;s framework and the latest GPU&nbsp;devices on the Delta machine.&nbsp;<br />
	<br />
	<strong>Fuzzy C-Means Clustering</strong><br />
	&nbsp;Fuzzy c-means&nbsp;is an algorithm&nbsp;of&nbsp;clustering which allows one&nbsp;element to belong to two or more clusters with&nbsp;different probability.&nbsp;This method&nbsp;is frequently used in multivariate clustering.&nbsp;This algorithm&nbsp;is based on minimization of the following objective function:
	
		<img alt="" height="47" src="/sites/default/files/u28/cmeans_objective_function.gif" width="157" /><br />
		Here, M&nbsp;is a real number greater than 1, N is the number&nbsp;of&nbsp;elements, Uij is the value&nbsp;of membership of&nbsp;Xi&nbsp;in cluster Cj,&nbsp; xi is the ith of d-dimensional measured data, cj is the d-dimension center of the cluster, and ||Xi-Cj|| is any norm expressing the similarity between any measured data and the center.
	&nbsp;Fuzzy partitioning is&nbsp;performed through an iterative optimization of the objective function shown above. Within each&nbsp;iteration,&nbsp;the algorithm&nbsp;updates&nbsp;the&nbsp;membership&nbsp;uij and the cluster centers cj by:<br />
	<img alt="" height="96" src="/sites/default/files/u28/cmeans_uij_ck.gif" width="157" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <img alt="" height="88" src="/sites/default/files/u28/cmeans_ck.gif" width="99" /><br />
	This iteration will stop when <img alt="" height="29" src="/sites/default/files/u28/cmeans_stop_condition.gif" width="157" />, where&nbsp;&#39;e&#39;&nbsp;is a termination criterion between 0 and 1, and k represents the iteration steps.<br />
	<strong><strong>Algorithm of CUDA C-means:</strong><br />
	1</strong>) Copy data to GPU<br />
	2) DistanceMatrix kernel<br />
	3) MembershipMatrix kernel<br />
	4) UpdateCenters kernel, copy partial centers to host from GPUs<br />
	5) ClusterSizes kernel, copy cluster sizes to host from each GPU<br />
	6) Aggregate partial cluster centers and reduce<br />
	10) Compute difference between current cluster centers and previous iteration.<br />
	11) Compute cluster distance&nbsp;and&nbsp;memberships using final centers.<br />
	<br />
	&nbsp;&nbsp;<strong>&nbsp;&nbsp;CUDA kernels of C-means program:</strong><br />
	1) DistanceMatrix<br />
	2)&nbsp;MembershipMatrix<br />
	3)&nbsp;UpdateCetners<br />
	4)&nbsp;ClusterSizes<br />
	<br />
	&nbsp;&nbsp;&nbsp;&nbsp;<strong>CUDA&nbsp;C-means performance on Delta:</strong><br />
	
		<img alt="" height="178" src="/sites/default/files/resize/u28/cmeansPerformance2-600x178.png" width="600" />
	
		<br />
		Figure&nbsp;1:&nbsp;C-means performance&nbsp;using GPU and&nbsp;CPU
	<br />
	&nbsp;&nbsp;Reference:<br />
	&nbsp;&nbsp;[1] <a href="http://en.wikipedia.org/wiki/Cluster_analysis" title="http://en.wikipedia.org/wiki/Cluster_analysis">http://en.wikipedia.org/wiki/Cluster_analysis</a><br />
	&nbsp;&nbsp;[2] Scalable Data Clustering using GPU&nbsp;Clusters,&nbsp; Andrew Pangborn,&nbsp;Gregor von Laszewski<form action="/book/export/html/104"  accept-charset="UTF-8" method="post" id="fivestar-form-node-1899" class="fivestar-widget">
<div><div class="fivestar-form-vote-1899 clear-block"><input type="hidden" name="content_type" id="edit-content-type" value="node"  />
<input type="hidden" name="content_id" id="edit-content-id" value="1899"  />
<div class="fivestar-form-item  fivestar-combo-text fivestar-average-stars fivestar-labels-hover"><div class="form-item" id="edit-vote-wrapper">
 <label for="edit-vote">Average: </label>
 <input type="hidden" name="vote_count" id="edit-vote-count" value="1"  />
<input type="hidden" name="vote_average" id="edit-vote-average" value="80"  />
<input type="hidden" name="auto_submit_path" id="edit-auto-submit-path" value="/fivestar/vote/node/1899/vote"  class="fivestar-path" />
<select name="vote" class="form-select" id="edit-vote-1" ><option value="-">Select rating</option><option value="20">Poor</option><option value="40">Okay</option><option value="60">Good</option><option value="80" selected="selected">Great</option><option value="100">Awesome</option></select><input type="hidden" name="auto_submit_token" id="edit-auto-submit-token" value="e6ff259fa616b6de370d3f20db35c838"  class="fivestar-token" />

 <div class="description"><div class="fivestar-summary fivestar-summary-combo fivestar-feedback-enabled"><span class="user-rating">Your rating: <span>None</span></span> <span class="average-rating">Average: <span>4</span></span> <span class="total-votes">(<span>1</span> vote)</span></div></div>
</div>
</div><input type="hidden" name="destination" id="edit-destination" value="book/export/html/104"  />
<input type="submit" name="op" id="edit-fivestar-submit" value="Rate"  class="form-submit fivestar-submit" />
<input type="hidden" name="form_build_id" id="form-9c8534b427e32283d169a05d343f3939" value="form-9c8534b427e32283d169a05d343f3939"  />
<input type="hidden" name="form_token" id="edit-fivestar-form-node-1899-form-token" value="d675303d6f8a0709f4bda407347d94fe"  />
<input type="hidden" name="form_id" id="edit-fivestar-form-node-1899" value="fivestar_form_node_1899"  />
</div>
</div></form>
  </div>
</div>
<div id="node-1350" class="section-3">
  <h1 class="book-heading">ScaleMP vSMP</h1>
  <p class="p1">&nbsp;</p>
<p class="p1">FutureGrid provides a new experimental distributed large memory SMP machine.&nbsp;</p>
<p class="p2">&nbsp;</p>
<h1 class="p1">Accessing ScaleMP:</h1>
<p class="p1">Access of the ScaleMP vSMP machine is managed through the job queueing system on India. Specifically, you must submit a job to the scalemp queue on the India cluster. If you haven&#39;t already, first log into India and prepare your environment path:</p>
<pre class="p1">ssh <a href="mailto:username@india.futuregrid.org">username@india.futuregrid.org</a>


module load torque
module load moab</pre>
<p class="p3">&nbsp;</p>
<h2 class="p4">Submitting a job:</h2>
<p class="p4">From here, you are now able to submit to the scalemp queue:</p>
<pre class="p4">qsub scalemp_job.sh</pre>
<p class="p3">&nbsp;</p>
<p class="p3">OR run a job interactively&nbsp;</p>
<pre class="p3">qsub -I -q scalemp</pre>
<p class="p3"><br />
	&nbsp;</p>
<h1 class="p4">Developing a job script:</h1>
<p class="p4">As the ScaleMP vSMP machine is a unique and tool, it requires some simple but special configuration in order to take full advantage of its capabilities. &nbsp;This customization depends on the type of application you are looking to run, so please consult the configuration type that best fits your application.</p>
<p class="p3">&nbsp;</p>
<h2 class="p4">MPI:</h2>
<p class="p4">Below is an example script to run a MPI job. &nbsp;Please note that we currently only support using MPICH2. &nbsp;Using OpenMPI and IntelMPI is possible, however we do not currently support such usage at this time. &nbsp;See /opt/ScaleMP/examples/ for more information.</p>
<p class="p6">&nbsp;</p>
<pre class="p9"># Add path to MPICH2 tuned for vSMP foundation
<b>export PATH=/opt/ScaleMP/mpich2/1.0.8/bin:$PATH</b>

# If application binary is MPICH1 and dynamically linked, uncomment this
<b># export USE_MPI_WRAPPER=MPICH1</b>

# ScaleMP preload library that throttles down unnecessary system calls
<b>export LD_PRELOAD=/opt/ScaleMP/libvsmpclib/0.1/lib64/libvsmpclib.so</b>

# Bind MPI processes on consecutive cores
# Adding numabind for dynamic placement (according to VSMP_PLACEMENT)
<b>export PATH=/opt/ScaleMP/numabind/bin:${PATH}</b>

<b>export VSMP_PLACEMENT=PACKED</b>
<b>export VSMP_VERBOSE=YES </b>
<b>export VSMP_MEM_PIN=YES ulimit -s unlimited</b>


<b>vsmputil --unpinall </b>
<b>time mpirun -np $NPROC ./mpi-app &gt; log-mpi-app-$NPROC.txt</b></pre>
<p class="p3">&nbsp;</p>
<h2 class="p4">OpenMP:</h2>
<p class="p4">Below is an example script for running your OpenMP code on the scalemp machine. &nbsp;See /opt/ScaleMP/examples/OpenMP for more information</p>
<pre class="p8"># Make sure to use Intel compilers to build the application # Intel compiler runtime environemnt setting 
<b>source /opt/intel/Compiler/11.1/069/bin/iccvars.sh intel64</b>
# Setting stacksize to unlimited
<b>ulimit -s unlimited</b>
# ScaleMP preload library that throttles down unnecessary system calls
<b>export LD_PRELOAD=/opt/ScaleMP/libvsmpclib/0.1/lib64/libvsmpclib.so</b>

# Bind OpenMP threads statically to consecutive cpus: last number is the cpu to start from
<b>export KMP_AFFINITY=compact,verbose,0,0</b>

# Alternatively you can use dynamic placement using numabind
<b># export PATH=/opt/ScaleMP/numabind/bin:${PATH} # export LD_LIBRARY_PATH=/opt/ScaleMP/numabind/lib </b>
# The cpu/offset to start from is calculated dynamically by numabind 
<b># export KMP_AFFINITY=compact,verbose,0,`numabind --offset $np`</b>

<b>np=16</b>
<b>export OMP_NUM_THREADS=$np </b>
<b>/usr/bin/time ./openmp-app &gt; log-openmp-app-$np.txt</b></pre>
<p class="p3">&nbsp;</p>
<h2 class="p4">Threaded:</h2>
<p class="p4">Below is an example script for running a job using Pthreads.&nbsp;See /opt/ScaleMP/examples/Pthread for more information</p>
<pre class="p9"># ScaleMP preload library that throttles down unnecessary system calls
<b>export LD_PRELOAD=/opt/ScaleMP/libvsmpclib/0.1/lib64/libvsmpclib.so</b>
# PATH to numabind, See /opt/ScaleMP/examples/ for more information
<b>export PATH=/opt/ScaleMP/numabind/bin:$PATH</b>
# Specify sleep duration for each pthread. Default = 60 sec if not set
<b>export SLEEP_TIME=120
</b>
# 16 pthreads would be created
<b>NP=16</b>
<b>./ptest $NP &gt; log-pthread-app-$NP 2&gt;&amp;1 &amp;</b>
# Waiting for 15 seconds for all the threads to start
<b>sleep 15
</b>
# Start numabind with a config file that has a rule for pthread, 
# which would place all threads to consecutive cpus. 
<b>numabind --config myconfig &gt;&gt; log-pthread-app-$NP 2&gt;&amp;1
wait</b></pre>
<p class="p6">&nbsp;</p>
<h2 class="p8">Throughput:</h2>
<p class="p4">Below is an example script to run a throughput job.&nbsp;See /opt/ScaleMP/examples/ for more information.&nbsp;</p>
<pre class="p9"># Setting stacksize to unlimited
<b>ulimit -s unlimited</b>
# ScaleMP preload library that throttles down unnecessary system calls
<b>export LD_PRELOAD=/opt/ScaleMP/libvsmpclib/0.1/lib64/libvsmpclib.so
</b>
# Bind the throughput job statically to a particular CPU
<b>for i in 1 2 3 4; do </b>
<b>numactl --physcpubind=$i-1 ./throughput-app $i &gt; log-throughput-app-$i.txt </b>
# To bind to a numa node, use numactl &ndash;cpunodebind=X 
<b>done</b></pre>
<h2 class="p8"><br />
	Serial:</h2>
<p class="p4">Below is an example script to run a serial job. &nbsp;See /opt/ScaleMP/examples/ for more information.&nbsp;</p>
<pre class="p7"># Setting stacksize to unlimited
<b>ulimit -s unlimited</b>
# ScaleMP preload library that throttles down unnecessary system calls
<b>export LD_PRELOAD=/opt/ScaleMP/libvsmpclib/0.1/lib64/libvsmpclib.so
</b>
# Bind the serial job statically to a particular CPU using numactl
<b>cpu=1; numactl --physcpubind=$cpu ./serial-app &gt; log-serial-app-$cpu.txt</b>
# To bind to a numa node, use numactl &ndash;cpunodebind=X # See /opt/ScaleMP/examples/ for more information</pre>
<p class="p5">&nbsp;</p>
<p class="p3">&nbsp;</p>
<p class="p3">&nbsp;</p>  </div>
</div>
<div id="node-1328" class="section-2">
  <h1 class="book-heading">IaaS - Infrastructure as a Service</h1>
  This chapter contains information in regards to Infrastructure as a Service offerings on FutureGrid  <div id="node-1175" class="section-3">
  <h1 class="book-heading">Using IaaS Clouds on FutureGrid</h1>
  Infrastructure-as-a-Service (IaaS) cloud computing encompasses techniques that have driven major recent advances in information technology supporting elastic, on-demand, &quot;pay as you go&quot; computing as a service. Key technologies behind IaaS cloud computing are resource virtualization, as well as cloud middleware that enables the management of clusters of virtualized resources through service interfaces.&nbsp;<br />
<br />
The FutureGrid testbed provides capabilities that allow users to experiment with open-source cloud middleware and virtualization platforms, and there are different ways you may want to use these platforms in the testbed. This page guides you in selecting from FutureGrid capabilities best suited to your goals, and provides links to respective tutorials:<br />
<h2>
	<br />
	Nimbus Clouds</h2>
Nimbus is an open-source service package that allows users to run virtual machines on FutureGrid hardware. You can easily upload your own VM image or customize an image provided by us. When you boot a VM, it is assigned a public IP address (and/or an optional private address), and you are authorized to log in as root via SSH. You can then run services, perform computations, and configure the system as desired.<br />
<br />
Nimbus is available across various FutureGrid sites, and there are two open-source hypervisors in use in FutureGrid Nimbus clouds: Xen and KVM. Nimbus in FutureGrid is the recommended platform if you are interested in experiments within a cloud, across clouds, or in those not amenable to para-virtualization, as the Nimbus/KVM cloud (alamo) supports &quot;classic&quot; virtual machines.<br />
<br />
For tutorials on getting started with Nimbus, see:<br />
<ul>
	<li>
		<a href="https://portal.futuregrid.org/tutorials/nimbus">Using Nimbus on FutureGrid</a>&nbsp;[novice]</li>
	<li>
		<a href="https://portal.futuregrid.org/tutorials/nm2">Nimbus One-click Cluster Guide</a>&nbsp;[intermediate]</li>
</ul>
<h2>
	OpenStack Clouds</h2>

<a href="http://www.openstack.org/">OpenStack</a>&nbsp;is a recently open-sourced, IaaS cloud computing platform founded by Rackspace Hosting and NASA, and used widely in industry. It includes three components: Compute(Nova), Object Storage (Swift), and Image Service (Glance). OpenStack Nova supports an&nbsp;

Amazon Web Services (AWS) complaint EC2-based web service interface for interacting with the Cloud service, and can be used with the same client-side &quot;eucatools&quot; that is used with Eucalyptus.<br />
<br />

FutureGrid currently features the OpenStack Nova compute cloud.&nbsp;

OpenStack Nova in FutureGrid is useful if you are interested in experiments within a cloud, and in comparison of cloud middleware stacks.<br />
<br />
For tutorials on getting started with OpenStack, see:<br />


<ul>
	<li>
		<a href="https://portal.futuregrid.org/tutorials/openstack">Using OpenStack Nova on FutureGrid</a>&nbsp;[novice]
		<ul>
			<li>
				This tutorial targets all users of OpenStack in FutureGrid; it describes how to get started with FutureGrid OpenStack resources.</li>
		</ul>
	</li>
	<li>
		<a href="https://portal.futuregrid.org/tutorials/os1">Running an OpenStack virtual appliance on FutureGrid</a>&nbsp;[novice]
		<ul>
			<li>
				This tutorial targets users interested in education and training on OpenStack internals; it describes how to run a virtual, private OpenStack deployment as an appliance.</li>
		</ul>
	</li>
</ul>
<h2>
	Eucalyptus Clouds</h2>

Eucalyptus is an open-source software platform that implements IaaS-style cloud computing. Eucalyptus provides an Amazon Web Services (AWS) complaint EC2-based web service interface for interacting with the Cloud service. Additionally, Eucalyptus provides services such as the AWS Complaint Walrus and a user interface for managing users and images.&nbsp;<br />
<br />
Eucalyptus is also available on distributed FutureGrid resources. Eucalyptus in FutureGrid is useful if&nbsp;

you are interested in experiments within a cloud, across clouds, and in comparison of cloud middleware stacks.<br />
<br />
For tutorials on getting started with Eucalyptus, see:<br />
<ul>
	<li>
		<a href="https://portal.futuregrid.org/tutorials/eucalyptus3">Using&nbsp;Eucalyptus on FutureGrid</a>&nbsp;[novice]</li>
</ul>
<br />
<h2>
	Virtual Appliances for Training and Education</h2>
The IaaS cloud stacks on FutureGrid enable the use of &quot;virtual appliances&quot; as an environment where hands-on, executable educational and training modules can be created, shared, and leveraged by the FutureGrid community. With these appliances, students are able to deploy virtual machines and virtual private clusters, where they are able to experiment with various Grid and cloud computing middleware stacks.<br />
<br />
For tutorials on getting started with educational virtual appliances, see:<br />
<br />


<ul>
	<li>
		<a href="https://portal.futuregrid.org/tutorials/ga1">Running a Grid Appliance on your desktop</a>&nbsp;&nbsp;[novice]</li>
	<li>
		<a href="https://portal.futuregrid.org/tutorials/ga9">Running a Grid Appliance on FutureGrid</a>&nbsp;[novice]</li>
	<li>
		<a href="https://portal.futuregrid.org/tutorials/ga8">Running Condor tasks on the Grid Appliance</a>&nbsp;[novice]</li>
	<li>
		<a href="https://portal.futuregrid.org/tutorials/mp1">Running MPI tasks on the Grid Appliance</a>&nbsp;[novice]</li>
	<li>
		<a href="https://portal.futuregrid.org/tutorials/ga10">Running Hadoop&nbsp;tasks on the Grid Appliance</a>&nbsp;[novice]</li>
	<li>
		<a href="https://portal.futuregrid.org/tutorials/os1">Running an OpenStack virtual appliance on FutureGrid</a>&nbsp;[novice]</li>
</ul>
&nbsp;  </div>
<div id="node-157" class="section-3">
  <h1 class="book-heading">Using Nimbus on FutureGrid</h1>
  <p>&nbsp;</p>
<p>&nbsp;</p>

	<h2>
		<a href="http://www.nimbusproject.org/"><img alt="" class="image image-_original " height="112" src="/sites/default/files/images/nimbus_logo.png" title="" width="200" /></a></h2>
	<p>&nbsp;</p>
	<h2>
		What is Nimbus?</h2>
	<p>Nimbus is an open source service package that allows users to run virtual machines on FutureGrid hardware. You can easily upload your own VM image or customize an image provided by us. When you boot a VM, it is assigned a public IP address (and/or an optional private address); you are authorized to log in as root via SSH. You can then run services, perform computations, and configure the system as desired. After using and configuring the VM, you can save the modified VM image back to the Nimbus image repository.</p>
	<p>&nbsp;</p>
	<h2>
		Nimbus on FutureGrid</h2>
	<p>Nimbus is installed on four FutureGrid clusters:</p>
	<ol>
		<li>
			<strong>Hotel</strong>&nbsp;(University of Chicago)<br />
			41 nodes, 328 cores</li>
		<li>
			<strong>Foxtrot</strong>&nbsp;(University of Florida)<br />
			26 nodes, 208 cores</li>
		<li>
			<strong>Sierra</strong>&nbsp;(San Diego Supercomputer Center)<br />
			18 nodes, 144 cores</li>
		<li>
			<strong>Alamo </strong>(Texas Advanced Computing Center)<br />
			15 nodes, 120 cores</li>
	</ol>
	<p>By default, users are limited to running 16 VMs simultaneously and claiming two cores per VM. If you have a good reason for this limitation to be lifted for your account, contact&nbsp;<a href="https://portal.futuregrid.org/help">https://portal.futuregrid.org/help</a>.</p>
	<p>All FutureGrid users are allowed access to Nimbus on all sites.</p>
	<h2>
		Getting Started</h2>
	<p>Nimbus provides services that can be controlled remotely using a variety of clients. In this tutorial, we will use a simple command line tool called the&nbsp;<strong>cloud-client</strong>. If you&#39;d rather have programmatic control, the Amazon EC2 protocols&nbsp;<a href="http://www.nimbusproject.org/docs/current/elclients.html">are supported</a>, which have a variety of excellent clients&nbsp;available&nbsp;for many languages.&nbsp;&nbsp;</p>
	<h3>
		Log into hotel</h3>
	<p>The first step is to ssh into hotel.futuregrid.org.&nbsp; While you can use Nimbus clients from anywhere in the world, we recommend that you start on hotel because the correct version of Java is installed there.</p>
	<pre>
$ ssh -A hotel.futuregrid.org</pre>
	<p>If this command fails, contact <a href="https://portal.futuregrid.org/help">https://portal.futuregrid.org/help</a>.&nbsp; It likely means one of the following:</p>
	<ol>
		<li>
			Your account is not yet set up.</li>
		<li>
			You provide no public key or an corrupted public key.</li>
		<li>
			The private key you are using does not match the public one you registered with FutureGrid.</li>
	</ol>
	<h3>
		Download and install cloud-client</h3>
	<p>Download the Nimbus cloud client from the&nbsp;<a href="http://www.nimbusproject.org/downloads/">Nimbus website</a>.</p>
	<pre>
$ wget http://www.nimbusproject.org/downloads/nimbus-cloud-client-021.tar.gz</pre>
	<p>Unpack the archive onto your system. You can also use one of the FutureGrid login nodes directly.</p>
	<pre>
$ tar xzf nimbus-cloud-client-021.tar.gz
$ ls nimbus-cloud-client-021/
CHANGES.txt	README.txt	conf		lib
LICENSE.txt	bin		history		samples
Obtain your Nimbus credentials and configuration files

</pre>
	<h3>
		Obtain Your Nimbus Credentials and Configuration Files</h3>
	<p>In your home directory on hotel, you will find the file nimbus_creds.tar.gz:</p>
	<pre>
 username@hotel $ ls ~/nimbus_creds.tar.gz
nimbus_creds.tar.gz
</pre>
	<p>If your credentials are not present on&nbsp;<strong>Hotel</strong>, contact&nbsp;<a href="https://portal.futuregrid.org/help">https://portal.futuregrid.org/help</a>.</p>
	<p>Back on your system, download and unpack these files into your cloud-client&#39;s&nbsp;directory:</p>
	<pre>
$ cd nimbus-cloud-client-021/conf/&nbsp;
$ tar xvzf ~/nimbus_creds.tar.gz
usercert.pem
userkey.pem
cloud.properties
hotel.conf
sierra.conf
foxtrot.conf
alamo.conf
</pre>
	<p>Now you should have a functional cloud client. To begin, check out the help text and&nbsp;file.</p>
	<pre>
$ cd ../
</pre>
	<pre>
$ bin/cloud-client.sh --help

</pre>
	<h3>
		Check Your ssh Key</h3>
	<p>In order to use Nimbus clouds effectively, you need to have your ssh public key in a known place so that it can be injected into your VM, and thus allow you (and only you) root access to your VM. When creating your FutureGrid account you had to upload an ssh public key.&nbsp; That key can be found on hotel in the file <em>~/.ssh/authorized_keys</em>.&nbsp; If you were able to ssh into hotel then this is the public key are are currently using.&nbsp; Nimbus needs this key to be in the<em> ~/.ssh/id_rsa.pub </em>:</p>
	<pre>
$ cp ~/.ssh/authorized_keys ~/.ssh/id_rsa.pub
</pre>
	<p>Because the security environment can be complicated, cloud-client has an option to help verify that things are working.&nbsp; Run the following command to display some information about your security environment:</p>
	<pre>
$ ./bin/cloud-client.sh --security</pre>
	<h2>
		Using the Cloud Client</h2>
	<h3>
		Check out the various FutureGrid clouds</h3>
	<p>When the credentials file was untarred in a step above, a configuration file for each of the four FutureGrid clouds was put in your <em>conf/ </em>directory.&nbsp; Now let&#39;s take a look at accessing each of those clouds and seeing what virtual machines are available for use. This will require two options to cloud client.&nbsp; The first is --conf ; this is used to select the cloud you wish to use.&nbsp; Simply provide a path to the cloud configuration file.&nbsp; This --conf switch will be used in all commands to direct cloud-client at the cloud of interest.<br />
		<br />
		The second option is --list.&nbsp; This will simply provide a listing of all the available virtual machines:</p>
	<pre>
$ bin/cloud-client.sh --conf conf/hotel.conf --list
</pre>
	<p>This command should list the available images on the system.&nbsp; Notice the hello-cloud virtual machine.&nbsp; This is the test image we will use in this tutorial:</p>
	<pre>
[Image] &#39;hello-cloud&#39;                    Read only
        Modified: Jan 13 2011 @ 14:15   Size: 576716800 bytes (~550 MB)
</pre>
	<h3>
		Run a Virtual Machine</h3>
	Next, try to boot a virtual machine:<br />
	<pre>
$ bin/cloud-client.sh --conf conf/hotel.conf --run --name hello-cloud --hours 2
Launching workspace.
</pre>
	<pre>
Workspace Factory Service:
     https://svc.uc.futuregrid.org:8443/wsrf/services/WorkspaceFactoryService</pre>
	<pre>
&nbsp;</pre>
	<pre>
Creating workspace &quot;vm-001&quot;... done.</pre>
	<pre>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IP address: 149.165.148.253         
         Hostname: vm-253.uc.futuregrid.org       
       Start time: Wed Jul 25 15:44:33 CDT 2012
    Shutdown time: Wed Jul 25 17:44:33 CDT 2012
 Termination time: Wed Jul 25 17:46:33 CDT 2012</pre>
	<pre>
Waiting for updates.</pre>
	<pre>
&quot;vm-001&quot; reached target state: Running
</pre>
	<p>Once the image is running, you should be able to log into it with SSH. Note that you may need to wait another minute or so before you can actually get it, as the system needs time to boot and start services. Log in as the root user, and connect to the host printed out by the run command.&nbsp; Note that you <strong>must </strong>run this command in a location that has access to your private key.&nbsp; This means it must be in the <em>~/.ssh/</em> directory on the file system from where you launch this command, or you must have used the -A option to ssh when logging into hotel (as is shown above).</p>
	<pre>
$ ssh root@vm-253.uc.futuregrid.org
</pre>
	<h3>
		Create a New VM Image</h3>
	<p>Once you have a root shell on your VM, you may modify it as through it were a real machine.&nbsp; Here we encourage you to make some changes.&nbsp; Create a new user, install some additional software, or simply create a text file in the root user&#39;s account:</p>
	<pre>
# touch /root/CHANGE
# exit
</pre>
	<h3>
		Save the Changes to a New VM</h3>
	<p>Now that you have modified the VM ,you can save it back into your personal repository.&nbsp; To do this, you will use the --save and --newname options.&nbsp; You will also need the VM handle as it was displayed in the output from the run command.&nbsp; If you have forgotten what this was, you can use the --status option to find it:</p>
	<pre>
$ ./bin/cloud-client.sh --conf conf/hotel.conf --status
Querying for ALL instances.

[*] - Workspace #32292. 149.165.148.253 [ vm-253.uc.futuregrid.org ]
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; State: Running
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Duration: 120 minutes.
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Start time: Wed Jul 25 15:44:33 CDT 2012
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Shutdown time: Wed Jul 25 17:44:33 CDT 2012
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Termination time: Wed Jul 25 17:46:33 CDT 2012
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; *Handle: vm-001
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Image: hello-cloud
</pre>
	<p>Note the handle <em>vm-001</em>.&nbsp; To save the VM for future use, run the following command:</p>
	<pre>
$ ./bin/cloud-client.sh --conf conf/hotel.conf --save --newname myvm --handle vm-001

Saving workspace.
  - Workspace handle (EPR): &#39;/N/u/bresnaha/nimbus-cloud-client-021/history/vm-001/vw-epr.xml&#39;
  - New name: &#39;myvm&#39;

Waiting for updates.

The image has successfully been transferred to your repository directory.

Finalizing the deployment now (terminating the resource lease).
</pre>
	<p>Do another listing of that cloud and you will see your VM is now available for launch:</p>
	<pre>
$ ./bin/cloud-client.sh --conf conf/hotel.conf --list
[Image] &#39;myvm&#39;                           Read/write
        Modified: Jul 25 2012 @ 20:49   Size: 576716800 bytes (~550 MB)

----

[Image] &#39;hello-cloud&#39;                    Read only
        Modified: Apr 8 2011 @ 13:56   Size: 576716800 bytes (~550 MB)
</pre>
	<h3>
		Launch Your New VM</h3>
	You can now launch your new VM just like you did the hello-cloud VM above, simply changing the name from <em>hello-cloud</em> to <em>myvm&nbsp;</em>:<br />
	<pre>
$ ./bin/cloud-client.sh --conf conf/hotel.conf --run --name myvm --hours 2

Launching workspace.

Workspace Factory Service:
&nbsp;&nbsp;&nbsp; <a href="https://svc.uc.futuregrid.org:8443/wsrf/services/WorkspaceFactoryService" title="https://svc.uc.futuregrid.org:8443/wsrf/services/WorkspaceFactoryService">https://svc.uc.futuregrid.org:8443/wsrf/services/WorkspaceFactoryService</a>

Creating workspace &quot;vm-002&quot;... done.


&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; IP address: 149.165.148.151
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Hostname: vm-151.uc.futuregrid.org
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Start time: Wed Jul 25 15:58:31 CDT 2012
&nbsp;&nbsp;&nbsp; Shutdown time: Wed Jul 25 17:58:31 CDT 2012
&nbsp;Termination time: Wed Jul 25 18:08:31 CDT 2012

Waiting for updates.


&quot;vm-002&quot; reached target state: Running

Running: &#39;vm-002&#39;
</pre>
	<p>SSH into the machine and verify that your changes persisted.</p>
	<h3>
		Terminate the VM</h3>
	<p>Your VM will terminate after its allocated time expires.&nbsp; In our examples here, this is after 2 hours.&nbsp; However, you may wish to terminate it earlier.&nbsp; You can do so by again using the --handle option as you did in the <em>save a new VM step</em> and the --terminate option:</p>
	<pre>
$ ./bin/cloud-client.sh --conf conf/hotel.conf --terminate --handle vm-002

Terminating workspace.
  - Workspace handle (EPR): &#39;/N/u/bresnaha/nimbus-cloud-client-021/history/vm-002/vw-epr.xml&#39;

Destroying vm-002... destroyed.</pre>
	<p>&nbsp;</p>
	<h2>
		Virtual Clusters</h2>
	This is a basic walkthrough of how to run a sample virtual cluster.&nbsp; For more information on how they work, see <em>http://www.nimbusproject.org/docs/current/clouds/clusters2.html .</em><br />
	<pre>


</pre>
	<pre>
</pre>

<h3>
	Cluster Definition File</h3>
For this example, we will use a modification of the sample cluster file that is distributed with the cloud client.&nbsp; The file can be found at <em>https://portal.futuregrid.org/sites/default/files/tutorial-cluster.xml_.gz&nbsp;</em>. Copy the file to where your cloud-client program is located, and unzip it.&nbsp; Open the file and make note of the following:
<ol>
	<li>
		There are 2 workspace definitions.&nbsp;</li>
	<li>
		The head node has a quantity of 1 and a base image base-cluster-cc14.gz.&nbsp; It has the roles of providing a nfs server.&nbsp;</li>
	<li>
		The compute-nodes have the same image, but a quantity of 2.&nbsp; This means there will be 1 head node and 2 compute-nodes in the virtual cluster.&nbsp; This has the role of being a nfs client.</li>
</ol>
<h3>
	Start the Cluster</h3>
<pre>
$ ./bin/cloud-client.sh --conf conf/sierra.conf --run --hours 2 --cluster &lt;path to your cluster document&gt;
SSH known_hosts contained tilde:
&nbsp; - &#39;~/.ssh/known_hosts&#39; --&gt; &#39;/N/u/bresnaha/.ssh/known_hosts&#39;

Requesting cluster.
&nbsp; - head-node: image &#39;base-cluster-cc14.gz&#39;, 1 instance
&nbsp; - compute-nodes: image &#39;base-cluster-cc14.gz&#39;, 2 instances

Context Broker:
&nbsp;&nbsp;&nbsp; <a href="https://s83r.idp.sdsc.futuregrid.org:8443/wsrf/services/NimbusContextBroker" title="https://s83r.idp.sdsc.futuregrid.org:8443/wsrf/services/NimbusContextBroker">https://s83r.idp.sdsc.futuregrid.org:8443/wsrf/services/NimbusContextBroker</a>

Created new context with broker.

Workspace Factory Service:
&nbsp;&nbsp;&nbsp; <a href="https://s83r.idp.sdsc.futuregrid.org:8443/wsrf/services/WorkspaceFactoryService" title="https://s83r.idp.sdsc.futuregrid.org:8443/wsrf/services/WorkspaceFactoryService">https://s83r.idp.sdsc.futuregrid.org:8443/wsrf/services/WorkspaceFactory...</a>

Creating workspace &quot;head-node&quot;... done.
&nbsp; - 198.202.120.134 [ vm-40.sdsc.futuregrid.org ]

Creating group &quot;compute-nodes&quot;... done.
&nbsp; - 198.202.120.135 [ vm-41.sdsc.futuregrid.org ]
&nbsp; - 198.202.120.136 [ vm-42.sdsc.futuregrid.org ]

Launching cluster-004... done.

Waiting for launch updates.
&nbsp; - cluster-004: all members are Running
&nbsp; - wrote reports to &#39;/N/u/bresnaha/tutorial/nimbus-cloud-client-021/history/cluster-004/reports-vm&#39;

Waiting for context broker updates.
&nbsp; - cluster-004: contextualized
&nbsp; - wrote ctx summary to &#39;/N/u/bresnaha/tutorial/nimbus-cloud-client-021/history/cluster-004/reports-ctx/CTX-OK.txt&#39;
&nbsp; - wrote reports to &#39;/N/u/bresnaha/tutorial/nimbus-cloud-client-021/history/cluster-004/reports-ctx&#39;

SSH trusts new key for vm-40.sdsc.futuregrid.org&nbsp; <a href="http://en.wikipedia.org/wiki/ head-node "> head-node </a>

SSH trusts new key for vm-41.sdsc.futuregrid.org&nbsp; <a href="http://en.wikipedia.org/wiki/ compute-nodes #0 "> compute-nodes #0 </a>

SSH trusts new key for vm-42.sdsc.futuregrid.org&nbsp; <a href="http://en.wikipedia.org/wiki/ compute-nodes #1 "> compute-nodes #1 </a>
</pre>
This command takes a bit of time.&nbsp; What is happening is cloud-client is instructing Nimbus to start up three VMs on the user&#39;s behalf.&nbsp; Information is put into the context broker.&nbsp; When each VM boots, the context agent is run.&nbsp; The context agent checks in with the context broker and asks for information reflecting the <em>requires</em> section in the cluster document; similarly it registers its <em>provides</em> information with the context broker for other VM context agents to query.&nbsp; The NFS clients use this mechanism to provide the nfs server with their IP addresses.&nbsp; The NFS server then gets this information out of the context broker and uses it to authorize those IP addresses to remotely mount its disks.&nbsp;<br />
<br />
When it is complete, your virtual cluster will be ready to go.<br />
<h3>
	Check Out the Virtual Cluster</h3>
Now ssh into one of the worker nodes and check out the file system.<br />
<pre>
$ df -h
df -h
Filesystem            Size  Used Avail Use% Mounted on
/dev/sda1             2.9G  1.2G  1.7G  42% /
udev                  1.1G  144K  1.1G   1% /dev
shm                   1.1G     0  1.1G   0% /dev/shm
198.202.120.134:/home
                      2.9G  1.2G  1.7G  42% /home
198.202.120.134:/etc/grid-security/certificates
                      2.9G  1.2G  1.7G  42% /etc/grid-security/certificates</pre>
Notice the NFS mounted home directory. &nbsp;Touch a file in that directory.<br />
<pre>
$ echo &quot;Hello FutureGrid&quot; &gt; /home/test_file
</pre>
Now ssh into the other worker node and verify that the test file is visible to this node as well.<br />
<pre>
$cat /home/test_file
Hello FutureGrid
</pre>
<br />
<br />
<br /><table id="attachments" class="sticky-enabled">
 <thead><tr><th>Attachment</th><th>Size</th> </tr></thead>
<tbody>
 <tr class="odd"><td><a href="https://portal.futuregrid.org/sites/default/files/tutorial-cluster.xml_.gz">tutorial-cluster.xml_.gz</a></td><td>342 bytes</td> </tr>
</tbody>
</table>
  <div id="node-1301" class="section-4">
  <h1 class="book-heading">Cloud Quick Start : Launch a VM with 1 command</h1>
  <p>This page explains how to very simply run a virtual machine (VM) on FutureGrid Nimbus.&nbsp; The VM launched will mount your home files system on hotel so data can be exchanged with the VM easily.&nbsp; Users new to cloud computing, particularly those coming from Grid computing, and those who are interested in getting a quick hands-on introduction to FutureGrid clouds, should find this useful.</p>
<h1>
	Launch A VM via Nimbus</h1>
Once you have a FutureGrid Nimbus account and ssh access to hotel.futuregrid.org, you can easily begin using the cloud.&nbsp; All you need to do is ssh into hotel with ssh forwarding enabled, and type a single command:<br />
<br />
<pre>
$ ssh -A hotel.futuregrid.org
$ /soft/nimbus/tools/bin/launch-vm.sh
Launching your VM (this may take a minute)...
Success!
Access your VM with: ssh <a href="mailto:root@vm-156.uc.futuregrid.org">root@vm-156.uc.futuregrid.org</a>
Terminate your VM with: /soft/nimbus/tools/bin/cloudinitd.sh terminate 9ec20044
</pre>
Notice the output from the above command.&nbsp; It tells you how to access the VM, and how to clean it up when you are finished with it.&nbsp; First let&#39;s access the VM and check out its file system.&nbsp; The VM should have remotely mounted your home file system on FutureGrid.&nbsp; This will allow you to easily copy data in and out of your VM.<br />
<pre>
$ ssh <a href="mailto:root@vm-156.uc.futuregrid.org">root@vm-156.uc.futuregrid.org</a>
$ vm-156:~# df -h
Filesystem&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Size&nbsp; Used Avail Use% Mounted on
tmpfs&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1.1G&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp; 1.1G&nbsp;&nbsp; 0% /lib/init/rw
udev&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10M&nbsp; 1.1M&nbsp; 9.0M&nbsp; 11% /dev
tmpfs&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1.1G&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp; 1.1G&nbsp;&nbsp; 0% /dev/shm
rootfs&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1.9G&nbsp; 731M&nbsp; 1.1G&nbsp; 42% /
sshfs#bresnaha@hotel.futuregrid.org:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1000G&nbsp;&nbsp;&nbsp;&nbsp; 0 1000G&nbsp;&nbsp; 0% /mnt/hotel.futuregrid.org

$ ls /mnt/hotel.futuregrid.org
..... &lt;a listing of your FutureGrid home directory&gt;</pre>
<h1>
	Options</h1>
<h2>
	Using Other Nimbus Clouds on FutureGrid</h2>
By default, the VMs are launched on hotel&#39;s Nimbus cloud.&nbsp; However, you can use this script to launch a VM on any cloud to which you have access, including all of FutureGrid&#39;s Nimbus clouds, FutureGrid&#39;s Eucalytpus clouds, and FutureGrid&#39;s OpenStack clouds.&nbsp; To run on a different FutureGrid Nimbus cloud, set the env&nbsp;<em>CLOUDINITD_IAAS_URL</em>&nbsp;to one of the following:<br />
<ul>
	<li>
		Hotel: <a href="https://svc.uc.futuregrid.org:8444" title="https://svc.uc.futuregrid.org:8444">https://svc.uc.futuregrid.org:8444</a></li>
	<li>
		Sierra: <a href="https://s83r.idp.sdsc.futuregrid.org:8444" title="https://s83r.idp.sdsc.futuregrid.org:8444">https://s83r.idp.sdsc.futuregrid.org:8444</a></li>
	<li>
		Foxtrot: <a href="https://f1r.idp.ufl.futuregrid.org:9444" title="https://f1r.idp.ufl.futuregrid.org:9444">https://f1r.idp.ufl.futuregrid.org:9444</a> (coming soon)</li>
	<li>
		Alamo: <a href="https://master1.futuregrid.tacc.utexas.edu:8444" title="https://master1.futuregrid.tacc.utexas.edu:8444">https://master1.futuregrid.tacc.utexas.edu:8444</a> (coming soon)</li>
</ul>
<h2>
	Launching Multiple VMs</h2>
To launch many VMs at once, set the env <em>CLOUDINITD_SSHFS_REPLICA_COUNT</em> to the Number of VMs that you would like launched<br />
<h2>
	Using with Eucalyptus</h2>
<p>In order to use the tool with Eucalyptus, the following envs must be set:</p>
<ul>
	<li>
		export CLOUDINITD_IAAS_URL=&#39;http://149.165.146.135:8773/services/Eucalyptus&#39;</li>
	<li>
		export CLOUDINITD_IAAS_ACCESS_KEY=&lt;your access key&gt;</li>
	<li>
		export CLOUDINITD_IAAS_SECRET_KEY=&lt;your access secret&gt;</li>
	<li>
		export CLOUDINITD_IAAS_IMAGE=&#39;emi-5F4F1B49&#39;<br />
		&nbsp;</li>
</ul>
You may have trouble registering your keys.&nbsp; This is due to Eucalyptus not yet supporting the latest version of the EC2 API.&nbsp; To circumvent this, create a key pair named &#39;futuregrid&#39;, and set the env <em>CLOUDINITD_IAAS_SSHKEYNAME </em>to &#39;futuregrid&#39;.&nbsp; Then, set the env <em>CLOUDINITD_IAAS_SSHKEY</em> to point to the private key associated with that key name.<br />
<h1>
	What Happens</h1>
This script uses the program cloudinit.d (<a href="http://www.nimbusproject.org/doc/cloudinitd/latest/" name="cloudinit.d">http://www.nimbusproject.org/doc/cloudinitd/latest/)</a>.&nbsp; This is a Nimbus Platform multi-cloud tool for running cloud applications.&nbsp; In this case, it runs a very simple 1 VM application.&nbsp; It can launch any debian-based VM and install sshfs on it.&nbsp; Then it runs sshfs inside of the VM to remotely mount your FutureGrid home directory.  </div>
<div id="node-158" class="section-4">
  <h1 class="book-heading">FutureGrid Tutorial NM2 - Nimbus One-Click Cluster Guide </h1>
  <p>&nbsp;</p>
<p><strong>Summary:</strong></p>
<p>This tutorial demonstrates using the Nimbus cloud client to create auto-configured clusters of virtual machines on Nimbus.</p>
<p>&nbsp;</p>
<p><strong>Prerequisites:</strong></p>
<p>Java 1.5+ and a working Nimbus cloud client.</p>
<p>&nbsp;</p>
<p><strong>Hands-On Tutorial</strong>:</p>
<p>This tutorial is maintained at the Nimbus website. See&nbsp;<a href="http://www.nimbusproject.org/docs/current/clouds/clusters.html" target="_blank">One Click Clusters</a>.</p>
<p>&nbsp;</p>
<p><strong>Reference Material:</strong></p>
<p><a href="http://www.nimbusproject.org/docs/">Nimbus Documentation</a></p>
<p>&nbsp;</p>
<p><strong>Authors:</strong></p>
<p>Tim Freeman, Kate Keahey, David LaBissoniere, John Bresnahan</p>
<p>University of Chicago</p>  </div>
</div>
<div id="node-1893" class="section-3">
  <h1 class="book-heading">Using Eucalyptus on FutureGrid</h1>
  <p style="text-align: right;">Presentation about this document: <a href="http://futuregrid.svn.sourceforge.net/viewvc/futuregrid/presentations/software/fg-tutorial-eucalyptus.ppt" title="http://futuregrid.svn.sourceforge.net/viewvc/futuregrid/presentations/software/fg-tutorial-eucalyptus.ppt">fg-tutorial-eucalyptus.ppt</a></p>
<h2>
	<span style="font-size: medium;"><strong>Summary</strong></span></h2>
<p style="padding-left: 30px;"><span style="font-size: small;">Eucalyptus is a software platform that implements <a href="http://en.wikipedia.org/wiki/Cloud_computing#Infrastructure_as_a_Service_.28IaaS.29">IaaS-style</a> cloud computing. Eucalyptus provides an Amazon Web Services (<a href="http://aws.amazon.com/">AWS</a>) complaint EC2-based web service interface for interacting with the Cloud service. Additionally, Eucalyptus provides services such as the AWS Complaint Walrus and a user interface for managing users and images. The aim of this tutorial is to give users an introduction of how to interact with Eucalyptus using the Eucalyptus EC2 Interface (<a href="https://launchpad.net/euca2ools">Euca2ools</a>). More detailed documentation can be found in the <a href="http://www.eucalyptus.com/eucalyptus-cloud/iaas">Eucalyptus Website</a>. A detailed user guide is also available <a href="http://www.eucalyptus.com/sites/all/modules/pubdlcnt/pubdlcnt.php?file=/sites/all/files/docs/latest/ug.pdf&amp;nid=296">here</a></span>.</p>
<h2>
	<span style="font-size: medium;"><strong>Requirements</strong></span></h2>
<p style="padding-left: 30px;"><span style="font-size: small;">Users get access to the Eucalyptus features using the Eucalyptus EC2 Interface, which is only available for GNU/Linux platforms. Therefore, users will require a machine with a GNU/Linux installed on it.</span><br />
	&nbsp;</p>
<h5 style="padding-left: 30px;">
	Eucalyptus 3</h5>
<p style="padding-left: 30px;"><span style="font-size: small;">As of May 15, 2012, FutureGrid is using <a href="http://www.eucalyptus.com/eucalyptus-cloud/iaas/features">Eucalyptus version 3</a> which requires <a href="http://www.eucalyptus.com/download/euca2ools">euca2ools 2.0.2</a> and python &gt; 2.4 (available by modules in india and sierra). Make sure to load <strong>&quot;module load euca2ools/2.0.2&quot;</strong> before using Eucalyptus. <a href="http://www.eucalyptus.com/download/euca2ools">euca2ools 2.0.2</a> is part of Eucalyptus Enterprise package. However, the source is available <a href="http://bazaar.launchpad.net/~eucalyptus-maintainers/euca2ools/euca2ools-main/revision/">here</a>. </span><br />
	&nbsp;</p>
<h2>
	<span style="font-size: medium;"><strong>Account Creation </strong></span></h2>
<p>
Eucalyptus 3 is now integrated with our LDAP. Each account is created by default for all FutureGrid users with valid portal account and project affiliation. There is no need to apply for accounts.</p>
<p><span style="font-size: medium;"><strong>Obtaining Credentials </strong></span></p>
<ul>
<li style="padding-left: 30px;">
		<span style="font-size: small;">Credentials files are created by default and placed in a user&#39;s home directory under <i>.futuregrid</i> folder in india and sierra. To leverage LDAP group, we created separate credentials for each FutureGrid project. For instance, if you are part of FutureGrid project number 100 and 200, there will be two folders (<strong>fg100</strong> and <strong>fg200</strong>) in <em>.futuregrid/eucalyptus</em>. Each project folder contains corresponding credentials zip files. So fg100:username and fg200:username in Eucalyptus, however, two different identities are tied to the same LDAP user. A user can also download the credential file from the Eucalyptus dashboard in <a href="https://eucalyptus.india.futuregrid.org:8443">india</a> and <a href="https://eucalyptus.sierra.futuregrid.org:8443">sierra</a>. To log in to the dashboard, use your FutureGrid project number (in the format of <em>fgnumber) </em>as &quot;Account&quot; and your portal user name as &quot;User&quot;. Then use the FutureGrid portal password. (If you download the file from the dashboard, by default the system will name the file </span><em><span style="font-size: small;">euca2-{username}-x509</span></em><span style="font-size: small;">). We are using a slightly different naming scheme. The credential file will be found under the menu tab <em>username@fgnumber&nbsp;</em>.)</span></li>
</ul>
<div class="rteindent2" style="padding-left: 30px;">
	<span style="font-size: small;"><span style="background-color:#ffff00;">NOTICE: Due to an incompatibility problem introduced during the upgrade to the Eucalyptus 3.1 system, </span></span><span style="background-color:#ffff00;">accessing the dashboard of Eucalyptus on india is tempararily unavailable. However, your credential will be in place so you can execute the later steps of this manual.<br />
	On Sierra, the access is still available so you could download the credential zip file. Make sure to put it to Sierra first and then set up the environment as the following steps.<br />
	Please be reminded that the credential for one cluster should/could not be used in another.</span><br />
	&nbsp;</div>
<div class="rtecenter" style="padding-left: 30px;">
	<img alt="" height="240" src="/sites/default/files/resize/euca_fg_login-290x240.png" style="width: 290px; height: 240px;" width="290" /></div>
<ul>
<li>
		<span style="font-size: small;">Find your credential zip file in cd $HOME/.futuregrid/eucalyptus/fgprojectnumber :</span></p>
<blockquote><pre>
<span style="font-size: small;">$ unzip euca3-{username}-{cluster}-fgprojectnumber.zip&nbsp; 
</span></pre></blockquote>
</li>
<li>
		<span style="font-size: small;">Apply the eucarc file: </span></p>
<pre>
<span style="font-size: small;">source eucarc</span></pre></li>
<li>
		<span style="font-size: small;">If you want to add Eucalyptus environment variables to your .bashrc then, do this: (if you are planning to switch between different cloud platforms, it is probably better to use source.&nbsp;</span></p>
<blockquote><pre>
<span style="font-size: small;">$ cat eucarc &gt;&gt; $HOME/.bashrc</span></pre><pre>
<span style="font-size: small;">$ source .bashrc</span></pre></blockquote>
</li>
</ul>
<p>
	<strong>Install Euca2tools</strong></p>
<blockquote><p>
	<span style="font-size: small;">Older versions of euca2ools are not compatible with Eucalyptus 3. <a href="http://www.eucalyptus.com/download/euca2ools">euca2ools 2.0.2</a> is part of the Enterprise project and so is not available for all users. However, the source is available <a href="http://bazaar.launchpad.net/~eucalyptus-maintainers/euca2ools/euca2ools-main/files">here</a>.</span></p></blockquote>
<h2>
	<span style="font-size: medium;"><strong>Resources Overview</strong></span></h2>
<p style="padding-left: 30px;"><span style="font-size: small;">Eucalyptus is available to FutureGrid Users on the India and Sierra clusters. </span><span style="font-size: small;">As we will see later, when we instantiate a Virtual Machine (VM), it is needed to select the type of VM Image that we are going to use. In this sense, the information of the VM Image types available in each cluster is summarized below:</span></p>
<h4 style="padding-left: 30px;">
	<span style="font-size: small;">INDIA:&nbsp;</span></h4>
<pre style="padding-left: 30px;">
AVAILABILITYZONE&nbsp;&nbsp; &nbsp;euca3india&nbsp;&nbsp; &nbsp;149.165.146.135 arn:euca:eucalyptus:euca3india:cluster:euca3indiaCC/
AVAILABILITYZONE&nbsp;&nbsp; &nbsp;|- vm types&nbsp;&nbsp; &nbsp;free / max&nbsp;&nbsp; cpu&nbsp;&nbsp; ram&nbsp; disk
AVAILABILITYZONE&nbsp;&nbsp; &nbsp;|- m1.small&nbsp;&nbsp; &nbsp;0189 / 0192&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp; 512&nbsp;&nbsp;&nbsp;&nbsp; 5
AVAILABILITYZONE&nbsp;&nbsp; &nbsp;|- c1.medium&nbsp;&nbsp; &nbsp;0170 / 0171&nbsp;&nbsp; 1&nbsp;&nbsp; 2048&nbsp;&nbsp;&nbsp;&nbsp; 7
AVAILABILITYZONE&nbsp;&nbsp; &nbsp;|- m1.large&nbsp;&nbsp; &nbsp;0091 / 0094&nbsp;&nbsp; 2&nbsp;&nbsp; 5120&nbsp;&nbsp;&nbsp; 10
AVAILABILITYZONE&nbsp;&nbsp; &nbsp;|- m1.xlarge&nbsp;&nbsp; &nbsp;0073 / 0075&nbsp;&nbsp; 2&nbsp;&nbsp; 6000&nbsp;&nbsp;&nbsp; 15
AVAILABILITYZONE&nbsp;&nbsp; &nbsp;|- c1.xlarge&nbsp;&nbsp; &nbsp;0044 / 0047&nbsp;&nbsp; 4&nbsp;&nbsp; 9216&nbsp;&nbsp;&nbsp; 20

</pre><h4 style="padding-left: 30px;">
	<span style="font-size: small;">SIERRA:&nbsp;</span></h4>
<pre style="padding-left: 30px;">
AVAILABILITYZONE&nbsp;&nbsp; &nbsp;euca3sierra&nbsp;&nbsp; &nbsp;198.202.120.90 arn:euca:eucalyptus:euca3sierra:cluster:euca3sierraCC/
AVAILABILITYZONE&nbsp;&nbsp; &nbsp;|- vm types&nbsp;&nbsp; &nbsp;free / max&nbsp;&nbsp; cpu&nbsp;&nbsp; ram&nbsp; disk
AVAILABILITYZONE&nbsp;&nbsp; &nbsp;|- m1.small&nbsp;&nbsp; &nbsp;0051 / 0056&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp; 256&nbsp;&nbsp;&nbsp;&nbsp; 4
AVAILABILITYZONE&nbsp;&nbsp; &nbsp;|- c1.medium&nbsp;&nbsp; &nbsp;0037 / 0042&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp; 512&nbsp;&nbsp;&nbsp;&nbsp; 5
AVAILABILITYZONE&nbsp;&nbsp; &nbsp;|- m1.large&nbsp;&nbsp; &nbsp;0012 / 0014&nbsp;&nbsp; 2&nbsp;&nbsp; 1024&nbsp;&nbsp;&nbsp; 10
AVAILABILITYZONE&nbsp;&nbsp; &nbsp;|- m1.xlarge&nbsp;&nbsp; &nbsp;0012 / 0014&nbsp;&nbsp; 2&nbsp;&nbsp; 1024&nbsp;&nbsp;&nbsp; 12
AVAILABILITYZONE&nbsp;&nbsp; &nbsp;|- c1.xlarge&nbsp;&nbsp; &nbsp;0009 / 0014&nbsp;&nbsp; 4&nbsp;&nbsp; 2048&nbsp;&nbsp;&nbsp; 15

</pre><p></p>
<h2>
	<span style="font-size: medium;"><strong>Testing Your Setup</strong></span></h2>
<p style="padding-left: 30px;"><span style="font-size: small;">Use euca-describe-availability-zones to test the setup:</span></p>
<blockquote><pre>
ssh sierra.futuregrid.org
Last login: Fri May 11 06:39:02 2012 from 129-79-49-230.dhcp-bl.indiana.edu

Welcome to Sierra.FutureGrid.Org

torque/2.4.8 version 2.4.8 loaded
moab version 5.4.0 loaded 

$ module load euca2ools/2.0.2
euca2ools version 2.0.2 loaded
$ euca-version
euca2ools 2.0.2
$ source .futuregrid/eucalyptus/fgprojectnumber/eucarc
$ euca-describe-availability-zones
AVAILABILITYZONE&nbsp;&nbsp; &nbsp;euca3sierra&nbsp;&nbsp; &nbsp;198.202.120.90 arn:euca:eucalyptus:euca3sierra:cluster:euca3sierraCC/

</pre></blockquote>
<p><span style="font-size: medium;"><strong>Available Images</strong></span></p>
<p style="padding-left: 30px;"><span style="font-size: small;">List the existing images using euca-describe-images:</span></p>
<blockquote><pre>
<span style="font-size: small;">$ euca-describe-images </span>

IMAGE&nbsp;&nbsp; &nbsp;emi-8E1C3B69&nbsp;&nbsp; &nbsp;euca-centos-2012/euca-centos-2012.1.14-x86_64.img.manifest.xml&nbsp;&nbsp; &nbsp;available&nbsp;&nbsp; &nbsp;public&nbsp;&nbsp; &nbsp;
IMAGE&nbsp;&nbsp; &nbsp;emi-D21D3F6C&nbsp;&nbsp; &nbsp;euca3/ubuntu-natty.img.manifest.xml&nbsp;&nbsp; &nbsp;available&nbsp;&nbsp; &nbsp;public&nbsp;&nbsp; &nbsp;
IMAGE&nbsp;&nbsp; &nbsp;emi-1A413C95&nbsp;&nbsp; &nbsp;centos/centos.5-3.x86-64.img.manifest.xml&nbsp;&nbsp; &nbsp;available&nbsp;&nbsp; &nbsp;public&nbsp;&nbsp; &nbsp;
IMAGE&nbsp;&nbsp; &nbsp;eki-9F293A6A&nbsp;&nbsp; &nbsp;kernel/vmlinuz-2.6.27.21-0.1-xen.manifest.xml&nbsp;&nbsp; &nbsp;available&nbsp;&nbsp; &nbsp;public&nbsp;&nbsp; &nbsp;
IMAGE&nbsp;&nbsp; &nbsp;emi-0FA13B83&nbsp;&nbsp; &nbsp;inca/centos5inca3128800784.img.manifest.xml&nbsp;&nbsp; &nbsp;available&nbsp;&nbsp; &nbsp;public&nbsp;&nbsp; &nbsp;
IMAGE&nbsp;&nbsp; &nbsp;emi-A9D33917&nbsp;&nbsp; &nbsp;ubuntu/ubuntu.9-04.x86-64.img.manifest.xml&nbsp;&nbsp; &nbsp;available&nbsp;&nbsp; &nbsp;public&nbsp;&nbsp; &nbsp;
IMAGE&nbsp;&nbsp; &nbsp;eri-D1513DBA&nbsp;&nbsp; &nbsp;ramdisk/initrd-2.6.27.21-0.1-xen.manifest.xml&nbsp;&nbsp; &nbsp;available&nbsp;&nbsp; &nbsp;public&nbsp;&nbsp; &nbsp;
IMAGE&nbsp;&nbsp; &nbsp;eki-919E3C9A&nbsp;&nbsp; &nbsp;kernel/vmlinuz-2.6.27.21-0.1-xen.manifest.xml&nbsp;&nbsp; &nbsp;available&nbsp;&nbsp; &nbsp;public&nbsp;&nbsp; &nbsp;
IMAGE&nbsp;&nbsp; &nbsp;eri-55FE3F76&nbsp;&nbsp; &nbsp;ramdisk/initrd.img-2.6.32-5-amd64.manifest.xml&nbsp;&nbsp; &nbsp;available&nbsp;&nbsp; &nbsp;public&nbsp;&nbsp; &nbsp;
IMAGE&nbsp;&nbsp; &nbsp;eri-9DCC3A6B&nbsp;&nbsp; &nbsp;ramdisk/initrd-2.6.27.21-0.1-xen.manifest.xml&nbsp;&nbsp; &nbsp;available&nbsp;&nbsp; &nbsp;public&nbsp;&nbsp; &nbsp;



</pre></blockquote>
<h2>
	<span style="font-size: medium;"><strong>Image Deployment </strong></span></h2>
<ul>
<li>
		<span style="font-size: small;">Before deploying a VM, you need to create at least one key pair. This key pair will be injected into the VM, allowing you to SSH into the instance. This is done using the euca-add-keypair command:</span></li>
</ul>
<blockquote><pre>
<span style="font-size: small;">$ euca-add-keypair userkey   &gt;&nbsp;userkey.pem</span></pre></blockquote>
<ul>
<li>
		<span style="font-size: small;">Fix the permissions on the generated private key:</span></li>
</ul>
<blockquote><pre>
<span style="font-size: small;">$ chmod 0600 userkey.pem </span></pre></blockquote>
<ul>
<li>
		<span style="font-size: small;">Now you can start a VM using one of the pre-existing images. You need the emi-id of the image you want to start. This was listed in the output of euca-describe-images command that you saw earlier. Use the euca-run-instances command to start the VM:</span></li>
</ul>
<blockquote><pre>
<span style="font-size: small;">$ euca-run-instances -k userkey -n 1   emi-0B951139 -t c1.medium

RESERVATION&nbsp;&nbsp;&nbsp;&nbsp; r-4E730969&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; archit&nbsp;   archit-default
INSTANCE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; i-4FC40839&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; emi-0B951139&nbsp;&nbsp;&nbsp; 0.0.0.0 0.0.0.0 pending userkey   2010-07-20T20:35:47.015Z   eki-78EF12D2&nbsp;&nbsp;&nbsp;eri-5BB61255</span></pre></blockquote>
<ul>
<li>
		<span style="font-size: small;">The euca-describe-instances command can be used to check the status of the request. The following image was assigned an ip address and is starting up, as demonstrated by the &quot;pending&quot; status:</span></li>
</ul>
<blockquote><pre>
<span style="font-size: small;">$ euca-describe-instances 

RESERVATION&nbsp;&nbsp;&nbsp;&nbsp; r-4E730969&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; archit&nbsp;   default
INSTANCE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; i-4FC40839&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; emi-0B951139&nbsp;&nbsp;&nbsp; 149.165.146.153 10.0.2.194&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; pending&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; userkey&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; m1.small&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2010-07-20T20:35:47.015Z&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; india&nbsp;&nbsp; eki-78EF12D2&nbsp;&nbsp;&nbsp; eri-5BB61255</span></pre></blockquote>
<ul>
<li>
		<span style="font-size: small;">Once started, the status will change to &quot;running&quot;:</span></li>
</ul>
<blockquote><pre>
<span style="font-size: small;">$ euca-describe-instances

RESERVATION&nbsp;&nbsp;&nbsp;&nbsp; r-4E730969&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; archit&nbsp;   default
INSTANCE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; i-4FC40839&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; emi-0B951139&nbsp;&nbsp;&nbsp; 149.165.146.153 10.0.2.194&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; running &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;userkey&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; m1.small&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2010-07-20T20:35:47.015Z&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; india&nbsp;&nbsp; eki-78EF12D2&nbsp;&nbsp;&nbsp; eri-5BB61255</span></pre></blockquote>
<ul>
<li>
<p><span style="font-size: small;">If you need to delete a deployed VM, you can use the euca-terminate-instances command:</span></p>
<blockquote><pre>
<span style="font-size: small;">$ euca-terminate-instances i-4FC40839
</span></pre></blockquote>
</li>
</ul>
<h2>
	<span style="font-size: medium;"><strong>Logging Into the VM </strong></span></h2>
<ul>
<li>
		<span style="font-size: small;">Create rules to allow access to the VM over ssh and to allow ping:</span></li>
</ul>
<blockquote><p>
	<span style="font-size: small;">$ euca-authorize -P tcp -p 22 -s 0.0.0.0/0&nbsp;&nbsp; default</span><br />
	<span style="font-size: small;">$ euca-authorize -P icmp -t -1:-1 -s 0.0.0.0/0 default</span></p></blockquote>
<ul>
<li>
		<span style="font-size: small;">The ssh private key that was generated earlier can now be used to log in to the VM:</span></li>
</ul>
<blockquote><pre>
<span style="font-size: small;">$ssh -i userkey.pem root@149.165.146.153

-bash-3.2# uname -a

&nbsp;Linux localhost 2.6.27.21-0.1-xen #1 SMP   2009-03-31 14:50:44 +0200 x86_64 x86_64 x86_64 GNU/Linux</span></pre></blockquote>
<h2>
	<span style="font-size: medium;"><strong>VM Network Info </strong></span></h2>
<ul>
<li>
		<span style="font-size: small;">The VM itself is visible from outside using the VM public IP. The internal network will show the VM private IP address:</span></li>
</ul>
<blockquote><pre>
<span style="font-size: small;">-bash-3.2# /sbin/ifconfig

eth0&nbsp;&nbsp;&nbsp; Link encap:Ethernet&nbsp; HWaddr D0:0D:33:14:06:40&nbsp; 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; inet addr:10.0.2.194&nbsp; Bcast:10.0.2.255&nbsp; Mask:255.255.255.192</span></pre></blockquote>
<h2>
	<span style="font-size: medium;"><strong>Image Management </strong></span></h2>
<ul>
<li>
		<span style="font-size: small;">We will use the example ubuntu 10 image to test uploading images. Download the gzipped tar ball:</span></li>
</ul>
<blockquote><pre>
<span style="font-size: small;">$ wget&nbsp;</span>http://cloud-images.ubuntu.com/releases/precise/release/ubuntu-12.04-server-cloudimg-amd64.tar.gz</pre></blockquote>
<ul>
<li>
		<span style="font-size: small;">Uncompress and untar the archive:</span></li>
</ul>
<blockquote><pre>
<span style="font-size: small;">$ tar zxf </span>ubuntu-12.04-server-cloudimg-amd64.tar.gz</pre></blockquote>
<ul>
<li>
		<span style="font-size: small;">Bundle the image with a kernel and a ramdisk using the euca-bundle-image command. In this example, we will use the xen kernel already registered. euca-describe-images returns the kernel and ramdisk IDs that we need:</span></li>
</ul>
<blockquote><pre>
<span style="font-size: small;">$ euca-bundle-image -i   </span>precise-server-cloudimg-amd64.img<span style="font-size: small;"> --kernel eki-78EF12D2 --ramdisk   eri-5BB61255

Checking image
Tarring image
Encrypting image
Splitting image...
Part:   precise-server-cloudimg-amd64.img.part.0
Part:   precise-server-cloudimg-amd64.img.part.1
Part:   precise-server-cloudimg-amd64.img.part.2
Part:   precise-server-cloudimg-amd64.img.part.3
Part:   precise-server-cloudimg-amd64.img.part.4
Part:   precise-server-cloudimg-amd64.img.part.5
Part:   precise-server-cloudimg-amd64.img.part.6
Part:   precise-server-cloudimg-amd64.img.part.7
Part:   precise-server-cloudimg-amd64.img.part.8
Part:   precise-server-cloudimg-amd64.img.part.9
Part:   precise-server-cloudimg-amd64.img.part.10
Part:   precise-server-cloudimg-amd64.img.part.11
Part:   precise-server-cloudimg-amd64.img.part.12
Part:   precise-server-cloudimg-amd64.img.part.13
Part:   precise-server-cloudimg-amd64.img.part.14
Part:   precise-server-cloudimg-amd64.img.part.15
Part:   precise-server-cloudimg-amd64.img.part.16
Generating manifest   /tmp/precise-server-cloudimg-amd64.img.manifest.xml</span></pre></blockquote>
<ul>
<li>
		<span style="font-size: small;">Use the generated manifest file to upload the image to Walrus:</span></li>
</ul>
<blockquote><pre>
<span style="font-size: small;">$ euca-upload-bundle -b ubuntu-image-bucket   -m /tmp/precise-server-cloudimg-amd64.img.manifest.xml

Checking bucket:   ubuntu-image-bucket
Creating bucket:   ubuntu-image-bucket
Uploading manifest   file
Uploading part:   precise-server-cloudimg-amd64.img.part.0
Uploading part:   precise-server-cloudimg-amd64.img.part.1
Uploading part:   precise-server-cloudimg-amd64.img.part.2
Uploading part:   precise-server-cloudimg-amd64.img.part.3
Uploading part:   precise-server-cloudimg-amd64.img.part.4
Uploading part:   precise-server-cloudimg-amd64.img.part.5
Uploading part:   precise-server-cloudimg-amd64.img.part.6
Uploading part:   precise-server-cloudimg-amd64.img.part.7
Uploading part:   precise-server-cloudimg-amd64.img.part.8
Uploading part:   precise-server-cloudimg-amd64.img.part.9
Uploading part:   precise-server-cloudimg-amd64.img.part.10
Uploading part:   precise-server-cloudimg-amd64.img.part.11
Uploading part:   precise-server-cloudimg-amd64.img.part.12
Uploading part:   precise-server-cloudimg-amd64.img.part.13
Uploading part:   precise-server-cloudimg-amd64.img.part.14
Uploading part:   precise-server-cloudimg-amd64.img.part.15
Uploading part:   precise-server-cloudimg-amd64.img.part.16
Uploaded image as   ubuntu-image-bucket/precise-server-cloudimg-amd64.img.manifest.xml</span></pre></blockquote>
<ul>
<li>
		<span style="font-size: small;">Register the uploaded image:</span></li>
</ul>
<blockquote><pre>
<span style="font-size: small;">$ euca-register   ubuntu-image-bucket/precise-server-cloudimg-amd64.img.manifest.xml

IMAGE&nbsp;&nbsp; emi-FFC3154F</span></pre></blockquote>
<ul>
<li>
		<span style="font-size: small;">The returned image ID can now be used to start instances with euca-run-instances as described earlier. euca-describe-images also shows the new image now:</span></li>
</ul>
<blockquote><pre>
<span style="font-size: small;">$ euca-describe-images 

IMAGE emi-FFC3154F   ubuntu-image-bucket/precise-server-cloudimg-amd64.img.manifest.xml archit available public   x86_64 machine eri-5BB61255 eki-78EF12D2 
IMAGE emi-0B951139   centos53/centos.5-3.x86-64.img.manifest.xml           admin  available public   x86_64 machine 
  ...</span></pre></blockquote>
<ul>
<li>
		<span style="font-size:14px;">You can also delete your images:</span></li>
</ul>
<pre class="rteindent1">
$ euca-deregister emi-FFC3154F</pre><h2>
	Status of Deployments</h2>
<p>
At times, you may ask if the Eucalyptus systems on FutureGrid are operational. You can find this out by visiting the following:</p>
<p>a) The Outage page at&nbsp;<a href="https://portal.futuregrid.org/metrics/html/results/realtime.html#total-count-of-running-vm-instances-updated-every-5-seconds">https://portal.futuregrid.org/metrics/html/results/realtime.html#total-count-of-running-vm-instances-updated-every-5-seconds</a><br />
b) The Real Time Status monitor at&nbsp;<a href="http://inca.futuregrid.org:8080/inca/jsp/status.jsp?queryNames=Health&amp;xsl=table.xsl&amp;resourceIds=FutureGrid">http://inca.futuregrid.org:8080/inca/jsp/status.jsp?queryNames=Health&amp;xsl=table.xsl&amp;resourceIds=FutureGrid</a><br />
c) Our Runtime History at&nbsp;<a href="http://inca.futuregrid.org:8080/inca/jsp/report.jsp?xml=cloudReport.xml">http://inca.futuregrid.org:8080/inca/jsp/report.jsp?xml=cloudReport.xml</a></p>
<p></p>
  </div>
<div id="node-1926" class="section-3">
  <h1 class="book-heading">Using OpenStack on FutureGrid</h1>
  <h1>NOTE:&nbsp;</h1>
<ul>
<li><span style="color:#ff0000;"><strong>This tutorial contains material that is customized for the particular user. The best way to view this tutorial is to &nbsp;ask for a FutureGrid portal account and to log into the portal. You will also need to be in a valid FG project to execute the directions.</strong></span></li>
</ul>
<h1>Summary</h1>
<div>We currently have twenty nodes in the FG&nbsp;India cluster dedicated to the <a href="http://www.openstack.org/software/essex/">Essex</a> release of <a href="http://www.openstack.org">OpenStack</a>, a collection of open-source technology that provides scalable, open-source cloud computing software. OpenStack consists of a series of <a href="http://www.openstack.org/software/">interrelated projects</a> that deliver various components for a cloud infrastructure solution. This tutorial provides an overview of OpenStack Nova installation on FutureGrid, as well as steps for deploying virtual machines.</div>
<h1>Getting Started</h1>
<p>Be sure you have a valid portal account (<a href="https://portal.futuregrid.org">https://portal.futuregrid.org)</a> and are part of a valid FG project. If you&#39;re not part of any project, you can either create a new one (it will need approval) or join an existing one with the permission of the Lead.</p>
<p>Once the previous requirements are fulfilled, your OpenStack account is automatically created.</p>
<h1>Log into India</h1>
<table border="1" cellpadding="1" cellspacing="1" style="width: 500px; ">
<tbody>
<tr>
<td style="background-color: rgb(255, 255, 153); ">&nbsp;Tip: to login into FutureGrid&nbsp;<a href="https://portal.futuregrid.org/accessing-futuregrid-resources-ssh">see this page</a></td>
</tr>
</tbody>
</table>
<p></p>
<p>The first step is to ssh into india.futuregrid.org using your FG username:</p>
<pre class="rteindent1">$ ssh gvonlasz@india.futuregrid.org</pre><p>If this command fails, contact&nbsp;<a href="https://portal.futuregrid.org/help">https://portal.futuregrid.org/help</a>.&nbsp; It likely means one of the following:</p>
<div>
<ol>
<li>
<p>Your account is not yet set up.</p>
</li>
<li>
<p>You provided no public key, or a corrupted public key.</p>
</li>
<li>
<p>The private key you are using does not match the public key you registered with FutureGrid.</p>
</li>
</ol>
</div>
<h1>Account and Credentials</h1>
<p>As noted above, OpenStack credentials and configuration files are automatically created for all valid users, and are placed in your home directory on the India system under the <em><strong>.futuregrid/openstack</strong></em> folder. The file name is called <em><strong>openstack-essex-&lt;username&gt;-india.zip</strong></em>.&nbsp;The credential&nbsp;.zip&nbsp;file contains the user keys and novarc file.&nbsp;The novarc file contains the necessary environment variables.</p>
<p>Unzip the credential file:</p>
<pre class="rteindent1">$ unzip ~/.futuregrid/openstack/openstack-essex-gvonlasz-india.zip -d ~/openstack</pre><p>Load Environment variables:</p>
<pre class="rteindent1">$ source ~/openstack/novarc</pre><p><strong>Note:</strong> As both Eucalyptus and OpenStack use the same EC2 environmental variables (i.e. EC2_URL, EC2_ACCESS), using novarc will overwrite previous Eucalyptus credentials. If you have the eucarc file in your home directory, doing a <em>source eucarc</em> will bring back those variables and overwrite the OpenStack ones. In this way, you can go back and forth with OpenStack and Eucalyptus.</p>
<h1>Euca2ools (EC2 client tools)</h1>
<p>OpenStack services can be controlled using an EC2 interface (only available for GNU/Linux platforms). In this tutorial, we are going to use the&nbsp;<a href="http://www.eucalyptus.com/download/euca2ools" style="font-size: 16px; font-weight: normal; ">Euca2ools</a> client installed in India.</p>
<pre class="rteindent1">$ module load euca2ools</pre><h1>Testing Your Setup</h1>
<p>Use euca-describe-availability-zones to test the setup:</p>
<pre class="rteindent1">$ euca-describe-availability-zones 

AVAILABILITYZONE	india	available</pre><h1>List of Common Images</h1>
<p>Following are the current images uploaded in essex:</p>
<pre class="rteindent1">$ euca-describe-images |grep common

IMAGE&nbsp;&nbsp; ami-000000b4&nbsp;&nbsp; common/precise-server-cloudimg-amd64.img.manifest.xml&nbsp;&nbsp; available&nbsp;&nbsp; private&nbsp;&nbsp; x86_64&nbsp;&nbsp; machine&nbsp;&nbsp; aki-000000b3&nbsp;&nbsp; instance-store

</pre><h1>VM Types</h1>
<p>The following types of VM are available:</p>
<div class="rteindent1"><span style="font-family:courier new,courier,monospace;">$ nova flavor-list </span></div>
<p class="rteindent1"><span style="font-family:courier new,courier,monospace;"><span style="font-size: 12px; ">+----+-------------+-----------+------+-----------+------+-------+-------------+-----------+-------------+<br />
	| ID | Name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | Memory_MB | Disk | Ephemeral | Swap | VCPUs | RXTX_Factor | Is_Public | extra_specs |<br />
	+----+-------------+-----------+------+-----------+------+-------+-------------+-----------+-------------+<br />
	| 1&nbsp; | m1.tiny&nbsp;&nbsp;&nbsp;&nbsp; | 512&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 0&nbsp;&nbsp;&nbsp; | 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 1&nbsp;&nbsp;&nbsp;&nbsp; | 1.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | N/A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | {}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br />
	| 2&nbsp; | m1.small&nbsp;&nbsp;&nbsp; | 2048&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 10&nbsp;&nbsp; | 20&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 1&nbsp;&nbsp;&nbsp;&nbsp; | 1.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | N/A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | {}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br />
	| 3&nbsp; | m1.medium&nbsp;&nbsp; | 4096&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 10&nbsp;&nbsp; | 40&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 2&nbsp;&nbsp;&nbsp;&nbsp; | 1.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | N/A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | {}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br />
	| 4&nbsp; | m1.large&nbsp;&nbsp;&nbsp; | 8192&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 10&nbsp;&nbsp; | 80&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 4&nbsp;&nbsp;&nbsp;&nbsp; | 1.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | N/A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | {}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br />
	| 5&nbsp; | m1.xlarge&nbsp;&nbsp; | 16384&nbsp;&nbsp;&nbsp;&nbsp; | 10&nbsp;&nbsp; | 160&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 8&nbsp;&nbsp;&nbsp;&nbsp; | 1.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | N/A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | {}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br />
	| 6&nbsp; | m1.special1 | 16384&nbsp;&nbsp;&nbsp;&nbsp; | 50&nbsp;&nbsp; | 1500&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 8&nbsp;&nbsp;&nbsp;&nbsp; | 1.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | N/A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | {}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |<br />
	+----+-------------+-----------+------+-----------+------+-------+-------------+-----------+-------------+</span></span></p>
<h1><a name="key_management"></a> Key Management</h1>
<p>Before you instantiate a VM, you need to create at least one key pair. This key pair will be injected into the VM, allowing you to SSH into the instance. This is done using the <em>euca-add-keypair</em> command:</p>
<pre class="rteindent1">$ euca-add-keypair gvonlaszkey1 &gt; gvonlaszkey1.pem
</pre><p><strong>Important Tip:&nbsp;</strong>In case you execute this command twice this will naturally not work in case the key is already added and imported. You can check this by doing a cat on the .pem file and make sure that there is a key in ther and not an error! If there is an error, you can either delete the key and add it again, or you can create a new key name and use that. Also if you have used that key before and you overwrote it you will not have access to your images anymore. so be careful and before issuing the above command think about what you do.</p>
<p>	Fix the permissions on the generated private key:</p>
<pre class="rteindent1">$ chmod 0600 gvonlaszkey1.pem</pre><p>	Note: Instead of creating a new keypair, you can import a public key created with a third-party tool using <em>euca-import-keypair</em>. For instance, if you have your ssh public key in india, you can do the following:</p>
<pre class="rteindent1">$ euca-import-keypair -f .ssh/id_rsa.pub gvonlaszkey2
</pre><p>You can add multiple keys, and here&#39;s the command to check the list of your keys:</p>
<pre class="rteindent1">$ chmod 0600 keyname.pem
euca-describe-keypairs
KEYPAIR&nbsp;&nbsp;&nbsp; key1 &nbsp;&nbsp; 53:e3:01:c1:70:df:94:ef:59:93:1a:3f:c0:10:a5:34
KEYPAIR&nbsp;&nbsp;&nbsp; key2 &nbsp;&nbsp; 07:a5:da:30:b4:55:16:eb:35:54:a2:5a:56:68:f6:cb

</pre><pre></pre><h2>Key pair verification</h2>
<p>Please verify that you do not have any error in the key file.</p>
<h1>Image Instantiation</h1>
<p>At this point, you can start a VM using one of the pre-existing images. You need the ami-id of the image you want to start. This was listed in the output of the <em>euca-describe-images</em> command you saw earlier. Use the <em>euca-run-instances</em> command to start the VM (use the key name you specified before).</p>
<pre class="rteindent1">$ euca-run-instances -k gvonlaszkey -n 1 ami-000000b4

RESERVATION r-gbs9hpmm 461884eef90047fbb4eb9ec92f22a1e3 default
INSTANCE i-00000a27 ami-000000b4 server-2599 server-2599 pending gvonlaszkey 0 m1.small 2012-07-31T14:54:40.000Z unknown zone</pre><p>The output shows the id of your VM, which in this case is i-00000a27.</p>
<p>This id will be useful to do operations with your VM. You can also see the status of your VM, which is pending now. You need to wait until the VM is in running status to be able to log into the VM.</p>
<h1>Better Server Names</h1>
<p>Unfortunately, the default use of the euca commands uses the name server-&lt;number&gt; to identify a started instance. This is often not desirable, as many users have similar names and it will be difficult to find your own images when lots of users start images. To fix this, you van however use the nova commands and say</p>
<p class="rteindent1"><span style="font-family:courier new,courier,monospace;">$ nova rename Server-2599 &lt;yourusername&gt;-001</span></p>
<h1>
	Monitoring Instances</h1>
<p>You can monitor the status of the instances by using the <em>euca-describe-instances</em> command. The public IP is highligthed in yellow; each VM should have one:</p>
<pre class="rteindent1">$ euca-describe-instances</pre><pre class="rteindent1">RESERVATION r-xfj0nag8 461884eef90047fbb4eb9ec92f22a1e3 default
INSTANCE i-0000090e ami-00000016 <span style="background-color:#ffff00;">149.165.158.157</span> server-2318 running clegoues 0 m1.medium 2012-07-24T19:39:21.000Z india aki-00000014 ari-00000015

RESERVATION r-8mwsq0n0 461884eef90047fbb4eb9ec92f22a1e3 default
INSTANCE i-000008f2 ami-000000b4 149.165.158.130 server-2290 running clegoues 0 m1.medium 2012-07-24T02:19:38.000Z india aki-00000014 ari-00000015
INSTANCE i-000008f3 ami-000000b4 149.165.158.149 server-2291 running clegoues 1 m1.medium 2012-07-24T02:19:38.000Z india aki-00000014 ari-00000015
INSTANCE i-000008f4 ami-000000b4 149.165.158.156 server-2292 running clegoues 2 m1.medium 2012-07-24T02:19:39.000Z india aki-00000014 ari-00000015

RESERVATION r-p90m3pno 461884eef90047fbb4eb9ec92f22a1e3 default
INSTANCE i-000007e2 ami-000000b4 149.165.158.158 server-2018 running jiaazeng 0 m1.medium 2012-07-15T20:56:16.000Z india aki-00000026 
INSTANCE i-000007e3 ami-000000b4 149.165.158.159 server-2019 running jiaazeng 1 m1.medium 2012-07-15T20:56:17.000Z india aki-00000026
...

</pre><p>You can monitor or restrict the output simply by checking the status of your VM:</p>
<pre class="rteindent1">$ euca-describe-instances i-00000a27

RESERVATION r-zvtbbj8j default
INSTANCE i-00000a27 ami-000000b4 server-1854 server-1854 pending gvonlaszkey 0 m1.small 2012-07-09T15:49:46.000Z  unknown zone aki-0000000e ari-0000000f</pre><p class="rteindent1">This VM does not have public IP yet. Getting the public IP may take some time, but it is needed to be able to connect to the VM:</p>
<pre class="rteindent1">$ euca-describe-instances i-00000a27

RESERVATION r-zvtbbj8j default
INSTANCE i-00000a27 ami-000000b4 149.165.158.175 server-1854 running gvonlaszkey 0 m1.small 2012-07-09T15:49:46.000Z&nbsp; unknown zone aki-0000000e ari-0000000f</pre><h1>Log into your VM</h1>
<p>The ssh private key that was generated earlier can now be used to log in to the VM. You also need to indicate the public IP associated with your VM (use the key name you have specified before).</p>
<pre class="rteindent1">$ ssh -i gvonlaszkey.pem ubuntu@149.165.158.175

$ ssh ubuntu@149.165.158.175 (for imported keys) </pre><p>Note: For some ubuntu images, log in with the user <em>ubuntu,</em> then <em>sudo</em>.</p>
<div>
<p>Exit from the VM to continue with the tutorial.</p>
<pre class="rteindent1"># exit
</pre><h2>Making a snapshot with nova client</h2>
<p>	You can make a snapshot of your instance:</p>
<pre class="rteindent1">$ nova image-create &lt;instance name&gt; &lt;snapshot name&gt;
$ euca-describe-images
</pre><p>Your snapshot will be listed at the end of the output, and it will be available in 5 to 10 minutes. There&#39;s a bug that snapshots are created as &quot;snapshot&quot; whatever you name it. So please remember the image ID.</p>
<h1>Nova Volumes (Not available)</h1>
<p>
		Nova-volume provides persistent block storage compatible with Amazon&rsquo;s Elastic Block Store.&nbsp;The storage in the instances is non-persistent and gets lost when the instance is terminated. Therefore, we need persistent volumes to keep data generated during instance lifetime after the instance is terminated. Volumes are accessed via iSCSI, although they will appear as a new device in your VM.</p>
<h2>List available Volumes</h2>
<p>You can see the available volumes by using the <em>euca-describe-volumes</em> command:</p>
<pre class="rteindent1">$  euca-describe-volumes

VOLUME  vol-00000027  100  india  in-use  2012-06-06T21:39:47.000Z
           ATTACHMENT  vol-00000027  i-0000070f  /dev/vdc  attached 
VOLUME  vol-00000028  50  india  available  2012-06-06T21:44:30.000Z
VOLUME  vol-0000002a  30  india  available  2012-06-06T21:45:37.000Z</pre><h2>Create a Volume</h2>
<p>Create a 1 GB volume in the India zone:</p>
<pre class="rteindent1">$  euca-create-volume -s 1 -z india

VOLUME&nbsp; vol-00000031&nbsp; 1&nbsp; india&nbsp; creating&nbsp; 2012-07-10T15:15:47.244Z</pre><h2>Attach Volume</h2>
<p>A volume can only be attached to one instance. Once the volume is attached to a VM, <em>euca-describe-volumes</em> will show its status as &ldquo;attached&rdquo;.&nbsp;</p>
<p>		Attach a volume to a running instance:</p>
<pre class="rteindent1">$  euca-attach-volume -i i-00000a27 -d /dev/vdc vol-0000031</pre><p>After this command is executed, an additional SCSI disk is created in the instance.&nbsp;Although we specified the device, it may differ if that device already exists (look into <em>/dev</em> or <em>/var/log/syslog</em> to find the new device).</p>
<h2>Using the new Disk</h2>
<p>	Log into the VM again (use the key name you specified before):</p>
<pre class="rteindent1">$ ssh -i gvonlaszkey.pem ubuntu@149.165.158.175</pre><p>Format the disk&nbsp;(skip this step if you want to reuse data stored):</p>
<pre class="rteindent1"># mkfs /dev/vdc</pre><p>Mount the disk:</p>
<pre class="rteindent1"># mount /dev/vdc /mnt</pre><p>You now have the new disk mounted in your system. In this way, you can use it as a normal directory to store information. However, the information stored there will be kept after you terminate the VM.</p>
<p>Exit from the VM to continue with the tutorial:</p>
<pre class="rteindent1"># exit</pre><h2>Detach Volumes</h2>
<p>Volumes are automatically detached when the instance is terminated.</p>
<p>		To detach a volume:</p>
<pre class="rteindent1">$  euca-detach-volume vol-00000031 </pre><p>	If you detach the volume while the instance is running, and with disk mounted, it loses access to the disk. Thus, you need to make sure that you umount (umount /mnt) the disk before you detach the volume.&nbsp;If you terminate the instance, the volume is automatically detached.</p>
<h1>Volume Snapshots</h1>
<p>Snapshots are useful to create backups or replicate volumes in different zones.</p>
<h2>Create Snapshot</h2>
<pre class="rteindent1">$  euca-create-snapshot -d &#39;Testing snapshot&#39; vol-00000027

SNAPSHOT    snap-00000001    vol-00000027    creating    2012-07-16T14:22:21.728Z    0%    Testing snapshot</pre><h2>List Snapshot</h2>
<pre class="rteindent1">$  euca-describe-snapshots

SNAPSHOT    snap-00000001    vol-00000027    available    2012-07-16T14:22:21.000Z    100%</pre><h2>Create Volume from Snapshot <span style="color:#ff0000;">(not yet functional in OpenStack Essex)</span></h2>
<p>The snapshot must be in available status (100% completed). The new volume can be bigger if desired, and you can also create this volume in a different zone (<em>-z</em> option).</p>
<p>To create a 2 GB volume from snapshot:</p>
</div>
<pre class="rteindent1">$  euca-create-volume -s 2 --snapshot snap-00000001 -z india

VOLUME    vol-00000032    2    snap-00000001    india    creating    2012-07-16T14:47:07.916Z</pre><h1>Image Registration</h1>
<p>We will use an CentOS 5 image to test the image registration:</p>
<pre class="rteindent1">$ wget i120/test-image/centos5.tgz
</pre><p>Uncompress and untar the archive:</p>
<pre class="rteindent1">$ tar xvfz centos5.tgz
</pre><p>Bundle the image with a kernel and a ramdisk using the <em>euca-bundle-image</em> command. In this example, we will use the KVM kernel already registered. <em>euca-describe-images</em> returns the kernel and ramdisk IDs that we need.</p>
<pre class="rteindent1">$ euca-bundle-image -i centos5.img --kernel aki-0000000e --ramdisk ari-0000000f</pre><pre class="rteindent1">Checking image
Encrypting image
Splitting image...
Part: centos5.img.part.00
...
Part: centos5.img.part.35
Generating manifest /tmp/centos5.img.manifest.xml</pre><p>
	Use the generated manifest file to upload the image. You need to specify a bucket name; it can be anything you want:</p>
<pre class="rteindent1">$ euca-upload-bundle -b gvonlasz-bucket -m /tmp/centos5.img.manifest.xml

Checking bucket: gvonlasz-bucket
Creating bucket: gvonlasz-bucket
Uploading manifest file
Uploading part: centos5.img.part.00
...
Uploading part: centos5.img.part.35

Uploaded image as gvonlasz-bucket/centos5.img.manifest.xml</pre><p>
	Register the upload image:</p>
<pre class="rteindent1">$ euca-register gvonlasz-bucket/centos5.img.manifest.xml

IMAGE  ami-00000033</pre><p>
	The returned image ID can now be used to start instances with<em> euca-run-instances</em> as described earlier. However, you cannot run instances until the image is in available status. You can check the status using&nbsp;<em>euca-describe-images</em>:</p>
<pre class="rteindent1">$ euca-describe-instances ami00000033 IMAGE ami-00000033 gvonlasz-bucket/centos5.img.manifest.xml available private x86_64 machine aki-0000000e ari-0000000f instance-store</pre><h1>Delete your images</h1>
<pre class="rteindent1">$ euca-deregister ami-00000033</pre><h1>Terminate your VMs</h1>
<pre class="rteindent1">$ euca-terminate-instances i-00000a27</pre><p></p>
<h1>Limitations</h1>
<p>Our current installation has the following limitations. We are working on finding a fix:</p>
<ol>
<li>
<p>Instances cannot ping their own IP address from within the instance (it is pingable and reachable from the outside). The private IP (which can be found via ifconfig) is pingable.</p>
<p>ubuntu@server-837:~$ ifconfig<br />
			eth0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Link encap:Ethernet&nbsp; HWaddr fa:16:3e:00:e5:2a&nbsp;<br />
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; inet addr:10.1.2.16&nbsp; Bcast:10.1.2.255&nbsp; Mask:255.255.255.0<br />
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; inet6 addr: fe80::f816:3eff:fe00:e52a/64 Scope:Link<br />
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; UP BROADCAST RUNNING MULTICAST&nbsp; MTU:1500&nbsp; Metric:1<br />
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; RX packets:199 errors:0 dropped:0 overruns:0 frame:0<br />
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TX packets:188 errors:0 dropped:0 overruns:0 carrier:0<br />
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; collisions:0 txqueuelen:1000<br />
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; RX bytes:32213 (32.2 KB)&nbsp; TX bytes:21676 (21.6 KB)</p>
<p>lo&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Link encap:Local Loopback&nbsp;<br />
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; inet addr:127.0.0.1&nbsp; Mask:255.0.0.0<br />
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; inet6 addr: ::1/128 Scope:Host<br />
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; UP LOOPBACK RUNNING&nbsp; MTU:16436&nbsp; Metric:1<br />
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; RX packets:0 errors:0 dropped:0 overruns:0 frame:0<br />
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TX packets:0 errors:0 dropped:0 overruns:0 carrier:0<br />
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; collisions:0 txqueuelen:0<br />
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; RX bytes:0 (0.0 B)&nbsp; TX bytes:0 (0.0 B)</p>
</li>
<li>
<p>In Essex, each instance gets an internal DNS name. <em>euca-describe-instance</em> will show this name along with the public IP addresses. If you are building a cluster and need to communicate among all the nodes in the cluster, you will need to do so with these names or the private IP addresses:</p>
<p>ubuntu@server-837:~$ ping server-716<br />
			PING server-716.novalocal (10.1.2.10) 56(84) bytes of data.<br />
			64 bytes from server-716.novalocal (10.1.2.10): icmp_req=1 ttl=64 time=5.06 ms<br />
			^C<br />
			--- server-716.novalocal ping statistics ---<br />
			1 packets transmitted, 1 received, 0% packet loss, time 0ms<br />
			rtt min/avg/max/mdev = 5.062/5.062/5.062/0.000 ms<br />
			ubuntu@server-837:~$ ping server-837<br />
			PING server-837.novalocal (127.0.1.1) 56(84) bytes of data.<br />
			64 bytes from server-837.novalocal (127.0.1.1): icmp_req=1 ttl=64 time=0.032 ms<br />
			64 bytes from server-837.novalocal (127.0.1.1): icmp_req=2 ttl=64 time=0.018 ms</p>
</li>
</ol>
<h1>Troubleshooting:</h1>
<div>Console output will provide you more details about the VM:</div>
<pre class="rteindent1">$ euca-get-console-output &lt;instanceId&gt;</pre><div>For any other issue, please submit a ticket.</p>
<p>	&nbsp;</div>
<div style="position: absolute; top: 10px; width: 1px; height: 1px; overflow: hidden; left: -1000px; ">style=&quot;font-size: small;&quot;&gt;&nbsp;</div>
  </div>
<div id="node-2416" class="section-3">
  <h1 class="book-heading">Image Management and Rain on FutureGrid</h1>
  <p><a class="kb-link" href="https://portal.futuregrid.org/kb/document/ayzv">FutureGrid</a> image management defines the full lifecycle of the images in FutureGrid. It involves the process of creating, customizing, storing, sharing, and deploying images for different FutureGrid environments. For information and instructions on managing your images in FutureGrid, and the Rain environment, see&nbsp;</p>
<ul>
<li><a href="http://futuregrid.github.com/rain/quickstart.html">http://futuregrid.github.com/rain</a>&nbsp;and<br />
		&nbsp;</li>
<li><a href="http://futuregrid.github.com/rain/quickstart.html">http://futuregrid.github.com/rain/quickstart.html</a></li>
</ul>
<p></p>
<table align="left" border="0" cellpadding="5" cellspacing="5">
<thead>
<tr>
<th scope="col"><a href="http://futuregrid.github.com/rain/quickstart.html"><strong>RAIN Documentation:</strong></a></th>
<th scope="col"><a href="http://futuregrid.github.com/rain/quickstart.html"><strong>RAIN Quickstart:</strong></a></th>
</tr>
</thead>
<tbody>
<tr>
<td width="201"><a href="http://futuregrid.github.com/rain/"><img height="200" src="/sites/default/files/resize/u23/Screen%20Shot%202013-03-06%20at%2012.47.32%20PM-201x200.png" width="201" /></a></td>
<td width="200"><a href="http://futuregrid.github.com/rain/quickstart.html"><img alt="" height="200" src="/sites/default/files/resize/u23/Screen%20Shot%202013-03-06%20at%2012.51.48%20PM-200x200.png" style="width: 200px; height: 200px; " width="200" /></a></td>
</tr>
</tbody>
</table>
<p><a href="http://futuregrid.github.com/rain/quickstart.html">&nbsp;</a></p>
  <div id="node-2189" class="section-4">
  <h1 class="book-heading">Generate and Register an OS Image on FutureGrid using the FG Shell</h1>
  <h2>
	Summary</h2>
Below, we summarize the different steps needed to create a new image and register it in a FutureGrid infrastructure. In this case, we will register the image in OpenStack, but it can be registered in any other FutureGrid infrastructure, such as Eucalyptus, Nimbus, or HPC. Detailed information about these tools can be found in&nbsp;<a href="http://futuregrid.github.com/rain/">http://futuregrid.github.com/rain/</a>.<br />
<h2>
	Request access</h2>
<p>Submit a ticket to request access&nbsp;<a href="https://portal.futuregrid.org/help">https://portal.futuregrid.org/help</a><br />
	<br />
	Please use the subject: &quot;Request to access FutureGrid Rain&quot;. Include in the body &quot;I would like to obtain access to FutureGrid Rain&quot;.</p>
<p class="rteindent1"><em>Note: In future we may just create a checkbox for this request in the help form.</em><br />
	&nbsp;</p>
<p>Once you have access, you can continue the tutorial. Typically, it will take a business day for you to get added (a business day is 9am-5pm EST Mon-Fri).&nbsp;</p>
<h2>
	Log into India</h2>
<pre class="rteindent1">
$ ssh &lt;username&gt;@india.futuregrid.org
$ module load futuregrid</pre>
<h2>
	Start the Shell</h2>
<p>Execute the FG Shell. Please remember to replace &lt;username&gt; with your portal user name. Then, you will be asked for a password (which is your portal password):</p>
<pre class="rteindent1">
$ fg-shell -u &lt;username&gt;</pre>
<p>This command will change your shell and the prompt will be fg-rain&gt;. If your prompt is different, you need to execute &quot;use rain&quot;.</p>
<h2>
	Generate the Image</h2>
We are going to generate an Ubuntu 12.04 image. The -s parameter allows you to specify the software you want to install in your image. Currently, only the software available in the official repositories can be installed.<br />
<pre class="rteindent1">
fg-rain&gt; generate -o ubuntu -v 12.04 -a x86_64 -s wget, openmpi-bin</pre>
After a while, your image will be stored in the repository, and your image ID will be printed.<br />
<h2>
	Image Repository</h2>
<p>We can consult the information of the image by executing the following (please replace &lt;imageid&gt; with the ID that you got from the previous command):</p>
<pre class="rteindent1">
fg-rain&gt; list * where imgId=&lt;imageId&gt;</pre>
<h2>
	Register Image</h2>
<p>Next, we need to register that image in the infrastructure we want to use. In this case, we will register the image in OpenStack (if you followed the FG Openstack tutorial, your novarc will probably be in ~/openstack/novarc). This command will return an &lt;ami-ID&gt;, which is the ID of the image in OpenStack.</p>
<pre class="rteindent1">
fg-rain&gt; register -r &lt;imageId&gt; -s india -v ~/novarc</pre>
<p>Once you have registered the image, you need to wait until it becames available. To check the status of the image, you can execute the following command.</p>
<pre class="rteindent1">
fg-rain&gt; cloudlist -s india -v ~/novarc | grep &lt;imageId&gt;</pre>
The status is the second field. You may experience that this command takes time to respond when the image is being uploaded (it is an OpenStack issue).<br />
<h2>
	Start Image</h2>
Once the image is in &quot;available&quot; status, we can proceed to start a VM using the ami-ID that we got from the register command. In this case, we are going in Interative mode, which means that we are going to get logged into the VM once it is running.<br />
<pre class="rteindent1">
fg-rain&gt; launch -i &lt;ami-ID&gt; -s india -v ~/novarc -I</pre>
<br />
<br />
<br />
<br />  </div>
<div id="node-2204" class="section-4">
  <h1 class="book-heading">FutureGrid Standalone Image Repository</h1>
  <h2>
	Introduction</h2>
The FutureGrid image repository is a standalone service that is not tied to FutureGrid nor to any IaaS infrastructure.&nbsp;This image repository offers a common&nbsp;interface that can distinguish image types for different IaaS frameworks like Nimbus, Eucalyptus, and also bare-metal images. This allows us in FG to include a diverse&nbsp;image set not only contributed by the FG development team, but also by the user community that generates such images and wishes to share them. The images can be described with information about the software stack that is installed on them including versions, libraries, and available services. This information is maintained in the catalog and can be&nbsp;searched by users and/or other FutureGrid services. Users&nbsp;looking for a specific image can discover available images&nbsp;ï¬tting their needs, and ï¬nd their location in the repository by using the catalog interface.<br />
<br />
The repository supports different storage systems that allow you to choose the most appropriate one for you. It includes MySQL, where the image ï¬les are stored directly in the POSIX ï¬le&nbsp;system; MongoDB, where both data and ï¬les are stored&nbsp;in the NoSQL database; the OpenStack Object Store (Swift); and Cumulus from the Nimbus project. For the last two cases, the data can be stored in either MySQL&nbsp;or in MongoDB. These storage plugins not only increase the interoperability of the image repository, but can also be used by the community as templates to create their own plugins to support other storage systems.<br />
<h2>
	Requirement</h2>
<ul>
	<li>
		Python 2.6 or 2.7</li>
	<li>
		LDAP server for user authentication</li>
</ul>
<h2>
	Software</h2>
The software is open-source under an Apache 2 license. The image repository can be found in github&nbsp;as part of our Image Management and Rain software&nbsp;<a href="https://github.com/futuregrid/rain">https://github.com/futuregrid/rain</a>&nbsp;.<br />
<h2>
	Documentation</h2>
The documentation can be found in&nbsp;<a href="http://futuregrid.github.com/rain/index.html">http://futuregrid.github.com/rain/index.html</a>. Since this link provides information about all our tools, in this section we collect the links that refer to the image repository.<br />
<h3>
	User Manual</h3>
<p>Information about the command-line interface is found in&nbsp;<a href="http://futuregrid.github.com/rain/man-repo.html">http://futuregrid.github.com/rain/man-repo.html</a>. If you are interested on using the shell, the manual is in&nbsp;<a href="http://futuregrid.github.com/rain/man-shell.html">http://futuregrid.github.com/rain/man-shell.html</a>.</p>
<h3>
	Installation</h3>
You need to install the complete software, even if you only want to use the image repository. This information is found in&nbsp;<a href="http://futuregrid.github.com/rain/install.html">http://futuregrid.github.com/rain/install.html</a>.<br />
<h3>
	Configuration</h3>
The configuration information can be found in&nbsp;<a href="http://futuregrid.github.com/rain/configure_futuregrid.html">http://futuregrid.github.com/rain/configure_futuregrid.html</a>. You will be interested in:
<ul>
	<li>
		Configuration files&nbsp;<a href="http://futuregrid.github.com/rain/configure_futuregrid.html#configuration-files">http://futuregrid.github.com/rain/configure_futuregrid.html#configuration-files</a></li>
	<li>
		Setting up LDAP information&nbsp;<a href="http://futuregrid.github.com/rain/configure_futuregrid.html#setting-up-ldap">http://futuregrid.github.com/rain/configure_futuregrid.html#setting-up-ldap</a></li>
	<li>
		Setting up the Image Repository&nbsp;<a href="http://futuregrid.github.com/rain/configure_futuregrid.html#setting-up-the-image-repository">http://futuregrid.github.com/rain/configure_futuregrid.html#setting-up-the-image-repository</a></li>
</ul>  </div>
<div id="node-2192" class="section-4">
  <h1 class="book-heading">Manual Image Customization</h1>
  Sometimes users need to further customize their images by installing their own software&mdash;software which may not be able to be installed with the image generation tool. In this tutorial, we explain how users can perform this customization in the images created with the FG image generation tool. Detailed information about&nbsp;FG image management tools can be found in <a href="http://futuregrid.github.com/rain/" title="http://futuregrid.github.com/rain/">http://futuregrid.github.com/rain/</a>.<br />
<h2>
	Logging into India</h2>
<pre>
$ ssh &lt;username&gt;@india.futuregrid.org 
$ module load futuregrid</pre>
<h2>
	&nbsp;</h2>
<h2>
	Requesting access</h2>
<p>Submit a ticket to request access&nbsp;<a href="https://portal.futuregrid.org/help">https://portal.futuregrid.org/help</a></p>
<h2>
	Obtaining the image</h2>
<p>You can get your image from our repository, or generate a new one.</p>
<h3>
	Getting an image from the repository</h3>
<pre>
$ fg-repo -u &lt;username&gt; -g &lt;imageId&gt;</pre>
<h3>
	Generating a new image</h3>
We are going to generate an Ubuntu image. Since we want to modify the image, we have specified the -g parameter to retrieve the image after it is generated. By default, it is uploaded to the image repository.
<pre>
$ fg-generate -u jdiaz -o ubuntu -v 12.04 -a x86_64 -s wget, openmpi-bin -g</pre>
<p>In both cases, we will obtain a tgz file that contains the image file (.img) and a manifest (.manifest.xml). For example, our image could be in <em>/N/u/&lt;username&gt;/123123123.tgz</em> .</p>
<h2>
	Customizing the image</h2>
To continue with the rest of the tutorial, we need a UNIX machine where we have root privileges.<br />
<br />
Assuming that we are in a UNIX machine with root privileges:<br />
<br />
1. Retrieve the image from India:<br />
<pre>
$ scp &lt;username&gt;@india.futuregrid.org:/N/u/&lt;username/123123123.tgz .</pre>
2. Decompress the image:<br />
<pre>
$ tar vxfz 123123123.tgz

jdiaz859434.img
jdiaz859434.manifest.xml</pre>
3. Mount the image. This will mount the image file into a directory. In this way, we will have access to the OS files that are inside the image.<br />
<pre>
$ mkdir image
$ sudo mount -o loop jdiaz859434.img image</pre>
Copy your software into the image directory (if needed). In this case, I am going to copy a software directory to the tmp directory of the image:<br />
<pre>
$ cp -r /home/javi/mysoftware image/tmp</pre>
<em>Chroot</em> into the image. This changes the root of the OS to the one of the image. In this way, evey operation we execute will have effect only inside the image. After executing this command, you will be the root users inside the image.<br />
<pre>
$ sudo chroot image</pre>
Now you can install whatever software you need. You can also use <em>yum/apt</em> to install packages from the software repository. Remember that they will be installed inside the image. As example, here I install tomcat with <em>apt</em> and compile my software with <em>make</em>:<br />
<pre>
# apt-get install tomcat6
# cd /tmp/mysoftware
# make &amp;&amp; make install</pre>
You can also configure the OS of image to start services during the boot time. The easiest way to do that is by modifying the<em> /etc/rc.local </em>file.<br />
<br />
Once you have finished customizing your image, you need to exit from the <em>chroot</em> command, unmount the image, and compress it again:<br />
<pre>
# exit
$ sudo umount image
$ tar vxfz mynewimage.tgz jdiaz859434.img jdiaz859434.manifest.xml</pre>
<h2>
	Transfer the image back to India</h2>
<pre>
$ scp mynewimage.tgz &lt;username&gt;@india.futuregrid.org:/N/u/&lt;username&gt;/</pre>
<h2>
	Log into India</h2>
<pre>
$ ssh &lt;username&gt;@india.futuregrid.org 
$ module load futuregrid</pre>
<h2>
	Upload the image to the repository</h2>
We upload the image to the repository so we can reuse it and share it with other users. When uploading the image, you can specify some metadata to describe the properties of the image:
<pre>
$ fg-repo -p mynewimage.tgz &quot;os=Ubuntu12 &amp; arch=x86_64 &amp; description=My new customized image &amp; tag=tomcat, openmpi&quot;</pre>
<p>This command will provide you the ID your image has in the repository. This ID is needed for the next step.</p>
<h2>
	Register your image in different infrastructures</h2>
You now have your image ready to be registered in the different FutureGrid infrastructures.&nbsp;To use OpenStack (<a href="https://portal.futuregrid.org/tutorials/openstack">tutorial</a>) and Eucalyptus (<a href="https://portal.futuregrid.org/tutorials/eucalyptus3">tutorial</a>), you need to indicate the location of you novarc and eucarc file.<br />
<h3>
	Register the image in Openstack</h3>
<pre>
$ fg-register -u &lt;username&gt; -r &lt;imageID&gt; -s india -v ~/novarc</pre>
<h3>
	Register the image in Eucalyptus</h3>
<pre>
$ fg-register -u &lt;username&gt; -r &lt;imageID&gt; -e india -v ~/eucarc</pre>
<h3>
	Register the image in HPC</h3>
<pre>
$ fg-register -u &lt;username&gt; -r &lt;imageID&gt; -x india</pre>
<br />
Each command will provide you with the ami-ID that your image has in the specified infrastructure.<br />
<h2>
	Using your Registered Image</h2>
<h3>
	OpenStack (more info in&nbsp;<a href="https://portal.futuregrid.org/tutorials/openstack">https://portal.futuregrid.org/tutorials/openstack</a>)</h3>
<pre>
source novarc
euca-run-instance -k &lt;keyname&gt; &lt;ami-ID&gt;</pre>
<h3>
	Eucalyptus (more info in&nbsp;<a href="https://portal.futuregrid.org/tutorials/eucalyptus3">https://portal.futuregrid.org/tutorials/eucalyptus3</a>)</h3>
<pre>
source eucarc
euca-run-instance -k &lt;keyname&gt; &lt;ami-ID&gt;</pre>
<h3>
	HPC (more info in&nbsp;<a href="https://portal.futuregrid.org/tutorials/hpc">https://portal.futuregrid.org/tutorials/hpc</a>)</h3>
Provision a machine with our image and go into Interactive mode (you are logged into the machine):<br />
<pre>
qsub -l os=&lt;ami-ID&gt; -I</pre>
Provision two machines with our image and execute an script:<br />
<pre>
qsub -l os=&lt;ami-ID&gt; -l nodes=2:ppn=8 myscript.sh</pre>
<br />
<br />  </div>
<div id="node-897" class="section-4">
  <h1 class="book-heading">RAIN Manual Pages</h1>
  <p>FutureGrid provides a number of manual pages, listed below.</p>
(For Rain, our up-to-date documentation of rain can be found at <a href="https://portal.futuregrid.org/doc/rain/index.html">https://portal.futuregrid.org/doc/rain/index.html</a> and<a href="http://futuregrid.github.com/rain/index.html"> http://futuregrid.github.com/rain/index.html</a> .<br />
<br />
<br />  <div id="node-1847" class="section-5">
  <h1 class="book-heading">fg-repo</h1>
  <p>Please see <a href="http://futuregrid.github.com/rain/man-repo.html" title="http://futuregrid.github.com/rain/man-repo.html">http://futuregrid.github.com/rain/man-repo.html</a></p>
  </div>
<div id="node-900" class="section-5">
  <h1 class="book-heading">fg-rain</h1>
  <p>Please see <a href="http://futuregrid.github.com/rain/man-rain.html" title="http://futuregrid.github.com/rain/man-rain.html">http://futuregrid.github.com/rain/man-rain.html</a></p>
  </div>
<div id="node-901" class="section-5">
  <h1 class="book-heading">fg-generate</h1>
  <p>Please see  <a href="http://futuregrid.github.com/rain/man-generate.html" title="http://futuregrid.github.com/rain/man-generate.html">http://futuregrid.github.com/rain/man-generate.html</a></p>
  </div>
<div id="node-899" class="section-5">
  <h1 class="book-heading">fg-register</h1>
  <p>Please see <a href="http://futuregrid.github.com/rain/man-register.html" title="http://futuregrid.github.com/rain/man-register.html">http://futuregrid.github.com/rain/man-register.html</a></p>
  </div>
<div id="node-1024" class="section-5">
  <h1 class="book-heading">fg-shell</h1>
  <p>Please see <a href="http://futuregrid.github.com/rain/man-shell.html" title="http://futuregrid.github.com/rain/man-shell.html">http://futuregrid.github.com/rain/man-shell.html</a></p>
  </div>
<div id="node-1348" class="section-5">
  <h1 class="book-heading">fg-portal-manage</h1>
  <p>The tool is for admin purpose only. An admin person or an system script can call this to get user/project information from the portal.</p>
<h2>
	NAME </h2>
<p><strong>fg-portal-manage</strong> - Futuregrid account management script - the portal portion</p>
<br />
<h2>
	SYNOPSIS </h2>
<pre>
fg-portal-manage 
 -h, --help            show this help message and exit
 -n NAME, --name=NAME  querying by name
 -m MAIL, --mail=MAIL  querying by email
 -i UID, --uid=UID     querying by portal uid
 -u USERNAME, --username=USERNAME
                       querying by portal username
 -k, --attrib          specifying attrib(s) to be displayed, inlcuding:
                       firstname, lastname, email, phone, organization,
                       institution_name, citizenship, sshkey, projectall,
                       project
 -l, --ldif            output ldif format of user info(no dn). If provided
                       all attributes will be included in the output
                       disregarding the setting from -k
 -v, --vetted          Show only those vetted users. If omitted all users
                       that meet the creteria will be shown
 -w, --waiting         Show the waiting list in which a user is eligible to
                       get an LDAP account
 -y, --withsshkey      A sub-option for -w, which shows the waiting list, but
                       only for those who have submitted a sshkey
 -p, --project         Get list of project in table view
 -s STATUS, --status=STATUS
                       A sub-option for -p, which specifies project status
                       that would like to be retrieved. Try pending,
                       approved, completed, denied
 -1, --pidonly         A sub-option for -p which prints out only the project
</pre>
<br />
<h2>
	DESCRIPTION </h2>
<p>FutureGrid account admin tool queries user profile info from the portal and also checks status against the ldap.</p>
<p>To run the script, python 2.7 is needed (if trying on lower version, try to install the argparse module; it may also work), as well as the mysqldb module. Depending on the os distribution, the installation could be different. E.g., in ubuntu, it&#39;s simply: apt-get install python-mysqldb .</p>
<p>The futuregrid.cfg file needs to be put into the same directory as the script, and the dummy config values need to be replaced with those real ones. (Whoever has access to the portal server should have knowledge on this. We will not distribute this to anymore other than the portal admin and sys admin.)</p>
<br />
<h2>
	EXAMPLES </h2>
<p>Run this to get the help info:</p>
<pre>
./fg-portal-manage.py -h
</pre>
<p>This will give a table viewed info of user with uid 3:</p>
<pre>
./fg-portal-manage.py -i 3
</pre>
<p>However, the following:&nbsp;</p>
<pre>
./fg-portal-manage.py -i 3 -l
</pre>
<p>will print the long quasi-ldif formatted info.</p>
<p>Other commands:</p>
<pre>
-u for username; -n for realname(first or last); as well as -m for email does similar thing.</pre>
<p>./fg-portal-manage.py -l</p>
<p>&mdash;will simply print out all users in the portal in the ldif-like format.</p>
<p>./fg-portal-manage.py -l -v</p>
<p>&mdash;will print out a similar list but only for (all) those vetted users, i.e., approved users with an active project.</p>
<p>./fg-portal-manage.py -w</p>
<p>&mdash;prints out all users who have approved portal account and are members of an active project(s) (i.e., vetted users), but don&#39;t have an LDAP account yet.</p>
<pre>
./fg-portal-manage.py -l -w
</pre>
<p>&mdash;the same as -w but in long quasi-ldif format.</p>
<pre>
./fg-portal-manage.py -w -y
</pre>
<p>&mdash;the same as -w, but prints out only those who have submitted a sshkey.</p>
<pre>
./fg-portal-manage.py -p
</pre>
<p>&mdash;lists all FG projects registered in the portal, in the format of:</p>
<pre>
pid: title|project lead|project manager|status|[members list]
</pre>
<p>&mdash;project lead/manager and members are represented by the portaluid.</p>
<pre>
./fg-portal-manage.py -p -s approved
</pre>
<p>&mdash;prints a list of projects but only those in &#39;approved&#39; status. Other valid statuses are: pending, completed, denied.</p>
<pre>
./fg-portal-manage.py -p -s completed -1(number &#39;1&#39;)
</pre>
<p>&mdash;prints a list of completed projects but only display the projectids.<br />
	&nbsp;</p>
<h2>
	<b>SEE ALSO</b> </h2>  </div>
</div>
</div>
<div id="node-739" class="section-3">
  <h1 class="book-heading">ViNe</h1>
  <p>ViNe is available to FutureGrid users on the foxtrot and sierra clusters, and can be deployed in any cloud on virtual machines (requires overlay network knowledge).<br />
	<br />
	<strong>Overview</strong><br />
	ViNe is a project developed at University of Florida that implements routing and other communication mechanisms needed to deploy a user-level virtual network. ViNe is particularly appealing for cloud computing because it allows the establishment of wide-area virtual networks supporting symmetric communication among public and private network resources (even when they are behind firewalls), does not require changes to either the physical network or the OS of machines, and has low virtualization overheads. ViNe can provide communication among FutureGrid and external resources (including those with private IP addresses) without the need to reconfigure the (FutureGrid) physical network infrastructure.<br />
	<br />
	<strong>Prerequisites</strong><br />
	In order for a host to participate in ViNe overlays, users need root privilege to adjust operating system routing tables. Currently, users can get root privilege on the virtual machines (VMs) started on FG clouds. ViNe routers are available on foxtrot and sierra, and VMs started through Nimbus can be configured to participate on ViNe overlays.<br />
	<br />
	<strong>Setup</strong><br />
	All VMs must be members of ViNe overlays, independently wether they are on public or private networks. In order to enable the ViNe communication, the following command needs to be executed on participating VMs:</p>
<pre>
wget -P /tmp -N <a href="http://www.acis.ufl.edu/vine/enablevine.php" title="http://www.acis.ufl.edu/vine/enablevine.php">http://www.acis.ufl.edu/vine/enablevine.php</a>
. /tmp/enablevine.sh
</pre>
<br />
<strong>Tutorial</strong><br />
<p>A step-by-step tutorial on connecting VMs to ViNe overlays is available at:<br />
	<a href="https://portal.futuregrid.org/contrib/simple-vine-tutorial" title="https://portal.futuregrid.org/contrib/simple-vine-tutorial">https://portal.futuregrid.org/contrib/simple-vine-tutorial</a><br />
	&nbsp;</p>  </div>
<div id="node-853" class="section-3">
  <h1 class="book-heading">OpenNebula 2.0 Tutorial</h1>
  <p>This document is aimed to be a guide to start using OpenNebula 2.0. Therefore, if you need more information about any particular OpenNebula aspect that it is not addressed here, please refer to the official documentation located in (<a href="http://www.opennebula.org/documentation:documentation">http://www.opennebula.org/documentation:documentation</a>)</p>
<p>If you are a user that is only interested in test OpenNebula with some pre-configured VM, you can use this guide (<a href="http://www.opennebula.org/documentation:rel2.0:vmg">http://www.opennebula.org/documentation:rel2.0:vmg</a>).</p>
<p>ALL users have to add the following lines to their $HOME/.bashrc or $HOME/.profile file.</p>
<pre>export PATH=$PATH:$ONE_LOCATION/bin
export ONE_AUTH=$HOME/.one/one_ssh</pre><h1>Create a VM Image Contextualized for OpenNebula</h1>
<p>In this section we are going to explain how to create a KVM image and how to contextualize for OpenNebula.</p>
<h2>Create VM Image Using KVM</h2>
<p>This process is generic and it is not related with OpenNebula directly. Therefore, this image can be deploy in any machine with KVM and could be used to create a VM image for any IaaS framework. The first step is install KVM.</p>
<p>Ubuntu</p>
<pre>sudo apt-get install qemu kvm

sudo apt-get install libvirt-bin</pre><p>RHEL or CentOS</p>
<pre>sudo yum install kvm virt-manager</pre><p>Be sure that the virtualization features of your machine are enabled in the BIOS. If they are, you should be able to load the KVM modules<span id="cke_bm_126S">&nbsp;</span><span id="cke_bm_127S">&nbsp;</span><span id="cke_bm_124S">&nbsp;</span><span id="cke_bm_129S">&nbsp;</span><span id="cke_bm_131S">&nbsp;</span><span id="cke_bm_125S">&nbsp;<span id="cke_bm_130S">&nbsp;</span><span id="cke_bm_128S">&nbsp;</span></span></p>
<pre>sudo modprobe kvm-intel
or
sudo modprobe kvm-amd<span id="cke_bm_131E"> </span><span id="cke_bm_130E"> </span><span id="cke_bm_129E"> </span><span id="cke_bm_128E"> </span><span id="cke_bm_127E"> </span><span id="cke_bm_126E"> </span><span id="cke_bm_125E"> </span><span id="cke_bm_124E"> </span></pre><p>Now, we need to download the ISO that we are going to install in the VM, in this case Ubuntu iso. You can do it from <a href="http://ubuntu-releases.cs.umn.edu/10.10/ubuntu-10.10-server-amd64.iso">http://ubuntu-releases.cs.umn.edu/10.10/ubuntu-10.10-server-amd64.iso.</a></p>
<p>Every VM need a disk to be used as a virtual hard drive (1GB is enough for Ubuntu server). Thus, to create this we use the next command:</p>
<pre>qemu-img create machine_name.img -f raw 1G</pre><p>After this, we are prepared to boot the VM and install the OS.</p>
<pre>kvm -m 512 -cdrom /home/user/ubuntu-10.10-server-amd64.iso -boot d machine_name.img</pre><p>This command will start the VM and you can install the OS as in a normal PC. When you install the OS in the VM you can boot it using this command:</p>
<pre>kvm -no-acpi -m 512 machine_name.img</pre><p>&nbsp;</p>
<h2>Contextualize VM</h2>
<p>There are two contextualization mechanisms available in OpenNebula: the automatic IP assignment, and a more generic way to give any file and configuration parameters. You can use any of them individually, or both. Nevertheless, we need to prepare the VM image to use this mechanism (<a href="http://www.opennebula.org/documentation:rel2.0:cong">http://<span>www.opennebula.org</span>/documentation:<span>rel2.0</span>:<span>cong</span></a>).<span id="cke_bm_150S">&nbsp;</span><span id="cke_bm_151S">&nbsp;</span></p>
<p>&nbsp;</p>
<p>First, download the vmcontext.sh&nbsp; file in your machine. This file depend of your linux distribution.</p>
<pre><a href="http://dev.opennebula.org/projects/opennebula/repository/show/share/scripts">http://dev.opennebula.org/projects/opennebula/repository/show/share/scripts</a></pre><p>
	In this address you can find the vmcontext for each supported distribution.<br />
	CentOS</p>
<pre>wget <a href="http://dev.opennebula.org/projects/opennebula/repository/revisions/master/raw/share/scripts/centos-5/net-vmcontext/vmcontext">http://dev.opennebula.org/projects/opennebula/repository/revisions/master/raw/share/scripts/centos-5/net-vmcontext/vmcontext</a> -O vmcontext.sh
</pre><p>Ubuntu</p>
<pre>wget <a href="http://dev.opennebula.org/projects/opennebula/repository/revisions/master/raw/share/scripts/ubuntu/net-vmcontext/vmcontext">http://dev.opennebula.org/projects/opennebula/repository/revisions/master/raw/share/scripts/ubuntu/net-vmcontext/vmcontext</a> -O vmcontext.sh
</pre><p>Copy this file to the VM. To do that you can configure a network interface in the VM and send the file using ssh. For example if your machine has the private IP 192.168.1.1, you could assign to the VM the 192.168.1.2. So, execute this command in the VM:</p>
<pre>sudo ifconfig eht0 192.168.1.2</pre><p>From your machine execute this command to send the file to your VM:</p>
<pre>scp vmcontext.sh 192.168.1.2:/home/user</pre><p>In the VM copy the file to the /etc/init.d directory:</p>
<pre>sudo cp vmcontext.sh /etc/init.d
sudo chmod +x /etc/init.d/vmcontext.sh
</pre><p>Configure init.d to execute the script during the VM startup<br />
	Centos</p>
<pre>sudo chkconfig --add vmcontext.sh
</pre><p>Ubuntu</p>
<pre>ln /etc/init.d/vmcontext.sh /etc/rc2.d/S01vmcontext.sh</pre><p>Add at the end of this file (this may not be needed):</p>
<pre>ifup -a</pre><p>or</p>
<pre>/etc/init.d/networking restart  #(in ubuntu)
/etc/init.d/network restart     #(in centos)
</pre><p>Remove the udev persistent files (ubuntu only)</p>
<pre>sudo rm -f /etc/udev/rules.d/z25_persistent-net.rules

sudo rm -f /etc/udev/rules.d/z45_persistent-net-generator.rules</pre><p>&nbsp;</p>
<p>With all these steps we have configured the automatic IP assignment in the VM. Now, we need to enable the generic contextualization by copying these lines to /etc/rc.local.</p>
<pre>mount -t iso9660 /dev/sr0 /mnt  #(in ubuntu)
mount -t iso9660 /dev/hdc /mnt  #(in centos. Actually this depend on the initrd that you uses. If you use the one provided by Ubuntu then you use the previous line instead of this one)

if [ -f /mnt/context.sh ]; then

      . /mnt/init.sh

fi

umount /mnt

exit 0</pre><p>&nbsp;</p>
<p>The file init.sh is different for each distribution and you can find them in the <a href="http://dev.opennebula.org/projects/opennebula/repository/revisions/master/show/share/scripts">OpenNebula repository</a>. You do not need to include it in the VM because it is included automatically by OpenNebula when you require it in the VM template.</p>
<p>&nbsp;</p>
<h1>Managing Virtual Machines</h1>
<p><a href="http://www.opennebula.org/documentation:rel2.0:vm_guide">(http://<span>www.opennebula.org</span>/documentation:<span>rel2.0</span>:<span>vm_guide</span>)</a></p>
<p>A Virtual Machine within the <span>OpenNebula</span> system consists of:</p>
<ul>
<li class="level1">
<div class="li">A capacity in terms memory and CPU</div>
</li>
<li class="level1">
<div class="li">A set of <span>NICs</span> attached to one or more virtual networks</div>
</li>
<li class="level1">
<div class="li">A set of <strong>disk images</strong>.</div>
</li>
<li class="level1">
<div class="li">A state file (optional) or <strong>recovery file</strong>, that contains the memory image of a running VM plus some <span>hypervisor</span> specific information.</div>
</li>
</ul>
<p>The above items, plus some additional VM attributes like the <acronym title="Operating System">OS</acronym> kernel and context information to be used inside the VM, are specified in a <strong><a class="wikilink1" href="http://www.opennebula.org/documentation:rel2.0:template" title="template">VM template</a></strong> file.</p>
<p>Each VM in <span>OpenNebula</span> is identified by an unique number, the <code>&lt;<span>VID</span>&gt;</code>. Also, the user can assign it a name in the <a class="wikilink1" href="http://www.opennebula.org/documentation:rel2.0:template" title="template">VM template</a>, the default name for each VM is <code>one-&lt;<span>VID</span>&gt;</code>.</p>
<h2>Virtual Machine Template</h2>
<p><span>OpenNebula</span> templates are designed to be <span>hypervisor-agnostic</span>, but there are still some peculiarities to be taken into account, and mandatory attributes change depending on the target <span>hypervisor</span>. <span>Hypervisor</span> specific information for this attributes can be found in the drivers configuration guides:</p>
<ul>
<li class="level1">
<div class="li"><a class="wikilink1" href="http://www.opennebula.org/documentation:rel2.0:xeng" title="xeng"><span>Xen</span> Adaptor</a></div>
</li>
<li class="level1">
<div class="li"><a class="wikilink1" href="http://www.opennebula.org/documentation:rel2.0:kvmg" title="kvmg"><span>KVM</span> Adaptor</a></div>
</li>
<li class="level1">
<div class="li"><a class="wikilink1" href="http://www.opennebula.org/documentation:rel2.0:vmwareg" title="vmwareg">VMware Adaptor</a></div>
</li>
</ul>
<p><span>OpenNebula</span> has been designed to be easily extended, so any attribute name can be defined for later use in any <span>OpenNebula</span> module. There are some pre-defined attributes, though.</p>
<p>Please check the <a class="wikilink1" href="http://www.opennebula.org/documentation:rel2.0:template" title="template">Virtual Machine definition file</a> reference for details on all the sections.</p>
<p>A basic VM template to be run using <span>KVM</span> could be this:<br />
	&nbsp;</p>
<pre>#---------------------------------------
# VM definition example
#---------------------------------------

NAME = &quot;<span>ttylinux</span>&quot;

CPU    = 0.5
MEMORY = 64

# --- disks ---

DISK = [
  source   = &quot;/<span>srv</span>/cloud/images/<span>ttylinux</span>/<span>ttylinux.img</span>&quot;,
  target   = &quot;<span>hda</span>&quot;,
  <span>readonly</span> = &quot;no&quot; ]

# --- 1 <span>NIC</span> ---

<span>NIC</span> = [ NETWORK=&quot;Red LAN&quot;]

FEATURES=[ <span>acpi</span>=&quot;no&quot; ]

# --- <span>VNC</span> server ---

GRAPHICS = [
  type    = &quot;<span>vnc</span>&quot;,
  listen  = &quot;127.0.0.1&quot;]
</pre><p>In the previous template <span>KVM</span> will <span>asume</span> that the image is RAW. If you have a image with the qcow2 format, you have to add the following to the DISK description: <span id="cke_bm_118S">&nbsp;</span><span id="cke_bm_121S">&nbsp;</span><span id="cke_bm_123S">&nbsp;</span><span id="cke_bm_119S">&nbsp;<span id="cke_bm_122S">&nbsp;</span><span id="cke_bm_120S">&nbsp;</span></span></p>
<pre>driver = &quot;qcow2&quot;<span id="cke_bm_123E"> </span><span id="cke_bm_121E"> </span><span id="cke_bm_120E"> </span><span id="cke_bm_119E"> </span><span id="cke_bm_118E"> </span></pre><p>Assuming we have a VM template called &quot;<span><span>ttylinux.one</span></span>&quot; describing a virtual machine. Then, we can allocate the VM in <span>OpenNebula</span> issuing a:</p>
<pre class="xterm">$ <span>onevm</span> create <span>ttylinux.one</span>
</pre><p>afterwards, the VM can be listed with the <code>list</code> option:</p>
<pre class="xterm">$ <span>onevm</span> list
   ID     USER     NAME STAT CPU     <span>MEM</span>        HOSTNAME        TIME
   45   <span>oneadmin</span> <span>ttylinux</span> runn&nbsp;&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp; 64M&nbsp;&nbsp;&nbsp;&nbsp; 192.168.1.5 00 05:19:31
</pre><h1>
	Managing the Image Repository</h1>
<p>The Image Repository system allows <span>OpenNebula</span> administrators and users to set up images, which can be operative systems or data, to be used in Virtual Machines easily. These images can be used by several Virtual Machines simultaneously, and also shared with other users.</p>
<h3>Create an OS Image</h3>
<p>This is what a sample template looks like:</p>
<pre class="xterm">$ cat <span>ubuntu.one.img</span>
NAME          = &quot;Ubuntu Desktop&quot;
PATH          = /home/cloud/images/ubuntu-desktop/<span>disk.0</span>
PUBLIC        = YES
DESCRIPTION   = &quot;Ubuntu 10.04 desktop for students.&quot;
</pre><p>To submit the template, you have to issue the command</p>
<pre class="xterm">$ oneimage register <span>ubuntu_img.one</span><span id="cke_bm_390E"> </span><span id="cke_bm_389E"> </span>
</pre><p class="xterm">You can use the <code><a class="wikilink1" href="http://www.opennebula.org/documentation:rel2.0:cli#oneimage" title="cli">oneimage list</a></code> command to check the available images in the repository.</p>
<pre class="xterm">$ oneimage list
  ID     USER                 NAME TYPE              REGTIME PUB PER STAT  #VMS
   1   carlos       Ubuntu Desktop   OS   Jul 11, 2010 15:17 Yes  No  rdy     0
</pre><p class="xterm">There other commands to manage the images sotored in the Image Repository:</p>
<ul>
<li class="xterm">Use the <code><a class="wikilink1" href="http://www.opennebula.org/documentation:rel2.0:cli#oneimage" title="cli">oneimage publish</a></code> and <code><a class="wikilink1" href="http://www.opennebula.org/documentation:rel2.0:cli#oneimage" title="cli">oneimage unpublish</a></code> commands to make your images public for every user to use in their virtual machines, or private.</li>
<li class="xterm">Use the <code><a class="wikilink1" href="http://www.opennebula.org/documentation:rel2.0:cli#oneimage" title="cli">oneimage persistent</a></code> and <code><a class="wikilink1" href="http://www.opennebula.org/documentation:rel2.0:cli#oneimage" title="cli">oneimage nonpersistent</a></code> commands to make your images persistent (they are not cloned, but rather used from the original image) or not. A persistent image cannot be published.</li>
</ul>
<h3 class="xterm">Using an Image Stored in the Repository</h3>
<p>The only difference with the previous VM template is that now, you only need to specify the name of the image that you want to use in the DISK section.</p>
<pre class="code">CPU    = 1
MEMORY = 512

DISK = [ image     = &quot;Ubuntu Desktop&quot; ]

<span>NIC</span>    = [ NETWORK = &quot;Public network&quot; ]
<span>NIC</span>    = [ NETWORK = &quot;Private network&quot; ]

# FEATURES=[ <span>acpi</span>=&quot;no&quot; ]

GRAPHICS = [ 
  type    = &quot;<span>vnc</span>&quot;,              
  listen  = &quot;1.2.3.4&quot;,
  port    = &quot;5902&quot;  ]
</pre><p class="xterm">Assuming that the template containing the previous information is called <span>template.one</span>, you can deploy the VM using the command:</p>
<pre class="xterm"><span>onevm</span> create <span>template.one</span>
</pre><h3 class="xterm">Save Changes</h3>
<p>Once the VM is deployed you can save the changes made to any disk as a new image. To do so, use the <code><a class="wikilink1" href="http://www.opennebula.org/documentation:rel2.0:cli#onevm" title="cli"><span>onevm</span> saveas</a></code> command. This command takes three or four arguments: The VM name (or ID), the disk_id to save, the name of the new image to register, and optionally the image type.</p>
<p>To know the DISK_ID of the disk you want to save, just take a look at the <code><a class="wikilink1" href="http://www.opennebula.org/documentation:rel2.0:cli#onevm" title="cli"><span>onevm</span> show</a></code> output for your VM.</p>
<p>The DISK_IDs are assigned in the same order the disks were defined in the <a class="wikilink1" href="http://www.opennebula.org/documentation:rel2.0:template" title="template">VM template</a>.</p>
<pre class="xterm">$ <span>onevm</span> saveas one-5 0 &quot;Ubuntu with Apache and MySQL&quot;
</pre><p>This will register a new image called &ldquo;Ubuntu with Apache and MySQL&rdquo;, that will be ready as soon as the VM is shut down.</p>
<p>The disks can be saved even if they were defined from a local disk file (see the <a class="wikilink1" href="http://www.opennebula.org/documentation:rel2.0:template" title="template">VM template</a> reference guide for more information on the different kinds of disks).</p>
<div class="stylefoot">
<div class="meta">
<div class="user">&nbsp;</div>
</div>
</div>
<h1>Managing Physical Hosts and Clusters</h1>
<p>(<a href="http://www.opennebula.org/documentation:rel2.0:cluster_guide">http://www.opennebula.org/documentation:rel2.0:cluster_guide</a>)</p>
<p>In order to use your existing physical nodes, you have to add them to the system as OpenNebula hosts. You need the following information:</p>
<ul>
<li class="level1">
<div class="li"><em>Hostname</em> of the cluster node or IP</div>
</li>
<li class="level1">
<div class="li"><em>Information Driver</em> to be used to monitor the host, e.g. <code>im_kvm</code>.</div>
</li>
<li class="level1">
<div class="li"><em>Storage Driver</em> to clone, delete, move or copy images into the host, e.g. <code>tm_nfs</code>.</div>
</li>
<li class="level1">
<div class="li"><em>Virtualization Driver</em> to boot, stop, resume or migrate VMs in the host, e.g. <code>vmm_kvm</code>.</div>
</li>
</ul>
<p><img alt=":!:" class="middle" src="http://www.opennebula.org/lib/images/smileys/icon_exclaim.gif" /> Before adding a host check that you can ssh to it without being prompt for a password</p>
<div class="level1">
<div class="level1">
<h2>Managing Hosts</h2>
<p>Hosts can be added to the system anytime with the <code><a class="wikilink1" href="http://www.opennebula.org/documentation:rel2.0:cli#onehost" title="cli">onehost</a></code> command. You can add the cluster nodes to be used by OpenNebula.</p>
<p>This is two example of adding a KVM host.</p>
</div>
</div>
<pre class="xterm">$ onehost create host01 im_kvm vmm_kvm tm_nfs

$ <span>onehost</span> create 192.168.1.5 <span>im_kvm</span> <span>vmm_kvm</span> <span>tm_nfs</span>
</pre><p>This is an example of adding a XEN host.</p>
<pre class="xterm">$ <span>onehost</span> create host02 <span>im_xen</span> <span>vmm_xen</span> <span>tm_nfs</span></pre><p>Note that in the two previous examples we are using tm_nfs. This means that OpenNebula is configured to share the VM directory or to use SSH with no share directory. Other option is the use of LVM. More information about the diferent storage system supported can be found in <a href="http://www.opennebula.org/documentation:rel2.0:sm">http://www.opennebula.org/documentation:rel2.0:sm</a></p>
<p>The status of the cluster can be checked with the <code><a class="wikilink1" href="http://www.opennebula.org/documentation:rel2.0:cli#onehost" title="cli">onehost list</a></code> command:</p>
<pre class="xterm">$ onehost list
  ID NAME                      CLUSTER                   RVM   TCPU   FCPU   ACPU    TMEM    FMEM STAT
   0 host01                    default                     2    100     90     90  523264  205824   on
   2 host02                    default                     0    100     99     99  523264  264192  off
   3 192.168.1.5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;         default&nbsp;&nbsp;&nbsp;                  1&nbsp;&nbsp;&nbsp; 400&nbsp;&nbsp;&nbsp; 400&nbsp;&nbsp;&nbsp; 350&nbsp;&nbsp;&nbsp; 7.7G&nbsp;&nbsp;&nbsp; 7.5G&nbsp;&nbsp; on
</pre><p>And specific information about a host with <code><a class="wikilink1" href="http://www.opennebula.org/documentation:rel2.0:cli#onehost" title="cli">show</a></code>:</p>
<pre class="xterm">$ onehost show 3
HOST 3 INFORMATION&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;
ID&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : 3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;
NAME&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : 192.168.1.5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;
CLUSTER&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : default&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;
STATE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : MONITORED&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;
IM_MAD&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : im_kvm&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;
VM_MAD&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : vmm_kvm&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;
TM_MAD&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : tm_nfs&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;

HOST SHARES&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;
MAX MEM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : 8043848&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;
USED MEM (REAL)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : 821384&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;
USED MEM (ALLOCATED)&nbsp; : 65536&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;
MAX CPU&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : 400&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;
USED CPU (REAL)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;
USED CPU (ALLOCATED)&nbsp; : 50&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;
RUNNING VMS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;

MONITORING INFORMATION&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;
ARCH=x86_64
CPUSPEED=2000
FREECPU=400.0
FREEMEMORY=7819560
HOSTNAME=fg-gravel5.futuregrid.iu.edu
HYPERVISOR=kvm
MODELNAME=Intel(R) Core(TM)2 Quad CPU Q9550 @ 2.83GHz
NETRX=144207042
NETTX=23584321
TOTALCPU=400
TOTALMEMORY=8043848
USEDCPU=0.0
USEDMEMORY=821384
</pre><p>If you want not to use a given host you can temporarily disable it:</p>
<p>&nbsp;</p>
<pre class="xterm">$ onehost disable host01
</pre><p>A disabled host should be listed with <code>STAT off</code> by <code>onehost list</code>. You can also remove a host permanently with:</p>
<p>&nbsp;</p>
<pre class="xterm">$ onehost delete host01
</pre><p>&nbsp;</p>
<div class="imp"><img alt=":!:" class="middle" src="http://www.opennebula.org/lib/images/smileys/icon_exclaim.gif" /> Detailed information of the <code>onehost</code> utility can be found <a class="wikilink1" href="http://www.opennebula.org/documentation:rel2.0:cli#onehost" title="cli">in the Command Line Reference</a></div>
<div class="imp">&nbsp;</div>
<p>If you use the <code><a class="wikilink1" href="http://www.opennebula.org/documentation:rel2.0:cli#onecluster" title="cli">onecluster list</a></code> command you will see that the &ldquo;default&rdquo; cluster is created automatically.</p>
<pre class="xterm">$ onecluster list
  ID     NAME
   0  default

$ onehost list
  ID NAME                      CLUSTER                   RVM   TCPU   FCPU   ACPU    TMEM    FMEM STAT
   0 ursa                      default                     0      0      0    100       0       0   on
   1 ursa01                    default                     0      0      0    100       0       0   on
   2 ursa02                    default                     0      0      0    100       0       0   on
   3 ursa03                    default                     0      0      0    100       0       0   on
   4 ursa04                    default                     0      0      0    100       0       0   on
</pre><p>You may want to isolate your physical hosts running virtual machines containing important services for you business, from the virtual machines running a development version of your software. The OpenNebula administrator can do so with these commands:</p>
<p>&nbsp;</p>
<pre class="xterm">$ onecluster create testing
$ onecluster create production

$ onecluster addhost ursa01 production
$ onecluster addhost ursa03 testing
$ onecluster addhost ursa04 testing

$ onehost list
  ID NAME                      CLUSTER                   RVM   TCPU   FCPU   ACPU    TMEM    FMEM STAT
   0 ursa                      default                     0      0      0    100       0       0   on
   1 ursa01                    production                  0      0      0    100       0       0   on
   2 ursa02                    default                     0      0      0    100       0       0   on
   3 ursa03                    testing                     0      0      0    100       0       0   on
   4 ursa04                    testing                     0      0      0    100       0       0   on
</pre><p>From this point, the newly created machines can use this cluster names as a <a class="wikilink1" href="http://www.opennebula.org/documentation:rel2.0:template#placement_section" title="template">placement requirement</a>:</p>
<p>&nbsp;</p>
<pre class="xterm">REQUIREMENTS = &quot;CLUSTER = \&quot;testing\&quot;&quot;
</pre><p>Once your development cycle is finished, this &ldquo;testing&rdquo; and &ldquo;production&rdquo; clusters may not be useful any more. Let&#39;s delete the testing cluster.</p>
<p>&nbsp;</p>
<pre class="xterm">$ onecluster delete testing
$ onehost list
  ID NAME                      CLUSTER                   RVM   TCPU   FCPU   ACPU    TMEM    FMEM STAT
   0 ursa                      default                     0      0      0    100       0       0   on
   1 ursa01                    production                  0      0      0    100       0       0   on
   2 ursa02                    default                     0      0      0    100       0       0   on
   3 ursa03                    default                     0      0      0    100       0       0   on
   4 ursa04                    default                     0      0      0    100       0       0   on
</pre><p>As you can see, the hosts assigned to the &ldquo;testing&rdquo; cluster have been moved to the &ldquo;default&rdquo; one.</p>
<div class="imp"><img alt=":!:" class="middle" src="http://www.opennebula.org/lib/images/smileys/icon_exclaim.gif" /> Detailed information of the <code>onecluster</code> utility can be found in the <a class="wikilink1" href="http://www.opennebula.org/documentation:rel2.0:cli#onecluster" title="cli">Command Line Reference</a></div>
<div class="user">&nbsp;</div>
<div class="user">&nbsp;</div>
<h1>Managing Virtual Networks</h1>
<p><a href="http://www.opennebula.org/documentation:rel2.0:vgg">(<a href="http://www.opennebula.org/documentation:rel2.0:vgg" title="http://www.opennebula.org/documentation:rel2.0:vgg">http://www.opennebula.org/documentation:rel2.0:vgg</a>)</a></p>
<p>A cluster node is connected to one or more networks that are available to the virtual machines through the corresponding bridges. To set up a virtual networks you just need to know the name of the bridge to bind the virtual machines to.</p>
<h2>Defining a Virtual Network</h2>
<p><span>OpenNebula</span> allows for the creation of Virtual Networks by mapping them on top of the physical ones. All Virtual Networks are going to share a default value for the MAC <span>preffix</span>, set in the <code><span>oned.conf</span></code> file.</p>
<p>There are two types of Virtual Networks in <span>OpenNebula</span>:</p>
<ol>
<li class="level1">
<div class="li"><strong>Fixed</strong>, defines a fixed set of IP-MAC pair addresses</div>
</li>
<li class="level1">
<div class="li"><strong>Ranged</strong>, defines a class network.</div>
</li>
</ol>
<div class="imp"><img alt=":!:" class="middle" src="http://www.opennebula.org/lib/images/smileys/icon_exclaim.gif" /> Virtual Networks created by <code><span>oneadmin</span></code> can be used by every other user.</div>
<div class="imp">&nbsp;</div>
<h3 class="imp">Fixed Virtual Network</h3>
<div class="imp">
<p>For example to create a Fixed Virtual Network, called <code>Public</code> with the set of public <span>IPs</span> to be used by the <span>VMs</span>, just create a file with the following contents:</p>
<pre class="code">NAME = &quot;Public&quot;
TYPE = FIXED

#We have to bind this network to &#39;&#39;<span>virbr1</span>&#39;&#39; for Internet Access
BRIDGE = <span>vbr1</span>

LEASES = [IP=130.10.0.1, MAC=50:20:20:20:20:20]
LEASES = [IP=130.10.0.2, MAC=50:20:20:20:20:21]
LEASES = [IP=130.10.0.3]
LEASES = [IP=130.10.0.4]
</pre></div>
<div class="imp">where <strong>LEASES</strong>: Definition of the IP-MAC pairs. If an IP is defined, and there is no associated MAC, <span>OpenNebula</span> will generate it using the following rule: <code>MAC = <span>MAC_PREFFIX</span>:IP</code>. So, for example, from IP 10.0.0.1 and <span>MAC_PREFFIX</span> 00:16, we get 00:16:<span>0a</span>:00:00:01. Defining only a MAC address with no associated IP is not allowed.</div>
<div class="imp">&nbsp;</div>
<h3 class="imp">Ranged Virtual Network</h3>
<p>The following is an example of a Ranged Virtual Network template:</p>
<pre class="code">NAME = &quot;Red LAN&quot;
TYPE = RANGED

# This vnet can be only used by the owner user
PUBLIC = NO

#Now we&#39;ll use the cluster private network (physical)
BRIDGE = vbr0

NETWORK_SIZE    = C
NETWORK_ADDRESS = 192.168.0.0
</pre><div class="meta">
<div class="user">where:</p>
<ul>
<li class="level1">
<div class="li"><strong>NETWORK_ADDRESS</strong>: Base network address to generate IP addresses.</div>
</li>
<li class="level1">
<div class="li"><strong>NETWORK_SIZE</strong>: Number of hosts that can be connected using this network. It can be defined either using a number or a network class (B or C).</div>
</li>
</ul>
<div class="li">
<div class="level1">
<h2>Adding and Deleting Virtual Networks</h2>
<p>Once a template for a VN has been defined, the <code>onevnet</code> command can be used to create it.</p>
<p>To create the previous networks put their definitions in two different files, <code>public.net</code> and <code>red.net</code>, respectively. Then, execute:</p>
<pre class="xterm">$ onevnet -v create public.net
$ onevnet -v create red.net
</pre><p>Also, <code>onevnet</code> can be used to query OpenNebula about available VNs:</p>
<pre class="xterm">$ onevnet list
  ID USER     NAME              TYPE BRIDGE P #LEASES
   2 oneadmin Public           Fixed   vbr1 Y       0
   3 oneadmin Red LAN         Ranged   vbr0 N       0
</pre><p>with <code>USER</code> the owner of the network and <code>#LEASES</code> the number of IP-MACs assigned to a VM from this network.</p>
<p>We can see the details of a particular VN:</p>
<pre>$onevnet show 0

VIRTUAL NETWORK 0 INFORMATION                                                   
ID:       : 0                   
UID:      : 0                   
PUBLIC    : N                   

VIRTUAL NETWORK TEMPLATE                                                        
BRIDGE=br1
LEASES=[ IP=192.168.1.7 ]
LEASES=[ IP=192.168.1.8 ]
LEASES=[ IP=192.168.1.9 ]
LEASES=[ IP=192.168.1.10 ]
NAME=Small LAN
TYPE=FIXED

LEASES INFORMATION                                                              
LEASE=[ IP=192.168.1.7, MAC=02:00:c0:a8:01:07, USED=1, VID=54 ]
LEASE=[ IP=192.168.1.8, MAC=02:00:c0:a8:01:08, USED=1, VID=45 ]
LEASE=[ IP=192.168.1.9, MAC=02:00:c0:a8:01:09, USED=0, VID=-1 ]
LEASE=[ IP=192.168.1.10, MAC=02:00:c0:a8:01:0a, USED=0, VID=-1 ]

</pre><p>To delete a virtual network just use <code>onevnet delete</code>. For example to delete the previous networks:</p>
<pre class="xterm">$onevnet delete 2
$onevnet delete &#39;Red LAN&#39;
</pre><div class="imp">
<p><img alt=":!:" class="middle" src="http://www.opennebula.org/lib/images/smileys/icon_exclaim.gif" /> Check the <code>onevnet</code> command help or <a class="wikilink1" href="http://www.opennebula.org/documentation:rel2.0:cli#onevnet" title="cli">reference guide</a> for more options to list the virtual networks.</p>
</div>
</div>
<h2>Using the Leases Within the Virtual Machine</h2>
<div class="level1">
<p>Hypervisors can attach a specific MAC address to a virtual network interface, but Virtual Machines need to obtain an IP address. There are a variety of ways to achieve this within OpenNebula:</p>
<ul>
<li class="level1">
<div class="li">Obtain the IP from the MAC address, using the default MAC assignment schema (<strong>PREFERRED</strong>)</div>
</li>
</ul>
<ul>
<li class="level1">
<div class="li">Use the <code>CONTEXT</code> attribute, check the <a class="wikilink1" href="http://www.opennebula.org/documentation:rel2.0:cong" title="cong">Contextualization Guide</a></div>
</li>
</ul>
</div>
<h3>Configuring the Virtual Machine to Use the Leases</h3>
<div class="level2">
<p>Please visit the <a class="wikilink1" href="http://www.opennebula.org/documentation:rel2.0:cong" title="cong">contextualization guide</a> to learn how to configure your Virtual Machines.</p>
<h1>Accounting</h1>
<p>(<a href="http://opennebula.org/documentation:rel2.0:accounting">http://opennebula.org/documentation:rel2.0:accounting</a>)</p>
<h2>Physical Resources</h2>
<div class="level1">
<p>Usage of a physical resource can be obtained for a given user or a given virtual machine. Accounting reports always show aggregated information, considering possible migration of a virtual machine to between physical resources.</p>
</div>
<div class="level2">
<p><code>oneacct host</code> - prints accounting information for the physical resources</p>
<p>Obtaining the accounting information for user john</p>
<pre class="xterm">$ oneacct host -u john
    HOST       XFR      RUNN  VMS
     sun  00:00:05  00:18:40    2
   rigil  00:00:05  00:00:02    1
 schedar  00:00:02 198:17:53    1
</pre><p>The columns are:</p>
<ul>
<li class="level1">
<div class="li">XFR: Total transfer time. It includes cloning VM disk images in the target resource and transfer back of modified images when applicable</div>
</li>
<li class="level1">
<div class="li">RUNN: Total running time. It includes boot, running and saving times</div>
</li>
<li class="level1">
<div class="li">VMS: Total number of virtual machines</div>
</li>
</ul>
<p>Obtaining accounting information for host</p>
<pre class="xterm">$ oneacct host -r rigil
    USER       XFR      RUNN  VMS
   admin  00:00:05  00:00:02    1
    hugo  00:00:02 194:25:30    1
</pre></div>
<h2><span id="cke_bm_385S">&nbsp;</span><span id="cke_bm_386S">&nbsp;</span>Virtual Resources</h2>
<div class="level1">
<p>Accounting information for Virtual Machines can be obtained for a given user or a given virtual machine.</p>
<p>The current version of the virtual resources reports does not consider possible migration of a virtual machine to between physical resources.</p>
</div>
<p><code>oneacct vm</code> - prints accounting information for virtual machines</p>
<div class="level2">
<p>Obtaining the accounting information for a given VM</p>
</div>
<div class="level2">
<pre class="xterm">$ oneacct vm 2
    HOST       XFR      RUNN
     sun  00:00:01  00:00:21
 schedar  00:00:02 198:17:53
</pre><p>The columns are:</p>
<ul>
<li class="level1">
<div class="li">HOST: where the VM has been executed</div>
</li>
<li class="level1">
<div class="li">XFR: Total transfer time in that host</div>
</li>
<li class="level1">
<div class="li">RUNN: Total running time in the host</div>
</li>
</ul>
<p>Obtaining the accounting information for a given host</p>
<pre class="xterm">$ oneacct vm -r rigil
VMID     NAME       XFR      RUNN
   5      xee         2 194:25:30
   6      phi         5  00:00:02
</pre><p>Obtaining the accounting information for a given user</p>
<pre class="xterm">$ oneacct vm -u carroll
VMID     NAME       XFR      RUNN    HOSTS
   3 Ubuntu-9  00:00:01  00:02:54        3
   4 Ubuntu-9  00:00:00  00:00:10        2
</pre><p>In this last example columns show aggregated transfer and running times.</p>
</div>
<div class="level1"><span id="cke_bm_386E">&nbsp;</span><span id="cke_bm_385E"> </span></div>
</div>
</div>
</div>
</div>
<h1>User Management</h1>
<p>(<a href="http://www.opennebula.org/documentation:rel2.0:users">http://<span><span><span>www.opennebula.org</span></span></span>/documentation:<span><span><span>rel2.0</span></span></span>:users)</a></p>
<h2>Adding New Users</h2>
<p>Current Authentication/Authorization module (from now on <span><span>auth</span></span> module) has support for user/password and <span><span>rsa</span></span> private/public key authentication and also user quota support. Here, we are going to talk about the <span><span>SSH</span></span> module and how to add users using <span><span>SSH</span></span> keys. More information can be found in the official documentation: <a href="http://www.opennebula.org/documentation:rel2.0:users">http://<span><span>www.opennebula.org</span></span>/documentation:<span><span>rel2.0</span></span>:users </a></p>
<h3>Public Key Extraction (Done by Users)</h3>
<p>To create a user compatible with <code><span><span>ssh</span></span></code> option for authentication the administrator needs to add the user&#39;s public key into the database. The file with public key generated by <code><span><span>ssh-keygen</span></span></code> (<code>$HOME/<span><span>.ssh</span></span>/<span><span>id_rsa.pub</span></span></code>) is written in a format readable by <code><span><span>openssl</span></span></code> so the public key should be extracted by the user and sent to the administrator. The way to extract it is the following:</p>
<pre class="code">$ <span><span>oneauth</span></span> key
Enter <span><span>PEM</span></span> pass phrase:
<span><span>MIIBCAKCAQEApUO</span></span>+<span><span>JISjSf02rFVtDr1yar</span></span>/<span><span>34EoUoVETx0n</span></span>+<span><span>RqWNav</span></span>+<span><span>5wi</span></span>+<span><span>gHiPp3e03AfEkXzjDYi8F</span></span>
<span><span>voS4a4456f1OUQlQddfyPECn59OeX8Zu4DH3gp1VUuDeeE8WJWyAzdK5hg6F</span></span>+<span><span>RdyP1pT26mnyunZB8Xd</span></span>
<span><span>bll8seoIAQiOS6tlVfA8FrtwLGmdEETfttS9ukyGxw5vdTplse</span></span>/<span><span>fcam</span></span>+<span><span>r9AXBR06zjc77x</span></span>+<span><span>DbRFbXcgI</span></span>
<span><span>1XIdpVrjCFL0fdN53L0aU7kTE9VNEXRxK8sPv1Nfx</span></span>+<span><span>FQWpX</span></span>/<span><span>HtH8ICs5WREsZGmXPAO</span></span>/<span><span>IkrSpMVg5taS</span></span>
<span><span>jie9JAQOMesjFIwgTWBUh6cNXuYsQ</span></span>/<span><span>5wIwIBIw</span></span><h2>
</pre><p>The string the user has to send to the administrator to create the user is written to the console.</p>
<h3>User Creation (done by the administrator)</h3>
<p>After the user sends the <span><span>rsa</span></span> public key the administration needs to create a new account in <span><span>OpenNebula</span></span> system. This is done in a similar way as <span><span>standard</span></span> user/password users but using the public key provided by the user and adding a parameter to the command so the password (in this case the public key) is stored as is in the database. Here is the command to create a user called <code>test</code> with the previously extracted public key:</p>
<pre class="code">$ <span><span>oneuser</span></span> create -n test &quot;<span><span>MIIBCAKCAQEApUO</span></span>+<span><span>JISjSf02rFVtDr1yar</span></span>/<span><span>34EoUoVETx0n</span></span>+<span><span>RqWNav</span></span>+<span><span>5wi</span></span>+<span><span>gHiPp3e03AfEkXzjDYi8F</span></span>
<span><span>voS4a4456f1OUQlQddfyPECn59OeX8Zu4DH3gp1VUuDeeE8WJWyAzdK5hg6F</span></span>+<span><span>RdyP1pT26mnyunZB8Xd</span></span>
<span><span>bll8seoIAQiOS6tlVfA8FrtwLGmdEETfttS9ukyGxw5vdTplse</span></span>/<span><span>fcam</span></span>+<span><span>r9AXBR06zjc77x</span></span>+<span><span>DbRFbXcgI</span></span>
<span><span>1XIdpVrjCFL0fdN53L0aU7kTE9VNEXRxK8sPv1Nfx</span></span>+<span><span>FQWpX</span></span>/<span><span>HtH8ICs5WREsZGmXPAO</span></span>/<span><span>IkrSpMVg5taS</span></span>
<span><span>jie9JAQOMesjFIwgTWBUh6cNXuYsQ</span></span>/<span><span>5wIwIBIw</span></span></h2>&quot;
</pre><p>After this the administrator can check that the user is in the system:</p>
<pre class="code">$ <span><span>oneuser</span></span> list
  ID USER            PASSWORD                                          
   0 <span><span>oneadmin</span></span>        <span><span>5baa61e4c9b93f3f0682250b6cf8331b7ee68fd8</span></span>          
   1 test            <span><span>MIIBCAKCAQEApUO</span></span>+<span><span>JISjSf02rFVtDr1yar</span></span>/<span><span>34EoUoVETx0n</span></span>+<span><span>Rq</span></span>
</pre><h3>User Login (Done by Users)</h3>
<div class="level3">
<p>Before performing any action in <span><span>OpenNebula</span></span> system the user needs to login. To do this we must issue this command:</p>
<pre class="code">$ <span><span>oneauth</span></span> login test
Enter <span><span>PEM</span></span> pass phrase:
export <span><span>ONE_AUTH</span></span>=/home/test/.one/<span><span>one_ssh</span></span>
</pre><p>The command on success will print the command needed to execute so <span><span>OpenNebula</span></span> knows where to find the login file generated.</p>
<pre class="code">$ export <span><span>ONE_AUTH</span></span>=/home/test/.one/<span><span>one_ssh</span></span>
</pre><p>This line can also be added by the user to $HOME/.profile or $HOME/<span><span>.bashrc</span></span> so it is not needed to be executed every new system login.</p>
<p>By default the login file will be valid for one hour. This expire time can be changed adding another parameter with the number of seconds you want the login to be valid. For example to create a 2 hours valid login you can issue this command:</p>
<pre class="code">$ <span><span>oneauth</span></span> login test 7200
Enter <span><span>PEM</span></span> pass phrase:
export <span><span>ONE_AUTH</span></span>=/home/test/.one/<span><span>one_ssh</span></span>
</pre></div>
<p>&nbsp;</p>
<h2>Quota</h2>
<p>When quota module is enabled it checks for user resource consumption before letting a VM to created in <span><span>OpenNebula</span></span> system. You have to take into account that all resources for <span><span>VMs</span></span> listed by <code><span><span>onevm</span></span> list</code> for a user are counted as used. Administrator user has unlimited quota.</p>
<h3>Quotas Database Security (Done by the Administrator)</h3>
<div class="level3">
<p>By default user quota database is an <em><span><span>sqlite</span></span></em> database located at <code>$ONE_LOCATION/<span><span>var</span></span>/<span><span>auth.db</span></span></code>. This database on creation does not have secure permissions and the administrator may change its permission and maybe its location. To change its location you can use a full path to the database in the <span><span>auth</span></span> module configuration file:</p>
<pre class="code bash">:database: <span><span>sqlite</span></span>:<span class="sy0">///</span>somewhere<span class="sy0">/</span>in<span class="sy0">/</span>your<span class="sy0">/</span><span><span>hdd</span></span><span class="sy0">/</span><span><span>auth.db</span></span>
...</pre><p>You may also change its permissions to <code>0600</code> so the <span><span>unix</span></span> user that runs <span><span>OpenNebula</span></span> daemons is the only with read/write access permissions.</p>
<h3>Default Quotas (Done by the Administrator)</h3>
</div>
<div class="level3">
<p>Default quotas for all users are configured as previously stated in <em>Configuring and Enabling <span><span>Auth</span></span> Module</em>. This is the first configuration you will have to do if you enable quota system as any user without explicit quotas can only use that amount of resources.</p>
</div>
<h3>Explicit User Quotas (Done by the Administrator)</h3>
<div class="level3">
<p>Setting special quotas for a user can be done using <code><span><span>oneauth</span></span></code> command. If you have secured the database only <span><span>unix</span></span> user that runs <span><span>OpenNebula</span></span> will be able to update them. The steps to change permissions for a user are as follows:</p>
<ul>
<li class="level1">
<div class="li">Find the user id for the user we want to change limits. We are searching for user <code>test</code>:</div>
</li>
</ul>
<pre class="code">$ <span><span>oneuser</span></span> list
  ID USER            PASSWORD                                          
   0 <span><span>oneadmin</span></span>        <span><span>5baa61e4c9b93f3f0682250b6cf8331b7ee68fd8</span></span>          
   1 test            <span><span>MIIBCAKCAQEApUO</span></span>+<span><span>JISjSf02rFVtDr1yar</span></span>/<span><span>34EoUoVETx0n</span></span>+<span><span>Rq</span></span>
</pre><ul>
<li class="level1">
<div class="li">The user id for <code>test</code> is 1. Now we use <code><span><span>oneauth</span></span> quota set &lt;user id&gt; &lt;<span><span>cpu</span></span>&gt; &lt;memory&gt;</code> to change user limits:</div>
</li>
</ul>
<pre class="code">$ <span><span>oneauth</span></span> quota set 1 20 10000000</pre></div>
<p>&nbsp;</p>
  </div>
</div>
<div id="node-1329" class="section-2">
  <h1 class="book-heading">PaaS - Platform as a Service</h1>
  This chapter contains information in regards to Platform as a Service offerings on FutureGrid  <div id="node-1171" class="section-3">
  <h1 class="book-heading">Using Map/Reduce in FutureGrid</h1>
  As the computing landscape becomes increasingly data-centric, data-intensive computing environments are poised to transform scientific research. In particular, MapReduce based programming models and run-time systems such as the open-source Hadoop system have increasingly been adopted by researchers with data-intensive problems, in areas including bio-informatics, data mining and analytics, and text processing.&nbsp;<br />
<br />
FutureGrid&nbsp;provides capabilities that allow users to experiment with MapReduce applications and middleware, including the widely-used Hadoop&nbsp;platform and the iterative map/reduce Twister plaftorm. There are different ways you may want to use MapReduce platforms in the testbed. This page guides you in selecting from FutureGrid capabilities that are best suited depending on your goals, and links to respective tutorials:
<h2>
	<br />
	MapReduce&nbsp;on Physical Machines</h2>
<br />
While there exist MapReduce systems that run on virtual machines, many dedicated Hadoop deployments run the Hadoop run-time and data-processing applications on physical machines to avoid I/O virtualization overheads. Currently, we have two major approaches for deploying Hadoop on physical machines in FutureGrid: The first uses &quot;MyHadoop&quot;, where Hadoop tasks are instantiated dynamically using an HPC scheduler (Torque). The second uses &quot;SalsaHadoop&quot;, where Hadoop starts with a &#39;one-click script&#39; automatically on obtained HPC nodes and tasks&nbsp;are submitted to the Hadoop&nbsp;master directly. In addition, FutureGrid also supports Twister, a lightweight iterative MapReduce runtime, running on the HPC cluster.&nbsp;<br />
<br />
Associated tutorials:<br />
<ul>
	<li>
		<a href="https://portal.futuregrid.org/tutorials/hpc">Basic High Performance Computing</a>&nbsp;[novice]</li>
	<li>
		<a href="https://portal.futuregrid.org/tutorials/running-hadoop-batch-job-using-myhadoop">Running Hadoop as a batch job using MyHadoop</a>&nbsp;[novice]</li>
	<li>
		<a href="https://portal.futuregrid.org/salsahadoop-futuregrid-hpc">Running SalsaHadoop&nbsp;(one-click Hadoop) on HPC environment</a> [beginner]</li>
	<li>
		<a href="https://portal.futuregrid.org/twister-futuregrid-hpc">Running Twister on HPC environment</a> [beginner]</li>
</ul>
<h2>
	<br />
	MapReduce&nbsp;on Virtual Machines</h2>
<br />
Running Hadoop on virtual machines gives users the flexibility to customize the Hadoop runtime system and any additional middleware as desired, e.g. for research on novel MapReduce middleware approaches. Currently, Hadoop images can be deployed on FutureGrid resources in the following ways:<br />
<br />
<ul>
	<li>
		<a href="https://portal.futuregrid.org/tutorials/eucalyptus">Using</a><a href="https://portal.futuregrid.org/tutorials/eucalyptus">&nbsp;Eucalyptus on FutureGrid</a><a href="https://portal.futuregrid.org/tutorials/eucalyptus">&nbsp;[novice]</a></li>
	<li>
		<a href="https://portal.futuregrid.org/salsahadoop-futuregrid-cloud-eucalyptus">Running SalsaHadoop&nbsp;on Eucalyptus</a> [intermediate]</li>
	<li>
		<a href="https://portal.futuregrid.org/tutorials/eucalyptus-and-twister-futuregrid">Running FG-Twister on Eucalyptus</a>&nbsp;[intermediate]</li>
	<li>
		<a href="https://portal.futuregrid.org/twister-futuregrid-cloud-eucalyptus">Running Twister on Eucalyptus</a> [intermediate]</li>
</ul>
<br />
<h2>
	Education / Training with MapReduce</h2>
<br />
FutureGrid offers educational virtual appliances that allow users to deploy virtual private clusters where Hadoop tasks can be deployed using Condor. This approach allows users to not only experiment with Hadoop on FutureGrid, but also with virtual clusters, on their own resources. Currently, Hadoop virtual appliances can be deployed on FutureGrid resources in the following ways:<br />
<br />
<ul>
	<li>
		<a href="http://portal.futuregrid.org/tutorials/ga9">Running a Grid Appliance on FutureGrid</a>&nbsp;[novice]</li>
	<li>
		<a href="http://portal.futuregrid.org/tutorials/ga8">Running Condor tasks on the Grid Appliance</a>&nbsp;[novice]</li>
	<li>
		<a href="http://portal.futuregrid.org/tutorials/ga10">Running Hadoop&nbsp;tasks on the Grid Appliance</a>&nbsp;[novice]</li>
	<li>
		<a href="https://portal.futuregrid.org/hadoop-wordcount">Running Hadoop WordCount&nbsp;on FutureGrid</a> [novice]</li>
	<li>
		<a href="https://portal.futuregrid.org/hadoop-blast">Running Hadoop Blast on FutureGrid</a> [novice]</li>
	<li>
		<a href="https://portal.futuregrid.org/twister-kmeans">Running Twister Kmeans on FutureGrid</a> [novice]</li>
	<li>
		<a href="https://portal.futuregrid.org/twister-blast">Running Twister Blast on FutureGrid</a> [novice]</li>
</ul>  </div>
<div id="node-1138" class="section-3">
  <h1 class="book-heading">Running Hadoop as a Batch Job using MyHadoop</h1>
  <p><img alt="" height="70" src="https://portal.futuregrid.org/sites/default/files/resize/myHadoop-300x70.png" style="float: left; width: 300px; height: 70px;" width="300" />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <img alt="Hadoop logo" src="http://hadoop.apache.org/images/hadoop-logo.jpg" style="float: right; width: 300px; height: 71px;" /></p>
<h1>
	&nbsp;</h1>
<h1>
	Overview</h1>
<p>MapReduce is a programming model developed by Google<strong>. </strong>Their definition of MapReduce is as follows: &nbsp;&quot;MapReduce is a programming model and an associated implementation for processing and generating large data sets. Users specify a map function that processes a key/value pair to generate a set of intermediate key/value pairs, and a reduce function that merges all intermediate values associated with the same intermediate key.&quot; &nbsp;For more information about MapReduce, please see the Google paper <a href="http://labs.google.com/papers/mapreduce.html">here</a>.</p>
<p>The <a href="http://hadoop.apache.org">Apache&nbsp;Hadoop&nbsp;Projec</a>t provides an open source implementation of&nbsp;MapReduce&nbsp;and&nbsp;HDFS&nbsp;(Hadoop&nbsp;Distributed File System). &nbsp;&nbsp;</p>
<p>This tutorial illustrates how to run Apache Hadoop thru the batch systems on FutureGrid using the MyHadoop tool. &nbsp;</p>
<h1>
	Hadoop on FutureGrid</h1>
<p>Hadoop 0.20.2 is currently installed on Alamo, Hotel, India, and Sierra FutureGrid systems. &nbsp;Please see the <a href="https://portal.futuregrid.org/gettingstarted">Getting Started guide</a> to get accounts on those systems.</p>
<h1>
	What is myHadoop?</h1>
<p><a href="http://sourceforge.net/projects/myhadoop/">MyHadoop</a>&nbsp;is a set of scripts that configure and instantiate&nbsp;Hadoop&nbsp;as a batch job.&nbsp;</p>
<h1>
	Running myHadoop on FutureGrid</h1>
<p>To run the example, use the following steps.</p>
<ol>
<li>
		Log into a FutureGrid system that has myHadoop available. &nbsp;In this tutorial, we are executing from the Hotel machine.</p>
<pre>
$ ssh hotel.futuregrid.org
This machine accepts SSH public key and One Time Password (OTP) logins only.
If you do not have a public key set up, you will be prompted for a password.
This is *not* your FutureGrid password, but the One Time Password generated from your
OTP token.  Do not type your FutureGrid password, it will not work.  If you do not
have a token or public key, you will not be able to login.
[gvonlasz@login1 ~]$
</pre></li>
<li>
		Load the myHadoop module. &nbsp;On some FutureGrid systems, you may also need to load the &quot;torque&quot; module as well if qstat&nbsp;is not already in your environment.</p>
<pre>
[gvonlasz@login1 ~]$ module load myhadoop
SUN Java JDK version 1.6.0 (x86_64 architecture) loaded
Apache Hadoop Common version 0.20.203.0 loaded
myHadoop version 0.2a loaded
[gvonlasz@login1 ~]$ 
</pre></li>
<li>
		To run the example now, skip to step 9. &nbsp;Otherwise, view the pbs-example.sh script located in $MY_HADOOP_HOME/pbs-example.sh. &nbsp;At the top of the file, you will see standard batch directives indicating which queue to run the Hadoop job, how many nodes, etc.</li>
<li>
<pre>
#PBS -q batch
#PBS -N hadoop_job
#PBS -l nodes=4:ppn=8
#PBS -o hadoop_run.out
#PBS -e hadoop_run.err
#PBS -V
</pre></li>
<li>
		Next, there is a line to load Java via modules under the above lines:</p>
<pre>
module add java
</pre></li>
<li>
		In the example script, a temporary directory to store Hadoop configuration files is specified as&nbsp;${HOME}/myHadoop-config&nbsp;(although any globally accessible place is fine):</p>
<pre>
#### Set this to the directory where Hadoop configs should be generated
# Don&#39;t change the name of this variable (HADOOP_CONF_DIR) as it is
# required by Hadoop - all config files will be picked up from here
#
# Make sure that this is accessible to all nodes
export HADOOP_CONF_DIR=&quot;${HOME}/myHadoop-config&quot;
</pre></li>
<li>
		The pbs-example.sh script runs the &quot;wordcount&quot; program from the&nbsp;hadoop-0.20.2-examples.jar. &nbsp;There is sample text data from the <a href="http://www.gutenberg.org/">Project Gutenberg website</a>&nbsp;located a $MY_HADOOP_HOME/gutenberg.</p>
<pre>
-bash-3.2$ ls $MY_HADOOP_HOME/gutenberg
1342.txt.utf8</pre></li>
<li>
		The following lines create a Data directory in HDFS (directory specified in $MY_HADOOP_HOME/bin/setenv.sh), copies over the gutenberg data, executes the Hadoop job, and then copies the output back your ${HOME}/Hadoop-Outputs directory. &nbsp;</p>
<pre>
#### Run your jobs here
echo &quot;Run some test Hadoop jobs&quot;
$HADOOP_HOME/bin/hadoop --config $HADOOP_CONF_DIR dfs -mkdir Data
$HADOOP_HOME/bin/hadoop --config $HADOOP_CONF_DIR dfs -copyFromLocal $MY_HADOOP_HOME/gutenberg Data
$HADOOP_HOME/bin/hadoop --config $HADOOP_CONF_DIR dfs -ls Data/gutenberg
$HADOOP_HOME/bin/hadoop --config $HADOOP_CONF_DIR jar $HADOOP_HOME/hadoop-0.20.2-examples.jar wordcount Data/gutenberg Outputs
$HADOOP_HOME/bin/hadoop --config $HADOOP_CONF_DIR dfs -ls Outputs
$HADOOP_HOME/bin/hadoop --config $HADOOP_CONF_DIR dfs -copyToLocal Outputs ${HOME}/Hadoop-Outputs
</pre></li>
<li>
		Now submit the pbs-example.sh script to Hotel:</p>
<pre>
[gvonlasz@login1 ~]$ qsub $MY_HADOOP_HOME/pbs-example.sh 
40256.svc.uc.futuregrid.org
</pre></li>
<li>
		The job will take about 5 minutes to complete. &nbsp;To monitor its status, type &#39;qstat&#39;. &nbsp;The &quot;R&quot; means the job is running.</p>
<pre>
[gvonlasz@login1 ~]$ qstat
Job id                    Name             User            Time Use S Queue
------------------------- ---------------- --------------- -------- - -----
40256.svc                  hadoop_job       gvonlasz               0 R batch                  
</pre></li>
<li>
		When it is done, the status of the job will be &quot;C&quot; meaning the job has completed (or it will no longer be displayed in qstat output). &nbsp;You should see a new hadoop_run.out file and an &quot;Hadoop-Outputs&quot; directory :</p>
<pre>
[gvonlasz@login1 ~]$ qstat
Job id                    Name             User            Time Use S Queue
------------------------- ---------------- --------------- -------- - -----
40256.svc                  hadoop_job       gvonlasz       00:00:05 C batch                   
-bash-3.2$ ls
Hadoop-Outputs hadoop_run.out
</pre></li>
<li>
		View results of the word count operation:</p>
<pre>
[gvonlasz@login1 ~]$ head Hadoop-Outputs/part-r-00000  
&quot;&#39;After	1
&quot;&#39;My	1
&quot;&#39;Tis	2
&quot;A	12
&quot;About	2
&quot;Ah!	2
&quot;Ah!&quot;	1
&quot;Ah,	1
&quot;All	2
&quot;All!	1</pre></li>
</ol>
<p>Now to run you own custom Hadoop job, make a copy of the $MY_HADOOP_HOME/pbs-example.sh script and modify the lines described in Step 7.</p>
<h1>
	Persistent Mode</h1>
<p>The above example copies input to local HDFS scratch space you specified in $MY_HADOOP_HOME/bin/setenv.sh, runs MapReduce, and copies output from HDFS back to your home directory. &nbsp;This is called non-persistent mode and is good for small amounts of data. &nbsp;Alternatively, you can run in persistent mode which is good if you have access to a parallel file system or have a large amount of data that will not fit in scratch space. &nbsp;To enable persistent mode, follow the directions in pbs-example.sh.</p>
<h1>
	Customizing Hadoop&nbsp;Settings</h1>
<p>To modify any of the Hadoop settings like&nbsp;maximum_number_of_map_task, maximum_number_of_reduce_task, etc., make you own copy of myHadoop and customize the settings accordingly. &nbsp;For example:</p>
<ol>
<li>
		Copy the $MY_HADOOP_HOME directory to your home directory</p>
<pre>
-bash-3.2$ cp -r $MY_HADOOP_HOME $HOME/myHadoop</pre></li>
<li>
		Then edit $HOME/myHadoop/pbs-example.sh and on line 16, replace it with:</p>
<pre>
. ${HOME}/myHadoop/bin/setenv.sh</pre></li>
<li>
		Similarly edit $HOME/myHadoop/bin/setenv.sh and on line 4, replace it with:</p>
<pre>
export MY_HADOOP_HOME=$HOME/myHadoop</pre></li>
<li>
<p>Customize the settings in the Hadoop files as needed in $HOME/myHadoop/etc</p>
</li>
<li>
		Submit your copy of pbs-example.sh:</p>
<pre>
-bash-3.2$ qsub $HOME/myHadoop/pbs-example.sh</pre></li>
</ol>
<h1>
	Using a Different Installation of Hadoop</h1>
<p>If you would like to use a different version of my Hadoop or have customized the Hadoop code in some way, you can specify a different installation of Hadoop by redefining the HADOOP_HOME variable after $MY_HADOOP_HOME/bin/setenv.sh is called within your own copy of pbs-example.sh. &nbsp;</p>
<pre>
### Run the myHadoop environment script to set the appropriate variables
#
# Note: ensure that the variables are set correctly in bin/setenv.sh
. /opt/myHadoop/bin/setenv.sh
export HADOOP_HOME=${HOME}/my-custom-hadoop
</pre><h1>
	More Information</h1>
<p>For more information about how myHadoop works, please see the documentation in $MY_HADOOP_HOME/docs/myHadoop.pdf&nbsp;</p>
  </div>
<div id="node-1314" class="section-3">
  <h1 class="book-heading">Using SalsaHadoop on FutureGrid</h1>
  PLEASE NOTE: THIS MANUAL PAGE IS A DRAFT, PLEASE PROVIDE FEEDBACK IN THE COMMENT SECTION.<br />
	&nbsp;
<h2>
	SalsaHadoop Introduction</h2>

	Apache Hadoop is widely used by domain scientists for running their scientific&nbsp;applications in parallel fashion. For our research convenience, SalsaHPC research group develops SalsaHadoop, an automatic method to start Hadoop without worrying the Hadoop configuration, can be running on any general cluster and multiple machines. SalsaHadoop has been used by <a href="http://salsahpc.indiana.edu/">SalsaHPC&nbsp;research group</a> and a graduate-level course <a href="http://salsahpc.indiana.edu/csci-b649-2011/">CSCI B649 Cloud Computing for Data Intensive Sciences</a>.&nbsp;<br />
	<br />
	<h2>
		Running SalsaHadoop on FutureGrid</h2>
	SalsaHadoop can be run in various modes within FG&nbsp;either in FutureGrid HPC and FutureGrid Cloud/IaaS environments. The following tutorials provide step-by-step instructions to use SalsaHadoop on these modes, and also it shows some examples of running Hadoop applications after starting Hadoop. In general, the HPC environment is easier if you do not have experience with IaaS Eucalyptus.&nbsp;
<ul>
	<li>
		SalsaHadoop on FutureGrid
		<ul>
			<li>
				<a href="https://portal.futuregrid.org/salsahadoop-futuregrid-hpc">SalsaHadoop with FutureGrid HPC</a>&nbsp;[recommended]
				<ul>
					<li>
						<a href="https://portal.futuregrid.org/salsahadoop-futuregrid-hpc#HPC_Nodes">Get HPC compute nodes</a></li>
					<li>
						<a href="https://portal.futuregrid.org/salsahadoop-futuregrid-hpc#Configuration">Hadoop Configuration</a></li>
					<li>
						<a href="https://portal.futuregrid.org/salsahadoop-futuregrid-hpc#Verify">Verify Hadoop HDFS and MapReduce Daemon status</a></li>
				</ul>
			</li>
			<li>
				<a href="https://portal.futuregrid.org/salsahadoop-futuregrid-cloud-eucalyptus">SalsaHadoop with FutureGrid Cloud Eucalyptus</a>
				<ul>
					<li>
						<a href="https://portal.futuregrid.org/salsahadoop-futuregrid-cloud-eucalyptus#VM_Nodes">Get VM compute nodes</a>
						<ul>
							<li>
								<a href="https://portal.futuregrid.org/salsahadoop-futuregrid-cloud-eucalyptus#VM_Nodes_Set">VM Hostname setting</a></li>
							<li>
								<a href="https://portal.futuregrid.org/salsahadoop-futuregrid-cloud-eucalyptus#Euca_Disk">VM attached disk configuration</a></li>
						</ul>
					</li>
					<li>
						<a href="https://portal.futuregrid.org/salsahadoop-futuregrid-cloud-eucalyptus#Configuration">Hadoop Configuration</a>&nbsp;(same as above with different masters and slaves hostname)</li>
					<li>
						<a href="https://portal.futuregrid.org/salsahadoop-futuregrid-cloud-eucalyptus#Verify">Verify Hadoop HDFS and MapReduce Daemon status</a></li>
				</ul>
			</li>
			<li>
				Run SalsaHadoop Applications
				<ul>
					<li>
						<a href="https://portal.futuregrid.org/tutorials/one-click-hadoop-wordcount-eucalyptus-futuregrid">Hadoop WordCount</a></li>
					<li>
						<a href="https://portal.futuregrid.org/manual/hadoop-blast">Hadoop Blast</a></li>
				</ul>
			</li>
			<li>
				Run Hadoop with static FutureGrid-Bravo&nbsp;HDFS*</li>
		</ul>
	</li>
</ul>  </div>
<div id="node-1336" class="section-3">
  <h1 class="book-heading">Hadoop Blast</h1>
  Number:<br />
Author: Tak-Lon Stephen Wu<br />
Improvements:&nbsp;<br />
Version: 0.1<br />
Date: 2011-11-01<br />
<h2>
	Hadoop Blast</h2>
<p>BLAST (Basic Local Alignment Search Tool) is one of the most widely used bioinformatics applications written in C++, and&nbsp;the version we are using is v2.2.23. Hadoop Blast is an advanced Hadoop program which helps Blast, a bioinformatics application, utilizes the Computing Capability of Hadoop. The database used in the following settings is a subset (241 MB) of Non-redundant protein sequence database from <a href="http://www.ncbi.nlm.nih.gov/staff/tao/URLAPI/blastdb.html">nr</a> (8.5GB) database.</p>
<p>You can download the <a href="http://salsahpc.indiana.edu/tutorial/source_code/Hadoop-Blast.zip">Hadoop Blast source code</a> and customized Blast program and Database archive (<a href="http://salsahpc.indiana.edu/tutorial/apps/BlastProgramAndDB.tar.gz">BlastProgramAndDB.tar.gz</a>) from <a href="http://salsahpc.indiana.edu/tutorial/hadoopblast.html">Big Data for Science tutorial</a>.</p>
<h2>
	&nbsp;</h2>
<h2>
	&nbsp;</h2>
<h2>
	Acknowledge</h2>
This page was original designed by <a href="http://salsahpc.indiana.edu/">SalsaHPC</a> group for <a href="http://salsahpc.indiana.edu/tutorial/">Big Data for Science Workshop</a>, you can see the original pages <a href="http://salsahpc.indiana.edu/tutorial/hadoopblast.html">here</a>.<br />
<h2>
	Requirement</h2>
<ol>
	<li>
		Login to FutureGrid Cluster and obtain compute nodes. (<a href="https://portal.futuregrid.org/salsahadoop-futuregrid-hpc#HPC_Nodes">HPC </a>/ <a href="https://portal.futuregrid.org/salsahadoop-futuregrid-cloud-eucalyptus">Eucalyptus</a>)</li>
	<li>
		Start SalsaHadoop/Hadoop on compute nodes. (<a href="https://portal.futuregrid.org/salsahadoop-futuregrid-hpc#Configuration">SalsaHadoop Tutorial</a>)</li>
	<li>
		Download and unzip&nbsp;<a href="http://salsahpc.indiana.edu/tutorial/source_code/Hadoop-Blast.zip">Hadoop Blast source code</a> from <a href="http://salsahpc.indiana.edu/tutorial/hadoopwordcount.html">Big Data for Science tutorial</a>.</li>
	<li>
		Download customized Blast binary and Database archive <a href="http://salsahpc.indiana.edu/tutorial/apps/BlastProgramAndDB.tar.gz">BlastProgramAndDB.tar.gz</a></li>
	<li>
		Linux command experience.</li>
</ol>
<h2>
	1. Download Hadoop Blast under $</h2>
<h2>
	HADOOP_HOME</h2>
Assuming your start SalsaHadoop/Hadoop with setting $HADOOP_HOME=~/hadoop-0.20.203.0, and is running the master node on i55. Then, we download the <a href="http://salsahpc.indiana.edu/tutorial/source_code/Hadoop-Blast.zip">Hadoop Blast source code</a> and customized Blast program and Database archive (<a href="http://salsahpc.indiana.edu/tutorial/apps/BlastProgramAndDB.tar.gz">BlastProgramAndDB.tar.gz</a>) from <a href="http://salsahpc.indiana.edu/tutorial/hadoopblast.html">Big Data for Science tutorial</a> to $HADOOP_HOME.<br />
<pre>
[taklwu@i55 ~]$ cd $HADOOP_HOME
[taklwu@i55 hadoop-0.20.203.0]$ wget <a href="http://salsahpc.indiana.edu/tutorial/source_code/Hadoop-Blast.zip" title="http://salsahpc.indiana.edu/tutorial/source_code/Hadoop-Blast.zip">http://salsahpc.indiana.edu/tutorial/source_code/Hadoop-Blast.zip</a>
[taklwu@i55 hadoop-0.20.203.0]$ wget <a href="http://salsahpc.indiana.edu/tutorial/apps/BlastProgramAndDB.tar.gz" title="http://salsahpc.indiana.edu/tutorial/apps/BlastProgramAndDB.tar.gz">http://salsahpc.indiana.edu/tutorial/apps/BlastProgramAndDB.tar.gz</a>
[taklwu@i55 hadoop-0.20.203.0]$ unzip Hadoop-Blast.zip</pre>
<h2>
	2. Prepare Hadoop Blast</h2>
<p>Assuming the program are already stored in $HADOOP_HOME/Hadoop-Blast, we need to copy the input files, Blast program and Database archive (<a href="http://salsahpc.indiana.edu/tutorial/apps/BlastProgramAndDB.tar.gz">BlastProgramAndDB.tar.gz</a>) onto HDFS.</p>
<pre>
[taklwu@i55 hadoop-0.20.203.0]$ bin/hadoop fs -put $HADOOP_HOME/Hadoop-Blast/blast_input HDFS_blast_input
[taklwu@i55 hadoop-0.20.203.0]$ bin/hadoop fs -ls HDFS_blast_input
[taklwu@i55 hadoop-0.20.203.0]$ bin/hadoop fs -copyFromLocal $HADOOP_HOME/BlastProgramAndDB.tar.gz BlastProgramAndDB.tar.gz
[taklwu@i55 hadoop-0.20.203.0]$ bin/hadoop fs -ls BlastProgramAndDB.tar.gz
</pre>
<ul>
	<li>
		Line 1 push all the blast input files (FASTA formatted queries) onto HDFS &ldquo;HDFS_blast_input&rdquo; directory from local disk.</li>
	<li>
		Line 2 list the pushed files on HDFS directory &quot;HDFS_blast_input&quot;</li>
	<li>
		Line 3 copies the Blast program and database archive (BlastProgramAndDB.tar.gz) from $HADOOP_HOME onto the HDFS as distributed caches which will be used later.</li>
	<li>
		Line 4 double check the pushed Blast program and database archive &quot;BlastProgramAndDB.tar.gz&quot; on HDFS</li>
</ul>
<h2>
	<a name="run_blast"></a>3. Execute Hadoop-Blast</h2>
<p>After deploying those required files onto HDFS, run the Hadoop Blast program with the following commands:</p>
<pre>
[taklwu@i55 hadoop-0.20.203.0]$ bin/hadoop jar $HADOOP_HOME/Hadoop-Blast/executable/blast-hadoop.jar BlastProgramAndDB.tar.gz \
 bin/blastx /tmp/hadoop-taklwu-test/ db nr HDFS_blast_input HDFS_blast_output &#39;-query #_INPUTFILE_#&nbsp;-outfmt 6 -seg no -out #_OUTPUTFILE_#&#39;</pre>
<p>Here is the description of the above command:</p>
<pre>
bin/hadoop jar Executable BlastProgramAndDB_on_HDFS bin/blastx Local_Work_DIR db nr HDFS_Input_DIR Unique_HDFS_Output_DIR &#39;-query #_INPUTFILE_#&nbsp;-outfmt 6 -seg no -out #_OUTPUTFILE_#&#39;</pre>
<table align="center" border="1" cellpadding="1" cellspacing="1">
	
		<tr>
			<td>
				<strong>Parameter</strong></td>
			<td>
				<strong>Description</strong></td>
		</tr>
		<tr>
			<td>
				Executable</td>
			<td>
				The full path of the Hadoop-Blast Jar program, e.g. $HADOOP_HOME/apps/Hadoop-Blast/executable/blast-hadoop.jar</td>
		</tr>
		<tr>
			<td>
				BlastProgramAndDB_on_HDFS&nbsp;&nbsp;&nbsp;</td>
			<td>
				The archive name of Blast Program and Database on HDFS, e.g. BlastProgramAndDB.tar.gz</td>
		</tr>
		<tr>
			<td>
				Local_Work_DIR</td>
			<td>
				The local directory for storing temporary output of Blast Program, e.g. /tmp/hadoop-test/</td>
		</tr>
		<tr>
			<td>
				HDFS_Input_DIR</td>
			<td>
				The HDFS remote directory where stored input files, e.g. HDFS_blast_input</td>
		</tr>
		<tr>
			<td>
				Unique_HDFS_Output_DIR</td>
			<td>
				A Never used HDFS remote directory for storing output files, e.g. HDFS_blast_output</td>
		</tr>
	
</table>
<br />
If Hadoop is running correctly, it will print hadoop running messages similar to the following:<br />
<pre>
11/11/01 19:31:08 INFO input.FileInputFormat: Total input paths to process : 16
11/11/01 19:31:08 INFO mapred.JobClient: Running job: job_201111021738_0002
11/11/01 19:31:09 INFO mapred.JobClient:&nbsp; map 0% reduce 0%
11/11/01 19:31:31 INFO mapred.JobClient:&nbsp; map 18% reduce 0%
11/11/01 19:31:34 INFO mapred.JobClient:&nbsp; map 50% reduce 0%
11/11/01 19:31:53 INFO mapred.JobClient:&nbsp; map 75% reduce 0%
11/11/01 19:32:04 INFO mapred.JobClient:&nbsp; map 100% reduce 0%
...
Job Finished in 191.376 seconds
</pre>
<h2>
	3. Monitoring Hadoop</h2>
<p>We can also monitor the job status using lynx, a text browser, on i136 based Hadoop monitoring console. Assuming the Hadoop Jobtracker is running on i55:9003:</p>
<pre>
[taklwu@i136 ~]$ lynx i55:9003</pre>
<p>In addition, all the outputs will stored in the HDFS output directory (e.g. HDFS_blast_output).</p>
<pre>
[taklwu@i55 hadoop-0.20.203.0]$ bin/hadoop fs -ls HDFS_blast_output
[taklwu@i55 hadoop-0.20.203.0]$ bin/hadoop fs -cat HDFS_blast_output/*
BG3:2_30MNAAAXX:7:1:981:1318/1  gi|298916876|dbj|BAJ09735.1|    100.00  11      0       0       3       35      9       19      7.0     27.7
BG3:2_30MNAAAXX:7:1:981:1318/1  gi|298708397|emb|CBJ48460.1|    100.00  11      0       0       3       35      37      47      7.0     27.7
BG3:2_30MNAAAXX:7:1:981:1318/1  gi|298104210|gb|ADI54942.1|     100.00  11      0       0       3       35      11      21      7.0     27.7
BG3:2_30MNAAAXX:7:1:981:1318/1  gi|297746593|emb|CBM42053.1|    100.00  11      0       0       3       35      11      21      7.0     27.7
BG3:2_30MNAAAXX:7:1:981:1318/1  gi|297746591|emb|CBM42052.1|    100.00  11      0       0       3       35      11      21      7.0     27.7
BG3:2_30MNAAAXX:7:1:981:1318/1  gi|297746589|emb|CBM42051.1|    100.00  11      0       0       3       35      11      21      7.0     27.7
BG3:2_30MNAAAXX:7:1:981:1318/1  gi|297746587|emb|CBM42050.1|    100.00  11      0       0       3       35      11      21      7.0     27.7
BG3:2_30MNAAAXX:7:1:981:1318/1  gi|297746585|emb|CBM42049.1|    100.00  11      0       0       3       35      11      21      7.0     27.7
BG3:2_30MNAAAXX:7:1:981:1318/1  gi|297746583|emb|CBM42048.1|    100.00  11      0       0       3       35      11      21      7.0     27.7
BG3:2_30MNAAAXX:7:1:981:1318/1  gi|297746581|emb|CBM42047.1|    100.00  11      0       0       3       35      11      21      7.0     27.7

...
</pre>
<h2>
	5.&nbsp;Finishing the Map-Reduce process</h2>
<p>After finishing the Job, please use the command to kill the HDFS and Map-Reduce daemon:</p>
<pre>
[taklwu@i55 hadoop-0.20.203.0]$ bin/stop-all.sh</pre>  </div>
<div id="node-1335" class="section-3">
  <h1 class="book-heading">Hadoop WordCount</h1>
  Number:<br />
Author: Tak-Lon Stephen Wu<br />
Improvements:&nbsp;<br />
Version: 0.1<br />
Date: 2011-11-01<br />
<h2>Hadoop WordCount</h2>
<p>WordCount is a simple program which counts the number of occurrences of each word in a given text input data set. WordCount fits very well with the MapReduce programming model making it a great eample to understand the Hadoop Map/Reduce programming style. You can download the <a href="http://salsahpc.indiana.edu/tutorial/source_code/Hadoop-WordCount.zip">WordCount source code</a> from <a href="http://salsahpc.indiana.edu/tutorial/hadoopwordcount.html">Big Data for Science tutorial</a>.</p>
<h2>&nbsp;</h2>
<h2>Acknowledge</h2>
This page was original designed by <a href="http://salsahpc.indiana.edu/">SalsaHPC</a> group for <a href="http://salsahpc.indiana.edu/tutorial/">Big Data for Science Workshop</a>, you can see the original pages <a href="http://salsahpc.indiana.edu/tutorial/hadoopwordcount.html">here</a>.<br />
<h2>Requirement</h2>
<ol>
	<li>Login to FutureGrid Cluster and obtain compute nodes. (<a href="https://portal.futuregrid.org/salsahadoop-futuregrid-hpc#HPC_Nodes">HPC </a>/ <a href="https://portal.futuregrid.org/salsahadoop-futuregrid-cloud-eucalyptus">Eucalyptus</a>)</li>
	<li>Start SalsaHadoop/Hadoop on compute nodes. (<a href="https://portal.futuregrid.org/salsahadoop-futuregrid-hpc#Configuration">SalsaHadoop Tutorial</a>)</li>
	<li>Download and unzip <a href="http://salsahpc.indiana.edu/tutorial/source_code/Hadoop-WordCount.zip">WordCount source code</a> from <a href="http://salsahpc.indiana.edu/tutorial/hadoopwordcount.html">Big Data for Science tutorial</a>.</li>
	<li>Linux command experience.</li>
</ol>
<h2>1. Download and unzip WordCount under $HADOOP_HOME</h2>
Assuming your start SalsaHadoop/Hadoop with setting $HADOOP_HOME=~/hadoop-0.20.203.0, and is running the master node on i55. Then, we download and unzip the <a href="http://salsahpc.indiana.edu/tutorial/source_code/Hadoop-WordCount.zip">WordCount source code</a> from&nbsp; <a href="http://salsahpc.indiana.edu/tutorial/hadoopwordcount.html">Big Data for Science tutorial</a> under $HADOOP_HOME.<br />
<pre>[taklwu@i55 ~]$ cd $HADOOP_HOME
[taklwu@i55 hadoop-0.20.203.0]$ wget <a href="http://salsahpc.indiana.edu/tutorial/source_code/Hadoop-WordCount.zip" title="http://salsahpc.indiana.edu/tutorial/source_code/Hadoop-WordCount.zip">http://salsahpc.indiana.edu/tutorial/source_code/Hadoop-WordCount.zip</a>
[taklwu@i55 hadoop-0.20.203.0]$ unzip Hadoop-WordCount.zip</pre>
<h2>2. Execute</h2>
<h2>Hadoop-WordCount</h2>
First, we need to uplaod the input files (any text format file) into Hadoop distributed file system (HDFS):
<pre>[taklwu@i55 hadoop-0.20.203.0]$ bin/hadoop fs -put $HADOOP_HOME/Hadoop-WordCount/input/ input
[taklwu@i55 hadoop-0.20.203.0]$ bin/hadoop fs -ls input
</pre>
<p>Here, $HADOOP_HOME/Hadoop-WordCount/input/ is the local directory where the program inputs are stored. The second &quot;input&quot; represents the remote destination directory on the HDFS.</p>
<p>After uploading the inputs into HDFS, run the WordCount program with the following commands. We assume you have already compiled the word count program.</p>
<pre>[taklwu@i55 hadoop-0.20.203.0]$ bin/hadoop jar $HADOOP_HOME/Hadoop-WordCount/wordcount.jar WordCount input output
</pre>
<p>If Hadoop is running correctly, it will print hadoop running messages similar to the following:</p>
<pre>WARNING: org.apache.hadoop.metrics.jvm.EventCounter is deprecated. Please use org.apache.hadoop.log.metrics.EventCounter in all the log4j.properties files.
11/11/02 18:34:46 INFO input.FileInputFormat: Total input paths to process : 1
11/11/02 18:34:46 INFO mapred.JobClient: Running job: job_201111021738_0001
11/11/02 18:34:47 INFO mapred.JobClient:  map 0% reduce 0%
11/11/02 18:35:01 INFO mapred.JobClient:  map 100% reduce 0%
11/11/02 18:35:13 INFO mapred.JobClient:  map 100% reduce 100%
11/11/02 18:35:18 INFO mapred.JobClient: Job complete: job_201111021738_0001
11/11/02 18:35:18 INFO mapred.JobClient: Counters: 25
...
</pre>
<h2>3. Monitoring Hadoop</h2>
<p>We can also monitor the job status using lynx, a text browser, on i136 based Hadoop monitoring console. Assuming the Hadoop Jobtracker is running on i55:9003:</p>
<pre>[taklwu@i136 ~]$ lynx i55:9003</pre>
<h2>4.&nbsp;Check the result</h2>
<p>After finishing the Job, please use the command to check the output:</p>
<pre>[taklwu@i55 ~]$ cd $HADOOP_HOME
[taklwu@i55 ~]$ bin/hadoop fs -ls output
[taklwu@i55 ~]$ bin/hadoop fs -cat output/*
</pre>
<p>Here, &quot;output&quot; is the HDFS directory where the result stored. The result will look like as following:</p>
<pre>you.&quot; 15
you; 1
you? 2
you?&quot; 23
<a href="https://portal.futuregrid.org/salsahadoop-futuregrid-cloud-eucalyptus">https://portal.futuregrid.org/</a><a href="https://portal.futuregrid.org/salsahadoop-futuregrid-cloud-eucalyptus">salsahadoop-futuregrid-cloud-eucalyptus</a>young 42</pre>
<h2>5.&nbsp;Finishing the Map-Reduce process</h2>
<p>After finishing the Job, please use the command to kill the HDFS and Map-Reduce daemon:</p>
<pre>[taklwu@i55 hadoop-0.20.203.0]$ bin/stop-all.sh</pre>  </div>
<div id="node-1324" class="section-3">
  <h1 class="book-heading">Using Twister on FutureGrid</h1>
  PLEASE NOTE: THIS MANUAL PAGE IS A DRAFT, PLEASE PROVIDE FEEDBACK IN THE COMMENT SECTION.<br />
	<h2>What is Twister?</h2>
	<table border="0" id="table1" width="97%">
		
			<tr>
				<td>
					<p align="left" class="Abstract">MapReduce programming model has simplified the implementations of many data parallel applications. The simplicity of the programming model and the quality of services provided by many implementations of MapReduce attract a lot of enthusiasm among parallel computing communities. From the years of experience in applying MapReduce programming model to various scientific applications we identified a set of extensions to the programming model and improvements to its architecture that will expand the applicability of MapReduce to more classes of applications.&nbsp;<a href="http://www.iterativemapreduce.org/">Twister</a>&nbsp;is a lightweight MapReduce runtime we have developed by incorporating these enhancements.</p>
					<p align="left"><a href="http://www.iterativemapreduce.org/">Twister</a> provides the following features to support MapReduce computations. (Twister&nbsp;is developed as part of&nbsp;<a href="http://www.cs.indiana.edu/%7Ejekanaya/">Jaliya Ekanayake&#39;s</a>&nbsp;Ph.D. research and is supported by the&nbsp;<b><a href="http://salsahpc.indiana.edu/">S&nbsp;A&nbsp;L&nbsp;S&nbsp;</a></b><b></b><b><a href="http://salsahpc.indiana.edu/">A</a></b>Team @&nbsp;<a href="http://www.iub.edu/">IU</a>)</p>
				</td>
			</tr>
			<tr>
				<td>
					<table border="0" id="table5" width="100%">
						
							<tr>
								<td align="center" valign="top" width="16"><img border="0" height="14" src="http://www.iterativemapreduce.org/images/bullet.GIF" width="16" /></td>
								<td>Distinction on static and variable data</td>
							</tr>
							<tr>
								<td align="center" valign="top" width="16"><img border="0" height="14" src="http://www.iterativemapreduce.org/images/bullet.GIF" width="16" /></td>
								<td>Configurable long running (cacheable) map/reduce tasks</td>
							</tr>
							<tr>
								<td align="center" valign="top" width="16"><img border="0" height="14" src="http://www.iterativemapreduce.org/images/bullet.GIF" width="16" /></td>
								<td>Pub/sub messaging based communication/data transfers</td>
							</tr>
							<tr>
								<td align="center" valign="top" width="16"><img border="0" height="14" src="http://www.iterativemapreduce.org/images/bullet.GIF" width="16" /></td>
								<td>Efficient support for Iterative MapReduce computations (extremely faster than<a href="http://hadoop.apache.org/">Hadoop</a>&nbsp;or&nbsp;<a href="http://research.microsoft.com/en-us/projects/DryadLINQ/">Dryad/DryadLINQ</a>)</td>
							</tr>
							<tr>
								<td align="center" valign="top" width="16"><img border="0" height="14" src="http://www.iterativemapreduce.org/images/bullet.GIF" width="16" /></td>
								<td>Combine phase to collect all reduce outputs</td>
							</tr>
							<tr>
								<td align="center" valign="top" width="16"><img border="0" height="14" src="http://www.iterativemapreduce.org/images/bullet.GIF" width="16" /></td>
								<td>Data access via local disks</td>
							</tr>
							<tr>
								<td align="center" valign="top" width="16"><img border="0" height="14" src="http://www.iterativemapreduce.org/images/bullet.GIF" width="16" /></td>
								<td>Lightweight (~5600 lines of Java code)</td>
							</tr>
							<tr>
								<td align="center" valign="top" width="16"><img border="0" height="14" src="http://www.iterativemapreduce.org/images/bullet.GIF" width="16" /></td>
								<td>Support for typical MapReduce computations</td>
							</tr>
							<tr>
								<td align="center" valign="top" width="16"><img border="0" height="14" src="http://www.iterativemapreduce.org/images/bullet.GIF" width="16" /></td>
								<td>Tools to manage data</td>
							</tr>
						
					</table>
				</td>
			</tr>
		
	</table>
	<h2 class="rtecenter"><img src="http://www.iterativemapreduce.org/images/imrmodel.png" /></h2>
	<p align="center">Iterative MapReduce programming model using Twister</p>
	<h2>Running Twister on FutureGrid</h2>
	Twister&nbsp;can be run in various modes within FG either in FutureGrid HPC and FutureGrid Cloud environment.
<ul>
	<li>Twister on FutureGrid
		<ul>
			<li><a href="https://portal.futuregrid.org/twister-futuregrid-hpc">Twister&nbsp;with&nbsp;FutureGrid HPC</a>
				<ul>
					<li><a href="https://portal.futuregrid.org/twister-futuregrid-hpc#HPC_Nodes">Get HPC compute nodes</a></li>
					<li><a href="https://portal.futuregrid.org/twister-futuregrid-hpc#Twister_Conf">Twister Configuration</a>
						<ul>
							<li><a href="https://portal.futuregrid.org/twister-futuregrid-hpc#Twister_Conf_Download">Download Twister 0.9</a></li>
							<li><a href="https://portal.futuregrid.org/twister-futuregrid-hpc#Twister_Conf_Set">Set $TWISTER_HOME and $JAVA_HOME</a></li>
							<li><a href="https://portal.futuregrid.org/twister-futuregrid-hpc#Twister_Conf_PowerMakeUp">Run TwisterPowerMakeUp.sh</a></li>
							<li><a href="https://portal.futuregrid.org/twister-futuregrid-hpc#Twister_Conf_ActiveMQ">Download and start ActiveMQ on specific nodes</a></li>
							<li><a href="https://portal.futuregrid.org/twister-futuregrid-hpc#Twister_Conf_Start">Start Twister</a></li>
						</ul>
					</li>
					<li><a href="https://portal.futuregrid.org/twister-futuregrid-hpc#Verify">Verify Twister MapReduce Daemon status</a></li>
				</ul>
			</li>
			<li><a href="https://portal.futuregrid.org/twister-futuregrid-cloud-eucalyptus">Twister&nbsp;with&nbsp;FutureGrid Cloud Eucalyptus</a>
				<ul>
					<li><a href="../../twister-futuregrid-cloud-eucalyptus#VM_Nodes">Get VM compute nodes</a>
						<ul>
							<li><a href="../../twister-futuregrid-cloud-eucalyptus#VM_Nodes_Set">VM Hostname setting</a></li>
							<li><a href="../../twister-futuregrid-cloud-eucalyptus#Euca_Disk">VM attached disk configuration</a></li>
						</ul>
					</li>
					<li><a href="../../twister-futuregrid-cloud-eucalyptus#Twister_Conf">Twister Configuration</a>
						<ul>
							<li><a href="../../twister-futuregrid-cloud-eucalyptus#Twister_Conf_Download">Download Twister 0.9</a></li>
							<li><a href="../../twister-futuregrid-cloud-eucalyptus#Twister_Conf_Set">Set $TWISTER_HOME,&nbsp; $JAVA_HOME and Worker Nodes</a></li>
							<li><a href="../../twister-futuregrid-cloud-eucalyptus#Twister_Conf_PowerMakeUp">Run TwisterPowerMakeUp.sh</a></li>
							<li><a href="../../twister-futuregrid-cloud-eucalyptus#Twister_Conf_ActiveMQ">Download and start ActiveMQ on specific node</a></li>
							<li><a href="../../twister-futuregrid-cloud-eucalyptus#Twister_Conf_Start">Start Twister</a></li>
						</ul>
					</li>
					<li><a href="../../twister-futuregrid-cloud-eucalyptus#Verify">Verify Twister MapReduce Daemon status</a></li>
				</ul>
			</li>
			<li>Run Twister Applications
				<ul>
					<li><a href="https://portal.futuregrid.org/twister-kmeans">Twister Kmeans</a></li>
					<li><a href="https://portal.futuregrid.org/twister-blast">Twister Blast</a></li>
				</ul>
			</li>
		</ul>
	</li>
</ul>
<h2>Papers and Presentations</h2>
<table border="0" id="table3" width="100%">
	
		<tr>
			<td align="center" valign="top" width="16"><img border="0" height="14" src="http://www.iterativemapreduce.org/images/bullet.GIF" width="16" /></td>
			<td>Jaliya Ekanayake, Hui Li, Bingjing Zhang, Thilina Gunarathne, Seung-Hee Bae, Judy Qiu, Geoffrey Fox,&nbsp;<a href="http://www.iterativemapreduce.org/hpdc-camera-ready-submission.pdf">Twister: A Runtime for Iterative MapReduce</a>,&quot; The First International Workshop on MapReduce and its Applications (MAPREDUCE&#39;10) - HPDC2010</td>
		</tr>
		<tr>
			<td align="center" valign="top" width="16"><img border="0" height="14" src="http://www.iterativemapreduce.org/images/bullet.GIF" width="16" /></td>
			<td>Jaliya Ekanayake, (Advisor: Geoffrey Fox)&nbsp;<a href="http://grids.ucs.indiana.edu/ptliupages/publications/SC09-abstract-jaliya-ekanayake.pdf">Architecture and Performance of Runtime Environments for Data Intensive Scalable Computing</a>, Doctoral Showcase, SuperComputing2009. (<a href="http://www.slideshare.net/jaliyae/architecture-and-performance-of-runtime-environments-for-data-intensive-scalable-computing-2653554">Presentation</a>)</td>
		</tr>
		<tr>
			<td align="center" valign="top" width="16"><img border="0" height="14" src="http://www.iterativemapreduce.org/images/bullet.GIF" width="16" /></td>
			<td>Jaliya Ekanayake, Atilla Soner Balkir, Thilina Gunarathne, Geoffrey Fox, Christophe Poulain, Nelson Araujo, Roger Barga,&nbsp;<a href="http://grids.ucs.indiana.edu/ptliupages/publications/eScience09-camera-ready-submission.pdf">DryadLINQ for Scientific Analyses</a>, Fifth IEEE International Conference on e-Science (eScience2009), Oxford, UK.</td>
		</tr>
		<tr>
			<td align="center" valign="top" width="16"><img border="0" height="14" src="http://www.iterativemapreduce.org/images/bullet.GIF" width="16" /></td>
			<td>Jaliya Ekanayake, Geoffrey Fox,&nbsp;<a href="http://grids.ucs.indiana.edu/ptliupages/publications/cloud_handbook_final-with-diagrams.pdf">High Performance Parallel Computing with Clouds and Cloud Technologies</a>, First International Conference on Cloud Computing (CloudComp09) Munich, Germany, 2009.</td>
		</tr>
		<tr>
			<td align="center" valign="top" width="16"><img border="0" height="14" src="http://www.iterativemapreduce.org/images/bullet.GIF" width="16" /></td>
			<td>Geoffrey Fox, Seung-Hee Bae, Jaliya Ekanayake, Xiaohong Qiu, and Huapeng Yuan,<a href="http://grids.ucs.indiana.edu/ptliupages/publications/CetraroWriteupJan09_v12.pdf">Parallel Data Mining from Multicore to Cloudy Grids</a>, High Performance Computing and Grids workshop, 2008.</td>
		</tr>
		<tr>
			<td align="center" valign="top" width="16"><img border="0" height="14" src="http://www.iterativemapreduce.org/images/bullet.GIF" width="16" /></td>
			<td>Jaliya Ekanayake, Shrideep Pallickara, and Geoffrey Fox&nbsp;<a href="http://www.cs.indiana.edu/%7Ejekanaya/papers/eScience-final.pdf">MapReduce for Data Intensive Scientific Analysis</a>, Fourth IEEE International Conference on eScience, 2008, pp.277-284.</td>
		</tr>
	
</table>
<br />  </div>
<div id="node-1342" class="section-3">
  <h1 class="book-heading">Twister Blast</h1>
  Number:<br />
Author: Yang Ruan<br />
Improvements:&nbsp;<br />
Version: 0.1<br />
Date: 2011-11-07<br />
<h2>
	Twister Blast</h2>
<p>BLAST (Basic Local Alignment Search Tool) is one of the most widely used bioinformatics applications written in C++, and&nbsp;the version we are using is v2.2.23. <a href="http://www.iterativemapreduce.org/">Twister </a>is an iterative mapreduce framework which can be used both for iterative and non-iterative applications. Twister Blast is an advanced Twister program which helps Blast, a bioinformatics application, utilizes the Computing Capability of Twister. With the flexibility of Twister run-time environment, this application can run on a single machine, a cluster, or Amazon EC2 cloud platform.</p>
<p>Twister-BLAST can divide original query file into small chunks, and distribute them to all available computing nodes. Twister-BLAST manages and schedules Map tasks to process each query chunk based on its location. Output can also be collected by Twister-BLAST. Compared with other parallel BLAST applications, Twister-BLAST is efficient and with little overhead.</p>
<p>You can download the<a href="http://salsahpc.indiana.edu/tutorial/apps/twister-blast.tar.gz"> Twister Blast</a> Source code and customized Blast program and Database archive (<a href="http://salsahpc.indiana.edu/tutorial/apps/BlastProgramAndDB.tar.gz">BlastProgramAndDB.tar.gz</a>) from <a href="http://salsahpc.indiana.edu/tutorial/hadoopblast.html">Big Data for Science tutorial</a>.</p>
<h2>
	&nbsp;</h2>
<h2>
	Acknowledge</h2>
This page was original designed by <a href="http://salsahpc.indiana.edu/">SalsaHPC</a> group for <a href="http://salsahpc.indiana.edu/tutorial/">Big Data for Science Workshop</a>, you can see the original pages <a href="http://salsahpc.indiana.edu/tutorial/">here</a>.<br />
<h2>
	Requirement</h2>
<ol>
	<li>
		Login to FutureGrid Cluster and obtain compute nodes. (<a href="../../salsahadoop-futuregrid-hpc#HPC_Nodes">HPC </a>/ <a href="../../salsahadoop-futuregrid-cloud-eucalyptus">Eucalyptus</a>)</li>
	<li>
		Start Twister on compute nodes. (<a href="http://salsahpc.indiana.edu/tutorial/twister-intro.html">SalsaTwister Tutorial</a>)</li>
	<li>
		Download and unzip <a href="http://salsahpc.indiana.edu/tutorial/apps/twister-blast.tar.gz">Twister Blast</a> Source code.</li>
	<li>
		Download customized Blast binary and Database archive <a href="http://salsahpc.indiana.edu/tutorial/apps/BlastProgramAndDB.tar.gz">BlastProgramAndDB.tar.gz</a></li>
	<li>
		Linux command experience.</li>
</ol>
<h2>
	1. Download and prepare the</h2>
<h2>
	Twister-Blast</h2>
First, Download and unzip the <a href="http://salsahpc.indiana.edu/tutorial/apps/twister-blast.tar.gz">Twister Blast</a> package (named as $TWISTER_BLAST_PROGRAM here), then â€‹copy&nbsp;the unzipped â€‹$TWISTER_BLAST_PROGRAM/blast/dist/Twister-Blast.jar&nbsp;to the $TWISTER_HOME/apps. Also, we download and unzip the blast program and the database <a href="http://salsahpc.indiana.edu/tutorial/apps/BlastProgramAndDB.tar.gz">here</a>, and set $BLAST_HOME=/path/to/BlastProgramAndDB/. Go to $TWISTER_BLAST_PROGRAM/blast/bin/, in <strong>twister_blast.properties</strong>, set the BLAST+ execution command (execmd property)&nbsp; to the BLAST program (blastx) under $BLAST_HOME/bin/. Execution options can be reset according to users&#39; needs. However, Input option (-query) and output option (-out) are not set in execmd but in inop and outop in order to be compatible with both BLAST+ and BLAST. Twister-BLAST will merge these command options by itself when invoking BLAST+ parallel.<br />
The execution command template inside<strong> twister_blast.properties</strong> is given below.
<pre>
execmd = time /N/u/yangruan/Quarry/workflow/ncbi-blast-2.2.23+/bin/blastp -db /N/dc/scratch/yangruan/blast/db/cog/10k/cog.10000 -evalue 100 -max_target_seqs 1000000 -num_alignments 1000000 -outfmt 6 -seg no
inop = -query
outop = -out
</pre>
<h2>
	2. Prepare Twister-Blast input</h2>
<p>Assume you have already download the input fasta file into some location called [input file path]. Use the $TWISTER_BLAST_PROGRAM/blast/bin/blastNewFileSpliter.sh to split the input fasta file into multiple partitions. The parameters in as following:</p>
<pre>
args:&nbsp; [query_file] [sequence_count]&nbsp; [num_partition] [data_dir] [output_prefix] [output_map_file]
</pre>
<ul>
	<li>
		query_file: input fasta file</li>
	<li>
		sequence_count: sequence count in the input fasta file</li>
	<li>
		num_partition: number of partitions, this number should be larger or equal to the total worker number started with twister</li>
	<li>
		data_dir: The output folder of partitioned fasta files</li>
	<li>
		output_prefix: The output prefix of partitioned fasta files</li>
	<li>
		output_map_file: The file contains the information of all the partitions width and height.</li>
</ul>
<h2>
	<a name="run_blast"></a>3. Execute Twister-Blast</h2>
<p>After deploying those required files onto file system, run the twister-Blast program with the following commands:</p>
<pre>
./blastNew.sh 128 /N/dc/scratch/yangruan/fasta/cog/10000/400/ input_ .fa 400 /N/dc/scratch/yangruan/blast/result/cog/10k/eval_100_400p/ blastOut_</pre>
<p>Here is the description of the above command:</p>
<pre>
args:  [map number] [input folder] [input prefix] [input postfix (None for none)] [partition number] [output folder] [output prefix]</pre>
<table align="center" border="1" cellpadding="1" cellspacing="1">
	
		<tr>
			<td>
				<strong>Parameter</strong></td>
			<td>
				<strong>Description</strong></td>
		</tr>
		<tr>
			<td>
				map number</td>
			<td>
				The map task number (usually equals to the number of worker started)</td>
		</tr>
		<tr>
			<td>
				input folder &nbsp;&nbsp;</td>
			<td>
				The folder of input fasta file partitions</td>
		</tr>
		<tr>
			<td>
				input prefix</td>
			<td>
				The prefix of input fasta file partitions</td>
		</tr>
		<tr>
			<td>
				input postfix</td>
			<td>
				The postfix (file extension) of input fasta file partitions (default .fa)</td>
		</tr>
		<tr>
			<td>
				partition number</td>
			<td>
				The number of input fasta file partitions</td>
		</tr>
		<tr>
			<td>
				output folder</td>
			<td>
				The folder to store output blast result</td>
		</tr>
		<tr>
			<td>
				output prefix</td>
			<td>
				The prefix of output blast result</td>
		</tr>
	
</table>
<br />
If Twister Blast is running correctly, it will print twister running messages similar to the following:<br />
<pre>
./blastNew.sh 128 /N/dc/scratch/yangruan/fasta/cog/10000/400/ input_ .fa 400 /N/dc/scratch/yangruan/blast/result/cog/10k/eval_100_400p/ blastOut_ 
time /N/u/yangruan/Quarry/workflow/ncbi-blast-2.2.23+/bin/blastp -db /N/dc/scratch/yangruan/blast/db/cog/10k/cog.10000 -evalue 100 -max_target_seqs 1000000 -num_alignments 1000000 -outfmt 6 -seg no
-query
-out
JobID: BlastNewac4d15a9-0997-11e1-81b4-5b7f60de01d2
Nov 7, 2011 11:24:43 PM org.apache.activemq.transport.failover.FailoverTransport doReconnect
INFO: Successfully connected to <a href="//149.165.229.100:61616" title="//149.165.229.100:61616">tcp://149.165.229.100:61616</a>
0    [main] INFO  cgl.imr.client.TwisterDriver  - MapReduce computation termintated gracefully.
Total Time of BLAST : 28.12Seconds
2    [Thread-1] DEBUG cgl.imr.client.ShutdownHook  - Shutting down completed.
</pre>
<h2>
	4.&nbsp;Finishing the Map-Reduce process</h2>
<p>After finishing the Job, please use the command to kill the Map-Reduce daemon and broker:</p>
<pre>
$TWISTER_HOME/bin/stop_twister.sh</pre>
<br />  </div>
<div id="node-935" class="section-3">
  <h1 class="book-heading">Eucalyptus and Twister on FutureGrid</h1>
  <h1>The FutureGrid Twister Tutorial</h1>
<p>SALSA Group<br />
	PTI&nbsp;Indiana University</p>
<p class="rteleft">&nbsp;</p>
<h3 class="rteleft">I. Introduction</h3>
<p class="rteleft">This tutorial will show you how to use Twister under Eucalyptus on India, FutureGrid.<br />
	&nbsp;</p>
<h3 class="rteleft">II. Prerequisite</h3>
<p class="rteleft">Follow tutorial <a href="http://portal.futuregrid.org/tutorials/eucalyptus">Using Eucalyptus on FutureGrid</a> to learn how to install and use the Eucalyptus client tool to access resources on India, FutureGrid.<br />
	&nbsp;</p>
<h3 class="rteleft">III. Download FutureGrid&nbsp;Eucalyptus Twister Tool&nbsp;</h3>
<p class="rteleft">This tool is a set of python scripts. They can provide a pre-configured Twister environment, and also can terminate the environment. Please&nbsp;<br />
	download the tool in the attachment below.</p>
<h3 class="rteleft"><br />
	IV. Start Twister Environment</h3>
<p class="rteleft">To start a Twister environment, execute the following program:&nbsp;</p>
<pre class="rteleft">$ python fg_euca_start_twister.py [-k user key] [-i public key file path] [-n number of instances][-t instance type]

e.g.
$ python fg_euca_start_twister.py -k userkey -i userkey.pem -n 3 -t c1.medium
</pre>
<p class="rteleft"><br />
	Here,</p>
<ul>
	<li class="rteleft">-k is the user key name generated by the <strong>euca-add-keypair</strong> step in the Eucalyptus tutorial.</li>
	<li class="rteleft">-i &nbsp;is the private key .pem file path. It is also&nbsp;generated in the <strong>euca-add-keypair</strong>&nbsp;step in the Eucalyptus tutorial.</li>
	<li class="rteleft">-n is the number of instances for starting.</li>
	<li class="rteleft">-t &nbsp;is the type of image.</li>
</ul>
<p class="rteleft">The following is an execution example:<br />
	<img alt="" height="547" src="https://portal.futuregrid.org/sites/default/files/u192/start_twister.jpg" width="1200" /><br />
	<br />
	Once the script is executed, the user can get a prepared Twister environment.<br />
	Then, the user can follow the instructions provided by <strong>fg_euca_start_twister.py</strong>&nbsp;to start ActiveMQ on the assigned node,<br />
	and also start the Twister environment (could be on any node just applied).<br />
	&nbsp;</p>
<h3 class="rteleft">V. Terminate Twister Environment</h3>
<p class="rteleft">To terminate a Twister environment, execute the following command:</p>
<pre class="rteleft">$ python fg_euca_terminate_twister.py</pre>
<p>&nbsp;</p>
<h3>VI. Run Twister-Kmeans</h3>
<h4>1. Ant and Deploy&nbsp;Twister-Kmeans</h4>
<p>Log into the node assigned for ActiveMQ broker.&nbsp;</p>
<pre>$ cd /opt/Twister/samples/kmeans
$ ant
$ cd ../../lib
$ mv Twister-Kmeans-0.9.jar ../apps/
$ cd ../bin/
$ chmod a+x twister.sh
$ ./twister.sh cpj ../apps/Twister-Kmeans-0.9.jar</pre>
<h4>2. Start Twister and ActiveMQ</h4>
<p>Open two terminals and log into the node mentioned above. One is for starting ActiveMQ; the other is for starting Twister.<br />
	<br />
	In Terminal 1:</p>
<pre>$ cd /opt/apache-activemq-5.4.2/bin/
$ activemq console</pre>
In Terminal 2:&nbsp; 
<pre>$ cd /opt/Twister/bin
$ ./start_twister.sh  </pre>
&nbsp;
<h4>3. Create Twister-Kmeans Data Folder</h4>
Open another terminal, and create a folder for operating kmeans data:
<pre>$ cd /opt/Twister/bin
$ ./twishter.sh mkdir kmeans </pre>

	<h4>4. Generate Twister-Kmeans</h4>
	<h4>&nbsp;</h4>
	<h4>&nbsp;</h4>
	<h4>Data</h4>
	Open a new terminal:
	<pre>$ cd /opt/Twister/samples/kmeans/bin/
$./gen_data.sh init_clusters.txt 2 3 /kmeans km_data 3 30000</pre>
	In the terminal used in Step 3, do the following:
	<pre>$ ./create_partition_file.sh kmeans km ../samples/kmeans/bin/p.pf</pre>
	Back in the terminal used in Step 4, do the following:<br />
	<pre>$ ./run_kmeans.sh init_clusters.txt 3 p.pf</pre>
	&nbsp;
	<p>The output is as follows:</p>
	<p><img alt="" height="257" src="https://portal.futuregrid.org/sites/default/files/resize/u192/twister_kmeans-906x257.jpg" width="906" /></p><table id="attachments" class="sticky-enabled">
 <thead><tr><th>Attachment</th><th>Size</th> </tr></thead>
<tbody>
 <tr class="odd"><td><a href="https://portal.futuregrid.org/sites/default/files/fgeucatwister.zip">fgeucatwister.zip</a></td><td>4.38 KB</td> </tr>
</tbody>
</table>
  </div>
<div id="node-1444" class="section-3">
  <h1 class="book-heading">Using Pegasus on FutureGrid</h1>
  <h2>
	About Pegasus</h2>
<p><a href="http://pegasus.isi.edu">Pegasus WMS</a> is a configurable system for mapping and executing abstract application workflows over a wide range of execution environments including a laptop, a campus cluster, a Grid, or a commercial or academic cloud. One Pegasus workflow can run on a single system or across a heterogeneous set of resources. Pegasus can run workflows ranging from just a few computational tasks up to 1 million.</p>
<p>Pegasus has a number of features that contribute to its usability and effectiveness, as explained in detail in the tutorial and the <a href="https://pegasus.isi.edu/wms/docs/4.0/about.php#overview">Pegasus online documentation</a>. Among the key feature rank abstract workflow portability between environments, features to better control workflow performance and resource utilization, scalability, data provenance tracking, data management, error recovery and multiple operating environments not limited to clouds.</p>
<p>The main mode of operation of Pegasus on FutureGrid is the usage of IaaS clouds, as provided by Nimbus, OpenStack, Eucalyptus and bare-metal (future).</p>
<p>If you want to find out more about Pegasus WMS, please <a href="http://pegasus.isi.edu">visit our web site.</a> The liaison for FutureGrid is Jens V&ouml;ckler. He is available as &quot;Expert&quot; on the Portal. If you have general questions concerning Pegasus, not related to FutureGrid, you may want to contact</p>

	pegasus-support &lt;pegasus-support at isi dot edu&gt;
<h2>
	The Pegasus Run-Time Cloud Architecture</h2>
Pegasus uses the <a href="http://research.cs.wisc.edu/condor/">Condor high-throughput scheduling system</a> to provide the work of executing a plan created by Pegasus from the abstract workflow description.<br />
<p align="center"><img alt="Cloud site sample layouts." src="https://pegasus.isi.edu/wms/docs/4.0/images/fg-pwms-prefio.3.png" /><br />
	<b>Figure:</b> Cloud Site Layouts example.</p>
The figure above shows two cloud sites, typically two distinct IaaS clouds, with two virtual machines (VMs) running in each site.&nbsp; Effectively, it shows a sample layout for sky computing (as in: multiple clouds) as supported by Pegasus. At this point, it is up to the user to provision the remote resources with a proper VM image that includes a Condor <em>startd</em> and proper Condor configuration to report back to a Condor <em>collector</em> that the Condor <em>schedd</em> has access to.<br />
<p>The submit host is the point where a user submits Pegasus workflows for execution. In this discussion, the <em>submit host</em> (SH) is located logically external to the cloud provider(s) in order to bridge multiple clouds. In contrast, the tutorial uses a submit host that is located within a single cloud site. The site where the SH is located typically runs a Condor <em>collector</em> to gather resource announcements, or is part of a larger Condor pool that collects these announcement. Condor makes the remote resources available to the submit host&#39;s Condor installation.</p>
<p>The figure above shows the way Pegasus WMS is deployed in cloud computing resources, ignoring how these resources were provisioned. The provisioning request shows multiple resources per provisioning request.</p>
<p>The provisioning broker -- Nimbus, Eucalyptus or EC2 -- is responsible to allocate and set up the resources. Please note that each provisioning broker comes with its own set of client tools that may be executed either on your laptop or desktop in front of you, or from a FutureGrid login node. The FutureGrid tutorials for the various IaaS services have details on their client tools and usage.<br />
	<br />
	For a multi-node request, the worker nodes often require access to a form of shared data storage. Concretely, either a POSIX-compliant shared file system (e.g. NFS, PVFS) is available to the nodes, or can be brought up for the lifetime of the application workflow. The task steps of the application workflow facilitate shared file systems to exchange intermediary results between tasks on the same cloud site. Pegasus also supports an S3 data mode for the application workflow data staging. As of Pegasus 4.0, it more easily supports non-shared file system execution where each worker node uses only its own storage.</p>
<p>The initial stage-in and final stage-out of application data into and out of the node set is part of any Pegasus-planned workflow. Several configuration options exist in Pegasus to deal with the dynamics of push and pull of data, and when to stage data. In many use-cases, some form of external access to or from the shared file system that is visible to the application workflow is required to facilitate successful data staging. However, Pegasus is prepared to deal with a set of boundary cases.</p>
<p>The data server in the figure is shown at the submit host. This is <em>not a strict requirement</em>. The data server for consumed data (input data) and data products (output data) may both be different and external to the submit host.</p>
<p>Once worker nodes (resources) begin appearing in the pool managed by the submit host&#39;s Condor <em>collector</em>, the application workflow, as planned by Pegasus, can be submitted to Condor. A Condor <em>DAGMan</em> will manage the application workflow execution. Pegasus run-time tools obtain timing-, performance and provenance information as the application workflow is executed. In the cloud and FutureGrid scenario, it is the user&#39;s responsibility to de-provision the allocated resources.</p>
<p>In the figure, the cloud resources on the right side are assumed to have uninhibited outside connectivity. This enables the Condor I/O to communicate directly with the resources. The right side includes a setup where the worker nodes use all private IP, but have out-going connectivity and a NAT router to talk to the internet. The <em>Condor connection broker</em> (CCB) facilitates this setup almost effortlessly.</p>
<p>The left side shows a more difficult setup where the connectivity is fully firewalled without any connectivity except to in-site nodes. In this case, a proxy server process, the <em>generic connection broker</em> (GCB), needs to be set up in the de-militarized zone (DMZ) of the cloud site&#39;s firewall to facilitate Condor I/O between the submit host and worker nodes.</p>
<p>If the cloud supports data storage servers, Pegasus 4.0 is starting to support workflows that require staging in two steps: Consumed data is first staged to a data server in the remote site&#39;s DMZ, and then a second staging task moves the data from the data server to the worker node where the job runs. For staging out, data needs to be first staged from the job&#39;s worker node to the site&#39;s data server, and possibly from there to another data server external to the site. Pegasus is capable to plan both steps: Normal staging to a remote site&#39;s data server, and the worker-node staging from and to the site&#39;s data server as part of the job. We are working on expanding the current code to support a more generic set in the newly released Pegasus 4.0.</p>
<h2>
	Using Pegasus on FutureGrid</h2>
<p>The Pegasus tutorial for FutureGrid is forthcoming shortly. You are welcome to <a href="http://pegasus.isi.edu/futuregrid/tutorials/">review the &quot;Using Pegasus In FutureGrid&quot; tutorial</a> which makes use of one of the following Virtual Machines:</p>
<table align="center">
	
		<tr>
			<td>
				<strong>IaaS</strong></td>
			<td>
				<strong>Resource</strong></td>
			<td>
				<strong>Image Name</strong></td>
			<td class="rteright">
				<strong>CentOS</strong></td>
			<td class="rteright">
				<strong>PWMS</strong></td>
			<td class="rteright">
				<strong>Condor</strong></td>
			<td class="rteright">
				<strong>Globus</strong></td>
			<td class="rteright">
				<strong>Mntge</strong></td>
		</tr>
	
	
		<tr>
			<td>
				Nimbus</td>
			<td>
				alamo</td>
			<td>
				pegasus-tutorial.x64.kvm.gz</td>
			<td class="rteright">
				5.7</td>
			<td class="rteright">
				4.0.0</td>
			<td class="rteright">
				7.6.6</td>
			<td class="rteright">
				5.2.0</td>
			<td class="rteright">
				3.3p2</td>
		</tr>
		<tr>
			<td>
				Nimbus</td>
			<td>
				hotel</td>
			<td>
				pegasus-tutorial.x64.gz</td>
			<td class="rteright">
				5.7</td>
			<td class="rteright">
				4.0.0</td>
			<td class="rteright">
				7.6.6</td>
			<td class="rteright">
				5.2.0</td>
			<td class="rteright">
				3.3p2</td>
		</tr>
		<tr>
			<td>
				Nimbus</td>
			<td>
				foxtrot</td>
			<td>
				pegasus-tutorial.x64.gz</td>
			<td class="rteright">
				5.7</td>
			<td class="rteright">
				4.0.0</td>
			<td class="rteright">
				7.6.6</td>
			<td class="rteright">
				5.2.0</td>
			<td class="rteright">
				3.3p2</td>
		</tr>
		<tr>
			<td>
				Nimbus</td>
			<td>
				sierra</td>
			<td>
				pegasus-tutorial.x64.gz</td>
			<td class="rteright">
				5.7</td>
			<td class="rteright">
				4.0.0</td>
			<td class="rteright">
				7.6.6</td>
			<td class="rteright">
				5.2.0</td>
			<td class="rteright">
				3.3p2</td>
		</tr>
		<tr>
			<td>
				Eucalyptus</td>
			<td>
				sierra</td>
			<td>
				tutorial/pegasus-tutorial.x64.manifest.xml</td>
			<td class="rteright">
				5.8</td>
			<td class="rteright">
				4.0.0</td>
			<td class="rteright">
				7.6.6</td>
			<td class="rteright">
				5.2.0</td>
			<td class="rteright">
				3.3p2</td>
		</tr>
		<tr>
			<td>
				Eucalyptus</td>
			<td>
				india</td>
			<td>
				pegasus/pegasus-tutorial.x64.manifest.xml</td>
			<td class="rteright">
				5.8</td>
			<td class="rteright">
				4.0.0</td>
			<td class="rteright">
				7.6.6</td>
			<td class="rteright">
				5.2.0</td>
			<td class="rteright">
				3.3p2</td>
		</tr>
		<tr>
			<td>
				OpenStack</td>
			<td>
				india</td>
			<td>
				pegasus/pegasus-tutorial.x64.manifest.xml</td>
			<td class="rteright">
				5.8</td>
			<td class="rteright">
				4.0.0</td>
			<td class="rteright">
				7.6.6</td>
			<td class="rteright">
				5.2.0</td>
			<td class="rteright">
				3.3p2</td>
		</tr>
	
</table>
<p>The table above shows the available Pegasus Virtual Machines you can use to try out Pegasus. At this point, the Nimbus-based VMs are are preferred.</p>  </div>
</div>
<div id="node-1330" class="section-2">
  <h1 class="book-heading">Management Services</h1>
  FutureGrid contains a number of interresting management services. This includes image management services to deploy and provision images onto bare metal or virtualized machines as well as experiment management that allows the creation of easy to use workflows to run repeatable experiments on FutureGrid. These services are curently under development and you are welcome to join the development teams by contacting <a href="mailto:laszewski@gmail.com">laszewski@gmail.com</a>  <div id="node-2444" class="section-3">
  <h1 class="book-heading">Nimbus Phantom</h1>
  Nimbus Phantom is a hosted service, running on FutureGrid, that makes it easy to leverage on-demand resources provided by infrastructure clouds. Phantom allows the user to deploy a set of virtual machines over multiple private, community, and commercial clouds and then automatically grows or shrinks this set based on policies defined by the user. This elastic set of virtual machines can then be used to implement scalable and highly available services. An example of such service is a caching service that stands up more workers on more resources as the number of requests to the service increases. Another example is a scheduler that grows its set of resources as demand grows.<br />
	<br />
	Currently Phantom works with all FutureGrid Nimbus and OpenStack clouds as well as Amazon and the XSEDE wispy cloud (the only XSEDE cloud for now). A user can access it via two types of clients: an easy to use web application and a scripting client. The scripting client is the boto autoscale client as Phantom currently implements Amazon Autscaling API &ndash; so you can think of it as Amazon Autoscale for FutureGrid clouds that also allows for cloudburst to XSEDE and commercial clouds and is easy to extend with your own policies and sensors.<br />
	<br />
	The simplest scenario for using Phantom is as a gateway for deploying and monitoring groups of virtual machines spread over multiple FutureGrid clouds. In a more complex scenario you can use it to cloudburst from FutureGrid clouds to Amazon. Finally, you can use it to explore policies that will automate cloudbursting and VM allocations between multiple clouds.<br />
	<br />
	For more information and/or to use the service go to <a href="http://www.nimbusproject.org/phantom">www.nimbusproject.org/phantom</a>. It should take no more than 10-15 minutes to start your own VMs.
<ul>
	<li>
		<a href="https://phantom.nimbusproject.org/accounts/login/?next=/">Phantom web interface</a></li>
	<li>
		<a href="http://www.nimbusproject.org/files/keahey_wcs_ocs_2012.pdf">Phantom publication</a></li>
</ul>  </div>
<div id="node-2329" class="section-3">
  <h1 class="book-heading">Precip - Pegasus Repeatable Experiments for the Cloud in Python</h1>
  <p class="title">&nbsp;</p>
	
	
		<dl>
			<dd>
				<dl></dl>
			</dd>
		</dl>
	
	
		
			
				
					<h2 class="title">Overview</h2>
				
			
		
		<p>Precip is a flexible exeperiment management API for running experiments on clouds. Precip was developed for use on FutureGrid infrastructures such as OpenStack, Eucalyptus (&gt;=3.2), Nimbus, and at the same time commercial clouds such as Amazon EC2. The API allows you to easily provision resources, which you can then can run commands on and copy files to/from subsets of instances identified by tags. The goal of the API is to be flexible and simple to use in Python scripts to control your experiments.</p>
		<p>The API does not require any special images, which makes it easy to get going. Any basic Linux image will work. More complex images can be used if your experiment requires so, or you can use the experiment API to run bootstrap scripts on the images to install/configure required software.</p>
		<p>A concept which simplfies interacting with the API is instance tagging. When you start an instance, you can add arbitrary tags to it. The instance also gets a set of default tags. API methods such as running a remote command, or copying files, all use tags for specify which instances you want to target.</p>
		<p>Precip also handles ssh keys and security groups automatically. This is done to make sure the experiment management is not interfering with your existing cloud setup. The first time you use Precip, a directory will be created called ~/.precip. Inside this directory, a ssh keypair will be created and used for accessing instances. On clouds which supports it, the keypair is automatically registered as &#39;precip&#39;, and a &#39;precip&#39; security group is created. If your experiement requires more ports to be open you can use the cloud interface to add those ports to the precip security group.</p>
		<p>Precip is a fairly new API, and if you have questions or suggestions for improvements, please contact <a href="mailto:pegasus-support@isi.edu">pegasus-support@isi.edu</a></p>
	
	
		
			
				
					<h2 class="title">Installation</h2>
				
			
		
		<p>If you want to use the India or Sierra FutureGrid resources to manage your experiment, Precip is available on the interactive logins nodes via modules: module load precip/0.1<br />
			<br />
			You can also install Precip on your own machine. Prerequisites are the Paramiko and Boto Python modules. The Python source package and RPMs are available at: <a class="ulink" href="http://pegasus.isi.edu/static/precip/software/" target="_top">http://pegasus.isi.edu/static/precip/software/</a></p>
	
	
		
			
				
					<h2 class="title">API</h2>
				
			
		
		
			<dl>
				<dt><strong>provision(image_id, instance_type=&#39;m1.small&#39;, count=1, tags=None)</strong></dt>
				<dd>
					<p>Provision a new instance. Note that this method starts the provisioning cycle, but does not block for the instance to finish booting. For blocking on instance creation/booting, see wait()</p>
					<p>Parameters:</p>
					
						<ul class="itemizedlist" type="disc">
							<li class="listitem">
								<p><strong>image_id</strong> - the id of the image to instanciate</p>
							</li>
							<li class="listitem">
								<p><strong>instance_type</strong> - the type of instance. This is infrastructure specific, but usually follows the Amazon EC2 model with m1.small, m1.large, and so on.</p>
							</li>
							<li class="listitem">
								<p><strong>count</strong> - number of instances to create</p>
							</li>
							<li class="listitem">
								<p><strong>tags</strong> - these are used to manipulate the instance later. Use this to create logical groups of your instances.</p>
							</li>
						</ul>
					
				</dd>
				<dt><strong>wait(tags=[], timeout=600)</strong></dt>
				<dd>
					<p>Barrier for all instances matching the tags argument. This method will block until the instances have finish booting and are accessible via their external hostnames.</p>
					<p>Parameters:</p>
					
						<ul class="itemizedlist" type="disc">
							<li class="listitem">
								<p><strong>tags</strong> - tags specifying the subset of instances to block on. The default value is [] which means wait for all instances.</p>
							</li>
						</ul>
					
					
						<ul class="itemizedlist" type="disc">
							<li class="listitem">
								<p><strong>timeout</strong> - timeout in seconds for the instances to boot. If the timeout is reached, an ExperimentException is raised. The default is 600 seconds.</p>
							</li>
						</ul>
					
				</dd>
				<dt><strong>deprovision(tags)</strong></dt>
				<dd>
					<p>Deprovisions (terminates) instances matching the tags argument</p>
					<p>Parameters:</p>
					
						<ul class="itemizedlist" type="disc">
							<li class="listitem">
								<p><strong>tags</strong> - tags specifying the subset of instances to deprovision.</p>
							</li>
						</ul>
					
				</dd>
				<dt><strong>list(tags)</strong></dt>
				<dd>
					<p>Returns a list of details about the instances matching the tags. The details include instance id, hostnames, and tags.</p>
					<p>Parameters:</p>
					
						<ul class="itemizedlist" type="disc">
							<li class="listitem">
								<p><strong>tags</strong> - tags specifying the subset of instances to give information on. If you want details on all current instances, use [].</p>
							</li>
						</ul>
					
					<p>Returns:</p>
					
						<ul class="itemizedlist" type="disc">
							<li class="listitem">
								<p>List of dictionaries, one for each instance.</p>
							</li>
						</ul>
					
				</dd>
				<dt><strong>get_public_hostnames(tags)</strong></dt>
				<dd>
					<p>Provides a list of public hostnames for the instances matching the tags. The public hostnames can be provided to other instances in order to let the instances know about eachother.</p>
					<p>Parameters:</p>
					
						<ul class="itemizedlist" type="disc">
							<li class="listitem">
								<p><strong>tags</strong> - tags specifying the subset of instances.</p>
							</li>
						</ul>
					
					<p>Returns:</p>
					
						<ul class="itemizedlist" type="disc">
							<li class="listitem">
								<p>A list of public hostnames</p>
							</li>
						</ul>
					
				</dd>
				<dt><strong>get_private_hostnames(tags)</strong></dt>
				<dd>
					<p>Provides a list of private hostnames for the instances matching the tags. The private hostnames can be provided to other instances in order to let the instances know about eachother.</p>
					<p>Parameters:</p>
					
						<ul class="itemizedlist" type="disc">
							<li class="listitem">
								<p><strong>tags</strong> - tags specifying the subset of instances.</p>
							</li>
						</ul>
					
					<p>Returns:</p>
					
						<ul class="itemizedlist" type="disc">
							<li class="listitem">
								<p>A list of private hostnames</p>
							</li>
						</ul>
					
				</dd>
				<dt><strong>get(tags, remote_path, local_path, user=&quot;root&quot;)</strong></dt>
				<dd>
					<p>Transfers a file from a set of remote machines matching the tags, and stores the file locally. If more than one instance matches the tags, an instance id will be appended to the local_path.</p>
					<p>Parameters:</p>
					
						<ul class="itemizedlist" type="disc">
							<li class="listitem">
								<p><strong>tags</strong> - these are used to manipulate the instance later. Use this to create logical groups of your instances.</p>
							</li>
							<li class="listitem">
								<p><strong>remote_path</strong> - the path of the file on the remote instance</p>
							</li>
							<li class="listitem">
								<p><strong>local_path</strong> - the local path to tranfer to</p>
							</li>
							<li class="listitem">
								<p><strong>user</strong> - remote user. If not specified, the default is &#39;root&#39;</p>
							</li>
						</ul>
					
				</dd>
				<dt><strong>put(tags, local_path, remote_path, user=&quot;root&quot;)</strong></dt>
				<dd>
					<p>Transfers a local file to a set of remote machines matching the tags.</p>
					<p>Parameters:</p>
					
						<ul class="itemizedlist" type="disc">
							<li class="listitem">
								<p><strong>tags</strong> - these are used to manipulate the instance later. Use this to create logical groups of your instances.</p>
							</li>
							<li class="listitem">
								<p><strong>local_path</strong> - the local path to tranfer from</p>
							</li>
							<li class="listitem">
								<p><strong>remote_path</strong> - the path on the remote instance to store the file as</p>
							</li>
							<li class="listitem">
								<p><strong>user</strong> - remote user. If not specified, the default is &#39;root&#39;</p>
							</li>
						</ul>
					
				</dd>
				<dt><strong>run(tags, cmd, user=&quot;root&quot;, check_exit_code=True)</strong></dt>
				<dd>
					<p>Runs a command on the instances matches the tags. The commands are run in series, on one instance after the other.</p>
					<p>Parameters:</p>
					
						<ul class="itemizedlist" type="disc">
							<li class="listitem">
								<p><strong>tags</strong> - these are used to manipulate the instance later. Use this to create logical groups of your instances.</p>
							</li>
							<li class="listitem">
								<p><strong>cmd</strong> - the command to run</p>
							</li>
							<li class="listitem">
								<p><strong>user</strong> - remote user. If not specified, the default is &#39;root&#39;. If you need to run commands as another user, you will have to make sure that user accepts the ssh key in ~/.precip/</p>
							</li>
							<li class="listitem">
								<p><strong>check_exit_code</strong> - If set to True (default), commands returning non-zero exit codes will result in a ExperimentException being raised.</p>
							</li>
						</ul>
					
					<p>Returns:</p>
					
						<ul class="itemizedlist" type="disc">
							<li class="listitem">
								<p>A list of lists, containing exit_code[], stdout[] and stderr[] for the commands run</p>
							</li>
						</ul>
					
				</dd>
				<dt><strong>copy_and_run(tags, local_script, args=[], user=&quot;root&quot;, check_exit_code=True)</strong></dt>
				<dd>
					<p>Copies a script from the local machine to the remote instances and executes the script. The script is run in series, on one instance after the other.</p>
					<p>Parameters:</p>
					
						<ul class="itemizedlist" type="disc">
							<li class="listitem">
								<p><strong>tags</strong> - these are used to manipulate the instance later. Use this to create logical groups of your instances.</p>
							</li>
							<li class="listitem">
								<p><strong>local_script</strong> - the local script to run</p>
							</li>
							<li class="listitem">
								<p><strong>args</strong> - arguments for the script</p>
							</li>
							<li class="listitem">
								<p><strong>user</strong> - remote user. If not specified, the default is &#39;root&#39;. If you need to run commands as another user, you will have to make sure that user accepts the ssh key in ~/.precip/</p>
							</li>
							<li class="listitem">
								<p><strong>check_exit_code</strong> - If set to True (default), commands returning non-zero exit codes will result in a ExperimentException being raised.</p>
							</li>
						</ul>
					
					<p>Returns:</p>
					
						<ul class="itemizedlist" type="disc">
							<li class="listitem">
								<p>A list of lists, containing exit_code[], stdout[] and stderr[] for the commands run</p>
							</li>
						</ul>
					
				</dd>
			</dl>
		
		<p>The basic methods above are standard across all the Cloud infrastructures. What is different is the constructors as each infrastructure handles initialization a little bit different. For example, to create a new OpenStack using the EC2_* environment provided automatically by FutureGrid:</p>
		<pre class="programlisting">            
    exp = OpenStackExperiment(
            os.environ[&#39;EC2_URL&#39;],
            os.environ[&#39;EC2_ACCESS_KEY&#39;],
            os.environ[&#39;EC2_SECRET_KEY&#39;])
            
        </pre>
		<p>i For Amazon EC2, you have to specify region, endpoint, and access/secret keys. Note that it is not required to use environment variables for your credentials, but seperating the crenditals from the code prevents the credentials from being check in to source control systems.</p>
		<pre class="programlisting">            
    exp = EC2Experiment(
            &quot;us-west-2c&quot;,
            &quot;ec2.us-west-2.amazonaws.com&quot;,
            os.environ[&#39;AMAZON_EC2_ACCESS_KEY&#39;],
            os.environ[&#39;AMAZON_EC2_SECRET_KEY&#39;])
            
        </pre>
	
	
		
			
				
					<h2 class="title">Examples</h2>
				
			
		
		
			
				
					
						<h3 class="title">Hello World</h3>
					
				
			
			<pre class="programlisting">                
#!/usr/bin/python

import os
import time
from pprint import pprint

from precip import *

exp = None

# Use try/except liberally in your experiments - the api is set up to
# raise ExperimentException on most errors
try:

    # Create a new OpenStack based experiment. In this case we pick
    # up endpoints and access/secret cloud keys from the environment
    # as exposing those is the common setup on FutureGrid
    exp = OpenStackExperiment(
            os.environ[&#39;EC2_URL&#39;],
            os.environ[&#39;EC2_ACCESS_KEY&#39;],
            os.environ[&#39;EC2_SECRET_KEY&#39;])

    # Provision an instance based on the ami-0000004c. Note that tags are
    # used throughout the api to identify and manipulate instances. You 
    # can give an instance an arbitrary number of tags.
    exp.provision(&quot;ami-0000004c&quot;, tags=[&quot;test1&quot;], count=1)

    # Wait for all instances to boot and become accessible. The provision
    # method only starts the provisioning, and can be used to start a large
    # number of instances at the same time. The wait method provides a 
    # barrier to when it is safe to start the actual experiment.
    exp.wait()

    # Print out the details of the instance. The details include instance id,
    # private and public hostnames, and tags both defined by you and some
    # added by the api
    pprint(exp.list())
   
    # Run a command on the instances having the &quot;test1&quot; tag. In this case we
    # only have one instance, but if you had multiple instances with that
    # tag, the command would run on each one.
    exp.run([&quot;test1&quot;], &quot;echo &#39;Hello world from a experiment instance&#39;&quot;)

except ExperimentException as e:
    # This is the default exception for most errors in the api
    print &quot;ERROR: %s&quot; % e

finally:
    # Be sure to always deprovision the instances we have started. Putting
    # the deprovision call under finally: make the deprovisioning happening
    # even in the case of failure.
    if exp is not None:
        exp.deprovision()
                
            </pre>
		
		
			
				
					
						<h3 class="title">Resources from mulitple infrastructures</h3>
					
				
			
			<pre class="programlisting">                
#!/usr/bin/python

import os
import time

from precip import *

ec2 = None
fg = None

try:

    # This example show how to run an experiment between Amazon EC2
    # and an OpenStack resource on FutureGrid. The setup is pretty
    # similar to the HelloWorld example, except that we now have to
    # experiment to handle. The first step is to get the experiments
    # initialized. Note that it is not required to use environment
    # variables for your credentials, but seperating the crenditals
    # from the code prevents the credentials from being check in to
    # source control systems.
    
    ec2 = EC2Experiment(
            &quot;us-west-2c&quot;,
            &quot;ec2.us-west-2.amazonaws.com&quot;,
            os.environ[&#39;AMAZON_EC2_ACCESS_KEY&#39;],
            os.environ[&#39;AMAZON_EC2_SECRET_KEY&#39;])
   
    fg = OpenStackExperiment(
            os.environ[&#39;EC2_URL&#39;],
            os.environ[&#39;EC2_ACCESS_KEY&#39;],
            os.environ[&#39;EC2_SECRET_KEY&#39;])

    # Next we provision two instances, one on Amazon EC2 and one of
    # FutureGrid
    ec2.provision(&quot;ami-8a1e92ba&quot;, tags=[&quot;id=ec2_1&quot;])
    fg.provision(&quot;ami-0000004c&quot;, tags=[&quot;id=fg_1&quot;])

    # Wait for all instances to boot and become accessible. The provision
    # method only starts the provisioning, and can be used to start a large
    # number of instances at the same time. The wait method provides a 
    # barrier to when it is safe to start the actual experiment.
    ec2.wait([])
    fg.wait([])
    
    # Run commands on the remote instances
    ec2.run([], &quot;echo &#39;Hello world Amazon EC2&#39;&quot;)
    fg.run([], &quot;echo &#39;Hello world FutureGrid OpenStack&#39;&quot;)

except ExperimentException as e:
    # This is the default exception for most errors in the api
    print &quot;ERROR: %s&quot; % e
    raise e
finally:
    # Be sure to always deprovision the instances we have started. Putting
    # the deprovision call under finally: make the deprovisioning happening
    # even in the case of failure.
    if ec2 is not None:
        ec2.deprovision([])
    if fg is not None:
        fg.deprovision([])
                
            </pre>
		
		
			
				
					
						<h3 class="title">Setting up a Condor pool and run a Pegasus workflow</h3>
					
				
			
			<p>This is a more complex example in which a small Condor pool is set up and then a Pegasus workflow is run and benchmarked. The Precip script is similar to what we have seen before, but it has two groups of instances, one master acting as the Condor central manager, and a set of Condor worker nodes.</p>
			<pre class="programlisting">                
#!/usr/bin/python

import os
import time

from precip import *

try:

    # This experiment is targeted to run on OpenStack
    exp = OpenStackExperiment(
            os.environ[&#39;OPENSTACK_URL&#39;],
            os.environ[&#39;OPENSTACK_ACCESS_KEY&#39;],
            os.environ[&#39;OPENSTACK_SECRET_KEY&#39;])

    # We need a master Condor node and a set of workers
    exp.provision(&quot;ami-0000004c&quot;, tags=[&quot;master&quot;],
                  instance_type=&quot;m1.large&quot;)
    exp.provision(&quot;ami-0000004c&quot;, tags=[&quot;compute&quot;],
                  instance_type=&quot;m1.large&quot;, count=2)
    exp.wait()

    # The workers need to know what the private hostname of the master is
    master_priv_addr = exp.get_private_hostnames([&quot;master&quot;])[0]

    # Bootstrap the instances. This includes installing Condor and Pegasus,
    # downloading and settup the workflow.
    exp.copy_and_run([&quot;master&quot;], &quot;./bootstrap.sh&quot;)
    exp.copy_and_run([&quot;compute&quot;], &quot;./bootstrap.sh&quot;, args=[master_priv_addr])

    # Give the workers some time to register with the Condor central 
    # manager
    time.sleep(60)

    # Make sure Condor came up correctly
    exp.run([&quot;master&quot;], &quot;condor_status&quot;)

    # Run the workflow
    exp.run([&quot;master&quot;], &quot;cd ~/montage &amp;&amp; ./run-montage&quot;, user=&quot;wf&quot;)

    # At this point, in a real experiment, you could for example provision
    # more resources and run the workflow again, or run the workflow with
    # different parameters/settings.

except ExperimentException as e:
    print &quot;ERROR: %s&quot; % e
finally:
    # always want to clean up all the instances we have started
    exp.deprovision([])
                
            </pre>
			<p>We also need a bootstrap.sh which sets up the instances:</p>
			<pre class="programlisting">                
#!/bin/bash

# This script bootstraps a basic RHEL6 instance to be have working
# Condor and Pegasus installs. The script takes one optional
# argument which is the address of the master instance (central
# manager in Condor terminology). If the argument is not given,
# the script sets up the instance to be the master.

MASTER_ADDR=$1

# for images with condor already installed, stop condor
/etc/init.d/condor stop &gt;/dev/null 2&gt;&amp;1 || /bin/true

# correct clock is important for most projects
yum -q -y install ntpdate
/etc/init.d/ntpdate start

# Add the EPEL repository
wget -nv <a href="http://mirror.utexas.edu/epel/6/x86_64/epel-release-6-7.noarch.rpm" title="http://mirror.utexas.edu/epel/6/x86_64/epel-release-6-7.noarch.rpm">http://mirror.utexas.edu/epel/6/x86_64/epel-release-6-7.noarch.rpm</a>
rpm -Uh epel-release-*.noarch.rpm

# Add the Condor repository
cat &gt;/etc/yum.repos.d/condor.repo &lt;&lt;EOF
[condor-stable]
name=Condor Stable RPM Repository for Redhat Enterprise Linux 6
baseurl=http://www.cs.wisc.edu/condor/yum/stable/rhel6
enabled=1
gpgcheck=0
EOF

# Add the Pegasus repository
cat &gt;/etc/yum.repos.d/pegasus.repo &lt;&lt;EOF
[Pegasus]
name=Pegasus
baseurl=http://download.pegasus.isi.edu/wms/download/rhel/6/x86_64
gpgcheck=0
enabled=1
priority=50
EOF

# Install required software
yum -q -y clean all
yum -q -y install gcc gcc-g++ gcc-gfortran make gawk bison diffutils \
                  java-1.7.0-openjdk.x86_64 \
                  java-1.7.0-openjdk-devel.x86_64 \
                  ganglia-gmond condor pegasus

# Clear the Condor local config file - we use config.d instead
cat /dev/null &gt;/etc/condor/condor_config.local

# Common Condor config between master and workers
cat &gt;/etc/condor/config.d/50-main.conf &lt;&lt;EOF

CONDOR_HOST = $MASTER_ADDR

FILESYSTEM_DOMAIN = \$(FULL_HOSTNAME)
TRUST_UID_DOMAIN = True

DAEMON_LIST = MASTER, STARTD

# security
ALLOW_WRITE = 10.*
ALLOW_READ = \$(ALLOW_WRITE)

# default policy
START = True
SUSPEND = False
CONTINUE = True
PREEMPT = False
KILL = False

EOF

# Master gets extra packages/configs
if [ &quot;x$MASTER_ADDR&quot; = &quot;x&quot; ]; then
    yum -q -y install ganglia-gmetad ganglia-web

    cat &gt;/etc/condor/config.d/90-master.conf &lt;&lt;EOF
CONDOR_HOST = \$(FULL_HOSTNAME)
DAEMON_LIST = MASTER, COLLECTOR, NEGOTIATOR, SCHEDD
EOF
fi

# Restarting daemons
/etc/init.d/condor start

# User to run the workflows as, and allow the experiment management
# ssh key to authenticate
adduser wf
mkdir -p ~wf/.ssh
cp ~/.ssh/authorized_keys ~wf/.ssh/
chown -R wf: ~wf/.ssh
    
# Master is the submit host, so deploy our workflow on it
if [ &quot;x$MASTER_ADDR&quot; = &quot;x&quot; ]; then
    # install the workflow tarball and wait script
    cd ~wf
    wget -q <a href="http://pegasus.isi.edu/static/precip/wf-experiment/montage.tar.gz" title="http://pegasus.isi.edu/static/precip/wf-experiment/montage.tar.gz">http://pegasus.isi.edu/static/precip/wf-experiment/montage.tar.gz</a>
    tar xzf montage.tar.gz
    chown -R wf: montage*
fi
                
            </pre>
		
	

<br />  </div>
<div id="node-2398" class="section-3">
  <h1 class="book-heading">cloudinit.d</h1>
  cloudinit.d is a tool designed for launching, controlling, and monitoring complex environments in the cloud.<br />
	<br />
	Its most important feature is repeatable, one-click, deployment of sets of VMs configured with launch plans. &nbsp;These sets of VMs can be deployed over multiple clouds (Eucalyptus, Nimbus, OpenStack, and Amazon EC2 are currently supported) as well as include non-virtualized resources. Like the Unix init.d process, cloudinit.d can

	manage dependencies between deployed VMs. It also provides mechanisms for testing, monitoring, and repairing a launch.<br />
	<br />
	For more information about cloudinit.d see our&nbsp;<a href="http://www.nimbusproject.org/files/cloudinitd_tg11_submit3c.pdf">Teragrid 2011 paper</a>.&nbsp;For repeatable experiment management with cloudinit.d read the&nbsp;<a href="http://www.nimbusproject.org/downloads/Supporting_Experimental_Computer_Science_final_draft.pdf">report on</a>&nbsp;<a href="http://www.nimbusproject.org/downloads/Supporting_Experimental_Computer_Science_final_draft.pdf">support for experimental computer science</a>.  </div>
</div>
<div id="node-1331" class="section-2">
  <h1 class="book-heading">Grid Services</h1>
    <div id="node-682" class="section-3">
  <h1 class="book-heading">Unicore</h1>
  <p><span>This page is maintained by Karolina Sarnowska-Upton from the University of Virginia.</span></p>
<h1 class="rtecenter"><img alt="" height="130" src="/sites/default/files/u30/fg-logo-md.gif" style="width: 189px; height: 130px;" width="189" /><br class="Apple-interchange-newline" /><br />
	&nbsp;</h1>
<h1 class="rtecenter"><span>UNICORE 6 on FutureGrid</span><br />
	User Manual</h1>
<p class="rtecenter"><span>Author: Karolina Sarnowska-Upton, University of Virginia</span><br />
	Version: 1.0<br />
	Today&#39;s Date: 2010-12-21<br />
	Last Revision: 2011-11-28</p>
<p></p>
<h1>Introduction</h1>
<p><a _fcksavedurl="http://www.unicore.eu/download/unicore6&nbsp;" href="http://www.unicore.eu/download/unicore6&nbsp;">UNICORE 6</a> has been deployed at various FutureGrid sites. This tutorial explains how to connect to the existing FutureGrid UNICORE endpoints from other grid middleware platforms or a UNICORE Commandline Client (UCC) as well as how runs jobs on UNICORE sites and how to deploy a new UNICORE grid.</p>
<h1>What is UNICORE?</h1>
<p>UNICORE (Uniform Interface to Computing Resources) is a Grid middleware system. Listed below are the key principles of the UNICORE design. More information about UNICORE can be found at <a href="http://www.unicore.eu" title="http://www.unicore.eu">http://www.unicore.eu</a>.</p>
<ul>
<li>
<p><span style="font-size: 12px;">Open source under BSD license.</span></p>
</li>
</ul>
<ul>
<li>Standards-based, conforming to the latest standards from the Open Grid Forum (OGF), W3C, OASIS, and IETF, in particular the Open Grid Services Architecture (OGSA) and the Web Services Resource Framework (WS-RF 1.2).</li>
</ul>
<ul>
<li>Open and extensible realized with a modern Service- Oriented Architecture (SOA), which allows easily replacement of particular components with others.</li>
</ul>
<ul>
<li>Interoperable with other Grid technologies to enable a coupling of Grid infrastructures or the users needs</li>
</ul>
<ul>
<li>Seamless, secure, and intuitive following a vertical, end-to-end approach and offering components at all levels of a modern Grid architecture from intuitive user interfaces down to the resource level. Like previous versions UNICORE 6 seamlessly integrates in existing environments.</li>
</ul>
<ul>
<li>Mature security mechanisms adequate for the use in supercomputing environments and Grid infrastructures. X.509 certificates form the basis for authentication and authorization, enhanced with a support for proxy certificates and virtual organizations (VO) based access control.</li>
</ul>
<ul>
<li>Workflow support tightly integrated into the stack while being extensible in order to use different workflow languages and engines for domain-specific usage.</li>
</ul>
<ul>
<li>Application integration mechanisms on the client, services and resource level for a tight integration of various types of applications from the scientific and industrial domain.</li>
</ul>
<ul>
<li>Different clients serving the needs of various scientific communities, e.g. graphical clients to define complex workflows, command line tool, web based access.</li>
</ul>
<ul>
<li>Quick and simple to install and configure to address requirements from operational teams and to lower the barrier of adopting Grid technologies. Similar the configuration of the various services and components is easy to handle.</li>
</ul>
<ul>
<li>Various operating and batch systems are supported on all layers, i.e. clients, services and systems; Windows, MacOS, Linux, and Unix systems as well as different batch systems are supported such as LoadLeveler, Torque, SLURM, LSF, OpenCCS, etc.</li>
</ul>
<ul>
<li>Implemented in Java to achieve platform independence.</li>
</ul>
<h1>Connecting to the UNICORE BES Endpoints From Other Grid Middleware Clients</h1>
<p>Two UNICORE BES endpoints have been deployed on FutureGrid for interoperability testing. One endpoint is located on Sierra and the other is located on India. This section contains the information needed for other grid middleware platforms to connect to the UNICORE BES endpoints.</p>
<h2>India Endpoint Info &lt;currently unavailable&gt;</h2>
<ul>
<li><b>Endpoint URL</b>: <a href="https://149.165.146.134:8081/DEMO-SITE/services/">https://149.165.146.134:8081/DEMO-SITE/services/</a>BESFactory?res=default_bes_factory</li>
</ul>
<ul>
<li><b>Security</b>: configured for username/password authentication; <a _fcksavedurl="mailto:karolina@virginia.edu" href="mailto:karolina@virginia.edu">Email</a> for username token and CA cert.</li>
</ul>
<ul>
<li><b>OS</b>: Red Hat Enterprise Linux Server release 5.5</li>
</ul>
<ul>
<li><b>Arch</b>: x86_64</li>
</ul>
<ul>
<li><b>Cores</b>: 8 (Jobs submitted directly to machine - i.e. not through PBS queue)</li>
</ul>
<h2>Sierra Endpoint Info</h2>
<ul>
<li><b>Endpoint URL</b>: <a href="https://198.202.120.85:8081/DEMO-SITE/services/">https://198.202.120.85:8081/DEMO-SITE/services/</a>BESFactory?res=default_bes_factory</li>
</ul>
<ul>
<li><b>Security</b>: configured for X-509 based mutual client authentication; <a _fcksavedurl="mailto:karolina@virginia.edu" href="mailto:karolina@virginia.edu">Email</a> with X-509 cert and for CA cert.</li>
</ul>
<ul>
<li><b>OS</b>: Red Hat Enterprise Linux Server release 5.5</li>
</ul>
<ul>
<li><b>Arch</b>: x86_64</li>
</ul>
<ul>
<li><b>Cores</b>: 320 (Jobs submitted to PBS queue)</li>
</ul>
<hr /></p>
<h1>Connecting to the UNICORE BES Endpoints Using a UNICORE Commandline Client</h1>
<p>A UNICORE client can be used to connect to the FutureGrid UNICORE6 endpoints. This section describes how to install a UCC ( UNICORE Commandline Client), configure it to connect to a FutureGrid U6 endpoint via X-509 based mutual client authentication, and then submit jobs via BES.</p>
<h2>Installing the UNICORE6 Commandline Client (UCC)</h2>
<h3>Acquire Client Bundle</h3>
<ol>
<li style="margin-left: 0.3in;">Navigate to the UNICORE website: <a href="http://www.unicore.eu/" title="http://www.unicore.eu/">http://www.unicore.eu/</a></li>
<li style="margin-left: 0.3in;">Select &ldquo;Download&rdquo; link in left hand tool bar</li>
<li style="margin-left: 0.3in;">Under Clients section, select &ldquo;Download&rdquo; link for Commandline Client</li>
<li style="margin-left: 0.3in;">Click on folder for desired version&nbsp; (i.e. 6.4.1)</li>
<li style="margin-left: 0.3in;">Click on desired distribution bundle to download&nbsp; (i.e. ucc-6.4.1-all.tar.gz)</li>
</ol>
<h3>Unpack UCC</h3>
<ul>
<li>Unpack files from downloaded distribution bundle&nbsp; (i.e. tar -xvzf ucc-6.4.1-all.tar.gz)</li>
<li>On completion, there should be a directory containing the UNICORE6 commandline client&nbsp; (i.e. ucc-6.4.1)</li>
<li>You can add the bin directory to your path for easier client execution</li>
</ul>
<pre class="_fck_mw_lspace rteindent1"> export PATH=$PATH:&lt;UCC_HOME&gt;/bin,&nbsp; where UCC_HOME is the directory you installed UCC</pre><h3>Examine UCC Files</h3>
<p>Directory Structure</p>
<ul>
<li><span style="color: rgb(255, 0, 0);">bin </span>&ndash; contains executable &ldquo;ucc&rdquo;</li>
<li>certs</li>
<li><span style="color: rgb(255, 0, 0);">conf </span>&ndash; contains <em>preferences </em>file to be configured with security and registry settings</li>
<li>doc</li>
<li>extras</li>
<li>lib</li>
<li>samples</li>
</ul>
<h3>Run Commandline</h3>
<h3>&nbsp;</h3>
<h3>Client</h3>
<p>Run ucc to get list and description of available commands</p>
<pre class="_fck_mw_lspace"> $UCC_HOME/bin/</pre><pre class="_fck_mw_lspace"></pre><pre class="_fck_mw_lspace">ucc</pre><p>Usage: ucc &lt;command&gt; [OPTIONS] &lt;args&gt;<br />
The following commands are available:<br />
<span style="color: rgb(255, 140, 0);"><u>DATA MANAGEMENT</u><br />
&nbsp;ls&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - list a storage<br />
&nbsp;rm&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - remove a remote file or directory<br />
&nbsp;copy-file-status&nbsp;&nbsp;&nbsp; &nbsp; - check status of a copy-file<br />
&nbsp;get-file&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; - get remote files<br />
&nbsp;find&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; - find files on storages<br />
&nbsp;resolve&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; - resolve remote location<br />
&nbsp;mkdir&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - create a directory remotely<br />
&nbsp;copy-file&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; - copy remote files<br />
&nbsp;put-file&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; - puts a local file to a remote server</span><br />
<span style="color: rgb(0, 128, 0);"><u>GENERAL</u><br />
&nbsp;create-storage&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - create a storage service instance<br />
&nbsp;connect&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; - connect to UNICORE<br />
&nbsp;list-storages&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - list the available remote storages<br />
&nbsp;list-applications&nbsp;&nbsp;&nbsp; - lists applications on target systems<br />
&nbsp;list-jobs&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; - list your jobs<br />
&nbsp;list-sites&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; - list remote sites<br />
&nbsp;system-info&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; - checks the availability of services</span><br />
<span style="color: rgb(0, 0, 255);"><u>JOB EXECUTION</u><br />
&nbsp;run&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; &nbsp;- run a job through UNICORE 6<br />
&nbsp;get-status&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; &nbsp;- get job status<br />
&nbsp;abort-job&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; - abort a job<br />
&nbsp;batch&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; - run ucc on a set of files<br />
&nbsp;get-output &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - get output files</span><br />
<span style="color: rgb(128, 0, 128);"><u>OGSA-BES</u><br />
&nbsp;bes-list-att&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - provides information about U6 BES Interface<br />
&nbsp;bes-terminate-job&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - terminate bes activity<br />
&nbsp;bes-submit-job&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - run a job through UNICORE 6 BES Interface<br />
&nbsp;bes-list-jobs&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - list jobs running on BES.<br />
&nbsp;bes-job-status&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - get bes activity status</span><br />
<span style="color: rgb(128, 128, 128);"><u>OTHER</u><br />
&nbsp;shell&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - starts an interactive UCC session<br />
&nbsp;issue-delegation &nbsp;&nbsp;&nbsp;&nbsp; - allows to issue a trust delegation assertion<br />
&nbsp;connect-to-testgrid&nbsp;&nbsp; - get credentials for the public testgrid<br />
&nbsp;wsrf&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - perform a WSRF operation<br />
&nbsp;cip-query&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - query a CIS Infoprovider at a UNICORE site<br />
&nbsp;run-groovy&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - run a Groovy script</span><br />
<span style="color: rgb(165, 42, 42);"><u>WORKFLOW</u><br />
&nbsp;workflow-trace &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - trace info on a workflow in Chemomentum<br />
&nbsp;workflow-control &nbsp;&nbsp;&nbsp;&nbsp; - offers workflow control functions<br />
&nbsp;workflow-submit &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - submit a workflow<br />
&nbsp;workflow-info&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; - lists info on workflows.<br />
&nbsp;broker-run&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - submit work assignment to service orchestrator</span><br />
Enter &#39;ucc &lt;command&gt; -h&#39; for help on a particular</p>
<h3>Installation Conclusion</h3>
<ul>
<li>At this point, the UNICORE Commandline Client has been installed</li>
<li>However, the client is currently not connected to any UNICORE sites</li>
<li>The next section will explain how to configure the client so that the client will connect to one of the FutureGrid U6 endpoints</li>
</ul>
<h2>Configuring Client to Connect to FutureGrid U6 Endpoints</h2>
<h3>Configuration Overview</h3>
<ul>
<li>To connect to a FutureGrid U6 endpoint, you need to
<ul>
<li>setup security information so that your client will trust the FutureGrid U6 endpoint and vice-versa</li>
<li>specify the connection address that the client should use (aka registry address)</li>
</ul>
</li>
<li>This configuration process consists of
<ul>
<li>setting up keystore and truststore files with security info</li>
<li>specifying a registry address for the FutureGrid endpoint</li>
</ul>
</li>
<li>This information is stored in a &ldquo;preferences&rdquo; file (starter at $UCC_HOME/conf/preferences)</li>
</ul>
<h2>Setting Up Security in UNICORE</h2>
<p>To setup security, you will need to inform the UNICORE software of your identity and who you trust via keystore and truststore files:</p>
<ul>
<li><strong>Keystore </strong>- a file from which UNICORE software reads your identity, i.e. your private key and your certificate. As your private key is very sensitive, the keystore is encrypted and you will need a password to &quot;unlock&rdquo; it before usage.</li>
<li><strong>Truststore </strong>- a file from which UNICORE software reads certificates of the Certificate Authorities you trust. It is not as sensitive as a keystore, but it is also encrypted.</li>
</ul>
<p>For an overview of the security mechanism found in the UNICORE grid middleware, please consult the <a href="http://unicore.svn.sourceforge.net/svnroot/unicore/documentation/old/securityGuide/Main-UCCOnly.pdf">Users&#39; UNICORE Security Guide | UCC version</a><br />
This guide also discusses common security configuration problems and details how to create keystores/truststores</p>
<h2>Setting Up a</h2>
<h2>Keystore</h2>
<p>Assumption: you want to use a preexisting X.509 certificate for security validation</p>
<ul>
<li>If your key and certificate are in a keystore (in PKCS12 or JKS format), you can directly use this keystore</li>
<li>If you have PEM files, you will need to wrap your key and certificate files into a PKCS12 keystore:</li>
</ul>
<pre class="_fck_mw_lspace rteindent1">openssl pkcs12 -export -in myCert.pem -inkey myKey.pem -out keystore.p12 -name mykey </pre><p></p>
<h3>Creating a Truststore</h3>
<p>Assumption: you have certificates for CAs that you trust and want to put into a truststore file. This should include:</p>
<div class="rteindent1">CA cert for CA that issued your certificate</div>
<div class="rteindent1">CA cert for CA that issued FutureGrid U6 endpoint certs (Email <a href="mailto:uvacse@virginia.edu">uvacse@virginia.edu</a> for cert)<br />
	&nbsp;</div>
<p>To create a truststore with keytool</p>
<pre class="_fck_mw_lspace">keytool -import -keystore truststore.jks -file CAcert.pem -alias </pre><pre class="_fck_mw_lspace">myTrustedCA</pre><p>Repeat command for every CA certificate file (set a unique alias for each certificate)</p>
<h3>Acquiring the Registry</h3>
<h3>Address</h3>
<p>The UNICORE Registry server provides information about available services to clients and other services</p>
<p>Registry address for FutureGrid U6 Endpoint on Sierra (as of 08/2011)</p>
<pre class="_fck_mw_lspace"><a href="https://198.202.120.85:8081/DEMO-SITE/services/Registry?res=default_registry">https://198.202.120.85:8081/DEMO-SITE/services/Registry?res=default_registry</a></pre><h3>Connecting to Endpoints w/o Registries</h3>
<p>A Registry URL is expected to be provided in the preferences file. If a BES endpoint is not advertised via a UNICORE Registry, the configuration options can be modified to allow this behavior.</p>
<ol>
<li>In the preferences file, set the contact-registry to false:</li>
</ol>
<pre class="rteindent1">  contact-registry=false</pre><ol start="2">
<li>Instead, provide at least one BESFactory URL using the following format.</li>
</ol>
<pre class="rteindent1">  bes.1=https://site1.com/services/BESFactory
  bes.4=file:///tmp/bes.xml
  bes.5=/tmp/bes.xml</pre><p>If the &quot;contact-registry&quot; option is set to false and no OGSA-BES URL is specified, UCC will report an error.</p>
<p>	To use an XML endpoint reference (EPR) read from a file for contacting a BESFactory service, the contents of a EPR file must validate against the WS-Addressing&rsquo;s endpoint reference schema.</p>
<h3>Preferences File Modifications</h3>
<div style="margin-left: 0.3in;">Once you have keystore and truststore files, configure the client preferences file to use this security information</div>
<p>$UCC_HOME/conf/preferences</p>
<div style="margin-left: 0.3in;">
	<strong>Keystore Settings</strong></div>
<ul>
<li style="margin-left: 0.7in;">Set keystore path to the full path to where your keystore file is saved locally</li>
<li style="margin-left: 0.7in;">Provide the password that &ldquo;unlocks&rdquo; your keystore file</li>
<li style="margin-left: 1.1in;">If you do not want specify the password, you will be asked for it on the commandline</li>
<li style="margin-left: 0.7in;">Provide keystore&rsquo;s alias</li>
<li style="margin-left: 0.7in;">Provide keystore&rsquo;s storetype (PKCS12 or JKS)</li>
</ul>
<div style="margin-left: 0.3in;"><strong>Truststore Settings</strong></div>
<ul>
<li style="margin-left: 0.7in;">Set truststore path to the full path to where your truststore file is saved locally</li>
<li style="margin-left: 0.7in;">Provide the password that &ldquo;unlocks&rdquo; your truststore file</li>
</ul>
<div style="margin-left: 0.3in;"><strong>Registry Address or BESFactory URL Information</strong></div>
<ul>
<li style="margin-left: 0.7in;">Provide registry address/BESFactory URL of FutureGrid U6 endpoint</li>
</ul>
<h3>
	Example Preferences File</h3>
<pre class="rteindent1">keystore=/home/gridcerts/keystore.p12
password=YOUR-KEYSTORE-PASSWORD
storetype=pkcs12
alias=myKeystore

truststore=/home/gridcerts/truststore.jks
truststorePassword=YOUR-TRUSTSTORE-PASSWORD

# The address(es) of the registries to contact (space separated list)
registry=https://198.202.120.85:8081/DEMO-SITE/services/Registry?res=default_registry

# ... other properties can follow</pre><h3>Locating the Preferences</h3>
<h3>File</h3>
<p>By default, UCC checks for the existence of a file at $USER_HOME/.ucc/preferences and reads default settings from there</p>
<p>Copy your preferences file to this location or specify it&rsquo;s a location every time you issue a UCC command</p>
<pre>  -c $UCC_HOME/conf/preferences</pre><h3>Validate Client</h3>
<h3>Setup</h3>
<p>To check access to FutureGrid endpoints, try a command while specifying the path to your preferences file</p>
<pre>$UCC_HOME/bin/ucc system-info -v -l -c $UCC_HOME/conf/preferences
$UCC-HOME/bin/ucc list-sites -c $UCC_HOME/conf/</pre><pre>preferences</pre><p>If everything is alright you should see information about the FutureGrid endpoint.</p>
<h3>Configuration</h3>
<h3>Conclusion</h3>
<p>Your UCC has now been configured to access the FutureGrid U6 endpoint via X-509 based mutual client authentication<br />
Consult the next section to learn about getting started and submit jobs</p>
<h2>Submitting Jobs to FutureGrid U6 Endpoints</h2>
<h3>Getting</h3>
<h3>Started</h3>
<p>Make sure you have access to some target system</p>
<pre>$UCC_HOME/bin/ucc connect -c $UCC_HOME/conf/preferences</pre><p>List the sites available to you using</p>
<pre>  $UCC_HOME/bin/ucc list-sites -c $UCC_HOME/conf/</pre><pre>preferences</pre><p>Run a sample job</p>
<pre>  $UCC_HOME/bin/ucc run -v $UCC_HOME/samples/date.u -c $UCC_HOME/conf/preferences</pre><h3>Submit Jobs to</h3>
<h3>BES</h3>
<p>To send a job read from a JSDL file</p>
<ul>
<li class="rteindent1">to a site listed in the preferences file:</li>
</ul>
<pre class="rteindent1">        $UCC_HOME/bin/ucc bes-submit-job -j hellompi.xml -s bes.3 -v</pre><ul>
<li class="rteindent1">using a BESFactory URL:</li>
</ul>
<pre class="rteindent1">  ucc bes-submit-job -j hellompi.xml -s <a href="https://example.com/services/BESFactory" title="https://example.com/services/BESFactory">https://example.com/services/BESFactory</a> -v</pre><ul>
<li class="rteindent1">using an endpoint reference file path:</li>
</ul>
<pre class="rteindent1">  ucc bes-submit-job -j hellompi.xml -s <a href="///tmp/bes.xml" title="///tmp/bes.xml">file:///tmp/bes.xml</a> -v</pre><h3>Other BES Related</h3>
<h3>Commands</h3>
<p>Check job status</p>
<pre>  ucc bes-job-status jobid.job</pre><p>Terminate job</p>
<pre>ucc bes-terminate-job jobid.job</pre><p>List user&rsquo;s jobs on a BESFactory</p>
<pre>ucc bes-list-job-s bes.1</pre><p>List BESFactory properties:</p>
<pre>ucc bes-list-att -s bes.1</pre><p>
*Descriptor (.job) file is automatically generated after a successful execution of &quot;bes-submit-job&quot; command</p>
<h3>Job Submission Conclusion</h3>
<p></p>
<div style="margin-left: 0.3in;">You should now be able to submit jobs to a BES service on a FutureGrid U6 endpoint</div>
<h2>&nbsp;</h2>
<h2>&nbsp;</h2>
<h2>References</h2>
<p>The information provided in this section has been extracted from the following sources. Each contains much more detail about the various topics discussed here.</p>
<ul>
<li><a href="https://unicore.svn.sourceforge.net/svnroot/unicore/documentation/old/securityGuide/Main-UCCOnly.pdf">UNICORE6 Manuals</a></li>
<li><a href="http://www.unicore.eu/documentation/manuals/unicore6/files/ucc/ucc-manual.html">UNICORE Commandline Client: User Manual</a></li>
<li><a href="https://unicore.svn.sourceforge.net/svnroot/unicore/documentation/old/securityGuide/Main-UCCOnly.pdf">UNICORE Security Guide: UCC</a></li>
</ul>
<h2>&nbsp; Questions/Comments</h2>
<div style="margin-left: 0.3in;">Please email uvacse@virginia.edu</div>
<p></p>
<hr />
<h1>Running Jobs on UNICORE Sites</h1>
<p>This section provides a general overview of running jobs on UNICORE sites.</p>
<p>	First, you can check whether there is an available target system for execution:</p>
<pre class="_fck_mw_lspace"> $ucc connect -c &lt;path_to_ucc.preferences&gt; 
</pre><p>You can also list the available target sites:</p>
<pre class="_fck_mw_lspace"> $ucc list-sites
</pre><p>To run a job, you can specify the job using the UNICORE <a _fcksavedurl="http://www.unicore.eu/documentation/manuals/unicore6/ucc/jobdescription.html" href="http://www.unicore.eu/documentation/manuals/unicore6/ucc/jobdescription.html">job description format</a>.</p>
<pre class="_fck_mw_lspace"> $ucc run &lt;job_description_file&gt;
</pre><p>
	Or you can specify a job to run using a Job Submission Description Language (JSDL) file.</p>
<pre class="_fck_mw_lspace"> $ucc run -j &lt;JSDL_file&gt;
</pre><p>For example, a simple job to run the date, date.u, could be described using the UNICORE description format as follows:</p>
<pre class="_fck_mw_lspace"> #
# simple job: run Date
#

{
 ApplicationName: Date,
 ApplicationVersion: 1.0,
}
</pre><p>This job can then be run with the command:</p>
<pre class="_fck_mw_lspace">$ucc run date.u
</pre><p>Alternately, this job could be described using a JSDL file, date.jsdl, as follows:</p>
<pre class="_fck_mw_lspace"> &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;jsdl:JobDefinition xmlns=&quot;http://www.example.org/&quot;
       xmlns:jsdl=&quot;http://schemas.ggf.org/jsdl/2005/11/jsdl&quot;
       xmlns:jsdl-posix=&quot;http://schemas.ggf.org/jsdl/2005/11/jsdl-posix&quot;
       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&gt;

       &lt;jsdl:JobDescription&gt;
               &lt;jsdl:JobIdentification&gt;
                       &lt;jsdl:JobName&gt;Test Job&lt;/jsdl:JobName&gt;
               &lt;/jsdl:JobIdentification&gt;

               &lt;jsdl:Application&gt;
                       &lt;jsdl:ApplicationName&gt;Date 1.0&lt;/jsdl:ApplicationName&gt;
                       &lt;jsdl-posix:POSIXApplication&gt;
                             &lt;jsdl-posix:Executable&gt;
                                     /bin/date
                             &lt;/jsdl-posix:Executable&gt;
                     &lt;/jsdl-posix:POSIXApplication&gt;
             &lt;/jsdl:Application&gt;
       &lt;/jsdl:JobDescription&gt; 
&lt;/jsdl:JobDefinition&gt;
</pre><p>This JSDL job can then be run with the command:</p>
<pre class="_fck_mw_lspace"> $ucc run -j date.jsdl.
</pre><hr />
<h1>Deploying a New UNICORE 6 Grid</h1>
<p>This section details how to install and setup a UNICORE 6 grid. This will create a new grid infrastructure separate from the existing deployments mentioned above.</p>
<h2>Prerequisites</h2>
<p>Prerequisites listed in UNICORE 6 README.txt file:</p>
<ul>
<li>Java 5 JRE or SDK (or later). We recommend using SUN Java 6.</li>
</ul>
<p>You can check what version of java is installed by running:</p>
<pre class="_fck_mw_lspace"> $java -version
</pre><p>If the java version is too old or the command is not found, download the latest JRE version. After unpacking, update JAVA_HOME and PATH.</p>
<pre class="_fck_mw_lspace"> JAVA_HOME=&lt;JAVA_LOCATION&gt;
PATH=&lt;JAVA_LOCATION&gt;/bin:$PATH
</pre><ul>
<li>Perl 5 (only for the classic TSI)</li>
</ul>
<p>You will need Perl if you will be running jobs via a queue management system. By default, jobs run directly on the local machine. Extra configuration is needed to setup a TSI and run jobs via a queue management system.</p>
<h2>Installing the Core Server Bundle</h2>
<p>The UNICORE 6 Core Server Bundle can be downloaded from the <a _fcksavedurl="http://www.unicore.eu/download/unicore6/" href="http://www.unicore.eu/download/unicore6/">UNICORE website</a>. This bundle will provide you with the minimal set of UNICORE components (Gateway, UNICORE/X, TSI, XUUDB) needed to get a UNICORE 6 grid up and running quickly.</p>
<pre class="_fck_mw_lspace">From the README.txt:
The basic configuration and installation is as follows
1) edit configure.properties
2) ./configure.py &lt;unicore_user&gt; [&lt;hostname&gt;]
3) run ./install.py to install UNICORE in the selected directory

To start the configuration process, do (as non-root user)
./configure.py &lt;login&gt; [&lt;hostname&gt;]
where &lt;login&gt; is the Unix account that the installation shall use, and the   
optional &lt;hostname&gt; indicates which hostname shall be used. If not given,
a hostname lookup will be performed.

If you want to customize this process, edit the &quot;configure.properties&quot; file,
which contains all the ports and other settings (except security settings 
such as keystore locations).

To finally copy the files into the installation directory, run
./install.py

More documentation at <a href="http://www.unicore.eu/documentation" title="http://www.unicore.eu/documentation">http://www.unicore.eu/documentation</a>.
&nbsp;</pre><h2>Starting/Stopping the UNICORE Servers</h2>
<p>The servers are started with the start.sh script and stopped with the stop.sh script. Both of these scripts are located under the UNICORE install directory.<br />
	&nbsp;</p>
<pre class="_fck_mw_lspace">You can confirm that the UNICORE servers are running with the ps command. 
You should see three processes running: XUUDB, Gateway, and UNICOREX. 
  $ps aux| grep unicore</pre><p>&nbsp;</p>
  </div>
<div id="node-1464" class="section-3">
  <h1 class="book-heading">Genesis II</h1>
  <h1 class="rtecenter">
	<img alt="" height="130" src="/sites/default/files/u30/fg-logo-md.gif" width="189" /><br class="Apple-interchange-newline" />
	Genesis II on FutureGrid<br />
	User Manual</h1>
<p class="rtecenter">Author: University of Virginia<br />
	&nbsp;Version: 1.0<br />
	&nbsp; Last Revision: 2011-11-02</p>
<h1>
	<br />
	Introduction</h1>
<p><a fcksavedurl="http://www.cs.virginia.edu/~vcgr/wiki/index.php/The_Genesis_II_Project" href="http://www.genesis2.virginia.edu/wiki">GenesisII</a> compute endpoints are currently deployed on three FutureGrid HPC resources: XRay, Sierra and India.&nbsp; Additional endpoints are planned for Hotel and Alamo in the near future.&nbsp; This tutorial explains:</p>
<ul>
	<li>
		How to connect to these GenesisII endpoints from other grid middleware platforms;</li>
	<li>
		How to download GenesisII client software and use the UVa Corss Campus Grid (XCG) which includes the FutureGrid endpoints.</li>
</ul>
<h1>
	What is GenesisII</h1>
<p>GenesisII is a Grid middleware system. Listed below are the key principles/features of the GenesisII design. More information about GenesisII can be found <a href="http://www.genesis2.virginia.edu/wiki">here</a>.</p>
<ul>
	<li>
		Open source.</li>
</ul>
<ul>
	<li>
		Standards-based. GenesisII follows grid standards from the Open Grid Forum (OGF), W3C, and OASIS, including many from the Open Grid Services Architecture (OGSA) and the Web Services Resource Framework (WSRF).&nbsp; In particular, GenesisII adheres to parts or all of OGSA Basic Execution Service (BES), Resource Naming Service (RNS), OGSA ByteIO, WS-Security, WS-Naming, WS-Trust, and Job Submission Description Language (JSDL).</li>
</ul>
<ul>
	<li>
		Open and extensible realized with a modern Service- Oriented Architecture (SOA), which allows to easily replace particular components with others.</li>
</ul>
<ul>
	<li>
		Interoperable with other Grid technologies to enable a coupling of Grid infrastructures or the users needs</li>
</ul>
<ul>
	<li>
		End user focused. Whenever possible GenesisII was designed to use concepts already familiar to users (such as hierarchical directory structures) and to provide easy to use commands and GUIs to simplify the user&#39;s experience.&nbsp; GenesisII provides a number of commands based on familiar UNIX tools and provides GUIs for to browse the grid directory structure, monitor jobs, create JSDL job descriptions, etc.</li>
</ul>
<ul>
	<li>
		Strong security mechanisms built in from the ground up.&nbsp; Flexible access control for all grid resources.&nbsp; Support for X.509 certificates and username/password (based on WS-Security and OGF Basic Security Profile).&nbsp; Support for virtual organizations via user-defined groups.</li>
</ul>
<ul>
	<li>
		Quick and simple to install and configure.</li>
</ul>
<ul>
	<li>
		Client and server software supported on a number of platforms (Windows XP, Linux, and MacOS).&nbsp; Support for various batch systems such as PBS, Sun Grid Engine, etc.</li>
</ul>
<ul>
	<li>
		Implemented in Java to achieve platform independence.</li>
</ul>
<h1>
	<a name="Connecting To GenesisII BES Endpoints"></a>Connecting to the GenesisII BES Endpoints</h1>
<p>To date, three GenesisII BES endpoints have been deployed on FutureGrid for interoperability testing as well as grid client usage. Endpoints are located on Sierra, India, and Alamo. This section contains the information needed for other grid middleware platforms to connect to the GenesisII BES endpoints.</p>
<h2>
	Supported Data Staging</h2>
<h2>
	Protocols</h2>
Each of the GenesisII endpoints supports a number of protocols for staging data into and out of jobs as supported by the JSDL specification&#39;s Data Staging elements.&nbsp; The following are the protocols currently supported by the GenesisII endpoints:<br />
<br />
<h3>
	Stage in:</h3>
<ul>
	<li>
		HTTP</li>
	<li>
		RNS/ByteIO</li>
	<li>
		ftp</li>
	<li>
		scp</li>
	<li>
		sftp</li>
</ul>
<h3>
	Stage out:</h3>
<ul>
	<li>
		mailto</li>
	<li>
		RNS/ByteIO</li>
	<li>
		ftp</li>
	<li>
		scp</li>
	<li>
		sftp</li>
</ul>
** NOTE: ftp, scp, sftp is supported as per the HPC FSE standard and only for the username/password security token version.<br />
<h2>
	Endpoint Connection Information</h2>
<h3>
	India</h3>
<ul>
	<li>
		<b>Endpoint EPR</b>: <a href="https://portal.futuregrid.org/sites/default/files/india-epr-Nov-01-2011.txt">click here</a></li>
</ul>
<ul>
	<li>
		<b>Security</b>: configured for username/password authentication; <a fcksavedurl="mailto:uvacse@virginia.edu" href="mailto:uvacse@virginia.edu">Email</a> for username token and CA cert.</li>
</ul>
<ul>
	<li>
		<b>OS</b>: Red Hat Enterprise Linux Server release 5.7</li>
</ul>
<ul>
	<li>
		<b>Arch</b>: x86_64</li>
</ul>
<ul>
	<li>
		<b>Cores</b>: Approximately 400. Jobs submitted to HPC (i.e. batch) queue via PBS<br />
		&nbsp;</li>
	<li>
		<strong>Grid Path</strong>: /bes-containers/FutureGrid/IU/pbs-long.from-daemon.india.futuregrid.org</li>
</ul>
<h3>
	Sierra</h3>
<ul>
	<li>
		<b>Endpoint EPR</b>: <a href="https://portal.futuregrid.org/sites/default/files/sierra-epr-Mar-22-2012_0.txt">click here</a></li>
</ul>
<ul>
	<li>
		<b>Security</b>: configured for username/password authentication; <a fcksavedurl="mailto:uvacse@virginia.edu" href="mailto:uvacse@virginia.edu">Email</a> for username token and CA cert.</li>
</ul>
<ul>
	<li>
		<b>OS</b>: Red Hat Enterprise Linux Server release 6.1</li>
</ul>
<ul>
	<li>
		<b>Arch</b>: x86_64</li>
</ul>
<ul>
	<li>
		<b>Cores</b>: Approximately 300. Jobs submitted to HPC (i.e. batch) queue via PBS<br />
		&nbsp;</li>
	<li>
		<strong>Grid Path</strong>: /bes-containers/FutureGrid/SDSC/pbs-long.from-daemon.sierra.futuregrid.org</li>
</ul>
<h3>
	Alamo</h3>
<ul>
	<li>
		<b>Endpoint EPR</b>: <a href="https://portal.futuregrid.org/sites/default/files/alamo-epr-Mar-22-2012_0.txt">click here</a></li>
</ul>
<ul>
	<li>
		<b>Security</b>: configured for username/password authentication; <a fcksavedurl="mailto:uvacse@virginia.edu" href="mailto:uvacse@virginia.edu">Email</a> for username token and CA cert.</li>
</ul>
<ul>
	<li>
		<b>OS</b>: CentOS release 5.6</li>
</ul>
<ul>
	<li>
		<b>Arch</b>: x86_64</li>
</ul>
<ul>
	<li>
		<b>Cores</b>: Approximately 200. Jobs submitted to HPC (i.e. batch) queue via PBS<br />
		&nbsp;</li>
	<li>
		<strong>Grid Path</strong>: /bes-containers/FutureGrid/TACC/pbs-long.from-alamo1</li>
</ul>
<h3>
	Hotel</h3>
<ul>
	<li>
		<b>Endpoint EPR</b>: <a href="https://portal.futuregrid.org/sites/default/files/hotel-epr-Apr-24-2012.txt">click here</a></li>
</ul>
<ul>
	<li>
		<b>Security</b>: <a href="mailto:uvacse@virginia.edu">Email</a> for username/password authentication token and CA cert.</li>
</ul>
<ul>
	<li>
		<b>OS</b>: Red Hat Enterprise Linux Server release 5.8 (Tikanga)</li>
</ul>
<ul>
	<li>
		<b>Arch</b>: x86_64<br />
		&nbsp;</li>
	<li>
		<b>Cores</b>: Approximately 300. Jobs submitted to HPC (i.e. batch) queue via PBS<br />
		&nbsp;</li>
	<li>
		<strong>Grid Path</strong>: /bes-containers/FutureGrid/UC/pbs-long.from-hotel1.futuregrid.org</li>
</ul>
<h1>
	Using the Futuregrid GenesisII Endpoints as a Client</h1>
<p>There are two ways a client can use the GenesisII endpoints deployed within Futuregrid: using a standards-compliant non-GenesisII middleware client or using the GenesisII client.</p>
<h2>
	Non-GenesisIIUsing a Standards-Compliant Client</h2>
If you wish to use a standards-based middleware client, you may be able to use that client to access the GenesisII BES endpoints within Futuregrid.&nbsp; The first step is to determine whether the grid client software you wish to use is properly compliant with the GenesisII BES implementation.&nbsp; GenesisII BES endpoints have been tested for interoperability against several grid software systems.&nbsp; You will need to contact the developer/vendor of your system to determine if their software is compatible with GenesisII.&nbsp; Depending on your system works, you will either need to contact your grid system administrator to have him/her add the Futuregrid GenesisII BES endpoints or you will need to provide a reference to the endpoints to the client tooling.&nbsp; In either case, the information you or your grid administrator needs is included in the section above (<a href="#Connecting To GenesisII BES Endpoints">Connecting to the GenesisII BES Endpoints</a>).<br />
<br />
<h2>
	Using The GenesisII Client</h2>
<p>GenesisII has a rich client package available for Windows, MacOS and LINUX platforms that includes UNIX-style command line tools as well as several graphical user interface tools.&nbsp; The University of Virginia maintains a grid called the Cross Campus Grid (XCG) that already includes the FurtureGrid GenesisII BES endpoints in it - already configured and ready to go.&nbsp; To get started, the first step is to download and install the GenesisII/XCG installation package.</p>
<h3>
	Acquiring GenesisII Client Package</h3>
<p>The GenesisII/XCG installers are available at <a href="http://www.genesis2.virginia.edu/wiki/Main/Downloads">http://www.cs.virginia.edu/~vcgr/wiki/index.php/Genesis_II_Downloads</a>. Choose the platform that matches the machine/OS where you will be running your client and click the corresponding &quot;Download&quot; link to download the installer.</p>
<h4>
	&nbsp;</h4>
<h4>
	Linux</h4>
The Linux installer is a shell script named XCG-Installer.sh encoded with the entire GenesisII package inside.&nbsp; Simply execute the shell script (./XCG-Installer in proper directory) to begin installation.&nbsp; Follow the steps here in answering the installation questions.
<h4>
	&nbsp;</h4>
<h4>
	Windows</h4>
The Windows installer is an executable named XCG-Installer.exe.&nbsp; Simply run it like any other executable (e.g. double-clicking) and follow the steps here in answering the installation questions.<br />
<br />
Note that currently, the GenesisII software is only tested for Windows XP.&nbsp; However, our early experience with Windows 7 (and Vista) indicates that the client installation will work fine as long as you install GenesisII in a folder that does not have special security meaning to Windows (such as your Documents and Settings directory or C:\).
<h4>
	&nbsp;</h4>
<h4>
	MacOS</h4>
The MacOS installer is a dmg file named XCG-Installer.dmg encoded with the entire GenesisII package inside.&nbsp; Simply execute the dmg file (e.g. by double clicking) to begin installation.&nbsp; Follow the steps here in answering the installation questions.<br />
<br />
<h3>
	Installing the GenesisII/XCG Client Package</h3>
The installation process requires answering a few questions about license agreement and configuration options.<br />
<ul>
	<li>
		<strong>Agree to license terms</strong>.&nbsp; The GenesisII license follows the Apache License model.&nbsp; For command line versions, this may require hitting enter a number of time to scroll the license text on the screen.</li>
	<li>
		<strong>Select the directory for the installation</strong>.&nbsp; In most cases the default is sufficient, though you can feel free to change it.&nbsp; As noted earlier, Windows Vista and 7 users should choose a directory that is not given special protection from those operating systems.&nbsp; For example, the default C:\Program Files is given special treatment and blocks writes made there by the software.&nbsp; This causes GenesisII problems because GenesisII has a patch mechanism built which needs to overwrite package files in the installation directory.&nbsp; For Windows 7/Vista, we recommend a directory within your user folder.</li>
	<li>
		<strong>Client v Full Container Install.</strong>&nbsp; The entire GenesisII software package is included in the installer.&nbsp; This includes both client-side command line tools and GUIs as well as server-side programs for installing grid servers.&nbsp; We recommend installing the client only version.&nbsp; Select XCG Client Install option. &nbsp;</li>
	<li>
		<strong>Shortcuts/Start Menu options.</strong>&nbsp; For Windows users, you can select whether to create a shortcut for all users (default yes), create a start menu item for GenesisII (default: yes) and pick a name for the start menu folder (default: GenesisII).&nbsp; The defaults are recommended, but you can change if you like.&nbsp; For Linux and MacOS, you can choose whether to create shortcuts in the standard binary directory (Linux: /usr/bin; MacOS: /Applications/?).&nbsp; Unless you are installing with root privileges, we recommend choosing &quot;No&quot; to this question.</li>
</ul>
That&#39;s it.&nbsp; Since the installer is specific to the UVA Cross Campus Grid, you not only have GenesisII successfully installed, but you have also configured your system to connect to the XCG.<br />
<br />
<h2>
	Getting Started</h2>
<p>To get started using the XCG, you will need an XCG account - which is <b>not</b> the same as your local machine account or your FutureGrid resource account. To request an XCG account, fill out the XCG user application form located at <a class="external free" href="https://www.cs.virginia.edu/~vcgr/userrequest/" rel="nofollow" title="http://www.cs.virginia.edu/~vcgr/userrequest">http://www.cs.virginia.edu/~vcgr/userrequest</a>.</p>
<p>Once you have an account and have the appropriate GenesisII software installed, you are ready to start a GenesisII grid shell and login.</p>
<h3>
	Start Grid Shell</h3>
To start a grid shell start the &quot;grid&quot; executable from the installation directory.
<h4>
	Windows</h4>
Double click the &quot;grid&quot; file in the installation directory;<br />
or<br />
Open a Windows command line window, cd to the installation directory, and enter the grid.exe command.
<h4>
	Linux or MacOS</h4>
If you have a Window manager running, double click on the grid binary in the installation directory<br />
or<br />
Open a shell, cd to the installation directory and enter the grid command<br />
<pre class="_fck_mw_lspace">
 $&gt; cd &lt;installation directory&gt;
 $&gt; grid
</pre>
<strong>LogIn</strong><br />
Once you have a grid shell open, you need to be logged into your XCG grid account in order to perform most useful commands. First check to see if you are already logged in - the &quot;whoami&quot; command prints out your current credentials. If you are not logged in, it should look like this (the Client Tool Identity is an automatically generated certificate used by GenesisII client commands and does not carry any authentication information):
<pre class="_fck_mw_lspace">
 $XCG&gt; whoami
 Client Tool Identity:
    &quot;Client Cert EFC05BB7-295A-B313-E0E0-95A8CE61EB68&quot;
 $XCG&gt;
</pre>
To login, use the &quot;login&quot; command.&nbsp; The syntax is &quot;login --username=&lt;grid user name&gt;&quot;.&nbsp; After running this command, a popup window will prompt you for your password<br />
<pre class="_fck_mw_lspace">
 $XCG&gt; login --username=jfk3w
 $XCG&gt; whoami
 Client Tool Identity:
    &quot;Client Cert EFC05BB7-295A-B313-E0E0-95A8CE61EB68&quot;
 &quot;jfk3w&quot; -&gt; &quot;Client Cert EFC05BB7-295A-B313-E0E0-95A8CE61EB68&quot;
 &quot;uva-idp-group.2010&quot; -&gt; &quot;Client Cert EFC05BB7-295A-B313-E0E0-95A8CE61EB68&quot; 
 $XCG&gt; 
</pre>
The output from the post-login whoami command indicates that I have 2 new certificates - one that asserts that I am user jfk3w, and another that asserts that I have the permissions of the group &quot;uva-idp-group.2010&quot;.&nbsp; The XCG uses the uva-idp-group.2010 to set permissions for all approved XCG users.&nbsp; Your membership in this group is done by XCG administrators when you account is created.&nbsp; If you later create new groups or are added to other existing groups, your login will automatically acquire the extra credentials to assert that you are a member of that group (assuming the group allows you access).<br />
<h3>
	Running Jobs</h3>
<p>To learn how the basics about executing and monitoring jobs using GenesisII and the XCG, please refer to <a href="https://portal.futuregrid.org/sites/default/files/XCG Tutorial.pdf">XCG Tutorial</a> document.</p>
<h2>
	Getting Help</h2>
<p>To get help using the XCG send email to the UVA Computational Science and Engineering (UVACSE) group at uvacse@virginia.edu.&nbsp; You can also use the <a href="http://www.genesis2.virginia.edu/wiki/Main/HomePage">GenesisII web site</a> and the <a href="http://www.cs.virginia.edu/~xcgshare/wiki/index.php/Homepage">XCG web site</a> to look at further documentation and FAQs</p><table id="attachments" class="sticky-enabled">
 <thead><tr><th>Attachment</th><th>Size</th> </tr></thead>
<tbody>
 <tr class="odd"><td><a href="https://portal.futuregrid.org/sites/default/files/india-epr-Nov-01-2011.txt">india-epr-Nov-01-2011.txt</a></td><td>7.8 KB</td> </tr>
 <tr class="even"><td><a href="https://portal.futuregrid.org/sites/default/files/sierra-epr-Mar-22-2012_0.txt">sierra-epr-Mar-22-2012.txt</a></td><td>7.8 KB</td> </tr>
 <tr class="odd"><td><a href="https://portal.futuregrid.org/sites/default/files/alamo-epr-Mar-22-2012_0.txt">alamo-epr-Mar-22-2012.txt</a></td><td>7.82 KB</td> </tr>
 <tr class="even"><td><a href="https://portal.futuregrid.org/sites/default/files/hotel-epr-Apr-24-2012.txt">hotel-epr-Apr-24-2012.txt</a></td><td>7.86 KB</td> </tr>
</tbody>
</table>
  </div>
<div id="node-1406" class="section-3">
  <h1 class="book-heading">SAGA supporting Distributed Applications on Grids, Clouds on FutureGrid</h1>
  <em><strong>SAGA on FutureGrid</strong></em><br />
<br />
<br />
<em><strong>Activity</strong></em>:<br />
<br />
The Simple API for Grid Applications (SAGA) is an OGF standard (<a href="http://www.ogf.org/" title="http://www.ogf.org/">http://www.ogf.org/</a>), and defines a high level, application-driven API for developing first-principle distributed applications, and for distributed application frameworks and tools. Our SAGA project (see <a href="http://www.saga-project.org/" title="http://www.saga-project.org/">http://www.saga-project.org/</a>) provides SAGA API implementations in C++ and Python, which interface to a variety of middleware backends, as well as higher level application frameworks, such as Master-Worker, MapReduce, AllPairs, and BigJob.&nbsp; For all those components, we use FutureGrid and the different software environments available on FG for extensive portability and interoperability testing, but also for scale-up and scale-out experiments. These activities allow to harden the SAGA components described above, and support CS and Science experiments based on SAGA.<br />
<br />
<em><strong>Achievements:</strong></em><br />
<br />
FG has provided a persistent, production-grade experimental infrastructure with the ability to perform controlled experiments, without violating production policies and disrupting production infrastructure priorities.&nbsp; These attributes, coupled with FutureGrid&#39;s technical support, have resulted in the following specific advances in the short period of under a year:<br />
<br />
<em>1: Use of FG for Standards-based development and interoperability tests:</em><br />
<br />
We have, in particular, been able to prepare SAGA for future deployments on XSEDE; this has occurred by testing the SAGA-BES adaptor in a variety of configurations: against Unicore and Genesis-II backends, with UserPass and Certificate-based authentication, with POSIX and HPC application types, with and without file staging support.&nbsp; While those tests are still ongoing, it allows us to be confident about the expected XSEDE middleware evolution; in the vast majority of cases, the standards-based approach seems to work without a hitch.<br />
<br />
Furthermore, we are continuously using FG-based job submission endpoints for GIN-driven interoperation tests with a variety of other production Grid infrastructures, including DEISA, PRACE, Teragrid and EGI (see <a href="http://forge.gridforum.org/sf/projects/gin/" title="http://forge.gridforum.org/sf/projects/gin/">http://forge.gridforum.org/sf/projects/gin/</a> and <a href="http://www.saga-project.org/interop-demos/" title="http://www.saga-project.org/interop-demos/">http://www.saga-project.org/interop-demos/</a>).<br />
<br />
In order to simplify the deployment and to improve end user support for SAGA, we have been using FG hosts to develop, test and harden our deployment procedures by mimicking the CSA approach we currently use on TeraGrid and XSEDE.&nbsp; At the same time, that deployment procedure makes SAGA and SAGA-based components available and maintained on all FG endpoints.<br />
<br />
<br />
<em>2: Use of FG for Analysing &amp; Comparing Programming Models and Run-time tools for Computation and Data-Intensive Science.</em><br />
<br />
<em>2.a: Development of Tools and Frameworks:</em><br />
<ul>
	<li>
		P* experiments<br />
		&#39;P*&#39; is a conceptual model of pilot-based abstractions, in particular for pilot jobs.&nbsp; Our work on P* includes comparison between different PilotJob frameworks (BigJob, Condor GlideIn, Diane, Swift), and between different coordination models within those frameworks.&nbsp; We used FG for a number of those experiments, as it allowed us to compare a range of characteristics in a controlled environment.</li>
	<li>
		Advanced dynamic partitioning and distribution of data-intensive distributed applications<br />
		Futuregrid resources have been crucial in carrying out a first set of scoping experiments for O.W.&#39;s Ph.D thesis: &quot;Towards a Reasoning Framework and Software System to Aid the Dynamic Partitioning, Distribution and Execution of Data-Intensive Applications&quot;. In these scoping experiments, three distinct FutureGrid resources (india, hotel, alamo) were used to coordinately execute a data-intensive genome matching workload (HTC). The partitioning and distribution decisions were dynamically made by an experimental software system based on autonomic computing concepts, and which is capable of monitoring FG HPC resources as well as jobs during workload execution.</li>
	<li>
		Bliss (Bliss is SAGA)<br />
		Bliss (<a href="http://oweidner.github.com/bliss/" title="http://oweidner.github.com/bliss/">http://oweidner.github.com/bliss/</a>) is an experimental implementation of SAGA written in pure Python. Bliss does not rely on any distributed Grid middleware; however, it allows distributed access to all FutureGrid HPC resources by providing an SFTP plugin for file transfer as well as &#39;PBS over SSH&#39; for SAGA&#39;s job submission and resource information capabilities.&nbsp; Bliss has been developed specifically with FutureGrid in mind and has been used in several cross-site experiments as the primary access mechanism to computing and storage resources.&nbsp; While &#39;PBS over SSH&#39; probably won&#39;t be a replacement for &#39;real&#39; Grid middleware (like, e.g., Globus), its exposure through the standardized SAGA API presents an attractive and lightweight alternative to traditionally large Grid middleware stacks.</li>
	<li>
		High-performance dynamic applications<br />
		In extreme-scale computational science, there is a growing importance and need for specialized architectures and multi-model simulations. In this emerging environment, different simulation components will have different computational requirements.&nbsp; Instead of coarsely assigning resources to all simulation components for their lifetime, we research methodologies whereby simulations can be split into their constituent components, and distributed computational resources are allocated according to the needs of these individual components.&nbsp; Each simulation component is transferred along with the data and parameters needed to execute the simulation component on the target hardware.&nbsp; This approach enables multi-component applications to more easily benefit from heterogeneous and distributed computing environments, in which multiple types of processing elements and storage may be available.<br />
		In cases where software is developed with a static execution mode and only one resource in mind, the choice to distribute may not be available. By creating a dynamic method of execution and developing software which can package, transmit, and execute sub-applications remotely, existing simulations may be extended to make use of distributed resources. Through specially-designed modules that are compatible with pre-existing Cactus framework applications, we demonstrated means of improving task-level parallelism and extended the range of computing resources used with a minimal amount of change needed to existing applications.&nbsp; Experiments were conducted using production cyberinfrastructures on FutureGrid and XSEDE, with up to 128 cores.</li>
	<li>
		Grid/Cloud interop (with Andre Luckow) [finished]<br />
		We demonstrated for the first time the use of Pilot-Jobs concurrently on different types of infrastructures; specifically, we use BigJob both on FutureGrid HPC and Cloud resources as well as on other resources such as the XSEDE and OSG Condor resources.</li>
</ul>
<p>&nbsp;&nbsp;&nbsp;<br />
	<em>2.b: Data Intensive Apps:</em></p>
<ul>
	<li>
		MapReduce [with Andre Luckow]<br />
		In Ref. [1], published in Future Generation Computing Systems, we compare implementations of the word-count application to not only use multiple, heterogeneous infrastructure (Sector versus DFS), but also to use different programming models (Sphere versus MapReduce).</li>
	<li>
		Grid/Cloud NGS analysis experiments<br />
		Building upon SAGA-based MapReduce, we have constructed an efficient pipeline for gene sequencing. This pipeline is capable of dynamic resource utilization and task/worker placement.</li>
	<li>
		Hybrid cloud-Grid scientific applications and tools (autonomic schedulers) [with Manish Parashar, finished]<br />
		Policy-based (objective driven) Autonomic Scheduler provides a system-level approach to hybrid grid-cloud usage.&nbsp; FG has been used for the development and extension of such Autonomic Scheduling and application requirements.&nbsp; We have integrated the distributed and heterogeneous resources of FG as a pool of resources which can be allocated by the policy-based Autonomic Scheduler (Comet). The Autonomic Scheduler dynamically determines and allocates instances to meet specific objectives, such as lowest time-to-completion, lowest cost etc. We also used FG supplement objective-driven pilot jobs on TeraGrid (ranger).</li>
	<li>
		Investigate run time fluctuations of application kernels<br />
		We attempt to explore and characterize run-time fluctuations for a given application kernel representative of both a large number of MPI/parallel workloads and workflows.&nbsp; Fluctuation appears to be independent of the system load and a consequence of the complex interaction of the MPI library specifics and virtualization layer, as well as operating environment.&nbsp; Thus we have been investigating fluctuations in application performance due to the cloud operational environment.&nbsp; An explicit aim is to correlate these fluctuations to details of the infrastructure.&nbsp; As it is difficult to discern or reverse engineer the specific infrastructure details on EC2 or other commercial infrastructure, FG has provided us a controlled and well understood environment at infrastructure scales that are not possible at the individual PI/resource level.</li>
</ul>
<p><br />
	<em>3. SAGA has also produced the following papers (selection):</em><br />
	&nbsp;</p>
See Refs: <a href="#ref1" title="Reference 1">[1]</a>,<a href="#ref2" title="Reference 2">[2]</a>,<a href="#ref3" title="Reference 3">[3]</a>,<a href="#ref4" title="Reference 4">[4]</a>,<a href="#ref5" title="Reference 5">[5]</a>
<p><br />
	<br />
	<em><strong>FuturePlans:</strong></em><br />
	<br />
	We will be continuing to use FG as a resource for SAGA development.&nbsp; Among other goals, we intend the following: to move the testing infrastructure to other SAGA based components, like our PilotJob and PilotData frameworks; to widen the set of middlewares used for testing (again, keeping XSEDE and other PGIs in mind); to enhance the scope and scale of our scalability testing; and to test and harden our deployment and packaging procedures.<br />
	<br />
	<br />
	&nbsp;</p>


<hr /><h3>References</h3><ol><li id="reference1"><a name="ref1">[fg-1975] <a href="/biblio/author/175">Sehgal, S.</a>, <a href="/biblio/author/176">M. Erdelyi</a>, <a href="/biblio/author/177">A. Merzky</a>, and <a href="/biblio/author/115" class="biblio-local-author">S. Jha</a>,  
&quot;<a href="/references/understanding-application-level-interoperability-scaling-out-mapreduce-over-high-performa">Understanding application-level interoperability: Scaling-out MapReduce over high-performance grids and clouds</a>&quot;,  
Future Generation Computer Systems, vol. 27, issue 5, 2011.
 </a></li>

<li id="reference2"><a name="ref2">[fg-1976] <a href="/biblio/author/178">Luckow, A.</a>, <a href="/biblio/author/179">L. Lacinski</a>, and <a href="/biblio/author/115" class="biblio-local-author">S. Jha</a>,  
&quot;<a href="/references/saga-bigjob-extensible-and-interoperable-pilot-job-abstraction-distributed-applications-a">SAGA BigJob: An Extensible and Interoperable Pilot-Job Abstraction for Distributed Applications and Systems</a>&quot;,  
10th IEEE/ACM International Symposium on Cluster, Cloud and Grid Computing, 2010.
 </a></li>

<li id="reference3"><a name="ref3">[fg-1977] <a href="/biblio/author/178">Luckow, A.</a>, and <a href="/biblio/author/115" class="biblio-local-author">S. Jha</a>,  
&quot;<a href="/references/abstractions-loosely-coupled-and-ensemble-based-simulations-azure">Abstractions for Loosely-Coupled and Ensemble-Based Simulations on Azure</a>&quot;,  
IEEE International Conference on Cloud Computing Technology and Science, 2010.
 </a></li>

<li id="reference4"><a name="ref4">[fg-1978] <a href="/biblio/author/180">Kim, J.</a>, <a href="/biblio/author/181">S. Maddineni</a>, and <a href="/biblio/author/115" class="biblio-local-author">S. Jha</a>,  
&quot;<a href="/references/building-gateways-life-science-applications-using-dynamic-application-runtime-environment">Building Gateways for Life-Science Applications using the Dynamic Application Runtime Environment (DARE) Framework</a>&quot;,  
The 2011 TeraGrid Conference: Extreme Digital Discovery, 2011.
 </a></li>

<li id="reference5"><a name="ref5">[fg-1979] <a href="/biblio/author/180">Kim, J.</a>, <a href="/biblio/author/181">S. Maddineni</a>, and <a href="/biblio/author/115" class="biblio-local-author">S. Jha</a>,  
&quot;<a href="/references/characterizing-deep-sequencing-analytics-using-bfast-towards-scalable-distributed-archite">Characterizing Deep Sequencing Analytics using BFAST: Towards a Scalable Distributed Architecture for Next-Generation Sequencing Data</a>&quot;,  
The Second International Workshop on Emerging Computational Methods for the Life Sciences, 06/2011.
 </a></li>

</ol><form action="/book/export/html/104"  accept-charset="UTF-8" method="post" id="fivestar-form-node-1406" class="fivestar-widget">
<div><div class="fivestar-form-vote-1406 clear-block"><input type="hidden" name="content_type" id="edit-content-type-1" value="node"  />
<input type="hidden" name="content_id" id="edit-content-id-1" value="1406"  />
<div class="fivestar-form-item  fivestar-combo-text fivestar-average-stars fivestar-labels-hover"><div class="form-item" id="edit-vote-2-wrapper">
 <label for="edit-vote-2">Average: </label>
 <input type="hidden" name="vote_count" id="edit-vote-count-1" value="2"  />
<input type="hidden" name="vote_average" id="edit-vote-average-1" value="90"  />
<input type="hidden" name="auto_submit_path" id="edit-auto-submit-path-1" value="/fivestar/vote/node/1406/vote"  class="fivestar-path" />
<select name="vote" class="form-select" id="edit-vote-3" ><option value="-">Select rating</option><option value="20">Poor</option><option value="40">Okay</option><option value="60">Good</option><option value="80">Great</option><option value="100" selected="selected">Awesome</option></select><input type="hidden" name="auto_submit_token" id="edit-auto-submit-token-1" value="1695a246a0594f87406ff3880b63a116"  class="fivestar-token" />

 <div class="description"><div class="fivestar-summary fivestar-summary-combo fivestar-feedback-enabled"><span class="user-rating">Your rating: <span>5</span></span> <span class="average-rating">Average: <span>4.5</span></span> <span class="total-votes">(<span>2</span> votes)</span></div></div>
</div>
</div><input type="hidden" name="destination" id="edit-destination-1" value="book/export/html/104"  />
<input type="submit" name="op" id="edit-fivestar-submit-1" value="Rate"  class="form-submit fivestar-submit" />
<input type="hidden" name="form_build_id" id="form-baf9740bbf57fceedc5d8b943c4a6769" value="form-baf9740bbf57fceedc5d8b943c4a6769"  />
<input type="hidden" name="form_token" id="edit-fivestar-form-node-1406-form-token" value="b30523817a7ecf2076dc2b13ca37ff41"  />
<input type="hidden" name="form_id" id="edit-fivestar-form-node-1406" value="fivestar_form_node_1406"  />
</div>
</div></form>
  </div>
<div id="node-2032" class="section-3">
  <h1 class="book-heading">EMI Unicore Tutorial</h1>
  <h2>
	What is EMI?</h2>
<p><a href="http://www.eu-emi.eu/">European Middleware Initiative</a>&nbsp;(EMI) is a software platform for high performance distributed computing.</p>
<p>It is at the core of grid middleware distributions used by scientific research communities and distributed computing infrastructures all over the world including WLCG--the Worldwide LHC Computing Grid--which supports, for example, the search for the Higgs boson and new types of matter searches of the physicists at LHC, together with other large scientific challenges in astronomy, biology, computational chemistry and other sciences.</p>
<p>Being a close collaboration among well-established grid middleware providers and other specialized software providers, EMI proposes itself as a leading platform for scientific grid computing and looks at expanding outside of its natural environment.</p>
<h2>
	EMI on FutureGrid</h2>
<p>EMI have created a number of Virtual Appliances which run on FutureGrid. This tutorial describes how to use the the EMI UNICORE server tools. Users can connect an EMI user interface node to the UNICORE instance running on the VM in order to submit jobs, monitor them and retrieve results.</p>
<p>The emi-unicore virtual appliance is available on the following resources</p>
<ul>
	<li>
		Sierra</li>
	<li>
		Hotel</li>
	<li>
		Foxtrot</li>
</ul>
<h2>
	Launching the UNICORE appliance</h2>
<p>To launch the emi-unicore VM you must use the Nimbus cloud-client tool. For instructions on how to install and configure Nimbus please see the&nbsp;<a href="https://portal.futuregrid.org/tutorials/nimbus">Nimbus tutorial</a>.</p>
<p>Once you have a working Nimbus client you can search for the emi-unicore appliance using the following command</p>
<pre>
$ bin/cloud-client.sh --list</pre>
<p>You should see a the emi-unicore appliance in the list. To instantiate an emi-unicore appliance use the following command</p>
<pre>
$ bin/cloud-client.sh --run --name &lt;VM appliance name&gt; --hours &lt;number of hours&gt;</pre>
<p>For example, if the emi-unicore appliance is called emi1-unicore-centos-5.3-x64-p1.gz and you want to run it for three hours, use the following command</p>
<pre>
$ bin/cloud-client.sh --run --name emi1-unicore-centos-5.3-x64-p1.gz --hours 3</pre>
<p>Once the VM is running you should have a working UNICORE server. You can log in as root using your ssh key and test the UNICORE services with the command</p>
<pre>
$ unicore-unicorex-status.sh</pre>
<h2>
	Using your UNICORE Server</h2>
<p>The emi-unicore appliance contains the UNICORE server packages. In order to submit jobs to this server you must have access to a user interface machine with the emi-ui package installed.</p>
<p>This can be an external machine, or another VM, but it must run Scientific Linux versions 5 or 6.</p>
<p>The emi-ui package can be obtained from the&nbsp;<a href="http://emisoft.web.cern.ch/emisoft/index.html">EMI repository</a>.&nbsp;EMI packages are signed with the EMI GPG key, which can be obtained from&nbsp;<a href="http://emisoft.web.cern.ch/emisoft/dist/EMI/2/RPM-GPG-KEY-emi">http://emisoft.web.cern.ch/emisoft/dist/EMI/2/RPM-GPG-KEY-emi</a>. Download the key and run&nbsp;rpm --import &lt;keyfilename&gt;&nbsp;in order to allow packages signed with this key to be verified.</p>
<p>First configure the repository by installing the relevant yum repository file:</p>
<ul>
	<li>
		<a href="http://emisoft.web.cern.ch/emisoft/dist/EMI/2/sl5/x86_64/base/emi-release-2.0.0-1.sl5.noarch.rpm">SL5</a></li>
	<li>
		<a href="http://emisoft.web.cern.ch/emisoft/dist/EMI/2/sl6/x86_64/base/emi-release-2.0.0-1.sl6.noarch.rpm">SL6</a></li>
</ul>
<p>You should now be able to install packages from the EMI repository. To install the emi-ui type</p>
<pre>
$ yum install emi-ui</pre>
<p>To configure your emi user interface to use the UNICORE server running in your emi-unicore virtual appliance you must edit the file .ucc/preferences. If this file does not exist first run the command ucc to create it.</p>
<p>Set the registry line to the uri of the EMI UNICORE instance, you will need to ensure that the hostname matches that of the emi-unicore VM which you previously instantiated. The hostname was given in the output of the Nimbus cloud-client.sh --run command. For example, if your UNICORE appliance was instantiated on host vm-7.sdsc.futuregrid.org then you would set the registry line as follows in the .ucc/preferences file:</p>
<pre>
registry=https://vm-7.sdsc.futuregrid.org:8080/DEFAULT-SITE/services/Registry?res=default_registry</pre>
<p>You will also need to configure the UNICORE authentication. Your UNICORE server is configured to allow access to the UNICORE &quot;demo user&quot;. You can find the keystore for this user&nbsp;<a href="http://www.eu-emi.eu/documents/10147/45270/user-keystore.jks">here</a>, download it and put it in the .ucc/certs/ directory. Next set the following parameters in the .ucc/preferences file:</p>
<pre>
keystore=certs/user-keystore.jks password=the!user</pre>
<p>You are now ready to begin using your EMI UNICORE installation. To test it use the command</p>
<pre>
$ ucc connect</pre>
<h2>
	Querying Resources on EMI UNICORE</h2>
<p>Before you run any jobs, you should investigate what resources are available. You can query the UNICORE server using the following commands</p>
<pre>
$ ucc list-sites $ ucc list-storages $ ucc list-applications</pre>
<p>The first two commands will tell you about the computing and storage resources available to you. The last command tells you the supported applications which you are permitted to use. If you look in more detail at output of the list-applications command you will see that it provides a list of common applications along with their version number.</p>
<pre>
$ ucc list-applications Applications on target system &lt;DEFAULT-SITE&gt; Korn shell Version M 1993-12-28 q C shell 6.14.00 Bash shell 3.1.16 POVRay 3.5 Python Script 2.4.2 Perl 5.8.8 Date 1.0 Custom executable 1.0</pre>
<p>When you submit a job to a UNICORE server, you must specify which of these applications the job will use. You can also upload data files or scripts for execution by any of these commands. The details of which application to use and any input and output files must be stored in a job description file which is submitted to UNICORE for execution.</p>
<h2>
	Runing a job and the job description file</h2>
<p>Let&#39;s get started with a very simple example. Create a file on your user interface machine called date.u with the follwoing content:</p>
<pre>
# simple job: run Date { ApplicationName: Date, ApplicationVersion: 1.0, }</pre>
<p>This file tells UNICORE to execute the application Date version 1.0.</p>
<p>To submit this job we use the command&nbsp;</p>
<pre>
$ ucc run date.u -v</pre>
<p>In the output from this command you should see a line specifying where the output file was downloaded to, for example:</p>
<pre>
[ucc run] Downloading remote file &#39;https://vm-7.sdsc.futuregrid.org:8080/DEFAULT-SITE/services/StorageManagement?res=f884b431-4660-4b7a-b91c-260b647604db#//stdout&#39; -&gt; /root/./205d109d-42a6-4cea-8cd3-c85ecc201e4d/stdout</pre>
<p>This line indicates that the standard output of your job has been downloaded to the file /root/./205d109d-42a6-4cea-8cd3-c85ecc201e4d/stdout</p>
<p>You can view your job&#39;s output by typing</p>
<pre>
$ cat /root/./205d109d-42a6-4cea-8cd3-c85ecc201e4d/stdout Thu Jul 12 10:32:29 EDT 2012</pre>
<p>Congratulations, you have now succesfully run your first EMI UNICORE grid job! Of course, this was a very simple job, so next we will go on to look at how you can submit your own data and scripts for execution by UNICORE.</p>
<h2>
	Running your own scripts</h2>
<p>The job that you ran above didn&#39;t require any input or output files, and used a native command on the server that does not require any input. This is not the case with most useful jobs.</p>
<p>If you want to run your own script you will need to upload the script to the UNICORE storage device and specify it in the job description file to tell UNICORE which of your input files to pass to the interpreter.</p>
<p>Let&#39;s start with a simple bash script. The emi-unicore appliance comes with a version of the Bash shell, run ucc list-appliances to check the version number.</p>
Next create a job description file to run this application, for example:
<pre>
# a job to run a bash script { ApplicationName: Bash shell, ApplicationVersion: 3.1.16, }</pre>
<p>Create a script that you want to run and copy it to the UI machine. A &quot;Hello world&quot; example is given below.</p>
<pre>
echo &quot;Hello World!&quot; &gt; output.txt</pre>
<p>This script should be set as the Source in your job description file as follows</p>
<pre>
Environment: [ &quot;SOURCE=remoteScript.sh&quot;, ],</pre>
Next you must tell ucc to upload the script with your job, and to download the output file using the Imports and Exports&nbsp;
<pre>
Imports: [ { From: &quot;./script.sh&quot;, To: &quot;remoteScript.sh&quot; }, ], Exports: [ { From: &quot;output.txt&quot;, To:&quot;./output.txt&quot; }, ]</pre>
<p>Your full job description file will now look something like this</p>
<pre>
# a job to run a bash script { ApplicationName: Bash shell, ApplicationVersion: 3.1.16,  Environment: [ &quot;SOURCE=remoteScript.sh&quot;, ],  Imports: [ { From: &quot;./script.sh&quot;, To: &quot;remoteScript.sh&quot; }, ], Exports: [ { From: &quot;output.txt&quot;, To:&quot;./output.txt&quot; }, ] }</pre>
Now run this job with the ucc run command. You can do the same with Perl, Python or other scripting languages. Use ucc list-applications to see a full list of available scripting languages.<br />
<h2>
	Handling Data</h2>
If you have data files that you want to use with multiple jobs it can be inefficient to stage them in with each job. In this case it may be useful to copy the files to the UNICORE storage in advance. You can do this using the ucc command line tool. Once done, your job can tell UNICORE to copy the files to your local directory by specifying them in your job description file.
<p>To copy a file to a storage element first list the available storages:</p>
<pre>
$ ucc list-storages Home https://vm-143.uc.futuregrid.org:8080/DEFAULT-SITE/services/StorageManagement?res=demo-Home</pre>
<p>This tells you that your Home directory is available addressable via this URI. You can use this URI to access your Home directory as follows</p>
<pre>
$ ucc ls https://vm-143.uc.futuregrid.org:8080/DEFAULT-SITE/services/StorageManagement?res=demo-Home</pre>
<pre>
$ ucc put-file -s localfile.data -t https://vm-143.uc.futuregrid.org:8080/DEFAULT-SITE/services/StorageManagement?res=demo-Home#/remotefile.data</pre>
Note that the -s parameter for ucc put-file specifies the source file while -t specifies the target file.<br />
<p>Using the full URI is sometimes inconvenient, so you can use a shorter, more intuitive format. This is also a URI, but you need to know only the site (target system) name, and the storage or job id. For example</p>
<pre>
unicore6://DEFAULT-SITE/Home/file</pre>
<p>will resolve the &quot;Home&quot; storage at the target system named &quot;DEFAULT-SITE&quot;.</p>
<pre>
$ ucc put-file -s localfile.data -t u6://DEFAULT-SITE/Home/testdata  $ ucc get-file -s u6://DEFAULT-SITE/Home/testdata -t newlocalfile.data</pre>
Remember that you will need to copy the file to the local working directory as part of your job in order to use it. To do this, include it in the job description file as an import as follows:<br />
<pre>
{ From: &quot;u6://DEFAULT-SITE/Home/testdata&quot;, To: &quot;testdata&quot;}</pre>
You can also refer to a job Uspace (the job&#39;s working directory) on a given site. For this, you will need the unique ID of that job, which you can get for example using the &#39;list-jobs&#39; command. For example,
<pre>
unicore6://DEFAULT-SITE/1f3bc2e2-d814-406e-811d-e533f8f7a93b/outfile</pre>
refers to the file &quot;outfile&quot; in the working directory of the given job on the &quot;DEFAULT-SITE&quot; target system. This may be useful for checking the content of files during the job&#39;s execution, allowing you to steer the analysis on the basis of partial results.
<h2>
	Resources</h2>
<p>In the Resources section of the .u script user can specify resources to run the job on the remote system. The section may look as follows:</p>
<pre>
Resources: { Memory: 128000000, Nodes: 1, CPUs: 8 , }</pre>
<h2>
	Running job on a set of files</h2>
<p>To run UNICORE on a set of files user can put jobs descriptions in one directory (e.g. indir/) and use batch command: batch. -i argument indicate source directory (with .u scripts), -o - directory for output files:</p>
<pre>
$ ucc batch -i indir -o outdir</pre>

	&nbsp;<form action="/book/export/html/104"  accept-charset="UTF-8" method="post" id="fivestar-form-node-2032" class="fivestar-widget">
<div><div class="fivestar-form-vote-2032 clear-block"><input type="hidden" name="content_type" id="edit-content-type-2" value="node"  />
<input type="hidden" name="content_id" id="edit-content-id-2" value="2032"  />
<div class="fivestar-form-item  fivestar-combo-text fivestar-average-stars fivestar-labels-hover"><div class="form-item" id="edit-vote-4-wrapper">
 <label for="edit-vote-4">Average: </label>
 <input type="hidden" name="vote_count" id="edit-vote-count-2" value="0"  />
<input type="hidden" name="vote_average" id="edit-vote-average-2" value="0"  />
<input type="hidden" name="auto_submit_path" id="edit-auto-submit-path-2" value="/fivestar/vote/node/2032/vote"  class="fivestar-path" />
<select name="vote" class="form-select" id="edit-vote-5" ><option value="-">Select rating</option><option value="20">Poor</option><option value="40">Okay</option><option value="60">Good</option><option value="80">Great</option><option value="100">Awesome</option></select><input type="hidden" name="auto_submit_token" id="edit-auto-submit-token-2" value="15ea0173a18c4e5fc5dce5a1fe2a94c1"  class="fivestar-token" />

 <div class="description"><div class="fivestar-summary fivestar-summary-combo fivestar-feedback-enabled"><span class="empty">No votes yet</span></div></div>
</div>
</div><input type="hidden" name="destination" id="edit-destination-2" value="book/export/html/104"  />
<input type="submit" name="op" id="edit-fivestar-submit-2" value="Rate"  class="form-submit fivestar-submit" />
<input type="hidden" name="form_build_id" id="form-3ceecaaec1777d2d9994dcff8a72e1aa" value="form-3ceecaaec1777d2d9994dcff8a72e1aa"  />
<input type="hidden" name="form_token" id="edit-fivestar-form-node-2032-form-token" value="3514d693bc678b88cb9941d0d90b126c"  />
<input type="hidden" name="form_id" id="edit-fivestar-form-node-2032" value="fivestar_form_node_2032"  />
</div>
</div></form>
  </div>
</div>
<div id="node-48" class="section-2">
  <h1 class="book-heading">Tutorials</h1>
  <p><br />
	If you&#39;re looking for the Cloud Summer School 2012 (along with excellent tutorial material), click on the icon below:<br />
	&nbsp;</p>
<p class="rteindent1"><a href="https://portal.futuregrid.org/projects/241"><img alt="" height="128" src="/sites/default/files/u23/summerschool2012.png" width="128" /></a></p>
<p><strong>Note: </strong>This page is maintained by Renato Figueiredo from UF.</p>
<p>&nbsp;</p>
<p>The following tutorials are broadly organized into topics, with each tutorial classified by the user&#39;s target level of expertise with FutureGrid (novice, intermediate, advanced). (If you are a tutorial developer, for instructions on&nbsp;how to add a tutorial to this list, please&nbsp;<a href="https://portal.futuregrid.org/outreach">refer to the TEOS page</a>).</p>
<p>If you have corrections or suggestions related to our tutorial content, please <a href="https://portal.futuregrid.org/help">fill out a help request</a>.<br />
	&nbsp;</p>
<h2>
	Tutorial Topic 0: Accessing FutureGrid Resources</h2>
<ul>
	<li>
		<a href="https://portal.futuregrid.org/accessing-futuregrid-resources-ssh">https://portal.futuregrid.org/accessing-futuregrid-resources-ssh</a>&nbsp;[novice]</li>
</ul>
<h2>
	Tutorial Topic 1: Cloud Provisioning Platforms</h2>
<ul>
	<li>
		<a href="https://portal.futuregrid.org/tutorials/nimbus">Using Nimbus on FutureGrid</a> [novice]</li>
	<li>
		<a href="https://portal.futuregrid.org/tutorials/nm2">Nimbus One-click Cluster Guide</a> [intermediate]</li>
	<li>
		<a href="https://portal.futuregrid.org/manual/openstack/grizzly">Using OpenStack Grizzly on FutureGrid</a> [novice] <em><strong>* NEW *</strong></em></li>
	<li>
		<a href="https://portal.futuregrid.org/tutorials/openstack">Using OpenStack Essex on&nbsp;FutureGrid</a>&nbsp;[novice]</li>
	<li>
		<a href="https://portal.futuregrid.org/tutorials/eucalyptus3">Using Eucalyptus on FutureGrid</a> [novice]</li>
	<li>
		<a href="https://portal.futuregrid.org/contrib/simple-vine-tutorial">Connecting private network VMs&nbsp;across Nimbus clusters using ViNe</a>&nbsp;[novice]</li>
	<li>
		<a href="https://portal.futuregrid.org/tutorials/ipop1">IPOP1: (IP-over-P2P) Virtual Network Introductory Tutorial</a> [novice]</li>
	<li>
		<a href="https://portal.futuregrid.org/tutorials/ipop1">IPOP2: Deploying your Own P2P Overlay for IPOP VPNs</a>&nbsp;[intermediate]</li>
</ul>
<h2>
	Tutorial Topic 2: Cloud Run-time Map/Reduce Platforms</h2>
<ul>
	<li>
		<a href="https://portal.futuregrid.org/tutorials/running-hadoop-batch-job-using-myhadoop">Running Hadoop as a batch job using MyHadoop</a>&nbsp;[novice]</li>
	<li>
		<a href="https://portal.futuregrid.org/salsahadoop-futuregrid-hpc">Running SalsaHadoop&nbsp;(one-click Hadoop) on HPC environment</a>&nbsp;[beginner]</li>
	<li>
		<a href="https://portal.futuregrid.org/twister-futuregrid-hpc">Running Twister on HPC environment</a>&nbsp;[beginner]</li>
	<li>
		<a href="https://portal.futuregrid.org/salsahadoop-futuregrid-cloud-eucalyptus">Running SalsaHadoop&nbsp;on Eucalyptus</a>&nbsp;[intermediate]</li>
	<li>
		<a href="https://portal.futuregrid.org/tutorials/eucalyptus-and-twister-futuregrid">Running</a><a href="https://portal.futuregrid.org/tutorials/eucalyptus-and-twister-futuregrid"> FG-Twister on Eucalyptus</a>&nbsp;[intermediate]</li>
	<li>
		<a href="https://portal.futuregrid.org/tutorials/one-click-hadoop-wordcount-eucalyptus-futuregrid">Running One-click Hadoop WordCount on Eucalyptus</a> [beginner]</li>
	<li>
		<a href="https://portal.futuregrid.org/tutorials/one-click-twister-k-means-eucalyptus-futuregrid">Running One-click Twister K-means on Eucalyptus</a> [beginner]</li>
</ul>
<h2>
	Tutorial Topic 3: Grid Appliances for Training, Education, and Outreach</h2>
<ul>
	<li>
		<a href="https://portal.futuregrid.org/tutorials/ga1">Running a Grid Appliance on your desktop</a>&nbsp;&nbsp;[novice]</li>
	<li>
		<a href="http://portal.futuregrid.org/tutorials/ga9">Running a Grid Appliance on FutureGrid</a> [novice]</li>
	<li>
		<a href="http://portal.futuregrid.org/tutorials/os1">Running an OpenStack virtual appliance on FutureGrid</a> [novice]</li>
	<li>
		<a href="http://portal.futuregrid.org/tutorials/ga8">Running Condor tasks on the Grid Appliance</a> [novice]</li>
	<li>
		<a href="https://portal.futuregrid.org/tutorials/mp1">Running MPI tasks on the Grid Appliance</a>&nbsp;[novice]</li>
	<li>
		<a href="http://portal.futuregrid.org/tutorials/ga10">Running Hadoop&nbsp;tasks on the Grid Appliance</a> [novice]</li>
	<li>
		<a href="https://portal.futuregrid.org/tutorials/ga4">Deploying virtual private Grid Appliance clusters using Nimbus</a> [intermediate]</li>
	<li>
		<a href="https://portal.futuregrid.org/tutorials/ga3">Building an educational appliance from Ubuntu 10.04</a> [intermediate]</li>
	<li>
		<a href="https://portal.futuregrid.org/tutorials/ga7">Customizing and registering Grid Appliance images using Eucalyptus</a> [intermediate]</li>
</ul>
<h2>
	Tutorial Topic 4: High Performance Computing</h2>
<ul>
	<li>
		<a href="/tutorials/hpc">Basic High Performance Computing</a> [novice]</li>
	<li>
		<a href="/tutorials/running-hadoop-batch-job-using-myhadoop">Running Hadoop as a batch job using MyHadoop</a> [novice]</li>
	<li>
		<a href="/manual/performance/vampir">Performance Analysis with Vampir</a> [advanced]</li>
	<li>
		<a href="/manual/vampir/trace">Instrumentation and tracing with VampirTrace</a> [advanced]</li>
</ul>
<h2>
	Tutorial Topic 5: Experiment Management</h2>
<ul>
	<li>
		<a href="https://portal.futuregrid.org/tutorials/interactive-experiment-management">Running interactive experiments</a> [novice]</li>
	<li>
		<a href="https://portal.futuregrid.org/tutorials/workflow-experiment-management">Running workflow experiments using Pegasus</a>&nbsp;[novice]</li>
	<li>
		<a href="https://portal.futuregrid.org/tutorials/pegasus-on-futuregrid-tutorial">Pegasus 4.1 on FutureGrid Tutorial</a>&nbsp;[novice]</li>
</ul>
<h2>
	Tutorial Topic 6: Image Management and Rain</h2>
<ul>
	<li>
		<a href="http://futuregrid.github.com/rain/quickstart.html">Using Image Management and Rain</a>&nbsp;[novice]</li>
	<li>
		<a href="https://portal.futuregrid.org/generate-and-register-os-image-futuregrid-using-fg-shell">Easy steps to generate and register an Image</a> [novice]</li>
	<li>
		<a href="https://portal.futuregrid.org/manually-customize-image">Manual Image Customization</a> [advanced]</li>
	<li>
		<a href="https://portal.futuregrid.org/register-virtual-box-image-openstack">Register your VirtualBox image in OpenStack</a> [intermediate]</li>
</ul>
<h2>
	Tutorial Topic 7: &nbsp;Storage</h2>
<ul>
	<li>
		<a href="https://portal.futuregrid.org/tutorials/hpss">Using HPSS from FutureGrid</a>&nbsp;[novice]</li>
</ul>
<h2>
	Other Tutorials and Educational Materials</h2>
<ul>
	<li>
		<a href="https://portal.futuregrid.org/additional_tutorials">Additional tutorials on FutureGrid-related technologies</a></li>
	<li>
		<a href="https://portal.futuregrid.org/community_edu_materials">FutureGrid community educational materials</a></li>
	<li>
		<a href="http://www.citutor.org/browse.php?access=&amp;category=-1&amp;search=performance&amp;include=all&amp;filter=Filter">CI Tutor performance tutorials</a> (requires brief registration to view content)</li>
</ul>
<br />  <div id="node-715" class="section-3">
  <h1 class="book-heading">FutureGrid Grid Appliance for Nimbus and Eucalyptus</h1>
  <p>
	<strong>Summary:</strong></p>
<p>
	This tutorial provides step-by-step instructions on how to install clients to access Eucalyptus and Nimbus clouds on FutureGrid using the Grid appliance. </p>
<p>
	<strong>Pre-requisites:</strong></p>
<p>
	<a href="http://portal.futuregrid.org/tutorials/ga1">FutureGrid tutorial GA1 - Introduction to the Grid Appliance</a></p>
<p>
	<strong>Hands-on tutorial</strong>:</p>
<p>
	This tutorial is maintained at the Grid Appliance portal. See <a href="http://www.grid-appliance.org/wiki/index.php/FutureGrid:clientappliance" target="_blank">FutureGrid:clientappliance</a>.</p>  </div>
<div id="node-1876" class="section-3">
  <h1 class="book-heading">One-click Hadoop WordCount on Eucalyptus FutureGrid</h1>
  <h3 class="rteleft">
	I. Introduction</h3>
This tutorial shows how to run a one-click Hadoop WordCount job on the Eucalyptus platform of FutureGrid.<br />
<br />
<h3 class="rteleft">
	II. Prerequisite</h3>
1. FutureGrid&nbsp;HPC account: please apply via&nbsp;<a href="../../user/register">FutureGrid portal</a> and&nbsp;<a href="../../request-hpc-account">request a HPC account</a>.<br />
2. FutureGrid Eucalyptus account: please see <a href="../../tutorials/eucalyptus3">FutureGrid Eucalyptus Tutorial</a> for detailed instructions.<br />
3. FutureGrid&nbsp;Eucalyptus credentials zip file (euca2-[username]-x509.zip) stored under user&#39;s home directory<br />
4. Key pair created and added for use with Eucalyptus virtual machines<br />
<br />
The following sections assume a user has created both an HPC account and a Eucalpytus account under the username of <em>gaoxm</em>.<br />
<br />
<h3 class="rteleft">
	III. Login to india.futuregrid.org</h3>
<cite>[gaoxm@129-79-49-98 ~]$ ssh -i .ssh/id_rsa_fg india.futuregrid.org&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br />
Enter passphrase for key &#39;.ssh/id_rsa_fg&#39;:<br />
Last login: Sat May&nbsp; 5 02:17:33 2012 from c-71-194-153-252.hsd1.in.comcast.net<br />
...<br />
torque/2.5.5 version 2.5.5 loaded<br />
moab version 5.4.0 loaded<br />
euca2ools version 1.2 loaded<br />
[gaoxm@i136 ~]$ cd eucalyptus/<br />
[gaoxm@i136 eucalyptus]$ ls<br />
cloud-cert.pem&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; euca2-gaoxm-d108375b-pk.pem&nbsp; eucarc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; hosts&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; nodes<br />
euca2-gaoxm-d108375b-cert.pem&nbsp; euca2-gaoxm-x509.zip&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; gaoxm.private&nbsp; jssecacerts&nbsp; tmp.out</cite><br />
<br />
<h3 class="rteleft">
	IV. Download and unzip the &ldquo;hadoopOneClick.zip&rdquo; package</h3>
<cite>[gaoxm@i136 test]$ wget <a href="http://mypage.iu.edu/~gao4/data/hadoopOneClick.zip" title="http://mypage.iu.edu/~gao4/data/hadoopOneClick.zip">http://mypage.iu.edu/~gao4/data/hadoopOneClick.zip</a><br />
...<br />
[gaoxm@i136 test]$ ls<br />
hadoopOneClick.zip<br />
[gaoxm@i136 test]$ unzip hadoopOneClick.zip</cite><br />
<br />
<h3 class="rteleft">
	V. Run hadoop-one-click.sh</h3>
<cite>[gaoxm@i136 test]$ cd hadoopOneClick<br />
[gaoxm@i136 hadoopOneClick]$ ls<br />
deploy-hadoop.sh&nbsp;&nbsp;&nbsp;&nbsp; instanceIds.txt&nbsp; publicIps.txt&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; stop-hadoop.sh<br />
hadoop-one-click.sh&nbsp; ipHosts.txt&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; run-hadoop-wordcount.sh&nbsp; terminate-instances.sh<br />
hosts&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; nodes.txt&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; start-instances.sh<br />
[gaoxm@i136 hadoopOneClick]$ chmod +x *.sh<br />
[gaoxm@i136 hadoopOneClick]$ ./hadoop-one-click.sh -n 2 -t m1.small -i emi-D778156D -k gaoxm -p ~/eucalyptus/gaoxm.private -l <a href="http://mypage.iu.edu/~gao4/data/grexp10.txt" title="http://mypage.iu.edu/~gao4/data/grexp10.txt">http://mypage.iu.edu/~gao4/data/grexp10.txt</a> -s http://salsahpc.indiana.edu/tutorial/apps/hadoop-0.20.203.0-for-EucaVm.tar.gz</cite><br />
<br />
This will run a MapReduce word-count job on a dynamically created virtual Hadoop cluster on FutureGrid. The user needs to replace the <em>&ndash;k</em> and <em>&ndash;p</em> parameter values with his/her key-pair name and private key path. For detailed usage information, try<br />
<br />
<cite>[gaoxm@i136 hadoopOneClick]$ ./hadoop-one-click.sh -h</cite><br />
<br />
<h3>
	VI. Verify output</h3>
<cite>[gaoxm@i136 hadoopOneClick]$ ls outputs/<br />
_logs&nbsp; part-r-00000&nbsp; _SUCCESS<br />
[gaoxm@i136 hadoopOneClick]$ vim outputs/part-r-00000</cite><br />
<br />
<h3>
	VII. Extensions</h3>
To run other MapReduce jobs, replace <em>run-hadoop-wordcount.sh</em> with new scripts, and change <em>hadoop-one-click.sh</em> to call the corresponding scripts.<br />
<br />  </div>
<div id="node-1890" class="section-3">
  <h1 class="book-heading">One-click Twister K-means on Eucalyptus FutureGrid</h1>
  <h3 class="rteleft">
	I.&nbsp;Introduction</h3>
This tutorial shows how to run a one-click Twister K-means job on the Eucalyptus platform of FutureGrid.<br />
<br />
<h3 class="rteleft">
	II.&nbsp;Prerequisite</h3>
1. FutureGrid&nbsp;HPC account, please apply via&nbsp;<a href="https://portal.futuregrid.org/user/register">FutureGrid portal</a>&nbsp;and&nbsp;<a href="https://portal.futuregrid.org/request-hpc-account">request a HPC account</a>.<br />
2. FutureGrid Eucalyptus account, please see&nbsp;<a href="https://portal.futuregrid.org/tutorials/eucalyptus">FutureGrid Eucalyptus Tutorial</a>&nbsp;for detailed instructions.<br />
3. FutureGrid&nbsp;Eucalyptus credentials zip file (euca2-[username]-x509.zip) stored under user&#39;s home directory.<br />
4. Key pair created and added for use with Eucalyptus virtual machines.<br />
<br />
The following sections assume a user has created both HPC account and Eucalpytus account under the username of &ldquo;gaoxm&rdquo;.<br />
<br />
<h3 class="rteleft">
	III. Login to india.futuregrid.org</h3>
<cite>[gaoxm@129-79-49-98 ~]$ ssh -i .ssh/id_rsa_fg india.futuregrid.org&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;<br />
Enter passphrase for key &#39;.ssh/id_rsa_fg&#39;:<br />
Last login: Sat May&nbsp; 5 02:17:33 2012 from c-71-194-153-252.hsd1.in.comcast.net<br />
...<br />
torque/2.5.5 version 2.5.5 loaded<br />
moab version 5.4.0 loaded<br />
euca2ools version 1.2 loaded<br />
[gaoxm@i136 ~]$ cd eucalyptus/<br />
[gaoxm@i136 eucalyptus]$ ls<br />
cloud-cert.pem&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; euca2-gaoxm-d108375b-pk.pem&nbsp; eucarc&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; hosts&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; nodes<br />
euca2-gaoxm-d108375b-cert.pem&nbsp; euca2-gaoxm-x509.zip&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; gaoxm.private&nbsp; jssecacerts&nbsp; tmp.out</cite><br />
<br />
<h3 class="rteleft">
	IV. Download and unzip the &ldquo;twisterOneClick.zip&rdquo; package</h3>
<cite>[gaoxm@i136 test]$ wget&nbsp;<a href="http://mypage.iu.edu/~gao4/data/hadoopOneClick.zip" title="http://mypage.iu.edu/~gao4/data/hadoopOneClick.zip">http://mypage.iu.edu/~gao4/data/twisterOneClick.zip</a><br />
...<br />
[gaoxm@i136 test]$ ls<br />
hadoopOneClick&nbsp; hadoopOneClick.zip&nbsp; twisterOneClick.zip</cite><br />
<cite>[gaoxm@i136 test]$ unzip twisterOneClick.zip</cite><br />
<br />
<h3 class="rteleft">
	V. Run twister-one-click.sh</h3>
<cite>[gaoxm@i136 test]$ cd twisterOneClick<br />
[gaoxm@i136 twisterOneClick]$ ls<br />
deploy-twister.sh&nbsp; instanceIds.txt&nbsp; publicIps.txt&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; stop-twister.sh<br />
hostnames.txt&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ipHosts.txt&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; run-twister-kmeans.sh&nbsp; terminate-instances.sh<br />
hosts&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; nodes.txt&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; start-instances.sh&nbsp;&nbsp;&nbsp;&nbsp; twister-one-click.sh<br />
[gaoxm@i136 twisterOneClick]$ chmod +x *.sh<br />
[gaoxm@i136 twisterOneClick]$ ./twister-one-click.sh -n 2 -t m1.small -i emi-D778156D -k gaoxm -p ~/eucalyptus/gaoxm.private -l<a href="http://salsahpc.indiana.edu/tutorial/apps/Twister-0.9.tar.gz" title="http://salsahpc.indiana.edu/tutorial/apps/Twister-0.9.tar.gz">http</a><a href="http://salsahpc.indiana.edu/tutorial/apps/Twister-0.9.tar.gz" title="http://salsahpc.indiana.edu/tutorial/apps/Twister-0.9.tar.gz">://salsahpc.indiana.edu/tutorial/apps/Twister-0.9.tar.gz</a>&nbsp;-a http://www.iterativemapreduce.org/apache-activemq-5.4.2-bin.tar.gz</cite><br />
<br />
This will run a MapReduce K-means job on a dynamically created virtual Twister cluster on&nbsp; FutureGrid. The user needs to replace the &ldquo;&ndash;k&rdquo; and &ldquo;&ndash;p&rdquo; parameter values with his/her key-pair name and private key path. For detailed usage information, try<br />
<br />
<cite>[gaoxm@i136 twisterOneClick]$ ./twister-one-click.sh -h</cite><br />
<br />
<h3>
	VI. Verify results in the standard output of the&nbsp;scripts</h3>
<cite>Calling</cite><cite> run_kmeans.sh on 149.165.159.140...<br />
JobID: kmeans-map-reduce9ec9eaa2-9731-11e1-80d7-156f25bd362a<br />
May 6, 2012 4:11:57 AM org.apache.activemq.transport.failover.FailoverTransport doReconnect<br />
INFO: Successfully connected to&nbsp;<a href="https://master:61616/" title="//master:61616">tcp://master:61616</a><br />
0&nbsp;&nbsp;&nbsp; [main] INFO&nbsp; cgl.imr.client.TwisterDriver&nbsp; - Configure Mappers through the partition file, please wait....<br />
1975 [main] INFO&nbsp; cgl.imr.client.TwisterDriver&nbsp; - Configuring Mappers through the partition file is completed.<br />
250.77056136584878 , 125.15021341387315 , 249.21561041359857 ,<br />
246.74715176402833 , 375.350251646343 , 249.17570173022511 ,<br />
Total Time for kemeans : 6.808<br />
Total loop count : 15<br />
6260 [main] INFO&nbsp; cgl.imr.client.TwisterDriver&nbsp; - MapReduce computation termintated gracefully.<br />
------------------------------------------------------<br />
Kmeans clustering took 6.841 seconds.<br />
------------------------------------------------------</cite><br />
<br />
<h3>
	VII. Extensions</h3>
To run other iterative MapReduce jobs, replace run-twister-kmeans.sh with new scripts, and change twister-one-click.sh to call the corresponding scripts.<br />
<br />
<br />  </div>
<div id="node-2200" class="section-3">
  <h1 class="book-heading">Register Virtual Box Image on OpenStack</h1>
  <p>In this tutorial we explain how to convert a Virtual Box image to kvm format and then register it on OpenStack.</p>
<h2>Prerequisites</h2>
<p>There is two main prerequisites for your images to work with OpenStack</p>
<h3>Disable SELinux (Only for RedHat-based Linux like CentOS)</h3>
<p>Edit the file&nbsp;/etc/selinux/config and set the SELINUX option to disabled</p>
<pre>SELINUX=disabled</pre><h3>Configuring the image network interface (eth0) for DHCP</h3>
<p>In Ubuntu, you edit the file /etc/network/interfaces and configure eth0 to:</p>
<pre>auto eth0
iface eth0 inet dhcp</pre><div>In CentOS, you edit the file /etc/sysconfig/network-scripts/ifcfg-eth0 and make sure it contains:</p>
<pre>DEVICE=eth0
BOOTPROTO=dhcp
ONBOOT=yes</pre></div>
<h3>Configure the image to allow OpenStack to inject the ssh key&nbsp;</h3>
<ul>
<li>Ubuntu&nbsp;(it may not be needed for Ubuntu, but it is recomended)</li>
</ul>
<pre class="rteindent2">$ sudo apt-get install cloud-init curl</pre><ul>
<li>CentOS.&nbsp;Edit the file /etc/rc.local</li>
</ul>
<pre class="rteindent2">route del -net 169.254.0.0 netmask 255.255.0.0 dev eth0
# load pci hotplug for dynamic disk attach in KVM (for EBS)
depmod -a
modprobe acpiphp

# simple attempt to get the user ssh key using the meta-data service
mkdir -p /root/.ssh
echo &gt;&gt; /root/.ssh/authorized_keys
curl -m 10 -s <a href="http://169.254.169.254/latest/meta-data/public-keys/0/openssh-key" title="http://169.254.169.254/latest/meta-data/public-keys/0/openssh-key">http://169.254.169.254/latest/meta-data/public-keys/0/openssh-key</a> | grep &#39;ssh-rsa&#39; &gt;&gt; /root/.ssh/authorized_keys
echo &quot;AUTHORIZED_KEYS:&quot;
echo &quot;************************&quot;
cat /root/.ssh/authorized_keys
echo &quot;************************&quot;</pre><h3>Configure udev persistent rules (only CentOS)</h3>
<p>Edit the file&nbsp;/etc/udev/rules.d/70-persistent-net.rules, delete everything and add:</p>
<pre>ACTION==&quot;add&quot;,SUBSYSTEM==&quot;net&quot;, IMPORT{program}=&quot;/lib/udev/rename_device&quot;
SUBSYSTEM==&quot;net&quot;, RUN+=&quot;/etc/sysconfig/network-scripts/net.hotplug&quot;</pre><h2>Convert your virtual box image to raw format</h2>
<pre>VBoxManage clonehd /path/to/imagefile/vboximage.vdi /path/to/rawimage.img --format raw</pre><p>Make sure that you specify the full path. Otherwise, you may experience errors and the new image will be placed in&nbsp;<span style="color: rgb(41, 41, 41); font-family: Helvetica; font-size: 13px; line-height: 16px; ">&nbsp;~/.VirtualBox/HardDisks/</span></p>
<h2>Convert the image to qcow2 format (optional)</h2>
<p>This step is optional, but it is recommended if your image as a considerable size because the qcow2 format will compress your image. Nevertheless, it will takes a while to finish this command. As example my 8GB image took a couple of hours to get ready and was compressed to less than 6 GB.</p>
<pre>qemu-img convert -f raw rawimage.img -O qcow2 qcow2image.img</pre><h2>Test your image</h2>
<p>If you are in a computer with graphical interface, the easiest way to test it is by executing the following command. This command will open a window and you will see if your image boots correctly.</p>
<pre>kvm -hda rawimage.img -m 1024</pre><p>or</p>
<pre>kvm -hda qcow2image.img -m 1024</pre><p>From now on, we refer only to the rawimage.img, but it works in the same way with the qcow2image.img.</p>
<h2>Transfer your Image to India</h2>
<pre>$ scp rawimage.img &lt;username&gt;@india.futuregrid.org:/N/u/&lt;username&gt;/</pre><h2>Log into India</h2>
<pre>$ ssh &lt;username&gt;@india.futuregrid.org</pre><pre></pre><h2>Upload your image to OpenStack</h2>
<p>First, we need to load the euca2ools module that contains the command line interface to interact with OpenStack. Then we need to load our own credentials that are typically in a novarc file. Finally you update and register the image. Although, we are going to briefly explain these steps here, this is part of the OpenStack tutorial that can be found in&nbsp;<a href="https://portal.futuregrid.org/tutorials/openstack">https://portal.futuregrid.org/tutorials/openstack</a>.</p>
<pre>$ module load euca2ools
$ source ~/novarc</pre><p>Upload the image</p>
<pre>$ euca-bundle-image -i rawimage.img 

Checking image
Encrypting image
Splitting image...
Part: rawimage.img.part.00
Part: rawimage.img.part.01
Part: rawimage.img.part.02
.....
Generating manifest /tmp/rawimage.img.manifest.xml</pre><p>At the end you get a manifest file that you use in the next step. You also need to specify a bucket name (option -b). We can use our username (jdiazz in my case), but it can be any other string.</p>
<pre>$ euca-upload-image -m /tmp/rawimage.img.manifest.xml -b jdiazz

Checking bucket: jdiaz
Uploading manifest file
Uploading part: rawimage.img.part.00
Uploading part: rawimage.img.part.01
Uploading part: rawimage.img.part.02
.....
Uploaded image as jdiazz/rawimage.img.manifest.xml</pre><p>Finally we register the image.</p>
<pre>$ euca-register jdiazz/rawimage.img.manifest.xml

IMAGE <span style="background-color:#ffff00;">ami-00000058</span></pre><p>From this last command we get the ami-ID that identifies the image in OpenStack (marked in yellow). You will need this to start instances.</p>
<h2>Checking Status Image</h2>
<p>You cannot run instances until your image is in available status. You can check the status of your image with the euca-describe-images command. This command can take some time to respond because the system will be busy processing your image.</p>
<pre>$ euca-describe-images ami-00000058</pre><h2>Test Image in OpenStack</h2>
<p>For this step we recomend to go to the OpenStack tutorial where we explain how to create a key-pair and run an instance with our image. Please see&nbsp;<a href="https://portal.futuregrid.org/using-openstack-futuregrid#key_management">https://portal.futuregrid.org/using-openstack-futuregrid#key_management</a></p>
<p>Running the instance can be something like this:</p>
<pre>$ euca-run-instances -k jdiaznova ami-00000058 -t m1.large</pre><p>where jdiaznova is the key name of my openstack key pairs. This key will allow us to ssh into the image. Please refer to the OpenStack tutorial for more information.</p>
<h2>Troubleshooting</h2>
<p>One problem of this way of using our images is that we cannot use euca-get-console-output command to debug the boot process of the images. Therefore it makes more complicated solving runtime problems. However, if your image boots properly when doing the &quot;Test your Image&quot; section, it should work also on OpenStack and the only problem could be wrong configuration of network interface or SELinux enabled.</p>
<h2>Notes:</h2>
<p>This tutorial has been tested with Ubuntu 12 and CentOS 6 using OpenStack Essex.&nbsp;</p>
  </div>
</div>
<div id="node-1183" class="section-2">
  <h1 class="book-heading">Virtual Appliances</h1>
  <h3>
	<strong>Overview:</strong></h3>
Virtual appliances are virtual machine images encapsulating pre-installed, pre-configured software that can be easily deployed on cloud resources.&nbsp;Users of FutureGrid can use public appliance images posted by other users, as well as contribute to the repository of images.<br />
<br />
This page provides a summary of community-provided virtual appliances that are available for use on FutureGrid. If you have created a virtual appliance and you would like to advertise its availability and features with the community, feel free to edit this page and include information about your appliance.
<h3>
	<br />
	<strong>Creating Your Own Appliance:</strong></h3>
Any FutureGrid user with Eucalyptus or Nimbus accounts can create and register an appliance. The approach is similar in both cases: you can upload an existing image into FutureGrid (e.g. from another Eucalyptus or Nimbus cloud, or an image you create on your own computer), or you can customize an instance interactively in FutureGrid and save it in a FutureGrid resource.<br />
<br />
<h4>
	<em><strong>Nimbus</strong></em>:</h4>
You can upload a &quot;common&quot; image so it becomes available to others in a FutureGrid cloud resource - to do this, add the flag --common to the cloud_client.sh command line when you transfer an image (ensure you are using cloud client version 020 or above).&nbsp;

You can also save a Nimbus instance that you are using interactively (through ssh) as an image. Please refer to the <a href="http://www.nimbusproject.org/docs/current/clouds/cloudquickstart.html">manual for cloud_client.sh</a>&nbsp;and the &nbsp;<a href="http://portal.futuregrid.org/tutorials/nimbus">Nimbus tutorial</a> for instructions.<br />
<br />
<h4>
	<em><strong>Eucalyptus</strong></em>:&nbsp;</h4>
Please refer to <a href="https://portal.futuregrid.org/tutorials/ga7">FutureGrid tutorial GA7</a>.<br />
<br />
<h3>
	<strong>Reusing an Existing Appliance:</strong></h3>
There are several appliances already available on FutureGrid. The table below summarizes a list of appliances, where they are available, and their image names. If you have an appliance that you would like to add to this list, please add it to the table.
<h4>
	<br />
	<em>Editing tips for the table:</em></h4>
<ul>
	<li>
		<em>You can add rows to the table by right-clicking the last row of the table and selecting Row-&gt;Insert Row After</em></li>
	<li>
		<em>If you make a mistake (e.g., deleting a row), you can undo it by pressing CTRL-Z</em></li>
	<li>
		<em>You need to click on the Submit button so your changes take effect</em></li>
	<li>
		<em>You can <a href="https://portal.futuregrid.org/node/add/page-community">create a community page</a> explaining your appliance and its usage in more depth, and can link to it from this page</em></li>
</ul>
<br />
<table border="1" cellpadding="1" cellspacing="1">
	
		<tr>
			<td>
				<strong>Appliance name</strong></td>
			<td>
				<strong>Appliance description</strong></td>
			<td>
				<strong>FutureGrid system(s) available</strong></td>
			<td>
				<strong>Appliance ID</strong></td>
			<td>
				<b>Installed<br />
				by (FutureGrid user ID)</b></td>
		</tr>
		<tr>
			<td>
				<a href="https://portal.futuregrid.org/tutorials/ga9">Grid Appliance</a></td>
			<td>
				Self-configures Condor/MPI/Hadoop virtual clusters for training/education</td>
			<td>
				alamo, india</td>
			<td>
				grid-appliance-2.05.03.gz (alamo), emi-E4ED1880 (india)</td>
			<td>
				panoat</td>
		</tr>
		<tr>
			<td>
				<a href="https://portal.futuregrid.org/tutorials/os1">OpenStack<br />
				Appliance</a></td>
			<td>
				Deploys a single-node OpenStack compute virtual cloud</td>
			<td>
				alamo</td>
			<td>
				openstack-ubuntu-10.10-amd64.img</td>
			<td>
				menghan</td>
		</tr>
		<tr>
			<td>
				<a href="https://portal.futuregrid.org/contrib/simple-vine-tutorial">ViNe Appliance</a></td>
			<td>
				Deploys the ViNe virtual network overlay to connect private-address VMs in sierra and foxtrot</td>
			<td>
				sierra, foxtrot</td>
			<td>
				centos-5.5-x64-vine.gz</td>
			<td>
				menghan</td>
		</tr>
		<tr>
			<td>
				<a href="https://portal.futuregrid.org/contrib/fg-twister-appliance-tutorial">Twister Appliance</a></td>
			<td>
				Deploys a virtual private cluster running the Twister iterative MapReduce system</td>
			<td>
				india</td>
			<td>
				emi-F0B8194D</td>
			<td>
				jemitche</td>
		</tr>
		<tr>
			<td>
				(Add your appliance here)</td>
			<td>
				&nbsp;</td>
			<td>
				&nbsp;</td>
			<td>
				&nbsp;</td>
			<td>
				&nbsp;</td>
		</tr>
		<tr>
			<td>
				&nbsp;</td>
			<td>
				&nbsp;</td>
			<td>
				&nbsp;</td>
			<td>
				&nbsp;</td>
			<td>
				&nbsp;</td>
		</tr>
	
</table>
<br /><form action="/book/export/html/104"  accept-charset="UTF-8" method="post" id="fivestar-form-node-1183" class="fivestar-widget">
<div><div class="fivestar-form-vote-1183 clear-block"><input type="hidden" name="content_type" id="edit-content-type-3" value="node"  />
<input type="hidden" name="content_id" id="edit-content-id-3" value="1183"  />
<div class="fivestar-form-item  fivestar-combo-text fivestar-average-stars fivestar-labels-hover"><div class="form-item" id="edit-vote-6-wrapper">
 <label for="edit-vote-6">Average: </label>
 <input type="hidden" name="vote_count" id="edit-vote-count-3" value="0"  />
<input type="hidden" name="vote_average" id="edit-vote-average-3" value="0"  />
<input type="hidden" name="auto_submit_path" id="edit-auto-submit-path-3" value="/fivestar/vote/node/1183/vote"  class="fivestar-path" />
<select name="vote" class="form-select" id="edit-vote-7" ><option value="-">Select rating</option><option value="20">Poor</option><option value="40">Okay</option><option value="60">Good</option><option value="80">Great</option><option value="100">Awesome</option></select><input type="hidden" name="auto_submit_token" id="edit-auto-submit-token-3" value="15bb7c200130a94d1ee4a099ae1a9326"  class="fivestar-token" />

 <div class="description"><div class="fivestar-summary fivestar-summary-combo fivestar-feedback-enabled"><span class="empty">No votes yet</span></div></div>
</div>
</div><input type="hidden" name="destination" id="edit-destination-3" value="book/export/html/104"  />
<input type="submit" name="op" id="edit-fivestar-submit-3" value="Rate"  class="form-submit fivestar-submit" />
<input type="hidden" name="form_build_id" id="form-9cbf677016d62f7bf8a48b8721278eba" value="form-9cbf677016d62f7bf8a48b8721278eba"  />
<input type="hidden" name="form_token" id="edit-fivestar-form-node-1183-form-token" value="e8b4d30cc8de965291ec7ca1bae5af18"  />
<input type="hidden" name="form_id" id="edit-fivestar-form-node-1183" value="fivestar_form_node_1183"  />
</div>
</div></form>
  </div>
<div id="node-1502" class="section-2">
  <h1 class="book-heading">Development Projects</h1>
  FutureGrid&nbsp;provides a number of software development projects. Much (but not all) of our work we have just begun to move to github.<br />
<br />
The documentation for these projects can be found at&nbsp;<a href="http://futuregrid.github.com/doc/">http://futuregrid.github.com/doc/</a> .<br />
<br />
<br />
&nbsp;As a part of FutureGrid, many other projects perform development as well. These include Inca, Nimbus, Pegasus, PAPI, Vampir, as well as a project called hostlists. These projects either maintain their own repositories or use the FutureGrid sourceforge&nbsp;repository.<br />
<br />
&nbsp;Actvities on github&nbsp;include:<br />
<br />
<dl class="docutils">
	<dt>Rain</dt>
	<dd>
		<ul class="first last simple">
			<li>A project to do bare metal and VM-based dynamic provisioning</li>
			<li>Documentation:&nbsp;<a class="reference external" href="http://futuregrid.github.com/rain">http://futuregrid.github.com/rain</a></li>
			<li>Source:&nbsp;<a class="reference external" href="https://github.com/futuregrid/rain">https://github.com/futuregrid/rain</a></li>
		</ul>
	</dd>
	<dt>Cloud Shift</dt>
	<dd>
		<ul class="first last simple">
			<li>A project to move resources between different cloud and HPC services</li>
			<li>Documentation: todo</li>
			<li>Source: todo</li>
			<li>Issues: todo</li>
		</ul>
	</dd>
	<dt>Cloud Metric</dt>
	<dd>
		<ul class="first last simple">
			<li>A project to measure and display metric information about usage and utilization of your cloud</li>
			<li>Documentation:<a class="reference external" href="https://portal.futuregrid.org/doc/metric/index.html">https://portal.futuregrid.org/doc/metric/index.html</a></li>
			<li>Source:&nbsp;<a class="reference external" href="https://github.com/futuregrid/futuregrid-cloud-metrics">https://github.com/futuregrid/futuregrid-cloud-metrics</a></li>
			<li>Issues:&nbsp;<a class="reference external" href="https://github.com/futuregrid/futuregrid-cloud-metrics/issues">https://github.com/futuregrid/futuregrid-cloud-metrics/issues</a></li>
		</ul>
	</dd>
</dl>
<dl class="docutils">
	<dt>Virtual Cluster</dt>
	<dd>
		<ul class="first last simple">
			<li>A project to create a SLURM-based cluster in your cloud and run MPI jobs on it</li>
			<li>Documentation:&nbsp;<a class="reference external" href="http://futuregrid.github.com/virtual-cluster">http://futuregrid.github.com/virtual-cluster</a></li>
			<li>Source:&nbsp;<a class="reference external" href="https://github.com/futuregrid/virtual-cluster">https://github.com/futuregrid/virtual-cluster</a></li>
			<li>Issues:&nbsp;<a class="reference external" href="https://github.com/futuregrid/virtual-cluster/issues">https://github.com/futuregrid/virtual-cluster/issues</a></li>
		</ul>
	</dd>
	<dt>Authentication</dt>
	<dd>
		<ul class="first last simple">
			<li>A project to unify authentication between Eucalyptus, OpenStack, and Nimbus</li>
			<li>Documentation: todo</li>
			<li>Source: todo</li>
			<li>Issues: todo</li>
		</ul>
	</dd>
	<dt>Mediawiki Jira Issues</dt>
	<dd>
		<ul class="first last simple">
			<li>A project that can be used to automatically create reports based on comments submitted to jira, returning jira issues in mediawiki, and executing arbitrary queries from mediawiki to jira that are rendered in mediawiki</li>
			<li>Documentation: todo</li>
			<li>Source: todo</li>
			<li>Issues: todo</li>
		</ul>
		<br />
		&nbsp;</dd>
</dl>  </div>
<div id="node-2476" class="section-2">
  <h1 class="book-heading">Appendix</h1>
    <div id="node-1228" class="section-3">
  <h1 class="book-heading">Upgrading Nimbus On FG clusters</h1>
  <h2>
	Disclaimer</h2>
This document provides guidelines on how to upgrade Nimbus on FutureGrid sites.&nbsp; It is not a definitive guide to upgrading Nimbus anywhere.&nbsp; An admin&#39;s own skills and intuition should be in full force while following this guide.&nbsp; This page should be considered little more than the notes from one effective upgrade from 2.7 to 2.8.<br />
<h2>
	Upgrading Workspace Service and Cumulus</h2>
First create a source directory and download the latest Nimbus release from <a href="http://www.nimbusproject.org/downloads/" title="http://www.nimbusproject.org/downloads/">http://www.nimbusproject.org/downloads/</a>, and untar the distributions:<br />
<pre>
mkdir ~/src
wget <a href="http://www.nimbusproject.org/downloads/nimbus-iaas-2.8-src.tar.gz" title="http://www.nimbusproject.org/downloads/nimbus-iaas-2.8-src.tar.gz">http://www.nimbusproject.org/downloads/nimbus-iaas-2.8-src.tar.gz</a>
tar -xzf nimbus-iaas-2.8-src.tar.gz
wget <a href="http://www.nimbusproject.org/downloads/nimbus-iaas-controls-2.8.tar.gz" title="http://www.nimbusproject.org/downloads/nimbus-iaas-controls-2.8.tar.gz">http://www.nimbusproject.org/downloads/nimbus-iaas-controls-2.8.tar.gz</a>
tar -zxf nimbus-iaas-controls-2.8.tar.gz</pre>
For convenience set the following variables:<br />
<pre>
export OLD_NIMBUS=&lt;path to old nimbus install&gt;
export NEW_NIMBUS=&lt;path to new nimbus install&gt;
</pre>
Make sure that the old install is not running:<br />
<pre>
$OLD_NIMBUS/bin/nimbusctl stop</pre>
Install the new Nimbus. If you are on an old distribution such as CentOS 5, you might need to set the OLD_OPENSSL_VERSION environment variable. If you run into Java OOM issues, export the following variable: export ANT_OPTS=-Xmx1024M.&nbsp;When asked any questions just hit enter:
<pre>
./install $NEW_NIMBUS</pre>
Run the following commands to transfer over the env.&nbsp;<strong> *NOTE*</strong> please check that you are ok with these commands first, do not blindly copy and paste them.&nbsp;<em><strong> These commands DELETE things!</strong></em>
<pre>
rm -rf $NEW_NIMBUS/var/ca
rm $NEW_NIMBUS/var/hostcert.pem
rm $NEW_NIMBUS/var/hostkey.pem
rm $NEW_NIMBUS/var/keystore.jks

cp $OLD_NIMBUS/nimbus-setup.conf $NEW_NIMBUS/nimbus-setup.conf

export PREVIOUS_NIMBUS_HOME_VALIDATED=$OLD_NIMBUS
$NEW_NIMBUS/bin/nimbus-configure --conf $NEW_NIMBUS/nimbus-setup.conf  --import-cumulusdb
$NEW_NIMBUS/bin/nimbus-configure --conf $NEW_NIMBUS/nimbus-setup.conf --import-prev

cp $OLD_NIMBUS/services/etc/nimbus/workspace-service/metadata.conf $NEW_NIMBUS/services/etc/nimbus/workspace-service/metadata.conf
</pre>
Import SSH keys from the Elastic interface:
<pre>
sqlite3 $OLD_NIMBUS/services/var/nimbus/elastic.db
sqlite&gt; .output /N/u/nimbus/ssh_keypairs
sqlite&gt; .dump ssh_keypairs
sqlite&gt; .quit

sqlite3 $NEW_NIMBUS/services/var/nimbus/elastic.db
sqlite&gt; .read /N/u/nimbus/ssh_keypairs
sqlite&gt; .quit
</pre>
Manually check the remaining differences in the configuration files.&nbsp; The differences will be very site dependent so put on your thinking cap.&nbsp; The following script will diff out all the conf files.&nbsp; Go through the output and make sure you merge over all the needed changes for your site
<pre>
cd $OLD_NIMBUS
confs=`find . -name &#39;*.conf&#39;`
for c in $confs
do
    diff -q -u $OLD_NIMBUS/$c $NEW_NIMBUS/$c
</pre>
<pre>
done</pre>
Now verify that services/etc/nimbus-context-broker/jndi-config.xml has the right caCertPath and caKeyPath (in almost every case it will not have the right values).<br />
Also verify that&nbsp;services/etc/globus_wsrf_core/server-config.wsdd has the right&nbsp;logicalHost.<br />
Also verify the customizations in&nbsp;services/etc/nimbus/workspace-service/other/authz-callout-ACTIVE.xml are still enabled (for example cp propagation).<br />
<br />
Also check $NEW_NIMBUS/cumulus/etc/cumulus.ini for the backend data_dir if you are using type &#39;posix&#39; (which you likely are).<br />
And check $NEW_NIMBUS/services/etc/nimbus/workspace-service/cumulus.conf for the cumulus.authz.db and cumulus.repo.dir settings.<br />
<br />
Now you must load up the new Nimbus install with the backends from the old install.&nbsp; The following python script can help with that task.&nbsp; Simply give it two arguments: $OLD_NIMBUS $NEW_NIMBUS<br />
<br />
<a href="https://raw.github.com/nimbusproject/nimbus/master/docs/src/admin/reload.py">https://raw.github.com/nimbusproject/nimbus/master/docs/src/admin/reload.py</a>
<h2>
	Upgrading Workspace Control</h2>
Set up the workspace control nodes by doing the following:
<ol>
	<li>
		Move the old install from /opt/nimbus to /opt/nimbus2.7</li>
	<li>
		Create the directory /opt/nimbus2.8 and have it owned by the nimbus user and group</li>
	<li>
		Create a symlink from /opt/nimbus to /opt/nimbus2.8</li>
</ol>
Now copy the old working workspace control code from a working VMM node to the source directory:<br />
<pre>
scp -r working_node:/opt/nimbus2.7 ~/src/</pre>
Just like in the above step, run the following diff script to find configuration differences, give it the full path to nimbus2.7 as the first argument and the full path to the new distribution at the second:<br />
<pre>
cd $1
confs=`find . -name &#39;*.conf&#39;`
for c in $confs
do
    diff -u $1/$c $2/$c
</pre>
<pre>
done</pre>
Merge all of the differences.&nbsp; Check out the following files and merge the differences:<br />
<br />
libexec/workspace-control/mount-alter.sh<br />
lantorrent/etc/*<br />
etc/workspace-control/libvirt_template.xml<br />
<br />
Make sure that everything in nimbus2.7/var/workspace-control/kernels is also in nimbus-iaas-controls-2.8/workspace-control/var/workspace-control/kernels<br />
<br />
scp everything under nimbus-iaas-controls-2.8/workspace-control to all VMM nodes:/opt/nimbus/<br />  </div>
</div>
<div id="node-2477" class="section-2">
  <h1 class="book-heading">FAQ</h1>
    </div>
<div id="node-2478" class="section-2">
  <h1 class="book-heading">FAQ</h1>
  <a href="https://portal.futuregrid.org/faq" title="https://portal.futuregrid.org/faq">https://portal.futuregrid.org/faq</a>  </div>
</div>
    
  </body>
</html>
